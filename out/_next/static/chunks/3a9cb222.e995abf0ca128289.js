"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{5161:function(e,t,r){function asyncGeneratorStep(e,t,r,i,a,n,s){try{var o=e[n](s),h=o.value}catch(e){r(e);return}o.done?t(h):Promise.resolve(h).then(i,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(i,a){var n=e.apply(t,r);function _next(e){asyncGeneratorStep(n,i,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(n,i,a,_next,_throw,"throw",e)}_next(void 0)})}}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)})(e)}function _construct(e,t,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&_setPrototypeOf(a,r.prototype),a}).apply(null,arguments)}function _isNativeFunction(e){return -1!==Function.toString.call(e).indexOf("[native code]")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=_superPropBase(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,i=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function define(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,r){return e[t]=r}}function wrap(e,t,r,a){var n=Object.create((t&&t.prototype instanceof Generator?t:Generator).prototype);return i(n,"_invoke",{value:makeInvokeMethod(e,r,new Context(a||[]))}),n}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var h={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var u={};define(u,n,function(){return this});var l=Object.getPrototypeOf,c=l&&l(l(values([])));c&&c!==t&&r.call(c,n)&&(u=c);var p=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(u);function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){define(e,t,function(e){return this._invoke(t,e)})})}function AsyncIterator(e,t){var a;function invoke(i,a,n,s){var o=tryCatch(e[i],e,a);if("throw"!==o.type){var h=o.arg,u=h.value;return u&&"object"==_typeof(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){invoke("next",e,n,s)},function(e){invoke("throw",e,n,s)}):t.resolve(u).then(function(e){h.value=e,n(h)},function(e){return invoke("throw",e,n,s)})}s(o.arg)}i(this,"_invoke",{value:function(e,r){function callInvokeWithMethodAndArg(){return new t(function(t,i){invoke(e,r,t,i)})}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,r){var i="suspendedStart";return function(a,n){if("executing"===i)throw Error("Generator is already running");if("completed"===i){if("throw"===a)throw n;return doneResult()}for(r.method=a,r.arg=n;;){var s=r.delegate;if(s){var o=maybeInvokeDelegate(s,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var u=tryCatch(e,t,r);if("normal"===u.type){if(i=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i="completed",r.method="throw",r.arg=u.arg)}}}function maybeInvokeDelegate(e,t){var r=t.method,i=e.iterator[r];if(void 0===i)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=TypeError("The iterator does not provide a '"+r+"' method")),h;var a=tryCatch(i,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var n=a.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):n:(t.method="throw",t.arg=TypeError("iterator result is not an object"),t.delegate=null,h)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,next=function next(){for(;++i<e.length;)if(r.call(e,i))return next.value=e[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,i(p,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),i(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,s,function(){return this}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,i,a,n){void 0===n&&(n=Promise);var s=new AsyncIterator(wrap(t,r,i,a),n);return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},defineIteratorMethods(p),define(p,o,"Generator"),define(p,n,function(){return this}),define(p,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function next(){for(;r.length;){var e=r.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(r,i){return n.type="throw",n.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],n=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),o=r.call(a,"finallyLoc");if(s&&o){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!o)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var a=i.arg;resetTryEntry(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:values(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */r.d(t,{DvJ:function(){return td},FIo:function(){return ic},FM8:function(){return g},Gql:function(){return ar},Ilk:function(){return A},Kj0:function(){return tf},Ltg:function(){return I},M8C:function(){return m},Mig:function(){return i5},Pa4:function(){return E},ROQ:function(){return rz},S3k:function(){return iD},TUj:function(){return ac},Tme:function(){return eE},USm:function(){return eM},Uk6:function(){return ih},WMw:function(){return o},Wzm:function(){return rC},YBo:function(){return ig},ZAu:function(){return tP},_12:function(){return tC},_Li:function(){return s},_fP:function(){return B},cek:function(){return i1},dpR:function(){return iU},ejS:function(){return rm},fO1:function(){return rS},gti:function(){return rU},iWj:function(){return tS},jyz:function(){return ty},kB5:function(){return tR},u37:function(){return au},u9r:function(){return e9},vBJ:function(){return eX},vpT:function(){return tB},wk1:function(){return h},xEZ:function(){return O},xo$:function(){return ir},yGw:function(){return el}});var i,a,n,s=1,o=2,h=1023,u="srgb",l="srgb-linear",c=function(){function EventDispatcher(){_classCallCheck(this,EventDispatcher)}return _createClass(EventDispatcher,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),i=0,a=r.length;i<a;i++)r[i].call(this,e);e.target=null}}}}]),EventDispatcher}(),p=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],f=1234567,d=Math.PI/180,y=180/Math.PI;function generateUUID(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(p[255&e]+p[e>>8&255]+p[e>>16&255]+p[e>>24&255]+"-"+p[255&t]+p[t>>8&255]+"-"+p[t>>16&15|64]+p[t>>24&255]+"-"+p[63&r|128]+p[r>>8&255]+"-"+p[r>>16&255]+p[r>>24&255]+p[255&i]+p[i>>8&255]+p[i>>16&255]+p[i>>24&255]).toLowerCase()}function clamp(e,t,r){return Math.max(t,Math.min(r,e))}function euclideanModulo(e,t){return(e%t+t)%t}function lerp(e,t,r){return(1-r)*e+r*t}function damp(e,t,r,i){return lerp(e,t,1-Math.exp(-r*i))}function pingpong(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(euclideanModulo(e,2*t)-t)}function degToRad(e){return e*d}function radToDeg(e){return e*y}function ceilPowerOfTwo(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function denormalize(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function normalize(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}var m=Object.freeze({__proto__:null,DEG2RAD:d,RAD2DEG:y,generateUUID:generateUUID,clamp:clamp,euclideanModulo:euclideanModulo,mapLinear:function(e,t,r,i,a){return i+(e-t)*(a-i)/(r-t)},inverseLerp:function(e,t,r){return e!==t?(r-e)/(t-e):0},lerp:lerp,damp:damp,pingpong:pingpong,smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(f=e);var t=f+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:degToRad,radToDeg:radToDeg,isPowerOfTwo:function(e){return(e&e-1)==0&&0!==e},ceilPowerOfTwo:ceilPowerOfTwo,floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,r,i,a){var n=Math.cos,s=Math.sin,o=n(r/2),h=s(r/2),u=n((t+i)/2),l=s((t+i)/2),c=n((t-i)/2),p=s((t-i)/2),f=n((i-t)/2),d=s((i-t)/2);switch(a){case"XYX":e.set(o*l,h*c,h*p,o*u);break;case"YZY":e.set(h*p,o*l,h*c,o*u);break;case"ZXZ":e.set(h*c,h*p,o*l,o*u);break;case"XZX":e.set(o*l,h*d,h*f,o*u);break;case"YXY":e.set(h*f,o*l,h*d,o*u);break;case"ZYZ":e.set(h*d,h*f,o*l,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}},normalize:normalize,denormalize:denormalize}),g=function(e){function Vector2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,Vector2),Vector2.prototype.isVector2=!0,this.x=e,this.y=t}return _createClass(Vector2,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,n=this.y-e.y;return this.x=a*r-n*i+e.x,this.y=a*i+n*r+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}},value,this)})}]),Vector2}(Symbol.iterator),x=function(){function Matrix3(){_classCallCheck(this,Matrix3),Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return _createClass(Matrix3,[{key:"set",value:function(e,t,r,i,a,n,s,o,h){var u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=t,u[4]=a,u[5]=o,u[6]=r,u[7]=n,u[8]=h,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}},{key:"extractBasis",value:function(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var r=e.elements,i=t.elements,a=this.elements,n=r[0],s=r[3],o=r[6],h=r[1],u=r[4],l=r[7],c=r[2],p=r[5],f=r[8],d=i[0],y=i[3],m=i[6],g=i[1],x=i[4],M=i[7],k=i[2],b=i[5],w=i[8];return a[0]=n*d+s*g+o*k,a[3]=n*y+s*x+o*b,a[6]=n*m+s*M+o*w,a[1]=h*d+u*g+l*k,a[4]=h*y+u*x+l*b,a[7]=h*m+u*M+l*w,a[2]=c*d+p*g+f*k,a[5]=c*y+p*x+f*b,a[8]=c*m+p*M+f*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],n=e[4],s=e[5],o=e[6],h=e[7],u=e[8];return t*n*u-t*s*h-r*a*u+r*s*o+i*a*h-i*n*o}},{key:"invert",value:function(){var e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],n=e[4],s=e[5],o=e[6],h=e[7],u=e[8],l=u*n-s*h,c=s*o-u*a,p=h*a-n*o,f=t*l+r*c+i*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var d=1/f;return e[0]=l*d,e[1]=(i*h-u*r)*d,e[2]=(s*r-i*n)*d,e[3]=c*d,e[4]=(u*t-i*o)*d,e[5]=(i*a-s*t)*d,e[6]=p*d,e[7]=(r*o-h*t)*d,e[8]=(n*t-r*a)*d,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,r,i,a,n,s){var o=Math.cos(a),h=Math.sin(a);return this.set(r*o,r*h,-r*(o*n+h*s)+n+e,-i*h,i*o,-i*(-h*n+o*s)+s+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(M.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(M.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(M.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,r=e.elements,i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<9;r++)this.elements[r]=e[r+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}},{key:"clone",value:function(){return new this.constructor().fromArray(this.elements)}}]),Matrix3}(),M=new x;function arrayNeedsUint32(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var k={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function getTypedArray(e,t){return new k[e](t)}function createElementNS(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function SRGBToLinear(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function LinearToSRGB(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var b=(_defineProperty(i={},u,_defineProperty({},l,SRGBToLinear)),_defineProperty(i,l,_defineProperty({},u,LinearToSRGB)),i),w={legacyMode:!0,get workingColorSpace(){return l},set workingColorSpace(colorSpace){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(b[t]&&void 0!==b[t][r]){var i=b[t][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},S={r:0,g:0,b:0},C={h:0,s:0,l:0},z={h:0,s:0,l:0};function hue2rgb(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*6*(2/3-r):e}function toComponents(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var A=function(e){function Color(e,t,r){return(_classCallCheck(this,Color),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===r)?this.set(e):this.setRGB(e,t,r)}return _createClass(Color,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,w.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.workingColorSpace;return this.r=e,this.g=t,this.b=r,w.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.workingColorSpace;if(e=euclideanModulo(e,1),t=clamp(t,0,1),r=clamp(r,0,1),0===t)this.r=this.g=this.b=r;else{var a=r<=.5?r*(1+t):r+t-r*t,n=2*r-a;this.r=hue2rgb(n,a,e+1/3),this.g=hue2rgb(n,a,e),this.b=hue2rgb(n,a,e-1/3)}return w.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;function handleAlpha(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i,a=r[1],n=r[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,w.toWorkingColorSpace(this,t),handleAlpha(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,w.toWorkingColorSpace(this,t),handleAlpha(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n)){var s=parseFloat(i[1])/360,o=parseFloat(i[2])/100,h=parseFloat(i[3])/100;return handleAlpha(i[4]),this.setHSL(s,o,h,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){var l=r[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,w.toWorkingColorSpace(this,t),this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,w.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=_[e.toLowerCase()];return void 0!==r?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return w.fromWorkingColorSpace(toComponents(this,S),e),clamp(255*S.r,0,255)<<16^clamp(255*S.g,0,255)<<8^clamp(255*S.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.workingColorSpace;w.fromWorkingColorSpace(toComponents(this,S),i);var a=S.r,n=S.g,s=S.b,o=Math.max(a,n,s),h=Math.min(a,n,s),u=(h+o)/2;if(h===o)t=0,r=0;else{var l=o-h;switch(r=u<=.5?l/(o+h):l/(2-o-h),o){case a:t=(n-s)/l+(n<s?6:0);break;case n:t=(s-a)/l+2;break;case s:t=(a-n)/l+4}t/=6}return e.h=t,e.s=r,e.l=u,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.workingColorSpace;return w.fromWorkingColorSpace(toComponents(this,S),t),e.r=S.r,e.g=S.g,e.b=S.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return(w.fromWorkingColorSpace(toComponents(this,S),e),e!==u)?"color(".concat(e," ").concat(S.r," ").concat(S.g," ").concat(S.b,")"):"rgb(".concat(255*S.r|0,",").concat(255*S.g|0,",").concat(255*S.b|0,")")}},{key:"offsetHSL",value:function(e,t,r){return this.getHSL(C),C.h+=e,C.s+=t,C.l+=r,this.setHSL(C.h,C.s,C.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(C),e.getHSL(z);var r=lerp(C.h,z.h,t),i=lerp(C.s,z.s,t),a=lerp(C.l,z.l,t);return this.setHSL(r,i,a),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:e,value:_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}},value,this)})}]),Color}(Symbol.iterator);A.NAMES=_;var T=function(){function ImageUtils(){_classCallCheck(this,ImageUtils)}return _createClass(ImageUtils,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===a&&(a=createElementNS("canvas")),a.width=e.width,a.height=e.height;var t,r=a.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=a}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var t=createElementNS("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);for(var i=r.getImageData(0,0,e.width,e.height),a=i.data,n=0;n<a.length;n++)a[n]=255*SRGBToLinear(a[n]/255);return r.putImageData(i,0,0),t}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;for(var s=e.data.slice(0),o=0;o<s.length;o++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[o]=Math.floor(255*SRGBToLinear(s[o]/255)):s[o]=SRGBToLinear(s[o]);return{data:s,width:e.width,height:e.height}}}]),ImageUtils}(),P=function(){function Source(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,Source),this.isSource=!0,this.uuid=generateUUID(),this.data=e,this.version=0}return _createClass(Source,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t,r=void 0===e||"string"==typeof e;if(!r&&void 0!==e.images[this.uuid])return e.images[this.uuid];var i={uuid:this.uuid,url:""},a=this.data;if(null!==a){if(Array.isArray(a)){t=[];for(var n=0,s=a.length;n<s;n++)a[n].isDataTexture?t.push(serializeImage(a[n].image)):t.push(serializeImage(a[n]))}else t=serializeImage(a);i.url=t}return r||(e.images[this.uuid]=i),i}}]),Source}();function serializeImage(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?T.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var L=0,O=function(e){_inherits(Texture,e);var t=_createSuper(Texture);function Texture(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Texture.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Texture.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Texture.DEFAULT_ANISOTROPY,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3e3;return _classCallCheck(this,Texture),(e=t.call(this)).isTexture=!0,Object.defineProperty(_assertThisInitialized(e),"id",{value:L++}),e.uuid=generateUUID(),e.name="",e.source=new P(r),e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=n,e.magFilter=s,e.minFilter=o,e.anisotropy=c,e.format=u,e.internalFormat=null,e.type=l,e.offset=new g(0,0),e.repeat=new g(1,1),e.center=new g(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new x,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=p,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return _createClass(Texture,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),Texture}(c);O.DEFAULT_IMAGE=null,O.DEFAULT_MAPPING=300,O.DEFAULT_ANISOTROPY=1;var I=function(e){function Vector4(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,Vector4),Vector4.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}return _createClass(Vector4,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,r=this.y,i=this.z,a=this.w,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i+n[12]*a,this.y=n[1]*t+n[5]*r+n[9]*i+n[13]*a,this.z=n[2]*t+n[6]*r+n[10]*i+n[14]*a,this.w=n[3]*t+n[7]*r+n[11]*i+n[15]*a,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,r,i,a=e.elements,n=a[0],s=a[4],o=a[8],h=a[1],u=a[5],l=a[9],c=a[2],p=a[6],f=a[10];if(.01>Math.abs(s-h)&&.01>Math.abs(o-c)&&.01>Math.abs(l-p)){if(.1>Math.abs(s+h)&&.1>Math.abs(o+c)&&.1>Math.abs(l+p)&&.1>Math.abs(n+u+f-3))return this.set(1,0,0,0),this;var d=(n+1)/2,y=(u+1)/2,m=(f+1)/2,g=(s+h)/4,x=(o+c)/4,M=(l+p)/4;return d>y&&d>m?d<.01?(t=0,r=.707106781,i=.707106781):(r=g/(t=Math.sqrt(d)),i=x/t):y>m?y<.01?(t=.707106781,r=0,i=.707106781):(t=g/(r=Math.sqrt(y)),i=M/r):m<.01?(t=.707106781,r=.707106781,i=0):(t=x/(i=Math.sqrt(m)),r=M/i),this.set(t,r,i,Math.PI),this}var k=Math.sqrt((p-l)*(p-l)+(o-c)*(o-c)+(h-s)*(h-s));return .001>Math.abs(k)&&(k=1),this.x=(p-l)/k,this.y=(o-c)/k,this.z=(h-s)/k,this.w=Math.acos((n+u+f-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}},value,this)})}]),Vector4}(Symbol.iterator),B=function(e){function Quaternion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,Quaternion),this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}return _createClass(Quaternion,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var r=e._x,i=e._y,a=e._z,n=e._order,s=Math.cos,o=Math.sin,h=s(r/2),u=s(i/2),l=s(a/2),c=o(r/2),p=o(i/2),f=o(a/2);switch(n){case"XYZ":this._x=c*u*l+h*p*f,this._y=h*p*l-c*u*f,this._z=h*u*f+c*p*l,this._w=h*u*l-c*p*f;break;case"YXZ":this._x=c*u*l+h*p*f,this._y=h*p*l-c*u*f,this._z=h*u*f-c*p*l,this._w=h*u*l+c*p*f;break;case"ZXY":this._x=c*u*l-h*p*f,this._y=h*p*l+c*u*f,this._z=h*u*f+c*p*l,this._w=h*u*l-c*p*f;break;case"ZYX":this._x=c*u*l-h*p*f,this._y=h*p*l+c*u*f,this._z=h*u*f-c*p*l,this._w=h*u*l+c*p*f;break;case"YZX":this._x=c*u*l+h*p*f,this._y=h*p*l+c*u*f,this._z=h*u*f-c*p*l,this._w=h*u*l-c*p*f;break;case"XZY":this._x=c*u*l-h*p*f,this._y=h*p*l-c*u*f,this._z=h*u*f+c*p*l,this._w=h*u*l+c*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+n)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,r=t[0],i=t[4],a=t[8],n=t[1],s=t[5],o=t[9],h=t[2],u=t[6],l=t[10],c=r+s+l;if(c>0){var p=.5/Math.sqrt(c+1);this._w=.25/p,this._x=(u-o)*p,this._y=(a-h)*p,this._z=(n-i)*p}else if(r>s&&r>l){var f=2*Math.sqrt(1+r-s-l);this._w=(u-o)/f,this._x=.25*f,this._y=(i+n)/f,this._z=(a+h)/f}else if(s>l){var d=2*Math.sqrt(1+s-r-l);this._w=(a-h)/d,this._x=(i+n)/d,this._y=.25*d,this._z=(o+u)/d}else{var y=2*Math.sqrt(1+l-r-s);this._w=(n-i)/y,this._x=(a+h)/y,this._y=(o+u)/y,this._z=.25*y}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=r,this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(clamp(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var r=this.angleTo(e);return 0===r||this.slerp(e,Math.min(1,t/r)),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var r=e._x,i=e._y,a=e._z,n=e._w,s=t._x,o=t._y,h=t._z,u=t._w;return this._x=r*u+n*s+i*h-a*o,this._y=i*u+n*o+a*s-r*h,this._z=a*u+n*h+r*o-i*s,this._w=n*u-r*s-i*o-a*h,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,i=this._y,a=this._z,n=this._w,s=n*e._w+r*e._x+i*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=n,this._x=r,this._y=i,this._z=a,this;var o=1-s*s;if(o<=Number.EPSILON){var h=1-t;return this._w=h*n+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*a+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(o),l=Math.atan2(u,s),c=Math.sin((1-t)*l)/u,p=Math.sin(t*l)/u;return this._w=n*c+this._w*p,this._x=r*c+this._x*p,this._y=i*c+this._y*p,this._z=a*c+this._z*p,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,r){return this.copy(e).slerp(t,r)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(a),r*Math.cos(a),t*Math.sin(i))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}},value,this)})}],[{key:"slerpFlat",value:function(e,t,r,i,a,n,s){var o=r[i+0],h=r[i+1],u=r[i+2],l=r[i+3],c=a[n+0],p=a[n+1],f=a[n+2],d=a[n+3];if(0===s){e[t+0]=o,e[t+1]=h,e[t+2]=u,e[t+3]=l;return}if(1===s){e[t+0]=c,e[t+1]=p,e[t+2]=f,e[t+3]=d;return}if(l!==d||o!==c||h!==p||u!==f){var y=1-s,m=o*c+h*p+u*f+l*d,g=m>=0?1:-1,x=1-m*m;if(x>Number.EPSILON){var M=Math.sqrt(x),k=Math.atan2(M,m*g);y=Math.sin(y*k)/M,s=Math.sin(s*k)/M}var b=s*g;if(o=o*y+c*b,h=h*y+p*b,u=u*y+f*b,l=l*y+d*b,y===1-s){var w=1/Math.sqrt(o*o+h*h+u*u+l*l);o*=w,h*=w,u*=w,l*=w}}e[t]=o,e[t+1]=h,e[t+2]=u,e[t+3]=l}},{key:"multiplyQuaternionsFlat",value:function(e,t,r,i,a,n){var s=r[i],o=r[i+1],h=r[i+2],u=r[i+3],l=a[n],c=a[n+1],p=a[n+2],f=a[n+3];return e[t]=s*f+u*l+o*p-h*c,e[t+1]=o*f+u*c+h*l-s*p,e[t+2]=h*f+u*p+s*c-o*l,e[t+3]=u*f-s*l-o*c-h*p,e}}]),Quaternion}(Symbol.iterator),E=function(e){function Vector3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,Vector3),Vector3.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}return _createClass(Vector3,[{key:"set",value:function(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(N.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(N.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,r=this.y,i=this.z,a=e.elements,n=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*n,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*n,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*n,this}},{key:"applyQuaternion",value:function(e){var t=this.x,r=this.y,i=this.z,a=e.x,n=e.y,s=e.z,o=e.w,h=o*t+n*i-s*r,u=o*r+s*t-a*i,l=o*i+a*r-n*t,c=-a*t-n*r-s*i;return this.x=h*o+-(c*a)+-(u*s)- -(l*n),this.y=u*o+-(c*n)+-(l*a)- -(h*s),this.z=l*o+-(c*s)+-(h*n)- -(u*a),this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var r=e.x,i=e.y,a=e.z,n=t.x,s=t.y,o=t.z;return this.x=i*o-a*s,this.y=a*n-r*o,this.z=r*s-i*n,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}},{key:"projectOnPlane",value:function(e){return R.copy(this).projectOnVector(e),this.sub(R)}},{key:"reflect",value:function(e){return this.sub(R.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(clamp(this.dot(e)/t,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,r){var i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-Math.pow(e,2));return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}},{key:e,value:_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}},value,this)})}]),Vector3}(Symbol.iterator),R=new E,N=new B,G=function(){function Box3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E(Infinity,Infinity,Infinity),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E(-1/0,-1/0,-1/0);_classCallCheck(this,Box3),this.isBox3=!0,this.min=e,this.max=t}return _createClass(Box3,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=Infinity,r=Infinity,i=Infinity,a=-1/0,n=-1/0,s=-1/0,o=0,h=e.length;o<h;o+=3){var u=e[o],l=e[o+1],c=e[o+2];u<t&&(t=u),l<r&&(r=l),c<i&&(i=c),u>a&&(a=u),l>n&&(n=l),c>s&&(s=c)}return this.min.set(t,r,i),this.max.set(a,n,s),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=Infinity,r=Infinity,i=Infinity,a=-1/0,n=-1/0,s=-1/0,o=0,h=e.count;o<h;o++){var u=e.getX(o),l=e.getY(o),c=e.getZ(o);u<t&&(t=u),l<r&&(r=l),c<i&&(i=c),u>a&&(a=u),l>n&&(n=l),c>s&&(s=c)}return this.min.set(t,r,i),this.max.set(a,n,s),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var r=V.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var r=e.geometry;if(void 0!==r){if(t&&void 0!=r.attributes&&void 0!==r.attributes.position)for(var i=r.attributes.position,a=0,n=i.count;a<n;a++)V.fromBufferAttribute(i,a).applyMatrix4(e.matrixWorld),this.expandByPoint(V);else null===r.boundingBox&&r.computeBoundingBox(),D.copy(r.boundingBox),D.applyMatrix4(e.matrixWorld),this.union(D)}for(var s=e.children,o=0,h=s.length;o<h;o++)this.expandByObject(s[o],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x)&&!(e.x>this.max.x)&&!(e.y<this.min.y)&&!(e.y>this.max.y)&&!(e.z<this.min.z)&&!(e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x)&&!(e.min.x>this.max.x)&&!(e.max.y<this.min.y)&&!(e.min.y>this.max.y)&&!(e.max.z<this.min.z)&&!(e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,V),V.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Z),X.subVectors(this.max,Z),U.subVectors(e.a,Z),j.subVectors(e.b,Z),W.subVectors(e.c,Z),J.subVectors(j,U),q.subVectors(W,j),H.subVectors(U,W);var t=[0,-J.z,J.y,0,-q.z,q.y,0,-H.z,H.y,J.z,0,-J.x,q.z,0,-q.x,H.z,0,-H.x,-J.y,J.x,0,-q.y,q.x,0,-H.y,H.x,0];return!!(satForAxes(t,U,j,W,X)&&satForAxes(t=[1,0,0,0,1,0,0,0,1],U,j,W,X))&&(Y.crossVectors(J,q),satForAxes(t=[Y.x,Y.y,Y.z],U,j,W,X))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return V.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(V).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(F[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),F[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),F[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),F[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),F[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),F[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),F[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),F[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(F)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),Box3}(),F=[new E,new E,new E,new E,new E,new E,new E,new E],V=new E,D=new G,U=new E,j=new E,W=new E,J=new E,q=new E,H=new E,Z=new E,X=new E,Y=new E,Q=new E;function satForAxes(e,t,r,i,a){for(var n=0,s=e.length-3;n<=s;n+=3){Q.fromArray(e,n);var o=a.x*Math.abs(Q.x)+a.y*Math.abs(Q.y)+a.z*Math.abs(Q.z),h=t.dot(Q),u=r.dot(Q),l=i.dot(Q);if(Math.max(-Math.max(h,u,l),Math.min(h,u,l))>o)return!1}return!0}var K=new G,$=new E,ee=new E,et=function(){function Sphere(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,Sphere),this.center=e,this.radius=t}return _createClass(Sphere,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var r=this.center;void 0!==t?r.copy(t):K.setFromPoints(e).getCenter(r);for(var i=0,a=0,n=e.length;a<n;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;$.subVectors(e,this.center);var t=$.lengthSq();if(t>this.radius*this.radius){var r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector($,i/r),this.radius+=i}return this}},{key:"union",value:function(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(ee.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint($.copy(e.center).add(ee)),this.expandByPoint($.copy(e.center).sub(ee)))),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),Sphere}(),er=new E,ei=new E,ea=new E,en=new E,es=new E,eo=new E,eh=new E,eu=function(){function Ray(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E(0,0,-1);_classCallCheck(this,Ray),this.origin=e,this.direction=t}return _createClass(Ray,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,er)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=er.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(er.copy(this.direction).multiplyScalar(t).add(this.origin),er.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,r,i){ei.copy(e).add(t).multiplyScalar(.5),ea.copy(t).sub(e).normalize(),en.copy(this.origin).sub(ei);var a,n,s,o,h=.5*e.distanceTo(t),u=-this.direction.dot(ea),l=en.dot(this.direction),c=-en.dot(ea),p=en.lengthSq(),f=Math.abs(1-u*u);if(f>0){if(a=u*c-l,n=u*l-c,o=h*f,a>=0){if(n>=-o){if(n<=o){var d=1/f;a*=d,n*=d,s=a*(a+u*n+2*l)+n*(u*a+n+2*c)+p}else s=-(a=Math.max(0,-(u*(n=h)+l)))*a+n*(n+2*c)+p}else s=-(a=Math.max(0,-(u*(n=-h)+l)))*a+n*(n+2*c)+p}else n<=-o?(n=(a=Math.max(0,-(-u*h+l)))>0?-h:Math.min(Math.max(-h,-c),h),s=-a*a+n*(n+2*c)+p):n<=o?(a=0,s=(n=Math.min(Math.max(-h,-c),h))*(n+2*c)+p):(n=(a=Math.max(0,-(u*h+l)))>0?h:Math.min(Math.max(-h,-c),h),s=-a*a+n*(n+2*c)+p)}else n=u>0?-h:h,s=-(a=Math.max(0,-(u*n+l)))*a+n*(n+2*c)+p;return r&&r.copy(this.direction).multiplyScalar(a).add(this.origin),i&&i.copy(ea).multiplyScalar(n).add(ei),s}},{key:"intersectSphere",value:function(e,t){er.subVectors(e.center,this.origin);var r=er.dot(this.direction),i=er.dot(er)-r*r,a=e.radius*e.radius;if(i>a)return null;var n=Math.sqrt(a-i),s=r-n,o=r+n;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}},{key:"intersectPlane",value:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)}},{key:"intersectBox",value:function(e,t){var r,i,a,n,s,o,h=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,c=this.origin;return(h>=0?(r=(e.min.x-c.x)*h,i=(e.max.x-c.x)*h):(r=(e.max.x-c.x)*h,i=(e.min.x-c.x)*h),u>=0?(a=(e.min.y-c.y)*u,n=(e.max.y-c.y)*u):(a=(e.max.y-c.y)*u,n=(e.min.y-c.y)*u),r>n||a>i)?null:((a>r||isNaN(r))&&(r=a),(n<i||isNaN(i))&&(i=n),l>=0?(s=(e.min.z-c.z)*l,o=(e.max.z-c.z)*l):(s=(e.max.z-c.z)*l,o=(e.min.z-c.z)*l),r>o||s>i)?null:((s>r||r!=r)&&(r=s),(o<i||i!=i)&&(i=o),i<0)?null:this.at(r>=0?r:i,t)}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,er)}},{key:"intersectTriangle",value:function(e,t,r,i,a){es.subVectors(t,e),eo.subVectors(r,e),eh.crossVectors(es,eo);var n,s=this.direction.dot(eh);if(s>0){if(i)return null;n=1}else{if(!(s<0))return null;n=-1,s=-s}en.subVectors(this.origin,e);var o=n*this.direction.dot(eo.crossVectors(en,eo));if(o<0)return null;var h=n*this.direction.dot(es.cross(en));if(h<0||o+h>s)return null;var u=-n*en.dot(eh);return u<0?null:this.at(u/s,a)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),Ray}(),el=function(){function Matrix4(){_classCallCheck(this,Matrix4),Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return _createClass(Matrix4,[{key:"set",value:function(e,t,r,i,a,n,s,o,h,u,l,c,p,f,d,y){var m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=a,m[5]=n,m[9]=s,m[13]=o,m[2]=h,m[6]=u,m[10]=l,m[14]=c,m[3]=p,m[7]=f,m[11]=d,m[15]=y,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return new Matrix4().fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,r=e.elements,i=1/ec.setFromMatrixColumn(e,0).length(),a=1/ec.setFromMatrixColumn(e,1).length(),n=1/ec.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*n,t[9]=r[9]*n,t[10]=r[10]*n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,r=e.x,i=e.y,a=e.z,n=Math.cos(r),s=Math.sin(r),o=Math.cos(i),h=Math.sin(i),u=Math.cos(a),l=Math.sin(a);if("XYZ"===e.order){var c=n*u,p=n*l,f=s*u,d=s*l;t[0]=o*u,t[4]=-o*l,t[8]=h,t[1]=p+f*h,t[5]=c-d*h,t[9]=-s*o,t[2]=d-c*h,t[6]=f+p*h,t[10]=n*o}else if("YXZ"===e.order){var y=o*u,m=o*l,g=h*u,x=h*l;t[0]=y+x*s,t[4]=g*s-m,t[8]=n*h,t[1]=n*l,t[5]=n*u,t[9]=-s,t[2]=m*s-g,t[6]=x+y*s,t[10]=n*o}else if("ZXY"===e.order){var M=o*u,k=o*l,b=h*u,w=h*l;t[0]=M-w*s,t[4]=-n*l,t[8]=b+k*s,t[1]=k+b*s,t[5]=n*u,t[9]=w-M*s,t[2]=-n*h,t[6]=s,t[10]=n*o}else if("ZYX"===e.order){var _=n*u,S=n*l,C=s*u,z=s*l;t[0]=o*u,t[4]=C*h-S,t[8]=_*h+z,t[1]=o*l,t[5]=z*h+_,t[9]=S*h-C,t[2]=-h,t[6]=s*o,t[10]=n*o}else if("YZX"===e.order){var A=n*o,T=n*h,P=s*o,L=s*h;t[0]=o*u,t[4]=L-A*l,t[8]=P*l+T,t[1]=l,t[5]=n*u,t[9]=-s*u,t[2]=-h*u,t[6]=T*l+P,t[10]=A-L*l}else if("XZY"===e.order){var O=n*o,I=n*h,B=s*o,E=s*h;t[0]=o*u,t[4]=-l,t[8]=h*u,t[1]=O*l+E,t[5]=n*u,t[9]=I*l-B,t[2]=B*l-I,t[6]=s*u,t[10]=E*l+O}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ef,e,ed)}},{key:"lookAt",value:function(e,t,r){var i=this.elements;return em.subVectors(e,t),0===em.lengthSq()&&(em.z=1),em.normalize(),ey.crossVectors(r,em),0===ey.lengthSq()&&(1===Math.abs(r.z)?em.x+=1e-4:em.z+=1e-4,em.normalize(),ey.crossVectors(r,em)),ey.normalize(),ev.crossVectors(em,ey),i[0]=ey.x,i[4]=ev.x,i[8]=em.x,i[1]=ey.y,i[5]=ev.y,i[9]=em.y,i[2]=ey.z,i[6]=ev.z,i[10]=em.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var r=e.elements,i=t.elements,a=this.elements,n=r[0],s=r[4],o=r[8],h=r[12],u=r[1],l=r[5],c=r[9],p=r[13],f=r[2],d=r[6],y=r[10],m=r[14],g=r[3],x=r[7],M=r[11],k=r[15],b=i[0],w=i[4],_=i[8],S=i[12],C=i[1],z=i[5],A=i[9],T=i[13],P=i[2],L=i[6],O=i[10],I=i[14],B=i[3],E=i[7],R=i[11],N=i[15];return a[0]=n*b+s*C+o*P+h*B,a[4]=n*w+s*z+o*L+h*E,a[8]=n*_+s*A+o*O+h*R,a[12]=n*S+s*T+o*I+h*N,a[1]=u*b+l*C+c*P+p*B,a[5]=u*w+l*z+c*L+p*E,a[9]=u*_+l*A+c*O+p*R,a[13]=u*S+l*T+c*I+p*N,a[2]=f*b+d*C+y*P+m*B,a[6]=f*w+d*z+y*L+m*E,a[10]=f*_+d*A+y*O+m*R,a[14]=f*S+d*T+y*I+m*N,a[3]=g*b+x*C+M*P+k*B,a[7]=g*w+x*z+M*L+k*E,a[11]=g*_+x*A+M*O+k*R,a[15]=g*S+x*T+M*I+k*N,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],n=e[1],s=e[5],o=e[9],h=e[13],u=e[2],l=e[6],c=e[10],p=e[14];return e[3]*(+a*o*l-i*h*l-a*s*c+r*h*c+i*s*p-r*o*p)+e[7]*(+t*o*p-t*h*c+a*n*c-i*n*p+i*h*u-a*o*u)+e[11]*(+t*h*l-t*s*p-a*n*l+r*n*p+a*s*u-r*h*u)+e[15]*(-i*s*u-t*o*l+t*s*c+i*n*l-r*n*c+r*o*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,r){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],n=e[4],s=e[5],o=e[6],h=e[7],u=e[8],l=e[9],c=e[10],p=e[11],f=e[12],d=e[13],y=e[14],m=e[15],g=l*y*h-d*c*h+d*o*p-s*y*p-l*o*m+s*c*m,x=f*c*h-u*y*h-f*o*p+n*y*p+u*o*m-n*c*m,M=u*d*h-f*l*h+f*s*p-n*d*p-u*s*m+n*l*m,k=f*l*o-u*d*o-f*s*c+n*d*c+u*s*y-n*l*y,b=t*g+r*x+i*M+a*k;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/b;return e[0]=g*w,e[1]=(d*c*a-l*y*a-d*i*p+r*y*p+l*i*m-r*c*m)*w,e[2]=(s*y*a-d*o*a+d*i*h-r*y*h-s*i*m+r*o*m)*w,e[3]=(l*o*a-s*c*a-l*i*h+r*c*h+s*i*p-r*o*p)*w,e[4]=x*w,e[5]=(u*y*a-f*c*a+f*i*p-t*y*p-u*i*m+t*c*m)*w,e[6]=(f*o*a-n*y*a-f*i*h+t*y*h+n*i*m-t*o*m)*w,e[7]=(n*c*a-u*o*a+u*i*h-t*c*h-n*i*p+t*o*p)*w,e[8]=M*w,e[9]=(f*l*a-u*d*a-f*r*p+t*d*p+u*r*m-t*l*m)*w,e[10]=(n*d*a-f*s*a+f*r*h-t*d*h-n*r*m+t*s*m)*w,e[11]=(u*s*a-n*l*a-u*r*h+t*l*h+n*r*p-t*s*p)*w,e[12]=k*w,e[13]=(u*d*i-f*l*i+f*r*c-t*d*c-u*r*y+t*l*y)*w,e[14]=(f*s*i-n*d*i-f*r*o+t*d*o+n*r*y-t*s*y)*w,e[15]=(n*l*i-u*s*i+u*r*o-t*l*o-n*r*c+t*s*c)*w,this}},{key:"scale",value:function(e){var t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}},{key:"makeTranslation",value:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var r=Math.cos(t),i=Math.sin(t),a=1-r,n=e.x,s=e.y,o=e.z,h=a*n,u=a*s;return this.set(h*n+r,h*s-i*o,h*o+i*s,0,h*s+i*o,u*s+r,u*o-i*n,0,h*o-i*s,u*o+i*n,a*o*o+r,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,r,i,a,n){return this.set(1,r,a,0,e,1,n,0,t,i,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,r){var i=this.elements,a=t._x,n=t._y,s=t._z,o=t._w,h=a+a,u=n+n,l=s+s,c=a*h,p=a*u,f=a*l,d=n*u,y=n*l,m=s*l,g=o*h,x=o*u,M=o*l,k=r.x,b=r.y,w=r.z;return i[0]=(1-(d+m))*k,i[1]=(p+M)*k,i[2]=(f-x)*k,i[3]=0,i[4]=(p-M)*b,i[5]=(1-(c+m))*b,i[6]=(y+g)*b,i[7]=0,i[8]=(f+x)*w,i[9]=(y-g)*w,i[10]=(1-(c+d))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,t,r){var i=this.elements,a=ec.set(i[0],i[1],i[2]).length(),n=ec.set(i[4],i[5],i[6]).length(),s=ec.set(i[8],i[9],i[10]).length();0>this.determinant()&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],ep.copy(this);var o=1/a,h=1/n,u=1/s;return ep.elements[0]*=o,ep.elements[1]*=o,ep.elements[2]*=o,ep.elements[4]*=h,ep.elements[5]*=h,ep.elements[6]*=h,ep.elements[8]*=u,ep.elements[9]*=u,ep.elements[10]*=u,t.setFromRotationMatrix(ep),r.x=a,r.y=n,r.z=s,this}},{key:"makePerspective",value:function(e,t,r,i,a,n){var s=this.elements;return s[0]=2*a/(t-e),s[4]=0,s[8]=(t+e)/(t-e),s[12]=0,s[1]=0,s[5]=2*a/(r-i),s[9]=(r+i)/(r-i),s[13]=0,s[2]=0,s[6]=0,s[10]=-(n+a)/(n-a),s[14]=-2*n*a/(n-a),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}},{key:"makeOrthographic",value:function(e,t,r,i,a,n){var s=this.elements,o=1/(t-e),h=1/(r-i),u=1/(n-a);return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-((t+e)*o),s[1]=0,s[5]=2*h,s[9]=0,s[13]=-((r+i)*h),s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-((n+a)*u),s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,r=e.elements,i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<16;r++)this.elements[r]=e[r+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}]),Matrix4}(),ec=new E,ep=new el,ef=new E(0,0,0),ed=new E(1,1,1),ey=new E,ev=new E,em=new E,eg=new el,ex=new B,eM=function(e){function Euler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Euler.DefaultOrder;_classCallCheck(this,Euler),this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}return _createClass(Euler,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=e.elements,a=i[0],n=i[4],s=i[8],o=i[1],h=i[5],u=i[9],l=i[2],c=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(clamp(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-n,a)):(this._x=Math.atan2(c,h),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(s,p),this._z=Math.atan2(o,h)):(this._y=Math.atan2(-l,a),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(c,-1,1)),.9999999>Math.abs(c)?(this._y=Math.atan2(-l,p),this._z=Math.atan2(-n,h)):(this._y=0,this._z=Math.atan2(o,a));break;case"ZYX":this._y=Math.asin(-clamp(l,-1,1)),.9999999>Math.abs(l)?(this._x=Math.atan2(c,p),this._z=Math.atan2(o,a)):(this._x=0,this._z=Math.atan2(-n,h));break;case"YZX":this._z=Math.asin(clamp(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,h),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-clamp(n,-1,1)),.9999999>Math.abs(n)?(this._x=Math.atan2(c,h),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,r){return eg.makeRotationFromQuaternion(e),this.setFromRotationMatrix(eg,t,r)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return ex.setFromEuler(this),this.setFromQuaternion(ex,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:e,value:_regeneratorRuntime().mark(function value(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}},value,this)})},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),Euler}(Symbol.iterator);eM.DefaultOrder="XYZ",eM.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var ek=function(){function Layers(){_classCallCheck(this,Layers),this.mask=1}return _createClass(Layers,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return(this.mask&e.mask)!=0}},{key:"isEnabled",value:function(e){return(this.mask&(1<<e|0))!=0}}]),Layers}(),eb=0,ew=new E,e_=new B,eS=new el,eC=new E,ez=new E,eA=new E,eT=new B,eP=new E(1,0,0),eL=new E(0,1,0),eO=new E(0,0,1),eI={type:"added"},eB={type:"removed"},eE=function(e){_inherits(Object3D,e);var t=_createSuper(Object3D);function Object3D(){_classCallCheck(this,Object3D),(e=t.call(this)).isObject3D=!0,Object.defineProperty(_assertThisInitialized(e),"id",{value:eb++}),e.uuid=generateUUID(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=Object3D.DefaultUp.clone();var e,r=new E,i=new eM,a=new B,n=new E(1,1,1);function onRotationChange(){a.setFromEuler(i,!1)}function onQuaternionChange(){i.setFromQuaternion(a,void 0,!1)}return i._onChange(onRotationChange),a._onChange(onQuaternionChange),Object.defineProperties(_assertThisInitialized(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new el},normalMatrix:{value:new x}}),e.matrix=new el,e.matrixWorld=new el,e.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=Object3D.DefaultMatrixWorldAutoUpdate,e.layers=new ek,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return _createClass(Object3D,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return e_.setFromAxisAngle(e,t),this.quaternion.multiply(e_),this}},{key:"rotateOnWorldAxis",value:function(e,t){return e_.setFromAxisAngle(e,t),this.quaternion.premultiply(e_),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(eP,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(eL,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(eO,e)}},{key:"translateOnAxis",value:function(e,t){return ew.copy(e).applyQuaternion(this.quaternion),this.position.add(ew.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(eP,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(eL,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(eO,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(eS.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,r){e.isVector3?eC.copy(e):eC.set(e,t,r);var i=this.parent;this.updateWorldMatrix(!0,!1),ez.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eS.lookAt(ez,eC,this.up):eS.lookAt(eC,ez,this.up),this.quaternion.setFromRotationMatrix(eS),i&&(eS.extractRotation(i.matrixWorld),e_.setFromRotationMatrix(eS),this.quaternion.premultiply(e_.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(eI)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return -1!==r&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(eB)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(eB)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),eS.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),eS.multiply(e.parent.matrixWorld)),e.applyMatrix4(eS),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var r=0,i=this.children.length;r<i;r++){var a=this.children[r].getObjectByProperty(e,t);if(void 0!==a)return a}}},{key:"getObjectsByProperty",value:function(e,t){var r=[];this[e]===t&&r.push(this);for(var i=0,a=this.children.length;i<a;i++){var n=this.children[i].getObjectsByProperty(e,t);n.length>0&&(r=r.concat(n))}return r}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ez,e,eA),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ez,eT,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,i=t.length;r<i;r++){var a=t[r];(!0===a.matrixWorldAutoUpdate||!0===e)&&a.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,a=0,n=i.length;a<n;a++){var s=i[a];!0===s.matrixWorldAutoUpdate&&s.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function serialize(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=serialize(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var n=a.shapes;if(Array.isArray(n))for(var s=0,o=n.length;s<o;s++){var h=n[s];serialize(e.shapes,h)}else serialize(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){for(var u=[],l=0,c=this.material.length;l<c;l++)u.push(serialize(e.materials,this.material[l]));i.material=u}else i.material=serialize(e.materials,this.material)}if(this.children.length>0){i.children=[];for(var p=0;p<this.children.length;p++)i.children.push(this.children[p].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var f=0;f<this.animations.length;f++){var d=this.animations[f];i.animations.push(serialize(e.animations,d))}}if(t){var y=extractFromCache(e.geometries),m=extractFromCache(e.materials),g=extractFromCache(e.textures),x=extractFromCache(e.images),M=extractFromCache(e.shapes),k=extractFromCache(e.skeletons),b=extractFromCache(e.animations),w=extractFromCache(e.nodes);y.length>0&&(r.geometries=y),m.length>0&&(r.materials=m),g.length>0&&(r.textures=g),x.length>0&&(r.images=x),M.length>0&&(r.shapes=M),k.length>0&&(r.skeletons=k),b.length>0&&(r.animations=b),w.length>0&&(r.nodes=w)}return r.object=i,r;function extractFromCache(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}}},{key:"clone",value:function(e){return new this.constructor().copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var i=e.children[r];this.add(i.clone())}return this}}]),Object3D}(c);eE.DefaultUp=new E(0,1,0),eE.DefaultMatrixAutoUpdate=!0,eE.DefaultMatrixWorldAutoUpdate=!0;var eR=new E,eN=new E,eG=new E,eF=new E,eV=new E,eD=new E,eU=new E,ej=new E,eW=new E,eJ=new E,eq=function(){function Triangle(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new E;_classCallCheck(this,Triangle),this.a=e,this.b=t,this.c=r}return _createClass(Triangle,[{key:"set",value:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}},{key:"setFromPointsAndIndices",value:function(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return eR.subVectors(this.c,this.b),eN.subVectors(this.a,this.b),.5*eR.cross(eN).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return Triangle.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,t){return Triangle.getBarycoord(e,this.a,this.b,this.c,t)}},{key:"getUV",value:function(e,t,r,i,a){return Triangle.getUV(e,this.a,this.b,this.c,t,r,i,a)}},{key:"containsPoint",value:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var r,i,a=this.a,n=this.b,s=this.c;eV.subVectors(n,a),eD.subVectors(s,a),ej.subVectors(e,a);var o=eV.dot(ej),h=eD.dot(ej);if(o<=0&&h<=0)return t.copy(a);eW.subVectors(e,n);var u=eV.dot(eW),l=eD.dot(eW);if(u>=0&&l<=u)return t.copy(n);var c=o*l-u*h;if(c<=0&&o>=0&&u<=0)return r=o/(o-u),t.copy(a).addScaledVector(eV,r);eJ.subVectors(e,s);var p=eV.dot(eJ),f=eD.dot(eJ);if(f>=0&&p<=f)return t.copy(s);var d=p*h-o*f;if(d<=0&&h>=0&&f<=0)return i=h/(h-f),t.copy(a).addScaledVector(eD,i);var y=u*f-p*l;if(y<=0&&l-u>=0&&p-f>=0)return eU.subVectors(s,n),i=(l-u)/(l-u+(p-f)),t.copy(n).addScaledVector(eU,i);var m=1/(y+d+c);return r=d*m,i=c*m,t.copy(a).addScaledVector(eV,r).addScaledVector(eD,i)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,r,i){i.subVectors(r,t),eR.subVectors(e,t),i.cross(eR);var a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,r,i,a){eR.subVectors(i,t),eN.subVectors(r,t),eG.subVectors(e,t);var n=eR.dot(eR),s=eR.dot(eN),o=eR.dot(eG),h=eN.dot(eN),u=eN.dot(eG),l=n*h-s*s;if(0===l)return a.set(-2,-1,-1);var c=1/l,p=(h*o-s*u)*c,f=(n*u-s*o)*c;return a.set(1-p-f,f,p)}},{key:"containsPoint",value:function(e,t,r,i){return this.getBarycoord(e,t,r,i,eF),eF.x>=0&&eF.y>=0&&eF.x+eF.y<=1}},{key:"getUV",value:function(e,t,r,i,a,n,s,o){return this.getBarycoord(e,t,r,i,eF),o.set(0,0),o.addScaledVector(a,eF.x),o.addScaledVector(n,eF.y),o.addScaledVector(s,eF.z),o}},{key:"isFrontFacing",value:function(e,t,r,i){return eR.subVectors(r,t),eN.subVectors(e,t),0>eR.cross(eN).dot(i)}}]),Triangle}(),eH=0,eZ=function(e){_inherits(Material,e);var t=_createSuper(Material);function Material(){var e;return _classCallCheck(this,Material),(e=t.call(this)).isMaterial=!0,Object.defineProperty(_assertThisInitialized(e),"id",{value:eH++}),e.uuid=generateUUID(),e.name="",e.type="Material",e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=100,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=7680,e.stencilZFail=7680,e.stencilZPass=7680,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return _createClass(Material,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}var i=this[t];if(void 0===i){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function extractFromCache(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData),t){var i=extractFromCache(e.textures),a=extractFromCache(e.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,r=null;if(null!==t){var i=t.length;r=Array(i);for(var a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),Material}(c),eX=function(e){_inherits(MeshBasicMaterial,e);var t=_createSuper(MeshBasicMaterial);function MeshBasicMaterial(e){var r;return _classCallCheck(this,MeshBasicMaterial),(r=t.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new A(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return _createClass(MeshBasicMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshBasicMaterial.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),MeshBasicMaterial}(eZ),eY=new E,eQ=new g,eK=function(){function BufferAttribute(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_classCallCheck(this,BufferAttribute),Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}return _createClass(BufferAttribute,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,r=this.count;t<r;t++)eQ.fromBufferAttribute(this,t),eQ.applyMatrix3(e),this.setXY(t,eQ.x,eQ.y);else if(3===this.itemSize)for(var i=0,a=this.count;i<a;i++)eY.fromBufferAttribute(this,i),eY.applyMatrix3(e),this.setXYZ(i,eY.x,eY.y,eY.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,r=this.count;t<r;t++)eY.fromBufferAttribute(this,t),eY.applyMatrix4(e),this.setXYZ(t,eY.x,eY.y,eY.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,r=this.count;t<r;t++)eY.fromBufferAttribute(this,t),eY.applyNormalMatrix(e),this.setXYZ(t,eY.x,eY.y,eY.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,r=this.count;t<r;t++)eY.fromBufferAttribute(this,t),eY.transformDirection(e),this.setXYZ(t,eY.x,eY.y,eY.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=denormalize(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=denormalize(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=denormalize(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=denormalize(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,r){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),r=normalize(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}},{key:"setXYZ",value:function(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),r=normalize(r,this.array),i=normalize(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),r=normalize(r,this.array),i=normalize(i,this.array),a=normalize(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),BufferAttribute}(),e$=function(e){_inherits(Uint16BufferAttribute,e);var t=_createSuper(Uint16BufferAttribute);function Uint16BufferAttribute(e,r,i){return _classCallCheck(this,Uint16BufferAttribute),t.call(this,new Uint16Array(e),r,i)}return _createClass(Uint16BufferAttribute)}(eK),e0=function(e){_inherits(Uint32BufferAttribute,e);var t=_createSuper(Uint32BufferAttribute);function Uint32BufferAttribute(e,r,i){return _classCallCheck(this,Uint32BufferAttribute),t.call(this,new Uint32Array(e),r,i)}return _createClass(Uint32BufferAttribute)}(eK),e1=function(e){_inherits(Float32BufferAttribute,e);var t=_createSuper(Float32BufferAttribute);function Float32BufferAttribute(e,r,i){return _classCallCheck(this,Float32BufferAttribute),t.call(this,new Float32Array(e),r,i)}return _createClass(Float32BufferAttribute)}(eK),e2=0,e3=new el,e5=new eE,e4=new E,e6=new G,e8=new G,e7=new E,e9=function(e){_inherits(BufferGeometry,e);var t=_createSuper(BufferGeometry);function BufferGeometry(){var e;return _classCallCheck(this,BufferGeometry),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(_assertThisInitialized(e),"id",{value:e2++}),e.uuid=generateUUID(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return _createClass(BufferGeometry,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?e0:e$)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:r})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var i=new x().getNormalMatrix(e);r.applyNormalMatrix(i),r.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return e3.makeRotationFromQuaternion(e),this.applyMatrix4(e3),this}},{key:"rotateX",value:function(e){return e3.makeRotationX(e),this.applyMatrix4(e3),this}},{key:"rotateY",value:function(e){return e3.makeRotationY(e),this.applyMatrix4(e3),this}},{key:"rotateZ",value:function(e){return e3.makeRotationZ(e),this.applyMatrix4(e3),this}},{key:"translate",value:function(e,t,r){return e3.makeTranslation(e,t,r),this.applyMatrix4(e3),this}},{key:"scale",value:function(e,t,r){return e3.makeScale(e,t,r),this.applyMatrix4(e3),this}},{key:"lookAt",value:function(e){return e5.lookAt(e),e5.updateMatrix(),this.applyMatrix4(e5.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e4).negate(),this.translate(e4.x,e4.y,e4.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new e1(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new G);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new E(-1/0,-1/0,-1/0),new E(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];e6.setFromBufferAttribute(a),this.morphTargetsRelative?(e7.addVectors(this.boundingBox.min,e6.min),this.boundingBox.expandByPoint(e7),e7.addVectors(this.boundingBox.max,e6.max),this.boundingBox.expandByPoint(e7)):(this.boundingBox.expandByPoint(e6.min),this.boundingBox.expandByPoint(e6.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new et);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new E,1/0);return}if(e){var r=this.boundingSphere.center;if(e6.setFromBufferAttribute(e),t)for(var i=0,a=t.length;i<a;i++){var n=t[i];e8.setFromBufferAttribute(n),this.morphTargetsRelative?(e7.addVectors(e6.min,e8.min),e6.expandByPoint(e7),e7.addVectors(e6.max,e8.max),e6.expandByPoint(e7)):(e6.expandByPoint(e8.min),e6.expandByPoint(e8.max))}e6.getCenter(r);for(var s=0,o=0,h=e.count;o<h;o++)e7.fromBufferAttribute(e,o),s=Math.max(s,r.distanceToSquared(e7));if(t)for(var u=0,l=t.length;u<l;u++)for(var c=t[u],p=this.morphTargetsRelative,f=0,d=c.count;f<d;f++)e7.fromBufferAttribute(c,f),p&&(e4.fromBufferAttribute(e,f),e7.add(e4)),s=Math.max(s,r.distanceToSquared(e7));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}var r=e.array,i=t.position.array,a=t.normal.array,n=t.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new eK(new Float32Array(4*s),4));for(var o=this.getAttribute("tangent").array,h=[],u=[],l=0;l<s;l++)h[l]=new E,u[l]=new E;var c=new E,p=new E,f=new E,d=new g,y=new g,m=new g,x=new E,M=new E;function handleTriangle(e,t,r){c.fromArray(i,3*e),p.fromArray(i,3*t),f.fromArray(i,3*r),d.fromArray(n,2*e),y.fromArray(n,2*t),m.fromArray(n,2*r),p.sub(c),f.sub(c),y.sub(d),m.sub(d);var a=1/(y.x*m.y-m.x*y.y);isFinite(a)&&(x.copy(p).multiplyScalar(m.y).addScaledVector(f,-y.y).multiplyScalar(a),M.copy(f).multiplyScalar(y.x).addScaledVector(p,-m.x).multiplyScalar(a),h[e].add(x),h[t].add(x),h[r].add(x),u[e].add(M),u[t].add(M),u[r].add(M))}var k=this.groups;0===k.length&&(k=[{start:0,count:r.length}]);for(var b=0,w=k.length;b<w;++b)for(var _=k[b],S=_.start,C=_.count,z=S,A=S+C;z<A;z+=3)handleTriangle(r[z+0],r[z+1],r[z+2]);var T=new E,P=new E,L=new E,O=new E;function handleVertex(e){L.fromArray(a,3*e),O.copy(L);var t=h[e];T.copy(t),T.sub(L.multiplyScalar(L.dot(t))).normalize(),P.crossVectors(O,t);var r=P.dot(u[e]);o[4*e]=T.x,o[4*e+1]=T.y,o[4*e+2]=T.z,o[4*e+3]=r<0?-1:1}for(var I=0,B=k.length;I<B;++I)for(var R=k[I],N=R.start,G=R.count,F=N,V=N+G;F<V;F+=3)handleVertex(r[F+0]),handleVertex(r[F+1]),handleVertex(r[F+2])}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var r=this.getAttribute("normal");if(void 0===r)r=new eK(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(var i=0,a=r.count;i<a;i++)r.setXYZ(i,0,0,0);var n=new E,s=new E,o=new E,h=new E,u=new E,l=new E,c=new E,p=new E;if(e)for(var f=0,d=e.count;f<d;f+=3){var y=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);n.fromBufferAttribute(t,y),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),c.subVectors(o,s),p.subVectors(n,s),c.cross(p),h.fromBufferAttribute(r,y),u.fromBufferAttribute(r,m),l.fromBufferAttribute(r,g),h.add(c),u.add(c),l.add(c),r.setXYZ(y,h.x,h.y,h.z),r.setXYZ(m,u.x,u.y,u.z),r.setXYZ(g,l.x,l.y,l.z)}else for(var x=0,M=t.count;x<M;x+=3)n.fromBufferAttribute(t,x+0),s.fromBufferAttribute(t,x+1),o.fromBufferAttribute(t,x+2),c.subVectors(o,s),p.subVectors(n,s),c.cross(p),r.setXYZ(x+0,c.x,c.y,c.z),r.setXYZ(x+1,c.x,c.y,c.z),r.setXYZ(x+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,r=e.count;t<r;t++)e7.fromBufferAttribute(e,t),e7.normalize(),e.setXYZ(t,e7.x,e7.y,e7.z)}},{key:"toNonIndexed",value:function(){function convertBufferAttribute(e,t){for(var r=e.array,i=e.itemSize,a=e.normalized,n=new r.constructor(t.length*i),s=0,o=0,h=0,u=t.length;h<u;h++){s=e.isInterleavedBufferAttribute?t[h]*e.data.stride+e.offset:t[h]*i;for(var l=0;l<i;l++)n[o++]=r[s++]}return new eK(n,i,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var e=new BufferGeometry,t=this.index.array,r=this.attributes;for(var i in r){var a=convertBufferAttribute(r[i],t);e.setAttribute(i,a)}var n=this.morphAttributes;for(var s in n){for(var o=[],h=n[s],u=0,l=h.length;u<l;u++){var c=convertBufferAttribute(h[u],t);o.push(c)}e.morphAttributes[s]=o}e.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,f=0,d=p.length;f<d;f++){var y=p[f];e.addGroup(y.start,y.count,y.materialIndex)}return e}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var a=this.attributes;for(var n in a){var s=a[n];e.data.attributes[n]=s.toJSON(e.data)}var o={},h=!1;for(var u in this.morphAttributes){for(var l=this.morphAttributes[u],c=[],p=0,f=l.length;p<f;p++){var d=l[p];c.push(d.toJSON(e.data))}c.length>0&&(o[u]=c,h=!0)}h&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var y=this.groups;y.length>0&&(e.data.groups=JSON.parse(JSON.stringify(y)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone(t));var i=e.attributes;for(var a in i){var n=i[a];this.setAttribute(a,n.clone(t))}var s=e.morphAttributes;for(var o in s){for(var h=[],u=s[o],l=0,c=u.length;l<c;l++)h.push(u[l].clone(t));this.morphAttributes[o]=h}this.morphTargetsRelative=e.morphTargetsRelative;for(var p=e.groups,f=0,d=p.length;f<d;f++){var y=p[f];this.addGroup(y.start,y.count,y.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),BufferGeometry}(c),te=new el,tt=new eu,tr=new et,ti=new E,ta=new E,tn=new E,ts=new E,to=new E,th=new g,tu=new g,tl=new g,tc=new E,tp=new E,tf=function(e){_inherits(Mesh,e);var t=_createSuper(Mesh);function Mesh(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e9,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new eX;return _classCallCheck(this,Mesh),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return _createClass(Mesh,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(Mesh.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var r=e[t[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var n=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=i}}}}},{key:"getVertexPosition",value:function(e,t){var r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,n=r.morphTargetsRelative;t.fromBufferAttribute(i,e);var s=this.morphTargetInfluences;if(a&&s){to.set(0,0,0);for(var o=0,h=a.length;o<h;o++){var u=s[o],l=a[o];0!==u&&(ts.fromBufferAttribute(l,e),n?to.addScaledVector(ts,u):to.addScaledVector(ts.sub(t),u))}t.add(to)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}},{key:"raycast",value:function(e,t){var r,i=this.geometry,a=this.material,n=this.matrixWorld;if(void 0!==a&&(null===i.boundingSphere&&i.computeBoundingSphere(),tr.copy(i.boundingSphere),tr.applyMatrix4(n),!1!==e.ray.intersectsSphere(tr))){if(te.copy(n).invert(),tt.copy(e.ray).applyMatrix4(te),null!==i.boundingBox&&!1===tt.intersectsBox(i.boundingBox))return;var s=i.index,o=i.attributes.position,h=i.attributes.uv,u=i.attributes.uv2,l=i.groups,c=i.drawRange;if(null!==s){if(Array.isArray(a))for(var p=0,f=l.length;p<f;p++)for(var d=l[p],y=a[d.materialIndex],m=Math.max(d.start,c.start),g=Math.min(s.count,Math.min(d.start+d.count,c.start+c.count)),x=m;x<g;x+=3)(r=checkBufferGeometryIntersection(this,y,e,tt,h,u,s.getX(x),s.getX(x+1),s.getX(x+2)))&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=d.materialIndex,t.push(r));else for(var M=Math.max(0,c.start),k=Math.min(s.count,c.start+c.count),b=M;b<k;b+=3)(r=checkBufferGeometryIntersection(this,a,e,tt,h,u,s.getX(b),s.getX(b+1),s.getX(b+2)))&&(r.faceIndex=Math.floor(b/3),t.push(r))}else if(void 0!==o){if(Array.isArray(a))for(var w=0,_=l.length;w<_;w++)for(var S=l[w],C=a[S.materialIndex],z=Math.max(S.start,c.start),A=Math.min(o.count,Math.min(S.start+S.count,c.start+c.count)),T=z;T<A;T+=3)(r=checkBufferGeometryIntersection(this,C,e,tt,h,u,T,T+1,T+2))&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=S.materialIndex,t.push(r));else for(var P=Math.max(0,c.start),L=Math.min(o.count,c.start+c.count),O=P;O<L;O+=3)(r=checkBufferGeometryIntersection(this,a,e,tt,h,u,O,O+1,O+2))&&(r.faceIndex=Math.floor(O/3),t.push(r))}}}}]),Mesh}(eE);function checkIntersection(e,t,r,i,a,n,o,h){if(null===(t.side===s?i.intersectTriangle(o,n,a,!0,h):i.intersectTriangle(a,n,o,0===t.side,h)))return null;tp.copy(h),tp.applyMatrix4(e.matrixWorld);var u=r.ray.origin.distanceTo(tp);return u<r.near||u>r.far?null:{distance:u,point:tp.clone(),object:e}}function checkBufferGeometryIntersection(e,t,r,i,a,n,s,o,h){e.getVertexPosition(s,ti),e.getVertexPosition(o,ta),e.getVertexPosition(h,tn);var u=checkIntersection(e,t,r,i,ti,ta,tn,tc);if(u){a&&(th.fromBufferAttribute(a,s),tu.fromBufferAttribute(a,o),tl.fromBufferAttribute(a,h),u.uv=eq.getUV(tc,ti,ta,tn,th,tu,tl,new g)),n&&(th.fromBufferAttribute(n,s),tu.fromBufferAttribute(n,o),tl.fromBufferAttribute(n,h),u.uv2=eq.getUV(tc,ti,ta,tn,th,tu,tl,new g));var l={a:s,b:o,c:h,normal:new E,materialIndex:0};eq.getNormal(ti,ta,tn,l.normal),u.face=l}return u}var td=function(e){_inherits(BoxGeometry,e);var t=_createSuper(BoxGeometry);function BoxGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;_classCallCheck(this,BoxGeometry),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:n,heightSegments:s,depthSegments:o};var h=_assertThisInitialized(e);n=Math.floor(n),s=Math.floor(s);var u=[],l=[],c=[],p=[],f=0,d=0;function buildPlane(e,t,r,i,a,n,s,o,y,m,g){for(var x=n/y,M=s/m,k=n/2,b=s/2,w=o/2,_=y+1,S=m+1,C=0,z=0,A=new E,T=0;T<S;T++)for(var P=T*M-b,L=0;L<_;L++){var O=L*x-k;A[e]=O*i,A[t]=P*a,A[r]=w,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[r]=o>0?1:-1,c.push(A.x,A.y,A.z),p.push(L/y),p.push(1-T/m),C+=1}for(var I=0;I<m;I++)for(var B=0;B<y;B++){var R=f+B+_*I,N=f+B+_*(I+1),G=f+(B+1)+_*(I+1),F=f+(B+1)+_*I;u.push(R,N,F),u.push(N,G,F),z+=6}h.addGroup(d,z,g),d+=z,f+=C}return buildPlane("z","y","x",-1,-1,a,i,r,o=Math.floor(o),s,0),buildPlane("z","y","x",1,-1,a,i,-r,o,s,1),buildPlane("x","z","y",1,1,r,a,i,n,o,2),buildPlane("x","z","y",1,-1,r,a,-i,n,o,3),buildPlane("x","y","z",1,-1,r,i,a,n,s,4),buildPlane("x","y","z",-1,-1,r,i,-a,n,s,5),e.setIndex(u),e.setAttribute("position",new e1(l,3)),e.setAttribute("normal",new e1(c,3)),e.setAttribute("uv",new e1(p,2)),e}return _createClass(BoxGeometry,null,[{key:"fromJSON",value:function(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),BoxGeometry}(e9);function cloneUniforms(e){var t={};for(var r in e)for(var i in t[r]={},e[r]){var a=e[r][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?t[r][i]=a.clone():Array.isArray(a)?t[r][i]=a.slice():t[r][i]=a}return t}function cloneUniformsGroups(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].clone());return t}var ty=function(e){_inherits(ShaderMaterial,e);var t=_createSuper(ShaderMaterial);function ShaderMaterial(e){var r;return _classCallCheck(this,ShaderMaterial),(r=t.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return _createClass(ShaderMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(ShaderMaterial.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=cloneUniformsGroups(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=_get(_getPrototypeOf(ShaderMaterial.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var n in this.extensions)!0===this.extensions[n]&&(a[n]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),ShaderMaterial}(eZ),tv=function(e){_inherits(Camera,e);var t=_createSuper(Camera);function Camera(){var e;return _classCallCheck(this,Camera),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new el,e.projectionMatrix=new el,e.projectionMatrixInverse=new el,e}return _createClass(Camera,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(Camera.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){_get(_getPrototypeOf(Camera.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){_get(_getPrototypeOf(Camera.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),Camera}(eE),tm=function(e){_inherits(PerspectiveCamera,e);var t=_createSuper(PerspectiveCamera);function PerspectiveCamera(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return _classCallCheck(this,PerspectiveCamera),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=n,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return _createClass(PerspectiveCamera,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(PerspectiveCamera.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*y*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*d*this.fov);return .5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*y*Math.atan(Math.tan(.5*d*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,r,i,a,n){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=n,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*d*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i,n=this.view;if(null!==this.view&&this.view.enabled){var s=n.fullWidth,o=n.fullHeight;a+=n.offsetX*i/s,t-=n.offsetY*r/o,i*=n.width/s,r*=n.height/o}var h=this.filmOffset;0!==h&&(a+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=_get(_getPrototypeOf(PerspectiveCamera.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),PerspectiveCamera}(tv),tg=function(e){_inherits(CubeTexture,e);var t=_createSuper(CubeTexture);function CubeTexture(e,r,i,a,n,s,o,h,u,l){var c;return _classCallCheck(this,CubeTexture),e=void 0!==e?e:[],r=void 0!==r?r:301,(c=t.call(this,e,r,i,a,n,s,o,h,u,l)).isCubeTexture=!0,c.flipY=!1,c}return _createClass(CubeTexture,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),CubeTexture}(O),tx=new E,tM=new E,tk=new x,tb=function(){function Plane(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,Plane),this.isPlane=!0,this.normal=e,this.constant=t}return _createClass(Plane,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,r){var i=tx.subVectors(r,t).cross(tM.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var r=e.delta(tx),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(r).multiplyScalar(a).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var r=t||tk.getNormalMatrix(e),i=this.coplanarPoint(tx).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),Plane}(),tw=new et,t_=new E,tS=function(){function Frustum(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tb,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tb,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new tb,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new tb,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new tb,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new tb;_classCallCheck(this,Frustum),this.planes=[e,t,r,i,a,n]}return _createClass(Frustum,[{key:"set",value:function(e,t,r,i,a,n){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(i),s[4].copy(a),s[5].copy(n),this}},{key:"copy",value:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,r=e.elements,i=r[0],a=r[1],n=r[2],s=r[3],o=r[4],h=r[5],u=r[6],l=r[7],c=r[8],p=r[9],f=r[10],d=r[11],y=r[12],m=r[13],g=r[14],x=r[15];return t[0].setComponents(s-i,l-o,d-c,x-y).normalize(),t[1].setComponents(s+i,l+o,d+c,x+y).normalize(),t[2].setComponents(s+a,l+h,d+p,x+m).normalize(),t[3].setComponents(s-a,l-h,d-p,x-m).normalize(),t[4].setComponents(s-n,l-u,d-f,x-g).normalize(),t[5].setComponents(s+n,l+u,d+f,x+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),tw.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(tw)}},{key:"intersectsSprite",value:function(e){return tw.center.set(0,0,0),tw.radius=.7071067811865476,tw.applyMatrix4(e.matrixWorld),this.intersectsSphere(tw)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,r=e.center,i=-e.radius,a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,r=0;r<6;r++){var i=t[r];if(t_.x=i.normal.x>0?e.max.x:e.min.x,t_.y=i.normal.y>0?e.max.y:e.min.y,t_.z=i.normal.z>0?e.max.z:e.min.z,0>i.distanceToPoint(t_))return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,r=0;r<6;r++)if(0>t[r].distanceToPoint(e))return!1;return!0}},{key:"clone",value:function(){return new this.constructor().copy(this)}}]),Frustum}(),tC=function(e){_inherits(PlaneGeometry,e);var t=_createSuper(PlaneGeometry);function PlaneGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,PlaneGeometry),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:n};for(var s=r/2,o=i/2,h=Math.floor(a),u=Math.floor(n),l=h+1,c=u+1,p=r/h,f=i/u,d=[],y=[],m=[],g=[],x=0;x<c;x++)for(var M=x*f-o,k=0;k<l;k++){var b=k*p-s;y.push(b,-M,0),m.push(0,0,1),g.push(k/h),g.push(1-x/u)}for(var w=0;w<u;w++)for(var _=0;_<h;_++){var S=_+l*w,C=_+l*(w+1),z=_+1+l*(w+1),A=_+1+l*w;d.push(S,C,A),d.push(C,z,A)}return e.setIndex(d),e.setAttribute("position",new e1(y,3)),e.setAttribute("normal",new e1(m,3)),e.setAttribute("uv",new e1(g,2)),e}return _createClass(PlaneGeometry,null,[{key:"fromJSON",value:function(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}]),PlaneGeometry}(e9),tz=function(e){_inherits(OrthographicCamera,e);var t=_createSuper(OrthographicCamera);function OrthographicCamera(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return _classCallCheck(this,OrthographicCamera),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=n,e.near=s,e.far=o,e.updateProjectionMatrix(),e}return _createClass(OrthographicCamera,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(OrthographicCamera.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,r,i,a,n){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=n,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,a=r-e,n=r+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){var h=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=h*this.view.offsetX,n=a+h*this.view.width,s-=u*this.view.offsetY,o=s-u*this.view.height}this.projectionMatrix.makeOrthographic(a,n,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=_get(_getPrototypeOf(OrthographicCamera.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),OrthographicCamera}(tv),tA=function(e){_inherits(MeshDepthMaterial,e);var t=_createSuper(MeshDepthMaterial);function MeshDepthMaterial(e){var r;return _classCallCheck(this,MeshDepthMaterial),(r=t.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return _createClass(MeshDepthMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshDepthMaterial.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),MeshDepthMaterial}(eZ),tT=function(e){_inherits(MeshDistanceMaterial,e);var t=_createSuper(MeshDistanceMaterial);function MeshDistanceMaterial(e){var r;return _classCallCheck(this,MeshDistanceMaterial),(r=t.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.referencePosition=new E,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return _createClass(MeshDistanceMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshDistanceMaterial.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),MeshDistanceMaterial}(eZ),tP=function(e){_inherits(Group,e);var t=_createSuper(Group);function Group(){var e;return _classCallCheck(this,Group),(e=t.call(this)).isGroup=!0,e.type="Group",e}return _createClass(Group)}(eE),tL=function(){function FogExp2(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;_classCallCheck(this,FogExp2),this.isFogExp2=!0,this.name="",this.color=new A(e),this.density=t}return _createClass(FogExp2,[{key:"clone",value:function(){return new FogExp2(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),FogExp2}(),tO=function(){function Fog(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;_classCallCheck(this,Fog),this.isFog=!0,this.name="",this.color=new A(e),this.near=t,this.far=r}return _createClass(Fog,[{key:"clone",value:function(){return new Fog(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),Fog}(),tI=function(e){_inherits(Scene,e);var t=_createSuper(Scene);function Scene(){var e;return _classCallCheck(this,Scene),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:_assertThisInitialized(e)})),e}return _createClass(Scene,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(Scene.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=_get(_getPrototypeOf(Scene.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),Scene}(eE),tB=function(){function InterleavedBuffer(e,t){_classCallCheck(this,InterleavedBuffer),this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}return _createClass(InterleavedBuffer,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,r){e*=this.stride,r*=t.stride;for(var i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),InterleavedBuffer}(),tE=new E,tR=function(){function InterleavedBufferAttribute(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,InterleavedBufferAttribute),this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}return _createClass(InterleavedBufferAttribute,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,r=this.data.count;t<r;t++)tE.fromBufferAttribute(this,t),tE.applyMatrix4(e),this.setXYZ(t,tE.x,tE.y,tE.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,r=this.count;t<r;t++)tE.fromBufferAttribute(this,t),tE.applyNormalMatrix(e),this.setXYZ(t,tE.x,tE.y,tE.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,r=this.count;t<r;t++)tE.fromBufferAttribute(this,t),tE.transformDirection(e),this.setXYZ(t,tE.x,tE.y,tE.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=denormalize(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=denormalize(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=denormalize(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=denormalize(t,this.array)),t}},{key:"setXY",value:function(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),r=normalize(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}},{key:"setXYZ",value:function(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),r=normalize(r,this.array),i=normalize(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),r=normalize(r,this.array),i=normalize(i,this.array),a=normalize(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}},{key:"clone",value:function(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)t.push(this.data.array[i+a]);return new eK(new this.array.constructor(t),this.itemSize,this.normalized)}},{key:"toJSON",value:function(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)t.push(this.data.array[i+a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}}]),InterleavedBufferAttribute}(),tN=function(e){_inherits(SpriteMaterial,e);var t=_createSuper(SpriteMaterial);function SpriteMaterial(e){var r;return _classCallCheck(this,SpriteMaterial),(r=t.call(this)).isSpriteMaterial=!0,r.type="SpriteMaterial",r.color=new A(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.fog=!0,r.setValues(e),r}return _createClass(SpriteMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(SpriteMaterial.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),SpriteMaterial}(eZ),tG=new E,tF=new E,tV=new E,tD=new g,tU=new g,tj=new el,tW=new E,tJ=new E,tq=new E,tH=new g,tZ=new g,tX=new g,tY=function(e){_inherits(Sprite,e);var t=_createSuper(Sprite);function Sprite(e){var r;if(_classCallCheck(this,Sprite),(r=t.call(this)).isSprite=!0,r.type="Sprite",void 0===n){n=new e9;var i=new tB(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);n.setIndex([0,1,2,0,2,3]),n.setAttribute("position",new tR(i,3,0,!1)),n.setAttribute("uv",new tR(i,2,3,!1))}return r.geometry=n,r.material=void 0!==e?e:new tN,r.center=new g(.5,.5),r}return _createClass(Sprite,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),tF.setFromMatrixScale(this.matrixWorld),tj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),tV.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&tF.multiplyScalar(-tV.z);var r,i,a=this.material.rotation;0!==a&&(i=Math.cos(a),r=Math.sin(a));var n=this.center;transformVertex(tW.set(-.5,-.5,0),tV,n,tF,r,i),transformVertex(tJ.set(.5,-.5,0),tV,n,tF,r,i),transformVertex(tq.set(.5,.5,0),tV,n,tF,r,i),tH.set(0,0),tZ.set(1,0),tX.set(1,1);var s=e.ray.intersectTriangle(tW,tJ,tq,!1,tG);if(null!==s||(transformVertex(tJ.set(-.5,.5,0),tV,n,tF,r,i),tZ.set(0,1),null!==(s=e.ray.intersectTriangle(tW,tq,tJ,!1,tG)))){var o=e.ray.origin.distanceTo(tG);o<e.near||o>e.far||t.push({distance:o,point:tG.clone(),uv:eq.getUV(tG,tW,tJ,tq,tH,tZ,tX,new g),face:null,object:this})}}},{key:"copy",value:function(e,t){return _get(_getPrototypeOf(Sprite.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),Sprite}(eE);function transformVertex(e,t,r,i,a,n){tD.subVectors(e,r).addScalar(.5).multiply(i),void 0!==a?(tU.x=n*tD.x-a*tD.y,tU.y=a*tD.x+n*tD.y):tU.copy(tD),e.copy(t),e.x+=tU.x,e.y+=tU.y,e.applyMatrix4(tj)}var tQ=new E,tK=new E,t$=function(e){_inherits(LOD,e);var t=_createSuper(LOD);function LOD(){var e;return _classCallCheck(this,LOD),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties(_assertThisInitialized(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return _createClass(LOD,[{key:"copy",value:function(e){_get(_getPrototypeOf(LOD.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r=Math.abs(r);var a=this.levels;for(t=0;t<a.length&&!(r<a[t].distance);t++);return a.splice(t,0,{distance:r,hysteresis:i,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t,r,i=this.levels;if(i.length>0){for(t=1,r=i.length;t<r;t++){var a=i[t].distance;if(i[t].object.visible&&(a-=a*i[t].hysteresis),e<a)break}return i[t-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){tQ.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(tQ);this.getObjectForDistance(r).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){tQ.setFromMatrixPosition(e.matrixWorld),tK.setFromMatrixPosition(this.matrixWorld);var r,i,a=tQ.distanceTo(tK)/e.zoom;for(r=1,t[0].object.visible=!0,i=t.length;r<i;r++){var n=t[r].distance;if(t[r].object.visible&&(n-=n*t[r].hysteresis),a>=n)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}},{key:"toJSON",value:function(e){var t=_get(_getPrototypeOf(LOD.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,a=r.length;i<a;i++){var n=r[i];t.object.levels.push({object:n.object.uuid,distance:n.distance,hysteresis:n.hysteresis})}return t}}]),LOD}(eE),t0=new E,t1=new I,t2=new I,t3=new E,t5=new el,t4=function(e){_inherits(SkinnedMesh,e);var t=_createSuper(SkinnedMesh);function SkinnedMesh(e,r){var i;return _classCallCheck(this,SkinnedMesh),(i=t.call(this,e,r)).isSkinnedMesh=!0,i.type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new el,i.bindMatrixInverse=new el,i}return _createClass(SkinnedMesh,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(SkinnedMesh.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new I,t=this.geometry.attributes.skinWeight,r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);var a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){_get(_getPrototypeOf(SkinnedMesh.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var r=this.skeleton,i=this.geometry;t1.fromBufferAttribute(i.attributes.skinIndex,e),t2.fromBufferAttribute(i.attributes.skinWeight,e),t0.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var a=0;a<4;a++){var n=t2.getComponent(a);if(0!==n){var s=t1.getComponent(a);t5.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),t.addScaledVector(t3.copy(t0).applyMatrix4(t5),n)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),SkinnedMesh}(tf),t6=function(e){_inherits(Bone,e);var t=_createSuper(Bone);function Bone(){var e;return _classCallCheck(this,Bone),(e=t.call(this)).isBone=!0,e.type="Bone",e}return _createClass(Bone)}(eE),t8=function(e){_inherits(DataTexture,e);var t=_createSuper(DataTexture);function DataTexture(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,h=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,p=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;return _classCallCheck(this,DataTexture),(e=t.call(this,null,o,h,u,l,c,n,s,p,f)).isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _createClass(DataTexture)}(O),t7=new el,t9=new el,re=function(){function Skeleton(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,Skeleton),this.uuid=generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return _createClass(Skeleton,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new el)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var r=new el;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(var i=0,a=this.bones.length;i<a;i++){var n=this.bones[i];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture,a=0,n=e.length;a<n;a++){var s=e[a]?e[a].matrixWorld:t9;t7.multiplyMatrices(s,t[a]),t7.toArray(r,16*a)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new Skeleton(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Math.max(e=ceilPowerOfTwo(e),4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var r=new t8(t,e,e,h,1015);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,r=this.bones.length;t<r;t++){var i=this.bones[t];if(i.name===e)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var r=0,i=e.bones.length;r<i;r++){var a=e.bones[r],n=t[a];void 0===n&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),n=new t6),this.bones.push(n),this.boneInverses.push(new el().fromArray(e.boneInverses[r]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,r=this.boneInverses,i=0,a=t.length;i<a;i++){var n=t[i];e.bones.push(n.uuid);var s=r[i];e.boneInverses.push(s.toArray())}return e}}]),Skeleton}(),rt=function(e){_inherits(InstancedBufferAttribute,e);var t=_createSuper(InstancedBufferAttribute);function InstancedBufferAttribute(e,r,i){var a,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,InstancedBufferAttribute),(a=t.call(this,e,r,i)).isInstancedBufferAttribute=!0,a.meshPerAttribute=n,a}return _createClass(InstancedBufferAttribute,[{key:"copy",value:function(e){return _get(_getPrototypeOf(InstancedBufferAttribute.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(InstancedBufferAttribute.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),InstancedBufferAttribute}(eK),rr=new el,ri=new el,ra=[],rn=new el,rs=new tf,ro=function(e){_inherits(InstancedMesh,e);var t=_createSuper(InstancedMesh);function InstancedMesh(e,r,i){var a;_classCallCheck(this,InstancedMesh),(a=t.call(this,e,r)).isInstancedMesh=!0,a.instanceMatrix=new rt(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1;for(var n=0;n<i;n++)a.setMatrixAt(n,rn);return a}return _createClass(InstancedMesh,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(InstancedMesh.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var r=this.matrixWorld,i=this.count;if(rs.geometry=this.geometry,rs.material=this.material,void 0!==rs.material)for(var a=0;a<i;a++){this.getMatrixAt(a,rr),ri.multiplyMatrices(r,rr),rs.matrixWorld=ri,rs.raycast(e,ra);for(var n=0,s=ra.length;n<s;n++){var o=ra[n];o.instanceId=a,o.object=this,t.push(o)}ra.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new rt(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),InstancedMesh}(tf),rh=function(e){_inherits(LineBasicMaterial,e);var t=_createSuper(LineBasicMaterial);function LineBasicMaterial(e){var r;return _classCallCheck(this,LineBasicMaterial),(r=t.call(this)).isLineBasicMaterial=!0,r.type="LineBasicMaterial",r.color=new A(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return _createClass(LineBasicMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(LineBasicMaterial.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),LineBasicMaterial}(eZ),ru=new E,rl=new E,rc=new el,rp=new eu,rf=new et,rd=function(e){_inherits(Line,e);var t=_createSuper(Line);function Line(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e9,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rh;return _classCallCheck(this,Line),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return _createClass(Line,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(Line.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,r=[0],i=1,a=t.count;i<a;i++)ru.fromBufferAttribute(t,i-1),rl.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=ru.distanceTo(rl);e.setAttribute("lineDistance",new e1(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,n=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),rf.copy(r.boundingSphere),rf.applyMatrix4(i),rf.radius+=a,!1!==e.ray.intersectsSphere(rf)){rc.copy(i).invert(),rp.copy(e.ray).applyMatrix4(rc);var s=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,h=new E,u=new E,l=new E,c=new E,p=this.isLineSegments?2:1,f=r.index,d=r.attributes.position;if(null!==f)for(var y=Math.max(0,n.start),m=Math.min(f.count,n.start+n.count),g=y,x=m-1;g<x;g+=p){var M=f.getX(g),k=f.getX(g+1);if(h.fromBufferAttribute(d,M),u.fromBufferAttribute(d,k),!(rp.distanceSqToSegment(h,u,c,l)>o)){c.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(c);b<e.near||b>e.far||t.push({distance:b,point:l.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else for(var w=Math.max(0,n.start),_=Math.min(d.count,n.start+n.count),S=w,C=_-1;S<C;S+=p)if(h.fromBufferAttribute(d,S),u.fromBufferAttribute(d,S+1),!(rp.distanceSqToSegment(h,u,c,l)>o)){c.applyMatrix4(this.matrixWorld);var z=e.ray.origin.distanceTo(c);z<e.near||z>e.far||t.push({distance:z,point:l.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var r=e[t[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var n=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=i}}}}}]),Line}(eE),ry=new E,rv=new E,rm=function(e){_inherits(LineSegments,e);var t=_createSuper(LineSegments);function LineSegments(e,r){var i;return _classCallCheck(this,LineSegments),(i=t.call(this,e,r)).isLineSegments=!0,i.type="LineSegments",i}return _createClass(LineSegments,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,r=[],i=0,a=t.count;i<a;i+=2)ry.fromBufferAttribute(t,i),rv.fromBufferAttribute(t,i+1),r[i]=0===i?0:r[i-1],r[i+1]=r[i]+ry.distanceTo(rv);e.setAttribute("lineDistance",new e1(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),LineSegments}(rd),rg=function(e){_inherits(LineLoop,e);var t=_createSuper(LineLoop);function LineLoop(e,r){var i;return _classCallCheck(this,LineLoop),(i=t.call(this,e,r)).isLineLoop=!0,i.type="LineLoop",i}return _createClass(LineLoop)}(rd),rx=function(e){_inherits(PointsMaterial,e);var t=_createSuper(PointsMaterial);function PointsMaterial(e){var r;return _classCallCheck(this,PointsMaterial),(r=t.call(this)).isPointsMaterial=!0,r.type="PointsMaterial",r.color=new A(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return _createClass(PointsMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(PointsMaterial.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),PointsMaterial}(eZ),rM=new el,rk=new eu,rb=new et,rw=new E,r_=function(e){_inherits(Points,e);var t=_createSuper(Points);function Points(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e9,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rx;return _classCallCheck(this,Points),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return _createClass(Points,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(Points.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,n=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),rb.copy(r.boundingSphere),rb.applyMatrix4(i),rb.radius+=a,!1!==e.ray.intersectsSphere(rb)){rM.copy(i).invert(),rk.copy(e.ray).applyMatrix4(rM);var s=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,h=r.index,u=r.attributes.position;if(null!==h)for(var l=Math.max(0,n.start),c=Math.min(h.count,n.start+n.count),p=l;p<c;p++){var f=h.getX(p);rw.fromBufferAttribute(u,f),testPoint(rw,f,o,i,e,t,this)}else for(var d=Math.max(0,n.start),y=Math.min(u.count,n.start+n.count),m=d;m<y;m++)rw.fromBufferAttribute(u,m),testPoint(rw,m,o,i,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var r=e[t[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var n=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=i}}}}}]),Points}(eE);function testPoint(e,t,r,i,a,n,s){var o=rk.distanceSqToPoint(e);if(o<r){var h=new E;rk.closestPointToPoint(e,h),h.applyMatrix4(i);var u=a.ray.origin.distanceTo(h);if(u<a.near||u>a.far)return;n.push({distance:u,distanceToRay:Math.sqrt(o),point:h,index:t,face:null,object:s})}}var rS=function(e){_inherits(VideoTexture,e);var t=_createSuper(VideoTexture);function VideoTexture(e,r,i,a,n,s,o,h,u){_classCallCheck(this,VideoTexture),(l=t.call(this,e,r,i,a,n,s,o,h,u)).isVideoTexture=!0,l.minFilter=void 0!==s?s:1006,l.magFilter=void 0!==n?n:1006,l.generateMipmaps=!1;var l,c=_assertThisInitialized(l);function updateVideo(){c.needsUpdate=!0,e.requestVideoFrameCallback(updateVideo)}return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(updateVideo),l}return _createClass(VideoTexture,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),VideoTexture}(O),rC=function(e){_inherits(FramebufferTexture,e);var t=_createSuper(FramebufferTexture);function FramebufferTexture(e,r,i){var a;return _classCallCheck(this,FramebufferTexture),(a=t.call(this,{width:e,height:r})).isFramebufferTexture=!0,a.format=i,a.magFilter=1003,a.minFilter=1003,a.generateMipmaps=!1,a.needsUpdate=!0,a}return _createClass(FramebufferTexture)}(O),rz=function(e){_inherits(CanvasTexture,e);var t=_createSuper(CanvasTexture);function CanvasTexture(e,r,i,a,n,s,o,h,u){var l;return _classCallCheck(this,CanvasTexture),(l=t.call(this,e,r,i,a,n,s,o,h,u)).isCanvasTexture=!0,l.needsUpdate=!0,l}return _createClass(CanvasTexture)}(O),rA=function(){function Curve(){_classCallCheck(this,Curve),this.type="Curve",this.arcLengthDivisions=200}return _createClass(Curve,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r=[],i=this.getPoint(0),a=0;r.push(0);for(var n=1;n<=e;n++)r.push(a+=(t=this.getPoint(n/e)).distanceTo(i)),i=t;return this.cacheArcLengths=r,r}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var n,s,o=0,h=a-1;o<=h;)if((s=r[i=Math.floor(o+(h-o)/2)]-n)<0)o=i+1;else if(s>0)h=i-1;else{h=i;break}if(r[i=h]===n)return i/(a-1);var u=r[i],l=r[i+1];return(i+(n-u)/(l-u))/(a-1)}},{key:"getTangent",value:function(e,t){var r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),n=this.getPoint(i),s=t||(a.isVector2?new g:new E);return s.copy(n).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var r=this.getUtoTmapping(e);return this.getTangent(r,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var r=new E,i=[],a=[],n=[],s=new E,o=new el,h=0;h<=e;h++){var u=h/e;i[h]=this.getTangentAt(u,new E)}a[0]=new E,n[0]=new E;var l=Number.MAX_VALUE,c=Math.abs(i[0].x),p=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=l&&(l=c,r.set(1,0,0)),p<=l&&(l=p,r.set(0,1,0)),f<=l&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],s),n[0].crossVectors(i[0],a[0]);for(var d=1;d<=e;d++){if(a[d]=a[d-1].clone(),n[d]=n[d-1].clone(),s.crossVectors(i[d-1],i[d]),s.length()>Number.EPSILON){s.normalize();var y=Math.acos(clamp(i[d-1].dot(i[d]),-1,1));a[d].applyMatrix4(o.makeRotationAxis(s,y))}n[d].crossVectors(i[d],a[d])}if(!0===t){var m=Math.acos(clamp(a[0].dot(a[e]),-1,1));m/=e,i[0].dot(s.crossVectors(a[0],a[e]))>0&&(m=-m);for(var g=1;g<=e;g++)a[g].applyMatrix4(o.makeRotationAxis(i[g],m*g)),n[g].crossVectors(i[g],a[g])}return{tangents:i,normals:a,binormals:n}}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),Curve}(),rT=function(e){_inherits(EllipseCurve,e);var t=_createSuper(EllipseCurve);function EllipseCurve(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return _classCallCheck(this,EllipseCurve),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=n,e.aStartAngle=s,e.aEndAngle=o,e.aClockwise=h,e.aRotation=u,e}return _createClass(EllipseCurve,[{key:"getPoint",value:function(e,t){for(var r=t||new g,i=2*Math.PI,a=this.aEndAngle-this.aStartAngle,n=Math.abs(a)<Number.EPSILON;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(a=n?0:i),!0!==this.aClockwise||n||(a===i?a=-i:a-=i);var s=this.aStartAngle+e*a,o=this.aX+this.xRadius*Math.cos(s),h=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),c=o-this.aX,p=h-this.aY;o=c*u-p*l+this.aX,h=c*l+p*u+this.aY}return r.set(o,h)}},{key:"copy",value:function(e){return _get(_getPrototypeOf(EllipseCurve.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(EllipseCurve.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return _get(_getPrototypeOf(EllipseCurve.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),EllipseCurve}(rA),rP=function(e){_inherits(ArcCurve,e);var t=_createSuper(ArcCurve);function ArcCurve(e,r,i,a,n,s){var o;return _classCallCheck(this,ArcCurve),(o=t.call(this,e,r,i,i,a,n,s)).isArcCurve=!0,o.type="ArcCurve",o}return _createClass(ArcCurve)}(rT);function CubicPoly(){var e=0,t=0,r=0,i=0;function init(a,n,s,o){e=a,t=s,r=-3*a+3*n-2*s-o,i=2*a-2*n+s+o}return{initCatmullRom:function(e,t,r,i,a){init(t,r,a*(r-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,r,i,a,n,s){var o=(t-e)/a-(r-e)/(a+n)+(r-t)/n,h=(r-t)/n-(i-t)/(n+s)+(i-r)/s;init(t,r,o*=n,h*=n)},calc:function(a){var n=a*a;return e+t*a+r*n+i*(n*a)}}}var rL=new E,rO=new CubicPoly,rI=new CubicPoly,rB=new CubicPoly,rE=function(e){_inherits(CatmullRomCurve3,e);var t=_createSuper(CatmullRomCurve3);function CatmullRomCurve3(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return _classCallCheck(this,CatmullRomCurve3),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=n,e}return _createClass(CatmullRomCurve3,[{key:"getPoint",value:function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E,a=this.points,n=a.length,s=(n-(this.closed?0:1))*e,o=Math.floor(s),h=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/n)+1)*n:0===h&&o===n-1&&(o=n-2,h=1),this.closed||o>0?t=a[(o-1)%n]:(rL.subVectors(a[0],a[1]).add(a[0]),t=rL);var u=a[o%n],l=a[(o+1)%n];if(this.closed||o+2<n?r=a[(o+2)%n]:(rL.subVectors(a[n-1],a[n-2]).add(a[n-1]),r=rL),"centripetal"===this.curveType||"chordal"===this.curveType){var c="chordal"===this.curveType?.5:.25,p=Math.pow(t.distanceToSquared(u),c),f=Math.pow(u.distanceToSquared(l),c),d=Math.pow(l.distanceToSquared(r),c);f<1e-4&&(f=1),p<1e-4&&(p=f),d<1e-4&&(d=f),rO.initNonuniformCatmullRom(t.x,u.x,l.x,r.x,p,f,d),rI.initNonuniformCatmullRom(t.y,u.y,l.y,r.y,p,f,d),rB.initNonuniformCatmullRom(t.z,u.z,l.z,r.z,p,f,d)}else"catmullrom"===this.curveType&&(rO.initCatmullRom(t.x,u.x,l.x,r.x,this.tension),rI.initCatmullRom(t.y,u.y,l.y,r.y,this.tension),rB.initCatmullRom(t.z,u.z,l.z,r.z,this.tension));return i.set(rO.calc(h),rI.calc(h),rB.calc(h)),i}},{key:"copy",value:function(e){_get(_getPrototypeOf(CatmullRomCurve3.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(CatmullRomCurve3.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){_get(_getPrototypeOf(CatmullRomCurve3.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(new E().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),CatmullRomCurve3}(rA);function CatmullRom(e,t,r,i,a){var n=(i-t)*.5,s=(a-r)*.5,o=e*e;return(2*r-2*i+n+s)*(e*o)+(-3*r+3*i-2*n-s)*o+n*e+r}function QuadraticBezierP0(e,t){var r=1-e;return r*r*t}function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}function QuadraticBezierP2(e,t){return e*e*t}function QuadraticBezier(e,t,r,i){return QuadraticBezierP0(e,t)+QuadraticBezierP1(e,r)+QuadraticBezierP2(e,i)}function CubicBezierP0(e,t){var r=1-e;return r*r*r*t}function CubicBezierP1(e,t){var r=1-e;return 3*r*r*e*t}function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}function CubicBezierP3(e,t){return e*e*e*t}function CubicBezier(e,t,r,i,a){return CubicBezierP0(e,t)+CubicBezierP1(e,r)+CubicBezierP2(e,i)+CubicBezierP3(e,a)}var rR=function(e){_inherits(CubicBezierCurve,e);var t=_createSuper(CubicBezierCurve);function CubicBezierCurve(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new g,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new g;return _classCallCheck(this,CubicBezierCurve),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=n,e}return _createClass(CubicBezierCurve,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g,r=this.v0,i=this.v1,a=this.v2,n=this.v3;return t.set(CubicBezier(e,r.x,i.x,a.x,n.x),CubicBezier(e,r.y,i.y,a.y,n.y)),t}},{key:"copy",value:function(e){return _get(_getPrototypeOf(CubicBezierCurve.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(CubicBezierCurve.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return _get(_getPrototypeOf(CubicBezierCurve.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),CubicBezierCurve}(rA),rN=function(e){_inherits(CubicBezierCurve3,e);var t=_createSuper(CubicBezierCurve3);function CubicBezierCurve3(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new E,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new E;return _classCallCheck(this,CubicBezierCurve3),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=n,e}return _createClass(CubicBezierCurve3,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E,r=this.v0,i=this.v1,a=this.v2,n=this.v3;return t.set(CubicBezier(e,r.x,i.x,a.x,n.x),CubicBezier(e,r.y,i.y,a.y,n.y),CubicBezier(e,r.z,i.z,a.z,n.z)),t}},{key:"copy",value:function(e){return _get(_getPrototypeOf(CubicBezierCurve3.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(CubicBezierCurve3.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return _get(_getPrototypeOf(CubicBezierCurve3.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),CubicBezierCurve3}(rA),rG=function(e){_inherits(LineCurve,e);var t=_createSuper(LineCurve);function LineCurve(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new g,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g;return _classCallCheck(this,LineCurve),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=r,e.v2=i,e}return _createClass(LineCurve,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var r=t||new g;return r.copy(this.v2).sub(this.v1).normalize(),r}},{key:"copy",value:function(e){return _get(_getPrototypeOf(LineCurve.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(LineCurve.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _get(_getPrototypeOf(LineCurve.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),LineCurve}(rA),rF=function(e){_inherits(LineCurve3,e);var t=_createSuper(LineCurve3);function LineCurve3(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E;return _classCallCheck(this,LineCurve3),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=r,e.v2=i,e}return _createClass(LineCurve3,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return _get(_getPrototypeOf(LineCurve3.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(LineCurve3.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _get(_getPrototypeOf(LineCurve3.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),LineCurve3}(rA),rV=function(e){_inherits(QuadraticBezierCurve,e);var t=_createSuper(QuadraticBezierCurve);function QuadraticBezierCurve(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new g,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new g;return _classCallCheck(this,QuadraticBezierCurve),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return _createClass(QuadraticBezierCurve,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g,r=this.v0,i=this.v1,a=this.v2;return t.set(QuadraticBezier(e,r.x,i.x,a.x),QuadraticBezier(e,r.y,i.y,a.y)),t}},{key:"copy",value:function(e){return _get(_getPrototypeOf(QuadraticBezierCurve.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(QuadraticBezierCurve.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _get(_getPrototypeOf(QuadraticBezierCurve.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),QuadraticBezierCurve}(rA),rD=function(e){_inherits(QuadraticBezierCurve3,e);var t=_createSuper(QuadraticBezierCurve3);function QuadraticBezierCurve3(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new E;return _classCallCheck(this,QuadraticBezierCurve3),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return _createClass(QuadraticBezierCurve3,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new E,r=this.v0,i=this.v1,a=this.v2;return t.set(QuadraticBezier(e,r.x,i.x,a.x),QuadraticBezier(e,r.y,i.y,a.y),QuadraticBezier(e,r.z,i.z,a.z)),t}},{key:"copy",value:function(e){return _get(_getPrototypeOf(QuadraticBezierCurve3.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(QuadraticBezierCurve3.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return _get(_getPrototypeOf(QuadraticBezierCurve3.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),QuadraticBezierCurve3}(rA),rU=function(e){_inherits(SplineCurve,e);var t=_createSuper(SplineCurve);function SplineCurve(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck(this,SplineCurve),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=r,e}return _createClass(SplineCurve,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g,r=this.points,i=(r.length-1)*e,a=Math.floor(i),n=i-a,s=r[0===a?a:a-1],o=r[a],h=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return t.set(CatmullRom(n,s.x,o.x,h.x,u.x),CatmullRom(n,s.y,o.y,h.y,u.y)),t}},{key:"copy",value:function(e){_get(_getPrototypeOf(SplineCurve.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(SplineCurve.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){_get(_getPrototypeOf(SplineCurve.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(new g().fromArray(i))}return this}}]),SplineCurve}(rA),rj=Object.freeze({__proto__:null,ArcCurve:rP,CatmullRomCurve3:rE,CubicBezierCurve:rR,CubicBezierCurve3:rN,EllipseCurve:rT,LineCurve:rG,LineCurve3:rF,QuadraticBezierCurve:rV,QuadraticBezierCurve3:rD,SplineCurve:rU}),rW=function(e){_inherits(Path,e);var t=_createSuper(Path);function Path(e){var r;return _classCallCheck(this,Path),(r=t.call(this)).type="Path",r.currentPoint=new g,e&&r.setFromPoints(e),r}return _createClass(Path,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var r=new rG(this.currentPoint.clone(),new g(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,r,i){var a=new rV(this.currentPoint.clone(),new g(e,t),new g(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}},{key:"bezierCurveTo",value:function(e,t,r,i,a,n){var s=new rR(this.currentPoint.clone(),new g(e,t),new g(r,i),new g(a,n));return this.curves.push(s),this.currentPoint.set(a,n),this}},{key:"splineThru",value:function(e){var t=new rU([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,r,i,a,n){var s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,r,i,a,n),this}},{key:"absarc",value:function(e,t,r,i,a,n){return this.absellipse(e,t,r,r,i,a,n),this}},{key:"ellipse",value:function(e,t,r,i,a,n,s,o){var h=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+h,t+u,r,i,a,n,s,o),this}},{key:"absellipse",value:function(e,t,r,i,a,n,s,o){var h=new rT(e,t,r,i,a,n,s,o);if(this.curves.length>0){var u=h.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(h);var l=h.getPoint(1);return this.currentPoint.copy(l),this}},{key:"copy",value:function(e){return _get(_getPrototypeOf(Path.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(Path.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return _get(_getPrototypeOf(Path.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),Path}(function(e){_inherits(CurvePath,e);var t=_createSuper(CurvePath);function CurvePath(){var e;return _classCallCheck(this,CurvePath),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return _createClass(CurvePath,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new rG(t,e))}},{key:"getPoint",value:function(e,t){for(var r=e*this.getLength(),i=this.getCurveLengths(),a=0;a<i.length;){if(i[a]>=r){var n=i[a]-r,s=this.curves[a],o=s.getLength(),h=0===o?0:1-n/o;return s.getPointAt(h,t)}a++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,i=this.curves.length;r<i;r++)e.push(t+=this.curves[r].getLength());return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,r=[],i=0,a=this.curves;i<a.length;i++)for(var n=a[i],s=n.isEllipseCurve?2*t:n.isLineCurve||n.isLineCurve3?1:n.isSplineCurve?t*n.points.length:t,o=n.getPoints(s),h=0;h<o.length;h++){var u=o[h];e&&e.equals(u)||(r.push(u),e=u)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r}},{key:"copy",value:function(e){_get(_getPrototypeOf(CurvePath.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(CurvePath.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){_get(_getPrototypeOf(CurvePath.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(new rj[i.type]().fromJSON(i))}return this}}]),CurvePath}(rA)),rJ=function(e){_inherits(LatheGeometry,e);var t=_createSuper(LatheGeometry);function LatheGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new g(0,-.5),new g(.5,0),new g(0,.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;_classCallCheck(this,LatheGeometry),(e=t.call(this)).type="LatheGeometry",e.parameters={points:r,segments:i,phiStart:a,phiLength:n},i=Math.floor(i),n=clamp(n,0,2*Math.PI);for(var s=[],o=[],h=[],u=[],l=[],c=1/i,p=new E,f=new g,d=new E,y=new E,m=new E,x=0,M=0,k=0;k<=r.length-1;k++)switch(k){case 0:x=r[k+1].x-r[k].x,M=r[k+1].y-r[k].y,d.x=1*M,d.y=-x,d.z=0*M,m.copy(d),d.normalize(),u.push(d.x,d.y,d.z);break;case r.length-1:u.push(m.x,m.y,m.z);break;default:x=r[k+1].x-r[k].x,M=r[k+1].y-r[k].y,d.x=1*M,d.y=-x,d.z=0*M,y.copy(d),d.x+=m.x,d.y+=m.y,d.z+=m.z,d.normalize(),u.push(d.x,d.y,d.z),m.copy(y)}for(var b=0;b<=i;b++)for(var w=a+b*c*n,_=Math.sin(w),S=Math.cos(w),C=0;C<=r.length-1;C++){p.x=r[C].x*_,p.y=r[C].y,p.z=r[C].x*S,o.push(p.x,p.y,p.z),f.x=b/i,f.y=C/(r.length-1),h.push(f.x,f.y);var z=u[3*C+0]*_,A=u[3*C+1],T=u[3*C+0]*S;l.push(z,A,T)}for(var P=0;P<i;P++)for(var L=0;L<r.length-1;L++){var O=L+P*r.length,I=O+r.length,B=O+r.length+1,R=O+1;s.push(O,I,R),s.push(B,R,I)}return e.setIndex(s),e.setAttribute("position",new e1(o,3)),e.setAttribute("uv",new e1(h,2)),e.setAttribute("normal",new e1(l,3)),e}return _createClass(LatheGeometry,null,[{key:"fromJSON",value:function(e){return new LatheGeometry(e.points,e.segments,e.phiStart,e.phiLength)}}]),LatheGeometry}(e9),rq=function(e){_inherits(CapsuleGeometry,e);var t=_createSuper(CapsuleGeometry);function CapsuleGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;_classCallCheck(this,CapsuleGeometry);var s=new rW;return s.absarc(0,-i/2,r,1.5*Math.PI,0),s.absarc(0,i/2,r,0,.5*Math.PI),(e=t.call(this,s.getPoints(a),n)).type="CapsuleGeometry",e.parameters={radius:r,height:i,capSegments:a,radialSegments:n},e}return _createClass(CapsuleGeometry,null,[{key:"fromJSON",value:function(e){return new CapsuleGeometry(e.radius,e.length,e.capSegments,e.radialSegments)}}]),CapsuleGeometry}(rJ),rH=function(e){_inherits(CircleGeometry,e);var t=_createSuper(CircleGeometry);function CircleGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;_classCallCheck(this,CircleGeometry),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:r,segments:i,thetaStart:a,thetaLength:n},i=Math.max(3,i);var s=[],o=[],h=[],u=[],l=new E,c=new g;o.push(0,0,0),h.push(0,0,1),u.push(.5,.5);for(var p=0,f=3;p<=i;p++,f+=3){var d=a+p/i*n;l.x=r*Math.cos(d),l.y=r*Math.sin(d),o.push(l.x,l.y,l.z),h.push(0,0,1),c.x=(o[f]/r+1)/2,c.y=(o[f+1]/r+1)/2,u.push(c.x,c.y)}for(var y=1;y<=i;y++)s.push(y,y+1,0);return e.setIndex(s),e.setAttribute("position",new e1(o,3)),e.setAttribute("normal",new e1(h,3)),e.setAttribute("uv",new e1(u,2)),e}return _createClass(CircleGeometry,null,[{key:"fromJSON",value:function(e){return new CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),CircleGeometry}(e9),rZ=function(e){_inherits(CylinderGeometry,e);var t=_createSuper(CylinderGeometry);function CylinderGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;_classCallCheck(this,CylinderGeometry),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:h,thetaLength:u};var l=_assertThisInitialized(e);n=Math.floor(n),s=Math.floor(s);var c=[],p=[],f=[],d=[],y=0,m=[],x=a/2,M=0;function generateCap(e){for(var t=y,a=new g,s=new E,o=0,m=!0===e?r:i,k=!0===e?1:-1,b=1;b<=n;b++)p.push(0,x*k,0),f.push(0,k,0),d.push(.5,.5),y++;for(var w=y,_=0;_<=n;_++){var S=_/n*u+h,C=Math.cos(S),z=Math.sin(S);s.x=m*z,s.y=x*k,s.z=m*C,p.push(s.x,s.y,s.z),f.push(0,k,0),a.x=.5*C+.5,a.y=.5*z*k+.5,d.push(a.x,a.y),y++}for(var A=0;A<n;A++){var T=t+A,P=w+A;!0===e?c.push(P,P+1,T):c.push(P+1,P,T),o+=3}l.addGroup(M,o,!0===e?1:2),M+=o}return function(){for(var e=new E,t=new E,o=0,g=(i-r)/a,k=0;k<=s;k++){for(var b=[],w=k/s,_=w*(i-r)+r,S=0;S<=n;S++){var C=S/n,z=C*u+h,A=Math.sin(z),T=Math.cos(z);t.x=_*A,t.y=-w*a+x,t.z=_*T,p.push(t.x,t.y,t.z),e.set(A,g,T).normalize(),f.push(e.x,e.y,e.z),d.push(C,1-w),b.push(y++)}m.push(b)}for(var P=0;P<n;P++)for(var L=0;L<s;L++){var O=m[L][P],I=m[L+1][P],B=m[L+1][P+1],R=m[L][P+1];c.push(O,I,R),c.push(I,B,R),o+=6}l.addGroup(M,o,0),M+=o}(),!1===o&&(r>0&&generateCap(!0),i>0&&generateCap(!1)),e.setIndex(c),e.setAttribute("position",new e1(p,3)),e.setAttribute("normal",new e1(f,3)),e.setAttribute("uv",new e1(d,2)),e}return _createClass(CylinderGeometry,null,[{key:"fromJSON",value:function(e){return new CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),CylinderGeometry}(e9),rX=function(e){_inherits(ConeGeometry,e);var t=_createSuper(ConeGeometry);function ConeGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return _classCallCheck(this,ConeGeometry),(e=t.call(this,0,r,i,a,n,s,o,h)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:a,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:h},e}return _createClass(ConeGeometry,null,[{key:"fromJSON",value:function(e){return new ConeGeometry(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),ConeGeometry}(rZ),rY=function(e){_inherits(PolyhedronGeometry,e);var t=_createSuper(PolyhedronGeometry);function PolyhedronGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,PolyhedronGeometry),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:r,indices:i,radius:a,detail:n};var s=[],o=[];function subdivideFace(e,t,r,i){for(var a=i+1,n=[],s=0;s<=a;s++){n[s]=[];for(var o=e.clone().lerp(r,s/a),h=t.clone().lerp(r,s/a),u=a-s,l=0;l<=u;l++)0===l&&s===a?n[s][l]=o:n[s][l]=o.clone().lerp(h,l/u)}for(var c=0;c<a;c++)for(var p=0;p<2*(a-c)-1;p++){var f=Math.floor(p/2);p%2==0?(pushVertex(n[c][f+1]),pushVertex(n[c+1][f]),pushVertex(n[c][f])):(pushVertex(n[c][f+1]),pushVertex(n[c+1][f+1]),pushVertex(n[c+1][f]))}}function applyRadius(e){for(var t=new E,r=0;r<s.length;r+=3)t.x=s[r+0],t.y=s[r+1],t.z=s[r+2],t.normalize().multiplyScalar(e),s[r+0]=t.x,s[r+1]=t.y,s[r+2]=t.z}function generateUVs(){for(var e=new E,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var r=azimuth(e)/2/Math.PI+.5,i=inclination(e)/Math.PI+.5;o.push(r,1-i)}correctUVs(),correctSeam()}function correctSeam(){for(var e=0;e<o.length;e+=6){var t=o[e+0],r=o[e+2],i=o[e+4],a=Math.max(t,r,i),n=Math.min(t,r,i);a>.9&&n<.1&&(t<.2&&(o[e+0]+=1),r<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}function pushVertex(e){s.push(e.x,e.y,e.z)}function getVertexByIndex(e,t){var i=3*e;t.x=r[i+0],t.y=r[i+1],t.z=r[i+2]}function correctUVs(){for(var e=new E,t=new E,r=new E,i=new E,a=new g,n=new g,h=new g,u=0,l=0;u<s.length;u+=9,l+=6){e.set(s[u+0],s[u+1],s[u+2]),t.set(s[u+3],s[u+4],s[u+5]),r.set(s[u+6],s[u+7],s[u+8]),a.set(o[l+0],o[l+1]),n.set(o[l+2],o[l+3]),h.set(o[l+4],o[l+5]),i.copy(e).add(t).add(r).divideScalar(3);var c=azimuth(i);correctUV(a,l+0,e,c),correctUV(n,l+2,t,c),correctUV(h,l+4,r,c)}}function correctUV(e,t,r,i){i<0&&1===e.x&&(o[t]=e.x-1),0===r.x&&0===r.z&&(o[t]=i/2/Math.PI+.5)}function azimuth(e){return Math.atan2(e.z,-e.x)}function inclination(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return function(e){for(var t=new E,r=new E,a=new E,n=0;n<i.length;n+=3)getVertexByIndex(i[n+0],t),getVertexByIndex(i[n+1],r),getVertexByIndex(i[n+2],a),subdivideFace(t,r,a,e)}(n),applyRadius(a),generateUVs(),e.setAttribute("position",new e1(s,3)),e.setAttribute("normal",new e1(s.slice(),3)),e.setAttribute("uv",new e1(o,2)),0===n?e.computeVertexNormals():e.normalizeNormals(),e}return _createClass(PolyhedronGeometry,null,[{key:"fromJSON",value:function(e){return new PolyhedronGeometry(e.vertices,e.indices,e.radius,e.details)}}]),PolyhedronGeometry}(e9),rQ=function(e){_inherits(DodecahedronGeometry,e);var t=_createSuper(DodecahedronGeometry);function DodecahedronGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,DodecahedronGeometry);var a=(1+Math.sqrt(5))/2,n=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-a,0,-n,a,0,n,-a,0,n,a,-n,-a,0,-n,a,0,n,-a,0,n,a,0,-a,0,-n,a,0,-n,-a,0,n,a,0,n];return(e=t.call(this,s,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],r,i)).type="DodecahedronGeometry",e.parameters={radius:r,detail:i},e}return _createClass(DodecahedronGeometry,null,[{key:"fromJSON",value:function(e){return new DodecahedronGeometry(e.radius,e.detail)}}]),DodecahedronGeometry}(rY),rK=new E,r$=new E,r0=new E,r1=new eq,r2=function(e){_inherits(EdgesGeometry,e);var t=_createSuper(EdgesGeometry);function EdgesGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(_classCallCheck(this,EdgesGeometry),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=Math.cos(d*i),n=r.getIndex(),s=r.getAttribute("position"),o=n?n.count:s.count,h=[0,0,0],u=["a","b","c"],l=[,,,],c={},p=[],f=0;f<o;f+=3){n?(h[0]=n.getX(f),h[1]=n.getX(f+1),h[2]=n.getX(f+2)):(h[0]=f,h[1]=f+1,h[2]=f+2);var y=r1.a,m=r1.b,g=r1.c;if(y.fromBufferAttribute(s,h[0]),m.fromBufferAttribute(s,h[1]),g.fromBufferAttribute(s,h[2]),r1.getNormal(r0),l[0]="".concat(Math.round(1e4*y.x),",").concat(Math.round(1e4*y.y),",").concat(Math.round(1e4*y.z)),l[1]="".concat(Math.round(1e4*m.x),",").concat(Math.round(1e4*m.y),",").concat(Math.round(1e4*m.z)),l[2]="".concat(Math.round(1e4*g.x),",").concat(Math.round(1e4*g.y),",").concat(Math.round(1e4*g.z)),l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(var x=0;x<3;x++){var M=(x+1)%3,k=l[x],b=l[M],w=r1[u[x]],_=r1[u[M]],S="".concat(k,"_").concat(b),C="".concat(b,"_").concat(k);C in c&&c[C]?(r0.dot(c[C].normal)<=a&&(p.push(w.x,w.y,w.z),p.push(_.x,_.y,_.z)),c[C]=null):S in c||(c[S]={index0:h[x],index1:h[M],normal:r0.clone()})}}for(var z in c)if(c[z]){var A=c[z],T=A.index0,P=A.index1;rK.fromBufferAttribute(s,T),r$.fromBufferAttribute(s,P),p.push(rK.x,rK.y,rK.z),p.push(r$.x,r$.y,r$.z)}e.setAttribute("position",new e1(p,3))}return e}return _createClass(EdgesGeometry)}(e9),r3=function(e){_inherits(Shape,e);var t=_createSuper(Shape);function Shape(e){var r;return _classCallCheck(this,Shape),(r=t.call(this,e)).uuid=generateUUID(),r.type="Shape",r.holes=[],r}return _createClass(Shape,[{key:"getPointsHoles",value:function(e){for(var t=[],r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){_get(_getPrototypeOf(Shape.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(Shape.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){_get(_getPrototypeOf(Shape.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(new rW().fromJSON(i))}return this}}]),Shape}(rW),r5={triangulate:function(e,t){var r,i,a,n,s,o,h,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,l=t&&t.length,c=l?t[0]*u:e.length,p=linkedList(e,0,c,u,!0),f=[];if(!p||p.next===p.prev)return f;if(l&&(p=eliminateHoles(e,t,p,u)),e.length>80*u){r=a=e[0],i=n=e[1];for(var d=u;d<c;d+=u)s=e[d],o=e[d+1],s<r&&(r=s),o<i&&(i=o),s>a&&(a=s),o>n&&(n=o);h=0!==(h=Math.max(a-r,n-i))?32767/h:0}return earcutLinked(p,f,u,r,i,h,0),f}};function linkedList(e,t,r,i,a){var n,s;if(a===signedArea(e,t,r,i)>0)for(n=t;n<r;n+=i)s=insertNode(n,e[n],e[n+1],s);else for(n=r-i;n>=t;n-=i)s=insertNode(n,e[n],e[n+1],s);return s&&equals(s,s.next)&&(removeNode(s),s=s.next),s}function filterPoints(e,t){if(!e)return e;t||(t=e);var r,i=e;do if(r=!1,!i.steiner&&(equals(i,i.next)||0===area(i.prev,i,i.next))){if(removeNode(i),(i=t=i.prev)===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function earcutLinked(e,t,r,i,a,n,s){if(e){!s&&n&&indexCurve(e,i,a,n);for(var o,h,u=e;e.prev!==e.next;){if(o=e.prev,h=e.next,n?isEarHashed(e,i,a,n):isEar(e)){t.push(o.i/r|0),t.push(e.i/r|0),t.push(h.i/r|0),removeNode(e),e=h.next,u=h.next;continue}if((e=h)===u){s?1===s?earcutLinked(e=cureLocalIntersections(filterPoints(e),t,r),t,r,i,a,n,2):2===s&&splitEarcut(e,t,r,i,a,n):earcutLinked(filterPoints(e),t,r,i,a,n,1);break}}}}function isEar(e){var t=e.prev,r=e.next;if(area(t,e,r)>=0)return!1;for(var i=t.x,a=e.x,n=r.x,s=t.y,o=e.y,h=r.y,u=i<a?i<n?i:n:a<n?a:n,l=s<o?s<h?s:h:o<h?o:h,c=i>a?i>n?i:n:a>n?a:n,p=s>o?s>h?s:h:o>h?o:h,f=r.next;f!==t;){if(f.x>=u&&f.x<=c&&f.y>=l&&f.y<=p&&pointInTriangle(i,s,a,o,n,h,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function isEarHashed(e,t,r,i){var a=e.prev,n=e.next;if(area(a,e,n)>=0)return!1;for(var s=a.x,o=e.x,h=n.x,u=a.y,l=e.y,c=n.y,p=s<o?s<h?s:h:o<h?o:h,f=u<l?u<c?u:c:l<c?l:c,d=s>o?s>h?s:h:o>h?o:h,y=u>l?u>c?u:c:l>c?l:c,m=zOrder(p,f,t,r,i),g=zOrder(d,y,t,r,i),x=e.prevZ,M=e.nextZ;x&&x.z>=m&&M&&M.z<=g;){if(x.x>=p&&x.x<=d&&x.y>=f&&x.y<=y&&x!==a&&x!==n&&pointInTriangle(s,u,o,l,h,c,x.x,x.y)&&area(x.prev,x,x.next)>=0||(x=x.prevZ,M.x>=p&&M.x<=d&&M.y>=f&&M.y<=y&&M!==a&&M!==n&&pointInTriangle(s,u,o,l,h,c,M.x,M.y)&&area(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;x&&x.z>=m;){if(x.x>=p&&x.x<=d&&x.y>=f&&x.y<=y&&x!==a&&x!==n&&pointInTriangle(s,u,o,l,h,c,x.x,x.y)&&area(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;M&&M.z<=g;){if(M.x>=p&&M.x<=d&&M.y>=f&&M.y<=y&&M!==a&&M!==n&&pointInTriangle(s,u,o,l,h,c,M.x,M.y)&&area(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function cureLocalIntersections(e,t,r){var i=e;do{var a=i.prev,n=i.next.next;!equals(a,n)&&intersects(a,i,i.next,n)&&locallyInside(a,n)&&locallyInside(n,a)&&(t.push(a.i/r|0),t.push(i.i/r|0),t.push(n.i/r|0),removeNode(i),removeNode(i.next),i=e=n),i=i.next}while(i!==e);return filterPoints(i)}function splitEarcut(e,t,r,i,a,n){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&isValidDiagonal(s,o)){var h=splitPolygon(s,o);s=filterPoints(s,s.next),h=filterPoints(h,h.next),earcutLinked(s,t,r,i,a,n,0),earcutLinked(h,t,r,i,a,n,0);return}o=o.next}s=s.next}while(s!==e)}function eliminateHoles(e,t,r,i){var a,n,s,o,h,u=[];for(a=0,n=t.length;a<n;a++)s=t[a]*i,o=a<n-1?t[a+1]*i:e.length,(h=linkedList(e,s,o,i,!1))===h.next&&(h.steiner=!0),u.push(getLeftmost(h));for(u.sort(compareX),a=0;a<u.length;a++)r=eliminateHole(u[a],r);return r}function compareX(e,t){return e.x-t.x}function eliminateHole(e,t){var r=findHoleBridge(e,t);if(!r)return t;var i=splitPolygon(r,e);return filterPoints(i,i.next),filterPoints(r,r.next)}function findHoleBridge(e,t){var r,i=t,a=-1/0,n=e.x,s=e.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var o=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=n&&o>a&&(a=o,r=i.x<i.next.x?i:i.next,o===n))return r}i=i.next}while(i!==t);if(!r)return null;var h,u=r,l=r.x,c=r.y,p=1/0;i=r;do n>=i.x&&i.x>=l&&n!==i.x&&pointInTriangle(s<c?n:a,s,l,c,s<c?a:n,s,i.x,i.y)&&(h=Math.abs(s-i.y)/(n-i.x),locallyInside(i,e)&&(h<p||h===p&&(i.x>r.x||i.x===r.x&&sectorContainsSector(r,i)))&&(r=i,p=h)),i=i.next;while(i!==u);return r}function sectorContainsSector(e,t){return 0>area(e.prev,e,t.prev)&&0>area(t.next,e,e.next)}function indexCurve(e,t,r,i){var a=e;do 0===a.z&&(a.z=zOrder(a.x,a.y,t,r,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,sortLinked(a)}function sortLinked(e){var t,r,i,a,n,s,o,h,u=1;do{for(r=e,e=null,n=null,s=0;r;){for(s++,i=r,o=0,t=0;t<u&&(o++,i=i.nextZ);t++);for(h=u;o>0||h>0&&i;)0!==o&&(0===h||!i||r.z<=i.z)?(a=r,r=r.nextZ,o--):(a=i,i=i.nextZ,h--),n?n.nextZ=a:e=a,a.prevZ=n,n=a;r=i}n.nextZ=null,u*=2}while(s>1);return e}function zOrder(e,t,r,i,a){return(e=((e=((e=((e=((e=(e-r)*a|0)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)|(t=((t=((t=((t=((t=(t-i)*a|0)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)<<1}function getLeftmost(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function pointInTriangle(e,t,r,i,a,n,s,o){return(a-s)*(t-o)>=(e-s)*(n-o)&&(e-s)*(i-o)>=(r-s)*(t-o)&&(r-s)*(n-o)>=(a-s)*(i-o)}function isValidDiagonal(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!intersectsPolygon(e,t)&&(locallyInside(e,t)&&locallyInside(t,e)&&middleInside(e,t)&&(area(e.prev,e,t.prev)||area(e,t.prev,t))||equals(e,t)&&area(e.prev,e,e.next)>0&&area(t.prev,t,t.next)>0)}function area(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function equals(e,t){return e.x===t.x&&e.y===t.y}function intersects(e,t,r,i){var a=sign(area(e,t,r)),n=sign(area(e,t,i)),s=sign(area(r,i,e)),o=sign(area(r,i,t));return!!(a!==n&&s!==o||0===a&&onSegment(e,r,t)||0===n&&onSegment(e,i,t)||0===s&&onSegment(r,e,i)||0===o&&onSegment(r,t,i))}function onSegment(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function sign(e){return e>0?1:e<0?-1:0}function intersectsPolygon(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&intersects(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,t){return 0>area(e.prev,e,e.next)?area(e,t,e.next)>=0&&area(e,e.prev,t)>=0:0>area(e,t,e.prev)||0>area(e,e.next,t)}function middleInside(e,t){var r=e,i=!1,a=(e.x+t.x)/2,n=(e.y+t.y)/2;do r.y>n!=r.next.y>n&&r.next.y!==r.y&&a<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function splitPolygon(e,t){var r=new Node(e.i,e.x,e.y),i=new Node(t.i,t.x,t.y),a=e.next,n=t.prev;return e.next=t,t.prev=e,r.next=a,a.prev=r,i.next=r,r.prev=i,n.next=i,i.prev=n,i}function insertNode(e,t,r,i){var a=new Node(e,t,r);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,t,r,i){for(var a=0,n=t,s=r-i;n<r;n+=i)a+=(e[s]-e[n])*(e[n+1]+e[s+1]),s=n;return a}var r4=function(){function ShapeUtils(){_classCallCheck(this,ShapeUtils)}return _createClass(ShapeUtils,null,[{key:"area",value:function(e){for(var t=e.length,r=0,i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return .5*r}},{key:"isClockWise",value:function(e){return 0>ShapeUtils.area(e)}},{key:"triangulateShape",value:function(e,t){var r=[],i=[],a=[];removeDupEndPts(e),addContour(r,e);var n=e.length;t.forEach(removeDupEndPts);for(var s=0;s<t.length;s++)i.push(n),n+=t[s].length,addContour(r,t[s]);for(var o=r5.triangulate(r,i),h=0;h<o.length;h+=3)a.push(o.slice(h,h+3));return a}}]),ShapeUtils}();function removeDupEndPts(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function addContour(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var r6=function(e){_inherits(ExtrudeGeometry,e);var t=_createSuper(ExtrudeGeometry);function ExtrudeGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r3([new g(.5,.5),new g(-.5,.5),new g(-.5,-.5),new g(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,ExtrudeGeometry),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=_assertThisInitialized(e),n=[],s=[],o=0,h=r.length;o<h;o++)addShape(r[o]);function addShape(e){var t,r=[],o=void 0!==i.curveSegments?i.curveSegments:12,h=void 0!==i.steps?i.steps:1,u=void 0!==i.depth?i.depth:1,l=void 0===i.bevelEnabled||i.bevelEnabled,c=void 0!==i.bevelThickness?i.bevelThickness:.2,p=void 0!==i.bevelSize?i.bevelSize:c-.1,f=void 0!==i.bevelOffset?i.bevelOffset:0,d=void 0!==i.bevelSegments?i.bevelSegments:3,y=i.extrudePath,m=void 0!==i.UVGenerator?i.UVGenerator:r8,x=!1;y&&(t=y.getSpacedPoints(h),x=!0,l=!1,F=y.computeFrenetFrames(h,!1),V=new E,D=new E,U=new E),l||(d=0,c=0,p=0,f=0);var M=e.extractPoints(o),k=M.shape,b=M.holes;if(!r4.isClockWise(k)){k=k.reverse();for(var w=0,_=b.length;w<_;w++){var S=b[w];r4.isClockWise(S)&&(b[w]=S.reverse())}}for(var C=r4.triangulateShape(k,b),z=k,A=0,T=b.length;A<T;A++){var P=b[A];k=k.concat(P)}function scalePt2(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var L=k.length,O=C.length;function getBevelVec(e,t,r){var i,a,n,s=e.x-t.x,o=e.y-t.y,h=r.x-e.x,u=r.y-e.y,l=s*s+o*o;if(Math.abs(s*u-o*h)>Number.EPSILON){var c=Math.sqrt(l),p=Math.sqrt(h*h+u*u),f=t.x-o/c,d=t.y+s/c,y=((r.x-u/p-f)*u-(r.y+h/p-d)*h)/(s*u-o*h),m=(i=f+s*y-e.x)*i+(a=d+o*y-e.y)*a;if(m<=2)return new g(i,a);n=Math.sqrt(m/2)}else{var x=!1;s>Number.EPSILON?h>Number.EPSILON&&(x=!0):s<-Number.EPSILON?h<-Number.EPSILON&&(x=!0):Math.sign(o)===Math.sign(u)&&(x=!0),x?(i=-o,a=s,n=Math.sqrt(l)):(i=s,a=o,n=Math.sqrt(l/2))}return new g(i/n,a/n)}for(var I=[],B=0,R=z.length,N=R-1,G=B+1;B<R;B++,N++,G++)N===R&&(N=0),G===R&&(G=0),I[B]=getBevelVec(z[B],z[N],z[G]);for(var F,V,D,U,j,W=[],J=I.concat(),q=0,H=b.length;q<H;q++){var Z=b[q];j=[];for(var X=0,Y=Z.length,Q=Y-1,K=X+1;X<Y;X++,Q++,K++)Q===Y&&(Q=0),K===Y&&(K=0),j[X]=getBevelVec(Z[X],Z[Q],Z[K]);W.push(j),J=J.concat(j)}for(var $=0;$<d;$++){for(var ee=$/d,et=c*Math.cos(ee*Math.PI/2),er=p*Math.sin(ee*Math.PI/2)+f,ei=0,ea=z.length;ei<ea;ei++){var en=scalePt2(z[ei],I[ei],er);v(en.x,en.y,-et)}for(var es=0,eo=b.length;es<eo;es++){var eh=b[es];j=W[es];for(var eu=0,el=eh.length;eu<el;eu++){var ec=scalePt2(eh[eu],j[eu],er);v(ec.x,ec.y,-et)}}}for(var ep=p+f,ef=0;ef<L;ef++){var ed=l?scalePt2(k[ef],J[ef],ep):k[ef];x?(D.copy(F.normals[0]).multiplyScalar(ed.x),V.copy(F.binormals[0]).multiplyScalar(ed.y),U.copy(t[0]).add(D).add(V),v(U.x,U.y,U.z)):v(ed.x,ed.y,0)}for(var ey=1;ey<=h;ey++)for(var ev=0;ev<L;ev++){var em=l?scalePt2(k[ev],J[ev],ep):k[ev];x?(D.copy(F.normals[ey]).multiplyScalar(em.x),V.copy(F.binormals[ey]).multiplyScalar(em.y),U.copy(t[ey]).add(D).add(V),v(U.x,U.y,U.z)):v(em.x,em.y,u/h*ey)}for(var eg=d-1;eg>=0;eg--){for(var ex=eg/d,eM=c*Math.cos(ex*Math.PI/2),ek=p*Math.sin(ex*Math.PI/2)+f,eb=0,ew=z.length;eb<ew;eb++){var e_=scalePt2(z[eb],I[eb],ek);v(e_.x,e_.y,u+eM)}for(var eS=0,eC=b.length;eS<eC;eS++){var ez=b[eS];j=W[eS];for(var eA=0,eT=ez.length;eA<eT;eA++){var eP=scalePt2(ez[eA],j[eA],ek);x?v(eP.x,eP.y+t[h-1].y,t[h-1].x+eM):v(eP.x,eP.y,u+eM)}}}function buildSideFaces(){var e=n.length/3,t=0;sidewalls(z,0),t+=z.length;for(var r=0,i=b.length;r<i;r++){var s=b[r];sidewalls(s,t),t+=s.length}a.addGroup(e,n.length/3-e,1)}function sidewalls(e,t){for(var r=e.length;--r>=0;){var i=r,a=r-1;a<0&&(a=e.length-1);for(var n=0,s=h+2*d;n<s;n++){var o=L*n,u=L*(n+1);f4(t+i+o,t+a+o,t+a+u,t+i+u)}}}function v(e,t,i){r.push(e),r.push(t),r.push(i)}function f3(e,t,r){addVertex(e),addVertex(t),addVertex(r);var i=n.length/3,s=m.generateTopUV(a,n,i-3,i-2,i-1);addUV(s[0]),addUV(s[1]),addUV(s[2])}function f4(e,t,r,i){addVertex(e),addVertex(t),addVertex(i),addVertex(t),addVertex(r),addVertex(i);var s=n.length/3,o=m.generateSideWallUV(a,n,s-6,s-3,s-2,s-1);addUV(o[0]),addUV(o[1]),addUV(o[3]),addUV(o[1]),addUV(o[2]),addUV(o[3])}function addVertex(e){n.push(r[3*e+0]),n.push(r[3*e+1]),n.push(r[3*e+2])}function addUV(e){s.push(e.x),s.push(e.y)}(function(){var e=n.length/3;if(l){for(var t=0*L,r=0;r<O;r++){var i=C[r];f3(i[2]+t,i[1]+t,i[0]+t)}t=L*(h+2*d);for(var s=0;s<O;s++){var o=C[s];f3(o[0]+t,o[1]+t,o[2]+t)}}else{for(var u=0;u<O;u++){var c=C[u];f3(c[2],c[1],c[0])}for(var p=0;p<O;p++){var f=C[p];f3(f[0]+L*h,f[1]+L*h,f[2]+L*h)}}a.addGroup(e,n.length/3-e,0)})(),buildSideFaces()}return e.setAttribute("position",new e1(n,3)),e.setAttribute("uv",new e1(s,2)),e.computeVertexNormals(),e}return _createClass(ExtrudeGeometry,[{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(ExtrudeGeometry.prototype),"toJSON",this).call(this);return toJSON$1(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var n=t[e.shapes[i]];r.push(n)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=new rj[s.type]().fromJSON(s)),new ExtrudeGeometry(r,e.options)}}]),ExtrudeGeometry}(e9),r8={generateTopUV:function(e,t,r,i,a){var n=t[3*r],s=t[3*r+1],o=t[3*i],h=t[3*i+1],u=t[3*a],l=t[3*a+1];return[new g(n,s),new g(o,h),new g(u,l)]},generateSideWallUV:function(e,t,r,i,a,n){var s=t[3*r],o=t[3*r+1],h=t[3*r+2],u=t[3*i],l=t[3*i+1],c=t[3*i+2],p=t[3*a],f=t[3*a+1],d=t[3*a+2],y=t[3*n],m=t[3*n+1],x=t[3*n+2];return Math.abs(o-l)<Math.abs(s-u)?[new g(s,1-h),new g(u,1-c),new g(p,1-d),new g(y,1-x)]:[new g(o,1-h),new g(l,1-c),new g(f,1-d),new g(m,1-x)]}};function toJSON$1(e,t,r){if(r.shapes=[],Array.isArray(e))for(var i=0,a=e.length;i<a;i++){var n=e[i];r.shapes.push(n.uuid)}else r.shapes.push(e.uuid);return r.options=Object.assign({},t),void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}var r7=function(e){_inherits(IcosahedronGeometry,e);var t=_createSuper(IcosahedronGeometry);function IcosahedronGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,IcosahedronGeometry);var a=(1+Math.sqrt(5))/2,n=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1];return(e=t.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,i)).type="IcosahedronGeometry",e.parameters={radius:r,detail:i},e}return _createClass(IcosahedronGeometry,null,[{key:"fromJSON",value:function(e){return new IcosahedronGeometry(e.radius,e.detail)}}]),IcosahedronGeometry}(rY),r9=function(e){_inherits(OctahedronGeometry,e);var t=_createSuper(OctahedronGeometry);function OctahedronGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _classCallCheck(this,OctahedronGeometry),(e=t.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return _createClass(OctahedronGeometry,null,[{key:"fromJSON",value:function(e){return new OctahedronGeometry(e.radius,e.detail)}}]),OctahedronGeometry}(rY),ie=function(e){_inherits(RingGeometry,e);var t=_createSuper(RingGeometry);function RingGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;_classCallCheck(this,RingGeometry),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:r,outerRadius:i,thetaSegments:a,phiSegments:n,thetaStart:s,thetaLength:o},a=Math.max(3,a);for(var h=[],u=[],l=[],c=[],p=r,f=(i-r)/(n=Math.max(1,n)),d=new E,y=new g,m=0;m<=n;m++){for(var x=0;x<=a;x++){var M=s+x/a*o;d.x=p*Math.cos(M),d.y=p*Math.sin(M),u.push(d.x,d.y,d.z),l.push(0,0,1),y.x=(d.x/i+1)/2,y.y=(d.y/i+1)/2,c.push(y.x,y.y)}p+=f}for(var k=0;k<n;k++)for(var b=k*(a+1),w=0;w<a;w++){var _=w+b,S=_+a+1,C=_+a+2,z=_+1;h.push(_,S,z),h.push(S,C,z)}return e.setIndex(h),e.setAttribute("position",new e1(u,3)),e.setAttribute("normal",new e1(l,3)),e.setAttribute("uv",new e1(c,2)),e}return _createClass(RingGeometry,null,[{key:"fromJSON",value:function(e){return new RingGeometry(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),RingGeometry}(e9),it=function(e){_inherits(ShapeGeometry,e);var t=_createSuper(ShapeGeometry);function ShapeGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r3([new g(0,.5),new g(-.5,-.5),new g(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;_classCallCheck(this,ShapeGeometry),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],n=[],s=[],o=[],h=0,u=0;if(!1===Array.isArray(r))addShape(r);else for(var l=0;l<r.length;l++)addShape(r[l]),e.addGroup(h,u,l),h+=u,u=0;function addShape(e){var t=n.length/3,r=e.extractPoints(i),h=r.shape,l=r.holes;!1===r4.isClockWise(h)&&(h=h.reverse());for(var c=0,p=l.length;c<p;c++){var f=l[c];!0===r4.isClockWise(f)&&(l[c]=f.reverse())}for(var d=r4.triangulateShape(h,l),y=0,m=l.length;y<m;y++){var g=l[y];h=h.concat(g)}for(var x=0,M=h.length;x<M;x++){var k=h[x];n.push(k.x,k.y,0),s.push(0,0,1),o.push(k.x,k.y)}for(var b=0,w=d.length;b<w;b++){var _=d[b],S=_[0]+t,C=_[1]+t,z=_[2]+t;a.push(S,C,z),u+=3}}return e.setIndex(a),e.setAttribute("position",new e1(n,3)),e.setAttribute("normal",new e1(s,3)),e.setAttribute("uv",new e1(o,2)),e}return _createClass(ShapeGeometry,[{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(ShapeGeometry.prototype),"toJSON",this).call(this);return _toJSON(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var n=t[e.shapes[i]];r.push(n)}return new ShapeGeometry(r,e.curveSegments)}}]),ShapeGeometry}(e9);function _toJSON(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];t.shapes.push(a.uuid)}else t.shapes.push(e.uuid);return t}var ir=function(e){_inherits(SphereGeometry,e);var t=_createSuper(SphereGeometry);function SphereGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;_classCallCheck(this,SphereGeometry),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:n,phiLength:s,thetaStart:o,thetaLength:h},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var u=Math.min(o+h,Math.PI),l=0,c=[],p=new E,f=new E,d=[],y=[],m=[],g=[],x=0;x<=a;x++){var M=[],k=x/a,b=0;0==x&&0==o?b=.5/i:x==a&&u==Math.PI&&(b=-.5/i);for(var w=0;w<=i;w++){var _=w/i;p.x=-r*Math.cos(n+_*s)*Math.sin(o+k*h),p.y=r*Math.cos(o+k*h),p.z=r*Math.sin(n+_*s)*Math.sin(o+k*h),y.push(p.x,p.y,p.z),f.copy(p).normalize(),m.push(f.x,f.y,f.z),g.push(_+b,1-k),M.push(l++)}c.push(M)}for(var S=0;S<a;S++)for(var C=0;C<i;C++){var z=c[S][C+1],A=c[S][C],T=c[S+1][C],P=c[S+1][C+1];(0!==S||o>0)&&d.push(z,A,P),(S!==a-1||u<Math.PI)&&d.push(A,T,P)}return e.setIndex(d),e.setAttribute("position",new e1(y,3)),e.setAttribute("normal",new e1(m,3)),e.setAttribute("uv",new e1(g,2)),e}return _createClass(SphereGeometry,null,[{key:"fromJSON",value:function(e){return new SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),SphereGeometry}(e9),ii=function(e){_inherits(TetrahedronGeometry,e);var t=_createSuper(TetrahedronGeometry);function TetrahedronGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _classCallCheck(this,TetrahedronGeometry),(e=t.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],r,i)).type="TetrahedronGeometry",e.parameters={radius:r,detail:i},e}return _createClass(TetrahedronGeometry,null,[{key:"fromJSON",value:function(e){return new TetrahedronGeometry(e.radius,e.detail)}}]),TetrahedronGeometry}(rY),ia=function(e){_inherits(TorusGeometry,e);var t=_createSuper(TorusGeometry);function TorusGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;_classCallCheck(this,TorusGeometry),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:n,arc:s},a=Math.floor(a),n=Math.floor(n);for(var o=[],h=[],u=[],l=[],c=new E,p=new E,f=new E,d=0;d<=a;d++)for(var y=0;y<=n;y++){var m=y/n*s,g=d/a*Math.PI*2;p.x=(r+i*Math.cos(g))*Math.cos(m),p.y=(r+i*Math.cos(g))*Math.sin(m),p.z=i*Math.sin(g),h.push(p.x,p.y,p.z),c.x=r*Math.cos(m),c.y=r*Math.sin(m),f.subVectors(p,c).normalize(),u.push(f.x,f.y,f.z),l.push(y/n),l.push(d/a)}for(var x=1;x<=a;x++)for(var M=1;M<=n;M++){var k=(n+1)*x+M-1,b=(n+1)*(x-1)+M-1,w=(n+1)*(x-1)+M,_=(n+1)*x+M;o.push(k,b,_),o.push(b,w,_)}return e.setIndex(o),e.setAttribute("position",new e1(h,3)),e.setAttribute("normal",new e1(u,3)),e.setAttribute("uv",new e1(l,2)),e}return _createClass(TorusGeometry,null,[{key:"fromJSON",value:function(e){return new TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),TorusGeometry}(e9),is=function(e){_inherits(TorusKnotGeometry,e);var t=_createSuper(TorusKnotGeometry);function TorusKnotGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;_classCallCheck(this,TorusKnotGeometry),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:r,tube:i,tubularSegments:a,radialSegments:n,p:s,q:o},a=Math.floor(a),n=Math.floor(n);for(var h=[],u=[],l=[],c=[],p=new E,f=new E,d=new E,y=new E,m=new E,g=new E,x=new E,M=0;M<=a;++M){var k=M/a*s*Math.PI*2;calculatePositionOnCurve(k,s,o,r,d),calculatePositionOnCurve(k+.01,s,o,r,y),g.subVectors(y,d),x.addVectors(y,d),m.crossVectors(g,x),x.crossVectors(m,g),m.normalize(),x.normalize();for(var b=0;b<=n;++b){var w=b/n*Math.PI*2,_=-i*Math.cos(w),S=i*Math.sin(w);p.x=d.x+(_*x.x+S*m.x),p.y=d.y+(_*x.y+S*m.y),p.z=d.z+(_*x.z+S*m.z),u.push(p.x,p.y,p.z),f.subVectors(p,d).normalize(),l.push(f.x,f.y,f.z),c.push(M/a),c.push(b/n)}}for(var C=1;C<=a;C++)for(var z=1;z<=n;z++){var A=(n+1)*(C-1)+(z-1),T=(n+1)*C+(z-1),P=(n+1)*C+z,L=(n+1)*(C-1)+z;h.push(A,T,L),h.push(T,P,L)}function calculatePositionOnCurve(e,t,r,i,a){var n=r/t*e,s=Math.cos(n);a.x=i*(2+s)*.5*Math.cos(e),a.y=i*(2+s)*Math.sin(e)*.5,a.z=i*Math.sin(n)*.5}return e.setIndex(h),e.setAttribute("position",new e1(u,3)),e.setAttribute("normal",new e1(l,3)),e.setAttribute("uv",new e1(c,2)),e}return _createClass(TorusKnotGeometry,null,[{key:"fromJSON",value:function(e){return new TorusKnotGeometry(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),TorusKnotGeometry}(e9),io=function(e){_inherits(TubeGeometry,e);var t=_createSuper(TubeGeometry);function TubeGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rD(new E(-1,-1,0),new E(-1,1,0),new E(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,TubeGeometry),(e=t.call(this)).type="TubeGeometry",e.parameters={path:r,tubularSegments:i,radius:a,radialSegments:n,closed:s};var o=r.computeFrenetFrames(i,s);e.tangents=o.tangents,e.normals=o.normals,e.binormals=o.binormals;var h=new E,u=new E,l=new g,c=new E,p=[],f=[],d=[],y=[];function generateSegment(e){c=r.getPointAt(e/i,c);for(var t=o.normals[e],s=o.binormals[e],l=0;l<=n;l++){var d=l/n*Math.PI*2,y=Math.sin(d),m=-Math.cos(d);u.x=m*t.x+y*s.x,u.y=m*t.y+y*s.y,u.z=m*t.z+y*s.z,u.normalize(),f.push(u.x,u.y,u.z),h.x=c.x+a*u.x,h.y=c.y+a*u.y,h.z=c.z+a*u.z,p.push(h.x,h.y,h.z)}}function generateIndices(){for(var e=1;e<=i;e++)for(var t=1;t<=n;t++){var r=(n+1)*(e-1)+(t-1),a=(n+1)*e+(t-1),s=(n+1)*e+t,o=(n+1)*(e-1)+t;y.push(r,a,o),y.push(a,s,o)}}function generateUVs(){for(var e=0;e<=i;e++)for(var t=0;t<=n;t++)l.x=e/i,l.y=t/n,d.push(l.x,l.y)}return function(){for(var e=0;e<i;e++)generateSegment(e);generateSegment(!1===s?i:0),generateUVs(),generateIndices()}(),e.setIndex(y),e.setAttribute("position",new e1(p,3)),e.setAttribute("normal",new e1(f,3)),e.setAttribute("uv",new e1(d,2)),e}return _createClass(TubeGeometry,[{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(TubeGeometry.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new TubeGeometry(new rj[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),TubeGeometry}(e9),ih=function(e){_inherits(WireframeGeometry,e);var t=_createSuper(WireframeGeometry);function WireframeGeometry(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_classCallCheck(this,WireframeGeometry),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:r},null!==r){var i=[],a=new Set,n=new E,s=new E;if(null!==r.index){var o=r.attributes.position,h=r.index,u=r.groups;0===u.length&&(u=[{start:0,count:h.count,materialIndex:0}]);for(var l=0,c=u.length;l<c;++l)for(var p=u[l],f=p.start,d=p.count,y=f,m=f+d;y<m;y+=3)for(var g=0;g<3;g++){var x=h.getX(y+g),M=h.getX(y+(g+1)%3);n.fromBufferAttribute(o,x),s.fromBufferAttribute(o,M),!0===isUniqueEdge(n,s,a)&&(i.push(n.x,n.y,n.z),i.push(s.x,s.y,s.z))}}else for(var k=r.attributes.position,b=0,w=k.count/3;b<w;b++)for(var _=0;_<3;_++){var S=3*b+_,C=3*b+(_+1)%3;n.fromBufferAttribute(k,S),s.fromBufferAttribute(k,C),!0===isUniqueEdge(n,s,a)&&(i.push(n.x,n.y,n.z),i.push(s.x,s.y,s.z))}e.setAttribute("position",new e1(i,3))}return e}return _createClass(WireframeGeometry)}(e9);function isUniqueEdge(e,t,r){var i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),a="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==r.has(i)&&!0!==r.has(a)&&(r.add(i),r.add(a),!0)}var iu=Object.freeze({__proto__:null,BoxGeometry:td,CapsuleGeometry:rq,CircleGeometry:rH,ConeGeometry:rX,CylinderGeometry:rZ,DodecahedronGeometry:rQ,EdgesGeometry:r2,ExtrudeGeometry:r6,IcosahedronGeometry:r7,LatheGeometry:rJ,OctahedronGeometry:r9,PlaneGeometry:tC,PolyhedronGeometry:rY,RingGeometry:ie,ShapeGeometry:it,SphereGeometry:ir,TetrahedronGeometry:ii,TorusGeometry:ia,TorusKnotGeometry:is,TubeGeometry:io,WireframeGeometry:ih}),il=function(e){_inherits(ShadowMaterial,e);var t=_createSuper(ShadowMaterial);function ShadowMaterial(e){var r;return _classCallCheck(this,ShadowMaterial),(r=t.call(this)).isShadowMaterial=!0,r.type="ShadowMaterial",r.color=new A(0),r.transparent=!0,r.fog=!0,r.setValues(e),r}return _createClass(ShadowMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(ShadowMaterial.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),ShadowMaterial}(eZ),ic=function(e){_inherits(RawShaderMaterial,e);var t=_createSuper(RawShaderMaterial);function RawShaderMaterial(e){var r;return _classCallCheck(this,RawShaderMaterial),(r=t.call(this,e)).isRawShaderMaterial=!0,r.type="RawShaderMaterial",r}return _createClass(RawShaderMaterial)}(ty),ip=function(e){_inherits(MeshStandardMaterial,e);var t=_createSuper(MeshStandardMaterial);function MeshStandardMaterial(e){var r;return _classCallCheck(this,MeshStandardMaterial),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new A(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new A(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new g(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _createClass(MeshStandardMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshStandardMaterial.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),MeshStandardMaterial}(eZ),id=function(e){_inherits(MeshPhysicalMaterial,e);var t=_createSuper(MeshPhysicalMaterial);function MeshPhysicalMaterial(e){var r;return _classCallCheck(this,MeshPhysicalMaterial),(r=t.call(this)).isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new g(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(_assertThisInitialized(r),"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new A(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=1/0,r.attenuationColor=new A(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new A(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._iridescence=0,r._transmission=0,r.setValues(e),r}return _createClass(MeshPhysicalMaterial,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshPhysicalMaterial.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=_toConsumableArray(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),MeshPhysicalMaterial}(ip),iy=function(e){_inherits(MeshPhongMaterial,e);var t=_createSuper(MeshPhongMaterial);function MeshPhongMaterial(e){var r;return _classCallCheck(this,MeshPhongMaterial),(r=t.call(this)).isMeshPhongMaterial=!0,r.type="MeshPhongMaterial",r.color=new A(16777215),r.specular=new A(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new A(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new g(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _createClass(MeshPhongMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshPhongMaterial.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),MeshPhongMaterial}(eZ),iv=function(e){_inherits(MeshToonMaterial,e);var t=_createSuper(MeshToonMaterial);function MeshToonMaterial(e){var r;return _classCallCheck(this,MeshToonMaterial),(r=t.call(this)).isMeshToonMaterial=!0,r.defines={TOON:""},r.type="MeshToonMaterial",r.color=new A(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new A(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new g(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return _createClass(MeshToonMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshToonMaterial.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),MeshToonMaterial}(eZ),im=function(e){_inherits(MeshNormalMaterial,e);var t=_createSuper(MeshNormalMaterial);function MeshNormalMaterial(e){var r;return _classCallCheck(this,MeshNormalMaterial),(r=t.call(this)).isMeshNormalMaterial=!0,r.type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new g(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.flatShading=!1,r.setValues(e),r}return _createClass(MeshNormalMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshNormalMaterial.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),MeshNormalMaterial}(eZ),ig=function(e){_inherits(MeshLambertMaterial,e);var t=_createSuper(MeshLambertMaterial);function MeshLambertMaterial(e){var r;return _classCallCheck(this,MeshLambertMaterial),(r=t.call(this)).isMeshLambertMaterial=!0,r.type="MeshLambertMaterial",r.color=new A(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new A(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new g(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _createClass(MeshLambertMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshLambertMaterial.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),MeshLambertMaterial}(eZ),ix=function(e){_inherits(MeshMatcapMaterial,e);var t=_createSuper(MeshMatcapMaterial);function MeshMatcapMaterial(e){var r;return _classCallCheck(this,MeshMatcapMaterial),(r=t.call(this)).isMeshMatcapMaterial=!0,r.defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new A(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new g(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _createClass(MeshMatcapMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(MeshMatcapMaterial.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),MeshMatcapMaterial}(eZ),iM=function(e){_inherits(LineDashedMaterial,e);var t=_createSuper(LineDashedMaterial);function LineDashedMaterial(e){var r;return _classCallCheck(this,LineDashedMaterial),(r=t.call(this)).isLineDashedMaterial=!0,r.type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return _createClass(LineDashedMaterial,[{key:"copy",value:function(e){return _get(_getPrototypeOf(LineDashedMaterial.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),LineDashedMaterial}(rh);function arraySlice(e,t,r){return isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)}function convertArray(e,t,r){return e&&(r||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function getKeyframeOrder(e){function compareTime(t,r){return e[t]-e[r]}for(var t=e.length,r=Array(t),i=0;i!==t;++i)r[i]=i;return r.sort(compareTime),r}function sortedArray(e,t,r){for(var i=e.length,a=new e.constructor(i),n=0,s=0;s!==i;++n)for(var o=r[n]*t,h=0;h!==t;++h)a[s++]=e[o+h];return a}function flattenJSON(e,t,r,i){for(var a=1,n=e[0];void 0!==n&&void 0===n[i];)n=e[a++];if(void 0!==n){var s=n[i];if(void 0!==s){if(Array.isArray(s))do void 0!==(s=n[i])&&(t.push(n.time),r.push.apply(r,s)),n=e[a++];while(void 0!==n);else if(void 0!==s.toArray)do void 0!==(s=n[i])&&(t.push(n.time),s.toArray(r,r.length)),n=e[a++];while(void 0!==n);else do void 0!==(s=n[i])&&(t.push(n.time),r.push(s)),n=e[a++];while(void 0!==n)}}}var ik=function(){function Interpolant(e,t,r,i){_classCallCheck(this,Interpolant),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return _createClass(Interpolant,[{key:"evaluate",value:function(e){var t,r=this.parameterPositions,i=this._cachedIndex,a=r[i],n=r[i-1];e:{t:{r:{i:if(!(e<a)){for(var s=i+2;;){if(void 0===a){if(e<n)break i;return i=r.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===s)break;if(n=a,e<(a=r[++i]))break t}t=r.length;break r}if(!(e>=n)){var o=r[1];e<o&&(i=2,n=o);for(var h=i-2;;){if(void 0===n)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(a=n,e>=(n=r[--i-1]))break t}t=i,i=0;break r}break e}for(;i<t;){var u=i+t>>>1;e<r[u]?t=u:i=u+1}if(a=r[i],void 0===(n=r[i-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===a)return i=r.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,n,a)}return this.interpolate_(i,n,e,a)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i,n=0;n!==i;++n)t[n]=r[a+n];return t}},{key:"interpolate_",value:function(){throw Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),Interpolant}(),ib=function(e){_inherits(CubicInterpolant,e);var t=_createSuper(CubicInterpolant);function CubicInterpolant(e,r,i,a){var n;return _classCallCheck(this,CubicInterpolant),(n=t.call(this,e,r,i,a))._weightPrev=-0,n._offsetPrev=-0,n._weightNext=-0,n._offsetNext=-0,n.DefaultSettings_={endingStart:2400,endingEnd:2400},n}return _createClass(CubicInterpolant,[{key:"intervalChanged_",value:function(e,t,r){var i=this.parameterPositions,a=e-2,n=e+1,s=i[a],o=i[n];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:a=e,s=2*t-r;break;case 2402:a=i.length-2,s=t+i[a]-i[a+1];break;default:a=e,s=r}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:n=e,o=2*r-t;break;case 2402:n=1,o=r+i[1]-i[0];break;default:n=e-1,o=t}var h=(r-t)*.5,u=this.valueSize;this._weightPrev=h/(t-s),this._weightNext=h/(o-r),this._offsetPrev=a*u,this._offsetNext=n*u}},{key:"interpolate_",value:function(e,t,r,i){for(var a=this.resultBuffer,n=this.sampleValues,s=this.valueSize,o=e*s,h=o-s,u=this._offsetPrev,l=this._offsetNext,c=this._weightPrev,p=this._weightNext,f=(r-t)/(i-t),d=f*f,y=d*f,m=-c*y+2*c*d-c*f,g=(1+c)*y+(-1.5-2*c)*d+(-.5+c)*f+1,x=(-1-p)*y+(1.5+p)*d+.5*f,M=p*y-p*d,k=0;k!==s;++k)a[k]=m*n[u+k]+g*n[h+k]+x*n[o+k]+M*n[l+k];return a}}]),CubicInterpolant}(ik),iw=function(e){_inherits(LinearInterpolant,e);var t=_createSuper(LinearInterpolant);function LinearInterpolant(e,r,i,a){return _classCallCheck(this,LinearInterpolant),t.call(this,e,r,i,a)}return _createClass(LinearInterpolant,[{key:"interpolate_",value:function(e,t,r,i){for(var a=this.resultBuffer,n=this.sampleValues,s=this.valueSize,o=e*s,h=o-s,u=(r-t)/(i-t),l=1-u,c=0;c!==s;++c)a[c]=n[h+c]*l+n[o+c]*u;return a}}]),LinearInterpolant}(ik),i_=function(e){_inherits(DiscreteInterpolant,e);var t=_createSuper(DiscreteInterpolant);function DiscreteInterpolant(e,r,i,a){return _classCallCheck(this,DiscreteInterpolant),t.call(this,e,r,i,a)}return _createClass(DiscreteInterpolant,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),DiscreteInterpolant}(ik),iS=function(){function KeyframeTrack(e,t,r,i){if(_classCallCheck(this,KeyframeTrack),void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=convertArray(t,this.TimeBufferType),this.values=convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return _createClass(KeyframeTrack,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new i_(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new iw(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new ib(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(r)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]*=e;return this}},{key:"trim",value:function(e,t){for(var r=this.times,i=r.length,a=0,n=i-1;a!==i&&r[a]<e;)++a;for(;-1!==n&&r[n]>t;)--n;if(++n,0!==a||n!==i){a>=n&&(a=(n=Math.max(n,1))-1);var s=this.getValueSize();this.times=arraySlice(r,a,n),this.values=arraySlice(this.values,a*s,n*s)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,i=this.values,a=r.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var n=null,s=0;s!==a;s++){var o=r[s];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(null!==n&&n>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,n),e=!1;break}n=o}if(void 0!==i&&isTypedArray(i))for(var h=0,u=i.length;h!==u;++h){var l=i[h];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,l),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=arraySlice(this.times),t=arraySlice(this.values),r=this.getValueSize(),i=2302===this.getInterpolation(),a=e.length-1,n=1,s=1;s<a;++s){var o=!1,h=e[s];if(h!==e[s+1]&&(1!==s||h!==e[0])){if(i)o=!0;else for(var u=s*r,l=u-r,c=u+r,p=0;p!==r;++p){var f=t[u+p];if(f!==t[l+p]||f!==t[c+p]){o=!0;break}}}if(o){if(s!==n){e[n]=e[s];for(var d=s*r,y=n*r,m=0;m!==r;++m)t[y+m]=t[d+m]}++n}}if(a>0){e[n]=e[a];for(var g=a*r,x=n*r,M=0;M!==r;++M)t[x+M]=t[g+M];++n}return n!==e.length?(this.times=arraySlice(e,0,n),this.values=arraySlice(t,0,n*r)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=arraySlice(this.times,0),t=arraySlice(this.values,0),r=new this.constructor(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}],[{key:"toJSON",value:function(e){var t,r=e.constructor;if(r.toJSON!==this.toJSON)t=r.toJSON(e);else{t={name:e.name,times:convertArray(e.times,Array),values:convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}]),KeyframeTrack}();iS.prototype.TimeBufferType=Float32Array,iS.prototype.ValueBufferType=Float32Array,iS.prototype.DefaultInterpolation=2301;var iC=function(e){_inherits(BooleanKeyframeTrack,e);var t=_createSuper(BooleanKeyframeTrack);function BooleanKeyframeTrack(){return _classCallCheck(this,BooleanKeyframeTrack),t.apply(this,arguments)}return _createClass(BooleanKeyframeTrack)}(iS);iC.prototype.ValueTypeName="bool",iC.prototype.ValueBufferType=Array,iC.prototype.DefaultInterpolation=2300,iC.prototype.InterpolantFactoryMethodLinear=void 0,iC.prototype.InterpolantFactoryMethodSmooth=void 0;var iz=function(e){_inherits(ColorKeyframeTrack,e);var t=_createSuper(ColorKeyframeTrack);function ColorKeyframeTrack(){return _classCallCheck(this,ColorKeyframeTrack),t.apply(this,arguments)}return _createClass(ColorKeyframeTrack)}(iS);iz.prototype.ValueTypeName="color";var iA=function(e){_inherits(NumberKeyframeTrack,e);var t=_createSuper(NumberKeyframeTrack);function NumberKeyframeTrack(){return _classCallCheck(this,NumberKeyframeTrack),t.apply(this,arguments)}return _createClass(NumberKeyframeTrack)}(iS);iA.prototype.ValueTypeName="number";var iT=function(e){_inherits(QuaternionLinearInterpolant,e);var t=_createSuper(QuaternionLinearInterpolant);function QuaternionLinearInterpolant(e,r,i,a){return _classCallCheck(this,QuaternionLinearInterpolant),t.call(this,e,r,i,a)}return _createClass(QuaternionLinearInterpolant,[{key:"interpolate_",value:function(e,t,r,i){for(var a=this.resultBuffer,n=this.sampleValues,s=this.valueSize,o=(r-t)/(i-t),h=e*s,u=h+s;h!==u;h+=4)B.slerpFlat(a,0,n,h-s,n,h,o);return a}}]),QuaternionLinearInterpolant}(ik),iP=function(e){_inherits(QuaternionKeyframeTrack,e);var t=_createSuper(QuaternionKeyframeTrack);function QuaternionKeyframeTrack(){return _classCallCheck(this,QuaternionKeyframeTrack),t.apply(this,arguments)}return _createClass(QuaternionKeyframeTrack,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new iT(this.times,this.values,this.getValueSize(),e)}}]),QuaternionKeyframeTrack}(iS);iP.prototype.ValueTypeName="quaternion",iP.prototype.DefaultInterpolation=2301,iP.prototype.InterpolantFactoryMethodSmooth=void 0;var iL=function(e){_inherits(StringKeyframeTrack,e);var t=_createSuper(StringKeyframeTrack);function StringKeyframeTrack(){return _classCallCheck(this,StringKeyframeTrack),t.apply(this,arguments)}return _createClass(StringKeyframeTrack)}(iS);iL.prototype.ValueTypeName="string",iL.prototype.ValueBufferType=Array,iL.prototype.DefaultInterpolation=2300,iL.prototype.InterpolantFactoryMethodLinear=void 0,iL.prototype.InterpolantFactoryMethodSmooth=void 0;var iO=function(e){_inherits(VectorKeyframeTrack,e);var t=_createSuper(VectorKeyframeTrack);function VectorKeyframeTrack(){return _classCallCheck(this,VectorKeyframeTrack),t.apply(this,arguments)}return _createClass(VectorKeyframeTrack)}(iS);iO.prototype.ValueTypeName="vector";var iI=function(){function AnimationClip(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;_classCallCheck(this,AnimationClip),this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}return _createClass(AnimationClip,[{key:"resetDuration",value:function(){for(var e=this.tracks,t=0,r=0,i=e.length;r!==i;++r){var a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],r=e.tracks,i=1/(e.fps||1),a=0,n=r.length;a!==n;++a)t.push(parseKeyframeTrack(r[a]).scale(i));var s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}},{key:"toJSON",value:function(e){for(var t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},a=0,n=r.length;a!==n;++a)t.push(iS.toJSON(r[a]));return i}},{key:"CreateFromMorphTargetSequence",value:function(e,t,r,i){for(var a=t.length,n=[],s=0;s<a;s++){var o=[],h=[];o.push((s+a-1)%a,s,(s+1)%a),h.push(0,1,0);var u=getKeyframeOrder(o);o=sortedArray(o,1,u),h=sortedArray(h,1,u),i||0!==o[0]||(o.push(a),h.push(h[0])),n.push(new iA(".morphTargetInfluences["+t[s].name+"]",o,h).scale(1/r))}return new this(e,-1,n)}},{key:"findByName",value:function(e,t){var r=e;Array.isArray(e)||(r=e.geometry&&e.geometry.animations||e.animations);for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,r){for(var i={},a=/^([\w-]*?)([\d]+)$/,n=0,s=e.length;n<s;n++){var o=e[n],h=o.name.match(a);if(h&&h.length>1){var u=h[1],l=i[u];l||(i[u]=l=[]),l.push(o)}}var c=[];for(var p in i)c.push(this.CreateFromMorphTargetSequence(p,i[p],t,r));return c}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var addNonemptyTrack=function(e,t,r,i,a){if(0!==r.length){var n=[],s=[];flattenJSON(r,n,s,i),0!==n.length&&a.push(new e(t,n,s))}},r=[],i=e.name||"default",a=e.fps||30,n=e.blendMode,s=e.length||-1,o=e.hierarchy||[],h=0;h<o.length;h++){var u=o[h].keys;if(u&&0!==u.length){if(u[0].morphTargets){var l={},c=void 0;for(c=0;c<u.length;c++)if(u[c].morphTargets)for(var p=0;p<u[c].morphTargets.length;p++)l[u[c].morphTargets[p]]=-1;for(var f in l){for(var d=[],y=[],m=0;m!==u[c].morphTargets.length;++m){var g=u[c];d.push(g.time),y.push(g.morphTarget===f?1:0)}r.push(new iA(".morphTargetInfluence["+f+"]",d,y))}s=l.length*a}else{var x=".bones["+t[h].name+"]";addNonemptyTrack(iO,x+".position",u,"pos",r),addNonemptyTrack(iP,x+".quaternion",u,"rot",r),addNonemptyTrack(iO,x+".scale",u,"scl",r)}}}return 0===r.length?null:new this(i,s,r,n)}}]),AnimationClip}();function getTrackTypeForValueTypeName(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return iA;case"vector":case"vector2":case"vector3":case"vector4":return iO;case"color":return iz;case"quaternion":return iP;case"bool":case"boolean":return iC;case"string":return iL}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function parseKeyframeTrack(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],i=[];flattenJSON(e.keys,r,i,"value"),e.times=r,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var iB={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},iE=_createClass(function LoadingManager(e,t,r){_classCallCheck(this,LoadingManager);var i=this,a=!1,n=0,s=0,o=void 0,h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,n,s),a=!0},this.itemEnd=function(e){n++,void 0!==i.onProgress&&i.onProgress(e,n,s),n===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this},this.addHandler=function(e,t){return h.push(e,t),this},this.removeHandler=function(e){var t=h.indexOf(e);return -1!==t&&h.splice(t,2),this},this.getHandler=function(e){for(var t=0,r=h.length;t<r;t+=2){var i=h[t],a=h[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return a}return null}}),iR=new iE,iN=function(){function Loader(e){_classCallCheck(this,Loader),this.manager=void 0!==e?e:iR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return _createClass(Loader,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),Loader}(),iG={},iF=function(e){_inherits(HttpError,e);var t=_createSuper(HttpError);function HttpError(e,r){var i;return _classCallCheck(this,HttpError),(i=t.call(this,e)).response=r,i}return _createClass(HttpError)}(_wrapNativeSuper(Error)),iV=function(e){_inherits(FileLoader,e);var t=_createSuper(FileLoader);function FileLoader(e){return _classCallCheck(this,FileLoader),t.call(this,e)}return _createClass(FileLoader,[{key:"load",value:function(e,t,r,i){var a=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var n=iB.get(e);if(void 0!==n)return this.manager.itemStart(e),setTimeout(function(){t&&t(n),a.manager.itemEnd(e)},0),n;if(void 0!==iG[e]){iG[e].push({onLoad:t,onProgress:r,onError:i});return}iG[e]=[],iG[e].push({onLoad:t,onProgress:r,onError:i});var s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,h=this.responseType;fetch(s).then(function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var r=iG[e],i=t.body.getReader(),a=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),n=a?parseInt(a):0,s=0!==n,o=0,h=new ReadableStream({start:function(e){readData();function readData(){i.read().then(function(t){var i=t.done,a=t.value;if(i)e.close();else{o+=a.byteLength;for(var h=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:n}),u=0,l=r.length;u<l;u++){var c=r[u];c.onProgress&&c.onProgress(h)}e.enqueue(a),readData()}})}}});return new Response(h)}throw new iF('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(function(e){switch(h){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(function(e){return new DOMParser().parseFromString(e,o)});case"json":return e.json();default:if(void 0===o)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(o),r=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(r);return e.arrayBuffer().then(function(e){return i.decode(e)})}}).then(function(t){iB.add(e,t);var r=iG[e];delete iG[e];for(var i=0,a=r.length;i<a;i++){var n=r[i];n.onLoad&&n.onLoad(t)}}).catch(function(t){var r=iG[e];if(void 0===r)throw a.manager.itemError(e),t;delete iG[e];for(var i=0,n=r.length;i<n;i++){var s=r[i];s.onError&&s.onError(t)}a.manager.itemError(e)}).finally(function(){a.manager.itemEnd(e)}),this.manager.itemStart(e)}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),FileLoader}(iN),iD=function(e){_inherits(ImageLoader,e);var t=_createSuper(ImageLoader);function ImageLoader(e){return _classCallCheck(this,ImageLoader),t.call(this,e)}return _createClass(ImageLoader,[{key:"load",value:function(e,t,r,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,n=iB.get(e);if(void 0!==n)return a.manager.itemStart(e),setTimeout(function(){t&&t(n),a.manager.itemEnd(e)},0),n;var s=createElementNS("img");function onImageLoad(){removeEventListeners(),iB.add(e,this),t&&t(this),a.manager.itemEnd(e)}function onImageError(t){removeEventListeners(),i&&i(t),a.manager.itemError(e),a.manager.itemEnd(e)}function removeEventListeners(){s.removeEventListener("load",onImageLoad,!1),s.removeEventListener("error",onImageError,!1)}return s.addEventListener("load",onImageLoad,!1),s.addEventListener("error",onImageError,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}}]),ImageLoader}(iN),iU=function(e){_inherits(TextureLoader,e);var t=_createSuper(TextureLoader);function TextureLoader(e){return _classCallCheck(this,TextureLoader),t.call(this,e)}return _createClass(TextureLoader,[{key:"load",value:function(e,t,r,i){var a=new O,n=new iD(this.manager);return n.setCrossOrigin(this.crossOrigin),n.setPath(this.path),n.load(e,function(e){a.image=e,a.needsUpdate=!0,void 0!==t&&t(a)},r,i),a}}]),TextureLoader}(iN),ij=function(e){_inherits(Light,e);var t=_createSuper(Light);function Light(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck(this,Light),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new A(e),r.intensity=i,r}return _createClass(Light,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return _get(_getPrototypeOf(Light.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=_get(_getPrototypeOf(Light.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),Light}(eE),iW=function(e){_inherits(HemisphereLight,e);var t=_createSuper(HemisphereLight);function HemisphereLight(e,r,i){var a;return _classCallCheck(this,HemisphereLight),(a=t.call(this,e,i)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(eE.DefaultUp),a.updateMatrix(),a.groundColor=new A(r),a}return _createClass(HemisphereLight,[{key:"copy",value:function(e,t){return _get(_getPrototypeOf(HemisphereLight.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),HemisphereLight}(ij),iJ=new el,iq=new E,iH=new E,iZ=function(){function LightShadow(e){_classCallCheck(this,LightShadow),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new g(512,512),this.map=null,this.mapPass=null,this.matrix=new el,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tS,this._frameExtents=new g(1,1),this._viewportCount=1,this._viewports=[new I(0,0,1,1)]}return _createClass(LightShadow,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,r=this.matrix;iq.setFromMatrixPosition(e.matrixWorld),t.position.copy(iq),iH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(iH),t.updateMatrixWorld(),iJ.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iJ),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(iJ)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),LightShadow}(),iX=function(e){_inherits(SpotLightShadow,e);var t=_createSuper(SpotLightShadow);function SpotLightShadow(){var e;return _classCallCheck(this,SpotLightShadow),(e=t.call(this,new tm(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return _createClass(SpotLightShadow,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*y*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),_get(_getPrototypeOf(SpotLightShadow.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return _get(_getPrototypeOf(SpotLightShadow.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),SpotLightShadow}(iZ),iY=function(e){_inherits(SpotLight,e);var t=_createSuper(SpotLight);function SpotLight(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return _classCallCheck(this,SpotLight),(i=t.call(this,e,r)).isSpotLight=!0,i.type="SpotLight",i.position.copy(eE.DefaultUp),i.updateMatrix(),i.target=new eE,i.distance=a,i.angle=n,i.penumbra=s,i.decay=o,i.map=null,i.shadow=new iX,i}return _createClass(SpotLight,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return _get(_getPrototypeOf(SpotLight.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),SpotLight}(ij),iQ=new el,iK=new E,i$=new E,i0=function(e){_inherits(PointLightShadow,e);var t=_createSuper(PointLightShadow);function PointLightShadow(){var e;return _classCallCheck(this,PointLightShadow),(e=t.call(this,new tm(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new g(4,2),e._viewportCount=6,e._viewports=[new I(2,1,1,1),new I(0,1,1,1),new I(3,1,1,1),new I(1,1,1,1),new I(3,0,1,1),new I(1,0,1,1)],e._cubeDirections=[new E(1,0,0),new E(-1,0,0),new E(0,0,1),new E(0,0,-1),new E(0,1,0),new E(0,-1,0)],e._cubeUps=[new E(0,1,0),new E(0,1,0),new E(0,1,0),new E(0,1,0),new E(0,0,1),new E(0,0,-1)],e}return _createClass(PointLightShadow,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),iK.setFromMatrixPosition(e.matrixWorld),r.position.copy(iK),i$.copy(r.position),i$.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(i$),r.updateMatrixWorld(),i.makeTranslation(-iK.x,-iK.y,-iK.z),iQ.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iQ)}}]),PointLightShadow}(iZ),i1=function(e){_inherits(PointLight,e);var t=_createSuper(PointLight);function PointLight(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return _classCallCheck(this,PointLight),(i=t.call(this,e,r)).isPointLight=!0,i.type="PointLight",i.distance=a,i.decay=n,i.shadow=new i0,i}return _createClass(PointLight,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return _get(_getPrototypeOf(PointLight.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),PointLight}(ij),i2=function(e){_inherits(DirectionalLightShadow,e);var t=_createSuper(DirectionalLightShadow);function DirectionalLightShadow(){var e;return _classCallCheck(this,DirectionalLightShadow),(e=t.call(this,new tz(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return _createClass(DirectionalLightShadow)}(iZ),i3=function(e){_inherits(DirectionalLight,e);var t=_createSuper(DirectionalLight);function DirectionalLight(e,r){var i;return _classCallCheck(this,DirectionalLight),(i=t.call(this,e,r)).isDirectionalLight=!0,i.type="DirectionalLight",i.position.copy(eE.DefaultUp),i.updateMatrix(),i.target=new eE,i.shadow=new i2,i}return _createClass(DirectionalLight,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return _get(_getPrototypeOf(DirectionalLight.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),DirectionalLight}(ij),i5=function(e){_inherits(AmbientLight,e);var t=_createSuper(AmbientLight);function AmbientLight(e,r){var i;return _classCallCheck(this,AmbientLight),(i=t.call(this,e,r)).isAmbientLight=!0,i.type="AmbientLight",i}return _createClass(AmbientLight)}(ij),i4=function(e){_inherits(RectAreaLight,e);var t=_createSuper(RectAreaLight);function RectAreaLight(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return _classCallCheck(this,RectAreaLight),(i=t.call(this,e,r)).isRectAreaLight=!0,i.type="RectAreaLight",i.width=a,i.height=n,i}return _createClass(RectAreaLight,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return _get(_getPrototypeOf(RectAreaLight.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=_get(_getPrototypeOf(RectAreaLight.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),RectAreaLight}(ij),i6=function(){function SphericalHarmonics3(){_classCallCheck(this,SphericalHarmonics3),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new E)}return _createClass(SphericalHarmonics3,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var r=e.x,i=e.y,a=e.z,n=this.coefficients;return t.copy(n[0]).multiplyScalar(.282095),t.addScaledVector(n[1],.488603*i),t.addScaledVector(n[2],.488603*a),t.addScaledVector(n[3],.488603*r),t.addScaledVector(n[4],1.092548*(r*i)),t.addScaledVector(n[5],1.092548*(i*a)),t.addScaledVector(n[6],.315392*(3*a*a-1)),t.addScaledVector(n[7],1.092548*(r*a)),t.addScaledVector(n[8],.546274*(r*r-i*i)),t}},{key:"getIrradianceAt",value:function(e,t){var r=e.x,i=e.y,a=e.z,n=this.coefficients;return t.copy(n[0]).multiplyScalar(.886227),t.addScaledVector(n[1],1.023328*i),t.addScaledVector(n[2],1.023328*a),t.addScaledVector(n[3],1.023328*r),t.addScaledVector(n[4],.858086*r*i),t.addScaledVector(n[5],.858086*i*a),t.addScaledVector(n[6],.743125*a*a-.247708),t.addScaledVector(n[7],.858086*r*a),t.addScaledVector(n[8],.429043*(r*r-i*i)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.coefficients,i=0;i<9;i++)r[i].fromArray(e,t+3*i);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.coefficients,i=0;i<9;i++)r[i].toArray(e,t+3*i);return e}}],[{key:"getBasisAt",value:function(e,t){var r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}]),SphericalHarmonics3}(),i8=function(e){_inherits(LightProbe,e);var t=_createSuper(LightProbe);function LightProbe(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i6,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck(this,LightProbe),(e=t.call(this,void 0,i)).isLightProbe=!0,e.sh=r,e}return _createClass(LightProbe,[{key:"copy",value:function(e){return _get(_getPrototypeOf(LightProbe.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=_get(_getPrototypeOf(LightProbe.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),LightProbe}(ij),i7=function(e){_inherits(MaterialLoader,e);var t=_createSuper(MaterialLoader);function MaterialLoader(e){var r;return _classCallCheck(this,MaterialLoader),(r=t.call(this,e)).textures={},r}return _createClass(MaterialLoader,[{key:"load",value:function(e,t,r,i){var a=this,n=new iV(a.manager);n.setPath(a.path),n.setRequestHeader(a.requestHeader),n.setWithCredentials(a.withCredentials),n.load(e,function(r){try{t(a.parse(JSON.parse(r)))}catch(t){i?i(t):console.error(t),a.manager.itemError(e)}},r,i)}},{key:"parse",value:function(e){var t=this.textures;function getTexture(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=MaterialLoader.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=new A().setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=getTexture(a.value);break;case"c":r.uniforms[i].value=new A().setHex(a.value);break;case"v2":r.uniforms[i].value=new g().fromArray(a.value);break;case"v3":r.uniforms[i].value=new E().fromArray(a.value);break;case"v4":r.uniforms[i].value=new I().fromArray(a.value);break;case"m3":r.uniforms[i].value=new x().fromArray(a.value);break;case"m4":r.uniforms[i].value=new el().fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(var n in e.extensions)r.extensions[n]=e.extensions[n];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=getTexture(e.map)),void 0!==e.matcap&&(r.matcap=getTexture(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=getTexture(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=getTexture(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=getTexture(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=new g().fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=getTexture(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=getTexture(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=getTexture(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=getTexture(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=getTexture(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=getTexture(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=getTexture(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=getTexture(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=getTexture(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=getTexture(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=getTexture(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=getTexture(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=getTexture(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=getTexture(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=new g().fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=getTexture(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=getTexture(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=getTexture(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=getTexture(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=getTexture(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=getTexture(e.sheenRoughnessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new({ShadowMaterial:il,SpriteMaterial:tN,RawShaderMaterial:ic,ShaderMaterial:ty,PointsMaterial:rx,MeshPhysicalMaterial:id,MeshStandardMaterial:ip,MeshPhongMaterial:iy,MeshToonMaterial:iv,MeshNormalMaterial:im,MeshLambertMaterial:ig,MeshDepthMaterial:tA,MeshDistanceMaterial:tT,MeshBasicMaterial:eX,MeshMatcapMaterial:ix,LineDashedMaterial:iM,LineBasicMaterial:rh,Material:eZ})[e]}}]),MaterialLoader}(iN),i9=function(){function LoaderUtils(){_classCallCheck(this,LoaderUtils)}return _createClass(LoaderUtils,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);for(var t="",r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(e){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return -1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e))?e:t+e}}]),LoaderUtils}(),ae=function(e){_inherits(InstancedBufferGeometry,e);var t=_createSuper(InstancedBufferGeometry);function InstancedBufferGeometry(){var e;return _classCallCheck(this,InstancedBufferGeometry),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return _createClass(InstancedBufferGeometry,[{key:"copy",value:function(e){return _get(_getPrototypeOf(InstancedBufferGeometry.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=_get(_getPrototypeOf(InstancedBufferGeometry.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),InstancedBufferGeometry}(e9),at=function(e){_inherits(BufferGeometryLoader,e);var t=_createSuper(BufferGeometryLoader);function BufferGeometryLoader(e){return _classCallCheck(this,BufferGeometryLoader),t.call(this,e)}return _createClass(BufferGeometryLoader,[{key:"load",value:function(e,t,r,i){var a=this,n=new iV(a.manager);n.setPath(a.path),n.setRequestHeader(a.requestHeader),n.setWithCredentials(a.withCredentials),n.load(e,function(r){try{t(a.parse(JSON.parse(r)))}catch(t){i?i(t):console.error(t),a.manager.itemError(e)}},r,i)}},{key:"parse",value:function(e){var t={},r={};function getInterleavedBuffer(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=getArrayBuffer(e,i.buffer),n=new tB(getTypedArray(i.type,a),i.stride);return n.uuid=i.uuid,t[r]=n,n}function getArrayBuffer(e,t){if(void 0!==r[t])return r[t];var i=e.arrayBuffers[t],a=new Uint32Array(i).buffer;return r[t]=a,a}var i=e.isInstancedBufferGeometry?new ae:new e9,a=e.data.index;if(void 0!==a){var n=getTypedArray(a.type,a.array);i.setIndex(new eK(n,1))}var s=e.data.attributes;for(var o in s){var h=s[o],u=void 0;if(h.isInterleavedBufferAttribute)u=new tR(getInterleavedBuffer(e.data,h.data),h.itemSize,h.offset,h.normalized);else{var l=getTypedArray(h.type,h.array);u=new(h.isInstancedBufferAttribute?rt:eK)(l,h.itemSize,h.normalized)}void 0!==h.name&&(u.name=h.name),void 0!==h.usage&&u.setUsage(h.usage),void 0!==h.updateRange&&(u.updateRange.offset=h.updateRange.offset,u.updateRange.count=h.updateRange.count),i.setAttribute(o,u)}var c=e.data.morphAttributes;if(c)for(var p in c){for(var f=c[p],d=[],y=0,m=f.length;y<m;y++){var g=f[y],x=void 0;x=g.isInterleavedBufferAttribute?new tR(getInterleavedBuffer(e.data,g.data),g.itemSize,g.offset,g.normalized):new eK(getTypedArray(g.type,g.array),g.itemSize,g.normalized),void 0!==g.name&&(x.name=g.name),d.push(x)}i.morphAttributes[p]=d}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var M=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==M)for(var k=0,b=M.length;k!==b;++k){var w=M[k];i.addGroup(w.start,w.count,w.materialIndex)}var _=e.data.boundingSphere;if(void 0!==_){var S=new E;void 0!==_.center&&S.fromArray(_.center),i.boundingSphere=new et(S,_.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),BufferGeometryLoader}(iN),ar=function(e){_inherits(ObjectLoader,e);var t,r,i,a=_createSuper(ObjectLoader);function ObjectLoader(e){return _classCallCheck(this,ObjectLoader),a.call(this,e)}return _createClass(ObjectLoader,[{key:"load",value:function(e,t,r,i){var a=this,n=""===this.path?i9.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;var s=new iV(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(r){var n=null;try{n=JSON.parse(r)}catch(t){void 0!==i&&i(t),console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}var s=n.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase()){void 0!==i&&i(Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(n,t)},r,i)}},{key:"loadAsync",value:(t=_asyncToGenerator(_regeneratorRuntime().mark(function _callee(e,t){var r,i,a,n,s;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=this,i=""===this.path?i9.extractUrlBase(e):this.path,this.resourcePath=this.resourcePath||i,(a=new iV(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),o.next=9,a.loadAsync(e,t);case 9:if(!(void 0===(s=(n=JSON.parse(o.sent)).metadata)||void 0===s.type||"geometry"===s.type.toLowerCase())){o.next=14;break}throw Error("THREE.ObjectLoader: Can't load "+e);case 14:return o.next=16,r.parseAsync(n);case 16:return o.abrupt("return",o.sent);case 17:case"end":return o.stop()}},_callee,this)})),function(e,r){return t.apply(this,arguments)})},{key:"parse",value:function(e,t){var r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),n=this.parseImages(e.images,function(){void 0!==t&&t(h)}),s=this.parseTextures(e.textures,n),o=this.parseMaterials(e.materials,s),h=this.parseObject(e.object,a,o,s,r),u=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,u),void 0!==t){var l=!1;for(var c in n)if(n[c].data instanceof HTMLImageElement){l=!0;break}!1===l&&t(h)}return h}},{key:"parseAsync",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function _callee2(e){var t,r,i,a,n,s,o,h;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),u.next=5,this.parseImagesAsync(e.images);case 5:return a=u.sent,n=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,n),o=this.parseObject(e.object,i,s,n,t),h=this.parseSkeletons(e.skeletons,o),this.bindSkeletons(o,h),u.abrupt("return",o);case 12:case"end":return u.stop()}},_callee2,this)})),function(e){return r.apply(this,arguments)})},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var r=0,i=e.length;r<i;r++){var a=new r3().fromJSON(e[r]);t[a.uuid]=a}return t}},{key:"parseSkeletons",value:function(e,t){var r={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(var a=0,n=e.length;a<n;a++){var s=new re().fromJSON(e[a],i);r[s.uuid]=s}return r}},{key:"parseGeometries",value:function(e,t){var r={};if(void 0!==e)for(var i=new at,a=0,n=e.length;a<n;a++){var s=void 0,o=e[a];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(o);break;default:o.type in iu?s=iu[o.type].fromJSON(o,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(o.type,'"'))}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),r[o.uuid]=s}return r}},{key:"parseMaterials",value:function(e,t){var r={},i={};if(void 0!==e){var a=new i7;a.setTextures(t);for(var n=0,s=e.length;n<s;n++){var o=e[n];void 0===r[o.uuid]&&(r[o.uuid]=a.parse(o)),i[o.uuid]=r[o.uuid]}}return i}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var r=0;r<e.length;r++){var i=e[r],a=iI.parse(i);t[a.uuid]=a}return t}},{key:"parseImages",value:function(e,t){var r,i=this,a={};function loadImage(e){return i.manager.itemStart(e),r.load(e,function(){i.manager.itemEnd(e)},void 0,function(){i.manager.itemError(e),i.manager.itemEnd(e)})}function deserializeImage(e){return"string"==typeof e?loadImage(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:i.resourcePath+e):e.data?{data:getTypedArray(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(r=new iD(new iE(t))).setCrossOrigin(this.crossOrigin);for(var n=0,s=e.length;n<s;n++){var o=e[n],h=o.url;if(Array.isArray(h)){for(var u=[],l=0,c=h.length;l<c;l++){var p=deserializeImage(h[l]);null!==p&&(p instanceof HTMLImageElement?u.push(p):u.push(new t8(p.data,p.width,p.height)))}a[o.uuid]=new P(u)}else{var f=deserializeImage(o.url);a[o.uuid]=new P(f)}}}return a}},{key:"parseImagesAsync",value:(i=_asyncToGenerator(_regeneratorRuntime().mark(function _callee4(e){var t,r,i,a,n,s,o,h,u,l,c,p,f,d,y;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(n=function(){return(n=_asyncToGenerator(_regeneratorRuntime().mark(function _callee3(e){var r,a;return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("string"!=typeof e){n.next=8;break}return r=e,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r)?r:t.resourcePath+r,n.next=5,i.loadAsync(a);case 5:return n.abrupt("return",n.sent);case 8:if(!e.data){n.next=12;break}return n.abrupt("return",{data:getTypedArray(e.type,e.data),width:e.width,height:e.height});case 12:return n.abrupt("return",null);case 13:case"end":return n.stop()}},_callee3)}))).apply(this,arguments)},a=function(e){return n.apply(this,arguments)},t=this,r={},!(void 0!==e&&e.length>0)){m.next=33;break}(i=new iD(this.manager)).setCrossOrigin(this.crossOrigin),s=0,o=e.length;case 8:if(!(s<o)){m.next=33;break}if(!Array.isArray(u=(h=e[s]).url)){m.next=26;break}l=[],c=0,p=u.length;case 14:if(!(c<p)){m.next=23;break}return f=u[c],m.next=18,a(f);case 18:null!==(d=m.sent)&&(d instanceof HTMLImageElement?l.push(d):l.push(new t8(d.data,d.width,d.height)));case 20:c++,m.next=14;break;case 23:r[h.uuid]=new P(l),m.next=30;break;case 26:return m.next=28,a(h.url);case 28:y=m.sent,r[h.uuid]=new P(y);case 30:s++,m.next=8;break;case 33:return m.abrupt("return",r);case 34:case"end":return m.stop()}},_callee4,this)})),function(e){return i.apply(this,arguments)})},{key:"parseTextures",value:function(e,t){function parseConstant(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var n=e[i];void 0===n.image&&console.warn('THREE.ObjectLoader: No "image" specified for',n.uuid),void 0===t[n.image]&&console.warn("THREE.ObjectLoader: Undefined image",n.image);var s=t[n.image],o=s.data,h=void 0;Array.isArray(o)?(h=new tg,6===o.length&&(h.needsUpdate=!0)):(h=o&&o.data?new t8:new O,o&&(h.needsUpdate=!0)),h.source=s,h.uuid=n.uuid,void 0!==n.name&&(h.name=n.name),void 0!==n.mapping&&(h.mapping=parseConstant(n.mapping,ai)),void 0!==n.offset&&h.offset.fromArray(n.offset),void 0!==n.repeat&&h.repeat.fromArray(n.repeat),void 0!==n.center&&h.center.fromArray(n.center),void 0!==n.rotation&&(h.rotation=n.rotation),void 0!==n.wrap&&(h.wrapS=parseConstant(n.wrap[0],aa),h.wrapT=parseConstant(n.wrap[1],aa)),void 0!==n.format&&(h.format=n.format),void 0!==n.type&&(h.type=n.type),void 0!==n.encoding&&(h.encoding=n.encoding),void 0!==n.minFilter&&(h.minFilter=parseConstant(n.minFilter,an)),void 0!==n.magFilter&&(h.magFilter=parseConstant(n.magFilter,an)),void 0!==n.anisotropy&&(h.anisotropy=n.anisotropy),void 0!==n.flipY&&(h.flipY=n.flipY),void 0!==n.generateMipmaps&&(h.generateMipmaps=n.generateMipmaps),void 0!==n.premultiplyAlpha&&(h.premultiplyAlpha=n.premultiplyAlpha),void 0!==n.unpackAlignment&&(h.unpackAlignment=n.unpackAlignment),void 0!==n.userData&&(h.userData=n.userData),r[n.uuid]=h}return r}},{key:"parseObject",value:function(e,t,r,i,a){function getGeometry(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function getMaterial(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,a=e.length;i<a;i++){var n=e[i];void 0===r[n]&&console.warn("THREE.ObjectLoader: Undefined material",n),t.push(r[n])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}function getTexture(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":n=new tI,void 0!==e.background&&(Number.isInteger(e.background)?n.background=new A(e.background):n.background=getTexture(e.background)),void 0!==e.environment&&(n.environment=getTexture(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new tO(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new tL(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(n.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":n=new tm(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new tz(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new i5(e.color,e.intensity);break;case"DirectionalLight":n=new i3(e.color,e.intensity);break;case"PointLight":n=new i1(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new i4(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new iY(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new iW(e.color,e.groundColor,e.intensity);break;case"LightProbe":n=new i8().fromJSON(e);break;case"SkinnedMesh":n=new t4(s=getGeometry(e.geometry),o=getMaterial(e.material)),void 0!==e.bindMode&&(n.bindMode=e.bindMode),void 0!==e.bindMatrix&&n.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(n.skeleton=e.skeleton);break;case"Mesh":n=new tf(s=getGeometry(e.geometry),o=getMaterial(e.material));break;case"InstancedMesh":s=getGeometry(e.geometry),o=getMaterial(e.material);var n,s,o,h=e.count,u=e.instanceMatrix,l=e.instanceColor;(n=new ro(s,o,h)).instanceMatrix=new rt(new Float32Array(u.array),16),void 0!==l&&(n.instanceColor=new rt(new Float32Array(l.array),l.itemSize));break;case"LOD":n=new t$;break;case"Line":n=new rd(getGeometry(e.geometry),getMaterial(e.material));break;case"LineLoop":n=new rg(getGeometry(e.geometry),getMaterial(e.material));break;case"LineSegments":n=new rm(getGeometry(e.geometry),getMaterial(e.material));break;case"PointCloud":case"Points":n=new r_(getGeometry(e.geometry),getMaterial(e.material));break;case"Sprite":n=new tY(getMaterial(e.material));break;case"Group":n=new tP;break;case"Bone":n=new t6;break;default:n=new eE}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(n.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,p=0;p<c.length;p++)n.add(this.parseObject(c[p],t,r,i,a));if(void 0!==e.animations)for(var f=e.animations,d=0;d<f.length;d++){var y=f[d];n.animations.push(a[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(n.autoUpdate=e.autoUpdate);for(var m=e.levels,g=0;g<m.length;g++){var x=m[g],M=n.getObjectByProperty("uuid",x.object);void 0!==M&&n.addLevel(M,x.distance,x.hysteresis)}}return n}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var r=t[e.skeleton];void 0===r?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(r,e.bindMatrix)}})}}]),ObjectLoader}(iN),ai={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306},aa={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},an={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008},as=new el,ao=new el,ah=new el,au=function(){function StereoCamera(){_classCallCheck(this,StereoCamera),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new tm,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new tm,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return _createClass(StereoCamera,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ah.copy(e.projectionMatrix);var r,i,a=t.eyeSep/2,n=a*t.near/t.focus,s=t.near*Math.tan(d*t.fov*.5)/t.zoom;ao.elements[12]=-a,as.elements[12]=a,r=-s*t.aspect+n,i=s*t.aspect+n,ah.elements[0]=2*t.near/(i-r),ah.elements[8]=(i+r)/(i-r),this.cameraL.projectionMatrix.copy(ah),r=-s*t.aspect-n,i=s*t.aspect-n,ah.elements[0]=2*t.near/(i-r),ah.elements[8]=(i+r)/(i-r),this.cameraR.projectionMatrix.copy(ah)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ao),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(as)}}]),StereoCamera}(),al=new g,ac=function(){function Box2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new g(Infinity,Infinity),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g(-1/0,-1/0);_classCallCheck(this,Box2),this.isBox2=!0,this.min=e,this.max=t}return _createClass(Box2,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var r=al.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}},{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x)&&!(e.x>this.max.x)&&!(e.y<this.min.y)&&!(e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x)&&!(e.min.x>this.max.x)&&!(e.max.y<this.min.y)&&!(e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return al.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),Box2}();"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"148"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="148")}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{2256:function(e,t,n){n.d(t,{$N:function(){return D},AE:function(){return te},F6:function(){return e_},Il:function(){return T},KI:function(){return registerButton},Of:function(){return eF},P6:function(){return C},T9:function(){return ek},U3:function(){return j},Vw:function(){return ej},Yc:function(){return eD},k8:function(){return eb},rq:function(){return ew},tl:function(){return c},we:function(){return em}});var i,r,o,a=n(3587);function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,r){var o=Object.create((t&&t.prototype instanceof Generator?t:Generator).prototype);return i(o,"_invoke",{value:makeInvokeMethod(e,n,new Context(r||[]))}),o}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var l={};define(l,o,function(){return this});var u=Object.getPrototypeOf,h=u&&u(u(values([])));h&&h!==t&&n.call(h,o)&&(l=h);var d=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(l);function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){define(e,t,function(e){return this._invoke(t,e)})})}function AsyncIterator(e,t){var r;function invoke(i,r,o,a){var s=tryCatch(e[i],e,r);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==_typeof(l)&&n.call(l,"__await")?t.resolve(l.__await).then(function(e){invoke("next",e,o,a)},function(e){invoke("throw",e,o,a)}):t.resolve(l).then(function(e){c.value=e,o(c)},function(e){return invoke("throw",e,o,a)})}a(s.arg)}i(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t(function(t,i){invoke(e,n,t,i)})}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return doneResult()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=maybeInvokeDelegate(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=tryCatch(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=TypeError("The iterator does not provide a '"+n+"' method")),c;var r=tryCatch(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=TypeError("iterator result is not an object"),t.delegate=null,c)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,next=function next(){for(;++i<e.length;)if(n.call(e,i))return next.value=e[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,i(d,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),i(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,a,function(){return this}),e.AsyncIterator=AsyncIterator,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new AsyncIterator(wrap(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},defineIteratorMethods(d),define(d,s,"Generator"),define(d,o,function(){return this}),define(d,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return handle("end");if(r.tryLoc<=this.prev){var a=n.call(r,"catchLoc"),s=n.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return handle(r.catchLoc,!0);if(this.prev<r.finallyLoc)return handle(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return handle(r.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return handle(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;resetTryEntry(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(i,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function _next(e){asyncGeneratorStep(o,i,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,i,r,_next,_throw,"throw",e)}_next(void 0)})}}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=_superPropBase(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(e){return -1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}/*!
 * PhotoSphereViewer 5.1.4
 * @copyright 2014-2015 Jérémy Heleine
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var s=Object.defineProperty,__export=function(e,t){for(var n in t)s(e,n,{get:t[n],enumerable:!0})},c={};__export(c,{ACTIONS:function(){return g},ANIMATION_MIN_DURATION:function(){return u},CTRLZOOM_TIMEOUT:function(){return f},DBLCLICK_DELAY:function(){return d},DEFAULT_TRANSITION:function(){return l},EASINGS:function(){return k},ICONS:function(){return E},IDS:function(){return w},INERTIA_WINDOW:function(){return _},KEY_CODES:function(){return b},LONGTOUCH_DELAY:function(){return v},MOVE_THRESHOLD:function(){return h},SPHERE_RADIUS:function(){return y},TWOFINGERSOVERLAY_DELAY:function(){return p},VIEWER_DATA:function(){return m}});var l=1500,u=500,h=4,d=300,v=500,p=100,f=2e3,_=300,y=10,m="photoSphereViewer",g=((i=g||{}).ROTATE_UP="ROTATE_UP",i.ROTATE_DOWN="ROTATE_DOWN",i.ROTATE_RIGHT="ROTATE_RIGHT",i.ROTATE_LEFT="ROTATE_LEFT",i.ZOOM_IN="ZOOM_IN",i.ZOOM_OUT="ZOOM_OUT",i),w={MENU:"menu",TWO_FINGERS:"twoFingers",CTRL_ZOOM:"ctrlZoom",ERROR:"error",DESCRIPTION:"description"},b={Enter:"Enter",Control:"Control",Escape:"Escape",Space:" ",PageUp:"PageUp",PageDown:"PageDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",Delete:"Delete",Plus:"+",Minus:"-"},E={arrow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="40 40 432 432"><g transform="rotate(0, 256, 256)"><path fill="currentColor" d="M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z"/></g><!-- Created by Flatart from the Noun Project --></svg>\n',close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g fill="currentColor" transform=" translate(50, 50) rotate(45)"><rect x="-5" y="-65" width="10" height="130"/><rect x="-65" y="-5" width="130" height="10"/></g></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z"/><path fill="currentColor" d="M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z"/><!--Created by Michael Zenaty from the Noun Project--></svg>\n',fullscreenIn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z"/><!--Created by Garrett Knoll from the Noun Project--></svg>\n',fullscreenOut:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z"/><!--Created by Garrett Knoll from the Noun Project--></svg>\n',info:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path fill="currentColor" d="M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z"/><circle fill="currentColor" cx="39.3" cy="9.2" r="8.2"/><!--Created by Arafat Uddin from the Noun Project--></svg>\n',menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 80 80"><g fill="currentColor"><circle r="10" cx="20" cy="20"/><circle r="10" cx="50" cy="20"/><circle r="10" cx="80" cy="20"/><circle r="10" cx="20" cy="50"/><circle r="10" cx="50" cy="50"/><circle r="10" cx="80" cy="50"/><circle r="10" cx="20" cy="80"/><circle r="10" cx="50" cy="80"/><circle r="10" cx="80" cy="80"/></g><!-- Created by Richard Kun\xe1k from the Noun Project--></svg>\n',zoomIn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z"/><!--Created by Ryan Canning from the Noun Project--></svg>\n',zoomOut:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M4.006 6.746h7.459V8.73H4.006z"/><!--Created by Ryan Canning from the Noun Project--></svg>\n'},k={linear:function(e){return e},inQuad:function(e){return e*e},outQuad:function(e){return e*(2-e)},inOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inQuart:function(e){return e*e*e*e},outQuart:function(e){return 1- --e*e*e*e},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return 1+--e*e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},inSine:function(e){return 1-Math.cos(e*(Math.PI/2))},outSine:function(e){return Math.sin(e*(Math.PI/2))},inOutSine:function(e){return .5-.5*Math.cos(Math.PI*e)},inExpo:function(e){return Math.pow(2,10*(e-1))},outExpo:function(e){return 1-Math.pow(2,-10*e)},inOutExpo:function(e){return(e=2*e-1)<0?.5*Math.pow(2,10*e):1-.5*Math.pow(2,-10*e)},inCirc:function(e){return 1-Math.sqrt(1-e*e)},outCirc:function(e){return Math.sqrt(1-(e-1)*(e-1))},inOutCirc:function(e){return(e*=2)<1?.5-.5*Math.sqrt(1-e*e):.5+.5*Math.sqrt(1-(e-=2)*e)}},C={};function _wrap(e,t){var n=e%t;return n<0&&(n+=t),n}function _sum(e){return e.reduce(function(e,t){return e+t},0)}function _distance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _angle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function _getShortestArc(e,t){return[0,2*Math.PI,-(2*Math.PI)].reduce(function(n,i){var r=t-e+i;return Math.abs(r)<Math.abs(n)?r:n},1/0)}function _getAngle(e,t){return Math.acos(Math.cos(e.pitch)*Math.cos(t.pitch)*Math.cos(e.yaw-t.yaw)+Math.sin(e.pitch)*Math.sin(t.pitch))}function _greatArcDistance(e,t){var n=_slicedToArray(e,2),i=n[0],r=n[1],o=_slicedToArray(t,2),a=o[0],s=o[1],c=(a-i)*Math.cos((r+s)/2),l=s-r;return Math.sqrt(c*c+l*l)}function _getElement(e){return"string"==typeof e?e.match(/^[a-z]/i)?document.getElementById(e):document.querySelector(e):e}function _toggleClass(e,t,n){void 0===n?e.classList.toggle(t):n?e.classList.add(t):n||e.classList.remove(t)}function _addClasses(e,t){var n;(n=e.classList).add.apply(n,_toConsumableArray(t.split(" ")))}function _removeClasses(e,t){var n;(n=e.classList).remove.apply(n,_toConsumableArray(t.split(" ")))}function _hasParent(e,t){var n=e;do{if(n===t)return!0;n=n.parentElement}while(n);return!1}function _getClosest(e,t){if(!(null!=e&&e.matches))return null;var n=e;do{if(n.matches(t))return n;n=n.parentElement}while(n);return null}function _getPosition(e){for(var t=0,n=0,i=e;i;)t+=i.offsetLeft-i.scrollLeft+i.clientLeft,n+=i.offsetTop-i.scrollTop+i.clientTop,i=i.offsetParent;return{x:t,y:n}}function _getStyle(e,t){return window.getComputedStyle(e,null)[t]}function _getTouchData(e){if(e.touches.length<2)return null;var t={x:e.touches[0].clientX,y:e.touches[0].clientY},n={x:e.touches[1].clientX,y:e.touches[1].clientY};return{distance:_distance(t,n),angle:_angle(t,n),center:{x:(t.x+n.x)/2,y:(t.y+n.y)/2}}}function _isFullscreenEnabled(e){return(document.fullscreenElement||document.webkitFullscreenElement)===e}function _requestFullscreen(e){(e.requestFullscreen||e.webkitRequestFullscreen).call(e)}function _exitFullscreen(){(document.exitFullscreen||document.webkitExitFullscreen).call(document)}function _dasherize(e){return e.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,function(e,t){return(t>0?"-":"")+e.toLowerCase()})}function _throttle(e,t){var n=!1;return function(){for(var i=this,r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n||(n=!0,setTimeout(function(){e.apply(i,o),n=!1},t))}}function _isPlainObject(e){if("object"!==_typeof(e)||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _deepmerge(e,t){return function merge(e,n){return Array.isArray(n)?(e&&Array.isArray(e)?e.length=0:e=[],n.forEach(function(t,n){e[n]=merge(null,t)})):"object"===_typeof(n)?((!e||Array.isArray(e))&&(e={}),Object.keys(n).forEach(function(i){"object"===_typeof(n[i])&&n[i]&&_isPlainObject(n[i])?n[i]!==t&&(e[i]?merge(e[i],n[i]):e[i]=merge(null,n[i])):e[i]=n[i]})):e=n,e}(e,t)}function _clone(e){return _deepmerge(null,e)}function _isEmpty(e){return!e||0===Object.keys(e).length&&e.constructor===Object}function _isNil(e){return null==e}function _firstNonNull(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++){var r=t[i];if(!_isNil(r))return r}return null}function _deepEqual(e,t){if(e===t)return!0;if(!(isObject(e)&&isObject(t))||Object.keys(e).length!==Object.keys(t).length)return!1;for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];if(!_deepEqual(e[r],t[r]))return!1}return!0}function isObject(e){return"object"===_typeof(e)&&null!==e}__export(C,{Animation:function(){return A},Dynamic:function(){return I},MultiDynamic:function(){return R},PressHandler:function(){return z},Slider:function(){return N},SliderDirection:function(){return H},addClasses:function(){return _addClasses},angle:function(){return _angle},applyEulerInverse:function(){return _applyEulerInverse},cleanCssPosition:function(){return _cleanCssPosition},clone:function(){return _clone},createTexture:function(){return _createTexture},cssPositionIsOrdered:function(){return _cssPositionIsOrdered},dasherize:function(){return _dasherize},deepEqual:function(){return _deepEqual},deepmerge:function(){return _deepmerge},distance:function(){return _distance},exitFullscreen:function(){return _exitFullscreen},firstNonNull:function(){return _firstNonNull},getAbortError:function(){return _getAbortError},getAngle:function(){return _getAngle},getClosest:function(){return _getClosest},getConfigParser:function(){return _getConfigParser},getElement:function(){return _getElement},getPosition:function(){return _getPosition},getShortestArc:function(){return _getShortestArc},getStyle:function(){return _getStyle},getTouchData:function(){return _getTouchData},getXMPValue:function(){return _getXMPValue},greatArcDistance:function(){return _greatArcDistance},hasParent:function(){return _hasParent},invertResolvableBoolean:function(){return _invertResolvableBoolean},isAbortError:function(){return _isAbortError},isEmpty:function(){return _isEmpty},isExtendedPosition:function(){return _isExtendedPosition},isFullscreenEnabled:function(){return _isFullscreenEnabled},isNil:function(){return _isNil},isPlainObject:function(){return _isPlainObject},logWarn:function(){return _logWarn},parseAngle:function(){return _parseAngle},parsePoint:function(){return _parsePoint},parseSpeed:function(){return _parseSpeed},removeClasses:function(){return _removeClasses},requestFullscreen:function(){return _requestFullscreen},resolveBoolean:function(){return _resolveBoolean},sum:function(){return _sum},throttle:function(){return _throttle},toggleClass:function(){return _toggleClass},wrap:function(){return _wrap}});var T=function(e){_inherits(PSVError,e);var t=_createSuper(PSVError);function PSVError(e){var n,i;return _classCallCheck(this,PSVError),(i=t.call(this,e)).name="PSVError",null===(n=Error.captureStackTrace)||void 0===n||n.call(Error,_assertThisInitialized(i),PSVError),i}return _createClass(PSVError)}(_wrapNativeSuper(Error));function _resolveBoolean(e,t){_isPlainObject(e)?(t(e.initial,!0),e.promise.then(function(e){return t(e,!1)})):t(e,!0)}function _invertResolvableBoolean(e){return{initial:!e.initial,promise:e.promise.then(function(e){return!e})}}function _getAbortError(){var e=Error("Loading was aborted.");return e.name="AbortError",e}function _isAbortError(e){return(null==e?void 0:e.name)==="AbortError"}function _logWarn(e){console.warn("PhotoSphereViewer: ".concat(e))}function _isExtendedPosition(e){return!!e&&[["textureX","textureY"],["yaw","pitch"]].some(function(t){var n=_slicedToArray(t,2),i=n[0],r=n[1];return void 0!==e[i]&&void 0!==e[r]})}function _getXMPValue(e,t){var n=e.match("<GPano:"+t+">(.*)</GPano:"+t+">");if(null!==n){var i=parseInt(n[1],10);return isNaN(i)?null:i}if(null!==(n=e.match("GPano:"+t+'="(.*?)"'))){var r=parseInt(n[1],10);return isNaN(r)?null:r}return null}var O={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},P=["left","center","right"],M=["top","center","bottom"],S=[].concat(P,M),x="center";function _parsePoint(e){if(!e)return{x:.5,y:.5};if("object"===_typeof(e))return e;var t=e.toLocaleLowerCase().split(" ").slice(0,2);1===t.length&&(t=O[t[0]]?[t[0],x]:[t[0],t[0]]);var n="left"!==t[1]&&"right"!==t[1]&&"top"!==t[0]&&"bottom"!==t[0];t=t.map(function(e){return O[e]||e}),n||t.reverse();var i=t.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return i?{x:parseFloat(i[1])/100,y:parseFloat(i[2])/100}:{x:.5,y:.5}}function _cleanCssPosition(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allowCenter:!0,cssOrder:!0},n=t.allowCenter,i=t.cssOrder;return e?("string"==typeof e&&(e=e.split(" ")),1===e.length&&(e[0]===x?e=[x,x]:-1!==P.indexOf(e[0])?e=[x,e[0]]:-1!==M.indexOf(e[0])&&(e=[e[0],x])),2!==e.length||-1===S.indexOf(e[0])||-1===S.indexOf(e[1]))?(_logWarn("Unparsable position ".concat(e)),null):n||e[0]!==x||e[1]!==x?(i&&!_cssPositionIsOrdered(e)&&(e=[e[1],e[0]]),e[1]===x&&-1!==P.indexOf(e[0])&&(e=[x,e[0]]),e[0]===x&&-1!==M.indexOf(e[1])&&(e=[e[1],x]),e):(_logWarn("Invalid position center center"),null):null}function _cssPositionIsOrdered(e){return -1!==M.indexOf(e[0])&&-1!==P.indexOf(e[1])}function _parseSpeed(e){var t;if("string"==typeof e){var n=e.toString().trim(),i=parseFloat(n.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1")),r=n.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(r.match(/(pm|per minute)$/)&&(i/=60),r){case"dpm":case"degrees per minute":case"dps":case"degrees per second":t=a.M8C.degToRad(i);break;case"rdpm":case"radians per minute":case"rdps":case"radians per second":t=i;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":t=i*Math.PI*2;break;default:throw new T('Unknown speed unit "'.concat(r,'"'))}}else t=e;return t}function _parseAngle(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;if("string"==typeof e){var r=e.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!r)throw new T('Unknown angle "'.concat(e,'"'));var o=parseFloat(r[1]),s=r[2];if(s)switch(s){case"deg":case"degs":t=a.M8C.degToRad(o);break;case"rad":case"rads":t=o;break;default:throw new T('Unknown angle unit "'.concat(s,'"'))}else t=o}else if("number"!=typeof e||isNaN(e))throw new T('Unknown angle "'.concat(e,'"'));else t=e;return t=_wrap(n?t+Math.PI:t,2*Math.PI),n?a.M8C.clamp(t-Math.PI,-Math.PI/(i?2:1),Math.PI/(i?2:1)):t}function _createTexture(e){var t=new a.xEZ(e);return t.needsUpdate=!0,t.minFilter=a.wem,t.generateMipmaps=!1,t}var L=new a._fP;function _applyEulerInverse(e,t){L.setFromEuler(t).invert(),e.applyQuaternion(L)}function _getConfigParser(e,t){var parser=function(n){if(!n)return _clone(e);for(var i=_clone(_objectSpread(_objectSpread({},e),n)),r={},o=0,a=Object.entries(i);o<a.length;o++){var s=_slicedToArray(a[o],2),c=s[0],l=s[1];if(t&&c in t)l=t[c](l,{rawConfig:i,defValue:e[c]});else if(!(c in e)){_logWarn("Unknown option ".concat(c));continue}r[c]=l}return r};return parser.defaults=e,parser.parsers=t||{},parser}var A=function(){function _Animation(e){var t=this;_classCallCheck(this,_Animation),this.easing=k.linear,this.callbacks=[],this.resolved=!1,this.cancelled=!1,this.options=e,e?(e.easing&&(this.easing="function"==typeof e.easing?e.easing:k[e.easing]||k.linear),this.delayTimeout=setTimeout(function(){t.delayTimeout=void 0,t.animationFrame=window.requestAnimationFrame(function(e){return t.__run(e)})},e.delay||0)):this.resolved=!0}return _createClass(_Animation,[{key:"__run",value:function(e){var t=this;if(!this.cancelled){this.start||(this.start=e);var n=(e-this.start)/this.options.duration,i={};if(n<1){for(var r=0,o=Object.entries(this.options.properties);r<o.length;r++){var a=_slicedToArray(o[r],2),s=a[0],c=a[1];if(c){var l=c.start+(c.end-c.start)*this.easing(n);i[s]=l}}this.options.onTick(i,n),this.animationFrame=window.requestAnimationFrame(function(e){return t.__run(e)})}else{for(var u=0,h=Object.entries(this.options.properties);u<h.length;u++){var d=_slicedToArray(h[u],2),v=d[0],p=d[1];p&&(i[v]=p.end)}this.options.onTick(i,1),this.__resolve(!0),this.animationFrame=void 0}}}},{key:"__resolve",value:function(e){e?this.resolved=!0:this.cancelled=!0,this.callbacks.forEach(function(t){return t(e)}),this.callbacks.length=0}},{key:"then",value:function(e){var t=this;return this.resolved||this.cancelled?Promise.resolve(this.resolved).then(e):new Promise(function(e){t.callbacks.push(e)}).then(e)}},{key:"cancel",value:function(){this.cancelled||this.resolved||(this.__resolve(!1),this.delayTimeout&&(window.clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.animationFrame&&(window.cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0))}}]),_Animation}(),I=function(){function _Dynamic(e,t){if(_classCallCheck(this,_Dynamic),this.fn=e,this.mode=0,this.speed=0,this.speedMult=0,this.currentSpeed=0,this.target=0,this.__current=0,this.min=t.min,this.max=t.max,this.wrap=t.wrap,this.current=t.defaultValue,this.wrap&&0!==this.min)throw new T("invalid config");this.fn&&this.fn(this.current)}return _createClass(_Dynamic,[{key:"current",get:function(){return this.__current},set:function(e){this.__current=e}},{key:"setSpeed",value:function(e){this.speed=e}},{key:"goto",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.mode=2,this.target=this.wrap?_wrap(e,this.max):a.M8C.clamp(e,this.min,this.max),this.speedMult=t}},{key:"step",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;0===t?this.setValue(this.current+e):(2!==this.mode&&(this.target=this.current),this.goto(this.target+e,t))}},{key:"roll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.mode=1,this.target=e?-1/0:1/0,this.speedMult=t}},{key:"stop",value:function(){this.mode=0}},{key:"setValue",value:function(e){return this.target=this.wrap?_wrap(e,this.max):a.M8C.clamp(e,this.min,this.max),this.mode=0,this.currentSpeed=0,this.target!==this.current&&(this.current=this.target,this.fn&&this.fn(this.current),!0)}},{key:"update",value:function(e){if(2===this.mode){this.wrap&&Math.abs(this.target-this.current)>this.max/2&&(this.current=this.current<this.target?this.current+this.max:this.current-this.max);var t=this.currentSpeed*this.currentSpeed/(this.speed*this.speedMult*4);Math.abs(this.target-this.current)<=t&&(this.mode=0)}var n=0===this.mode?0:this.speed*this.speedMult;this.target<this.current&&(n=-n),this.currentSpeed<n?this.currentSpeed=Math.min(n,this.currentSpeed+e/1e3*this.speed*this.speedMult*2):this.currentSpeed>n&&(this.currentSpeed=Math.max(n,this.currentSpeed-e/1e3*this.speed*this.speedMult*2));var i=null;return this.current>this.target&&this.currentSpeed?i=Math.max(this.target,this.current+this.currentSpeed*e/1e3):this.current<this.target&&this.currentSpeed&&(i=Math.min(this.target,this.current+this.currentSpeed*e/1e3)),null!==i&&(i=this.wrap?_wrap(i,this.max):a.M8C.clamp(i,this.min,this.max))!==this.current&&(this.current=i,this.fn&&this.fn(this.current),!0)}}]),_Dynamic}(),R=function(){function _MultiDynamic(e,t){_classCallCheck(this,_MultiDynamic),this.fn=e,this.dynamics=t,this.fn&&this.fn(this.current)}return _createClass(_MultiDynamic,[{key:"current",get:function(){return Object.entries(this.dynamics).reduce(function(e,t){var n=_slicedToArray(t,2),i=n[0],r=n[1];return e[i]=r.current,e},{})}},{key:"setSpeed",value:function(e){for(var t=0,n=Object.values(this.dynamics);t<n.length;t++)n[t].setSpeed(e)}},{key:"goto",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=Object.entries(e);n<i.length;n++){var r=_slicedToArray(i[n],2),o=r[0],a=r[1];this.dynamics[o].goto(a,t)}}},{key:"step",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===n)this.setValue(Object.keys(e).reduce(function(n,i){return n[i]=e[i]+t.dynamics[i].current,n},{}));else for(var i=0,r=Object.entries(e);i<r.length;i++){var o=_slicedToArray(r[i],2),a=o[0],s=o[1];this.dynamics[a].step(s,n)}}},{key:"roll",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=Object.entries(e);n<i.length;n++){var r=_slicedToArray(i[n],2),o=r[0],a=r[1];this.dynamics[o].roll(a,t)}}},{key:"stop",value:function(){for(var e=0,t=Object.values(this.dynamics);e<t.length;e++)t[e].stop()}},{key:"setValue",value:function(e){for(var t=!1,n=0,i=Object.entries(e);n<i.length;n++){var r=_slicedToArray(i[n],2),o=r[0],a=r[1];t=this.dynamics[o].setValue(a)||t}return t&&this.fn&&this.fn(this.current),t}},{key:"update",value:function(e){for(var t=!1,n=0,i=Object.values(this.dynamics);n<i.length;n++)t=i[n].update(e)||t;return t&&this.fn&&this.fn(this.current),t}}]),_MultiDynamic}(),z=function(){function _PressHandler(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;_classCallCheck(this,_PressHandler),this.delay=e,this.time=0,this.delay=e}return _createClass(_PressHandler,[{key:"pending",get:function(){return 0!==this.time}},{key:"down",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.time=new Date().getTime()}},{key:"up",value:function(e){var t=this;this.time&&(Date.now()-this.time<this.delay?this.timeout=setTimeout(function(){e(),t.timeout=void 0,t.time=0},this.delay):(e(),this.time=0))}}]),_PressHandler}(),H=((r=H||{}).VERTICAL="VERTICAL",r.HORIZONTAL="HORIZONTAL",r),N=function(){function _Slider(e,t,n){_classCallCheck(this,_Slider),this.container=e,this.direction=t,this.listener=n,this.mousedown=!1,this.mouseover=!1,this.container.addEventListener("click",this),this.container.addEventListener("mousedown",this),this.container.addEventListener("mouseenter",this),this.container.addEventListener("mouseleave",this),this.container.addEventListener("touchstart",this),this.container.addEventListener("mousemove",this,!0),this.container.addEventListener("touchmove",this,!0),window.addEventListener("mouseup",this),window.addEventListener("touchend",this)}return _createClass(_Slider,[{key:"isVertical",get:function(){return"VERTICAL"===this.direction}},{key:"isHorizontal",get:function(){return"HORIZONTAL"===this.direction}},{key:"destroy",value:function(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this)}},{key:"handleEvent",value:function(e){switch(e.type){case"click":e.stopPropagation();break;case"mousedown":this.__onMouseDown(e);break;case"mouseenter":this.__onMouseEnter(e);break;case"mouseleave":this.__onMouseLeave(e);break;case"touchstart":this.__onTouchStart(e);break;case"mousemove":this.__onMouseMove(e);break;case"touchmove":this.__onTouchMove(e);break;case"mouseup":this.__onMouseUp(e);break;case"touchend":this.__onTouchEnd(e)}}},{key:"__onMouseDown",value:function(e){this.mousedown=!0,this.__update(e.clientX,e.clientY,!0)}},{key:"__onMouseEnter",value:function(e){this.mouseover=!0,this.__update(e.clientX,e.clientY,!0)}},{key:"__onTouchStart",value:function(e){this.mouseover=!0,this.mousedown=!0;var t=e.changedTouches[0];this.__update(t.clientX,t.clientY,!0)}},{key:"__onMouseMove",value:function(e){(this.mousedown||this.mouseover)&&(e.stopPropagation(),this.__update(e.clientX,e.clientY,!0))}},{key:"__onTouchMove",value:function(e){if(this.mousedown||this.mouseover){e.stopPropagation();var t=e.changedTouches[0];this.__update(t.clientX,t.clientY,!0)}}},{key:"__onMouseUp",value:function(e){this.mousedown&&(this.mousedown=!1,this.__update(e.clientX,e.clientY,!1))}},{key:"__onMouseLeave",value:function(e){this.mouseover&&(this.mouseover=!1,this.__update(e.clientX,e.clientY,!0))}},{key:"__onTouchEnd",value:function(e){if(this.mousedown){this.mouseover=!1,this.mousedown=!1;var t=e.changedTouches[0];this.__update(t.clientX,t.clientY,!1)}}},{key:"__update",value:function(e,t,n){var i=this.container.getBoundingClientRect(),r=this.isVertical?t:e,o=i[this.isVertical?"bottom":"left"],a=i[this.isVertical?"height":"width"];this.listener({value:Math.abs((o-r)/a),click:!n,mousedown:this.mousedown,mouseover:this.mouseover,cursor:{clientX:e,clientY:t}})}}]),_Slider}(),j={};__export(j,{BeforeAnimateEvent:function(){return U},BeforeRenderEvent:function(){return V},BeforeRotateEvent:function(){return W},ClickEvent:function(){return Z},ConfigChangedEvent:function(){return Y},DoubleClickEvent:function(){return X},FullscreenEvent:function(){return G},HideNotificationEvent:function(){return q},HideOverlayEvent:function(){return K},HidePanelEvent:function(){return $},HideTooltipEvent:function(){return Q},KeypressEvent:function(){return J},LoadProgressEvent:function(){return ee},ObjectEnterEvent:function(){return ev},ObjectEvent:function(){return ed},ObjectHoverEvent:function(){return ef},ObjectLeaveEvent:function(){return ep},PanoramaLoadedEvent:function(){return et},PositionUpdatedEvent:function(){return en},ReadyEvent:function(){return ei},RenderEvent:function(){return er},ShowNotificationEvent:function(){return eo},ShowOverlayEvent:function(){return ea},ShowPanelEvent:function(){return es},ShowTooltipEvent:function(){return ec},SizeUpdatedEvent:function(){return el},StopAllEvent:function(){return eu},ViewerEvent:function(){return B},ZoomUpdatedEvent:function(){return eh}});var D=function(e){_inherits(TypedEvent,e);var t=_createSuper(TypedEvent);function TypedEvent(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _classCallCheck(this,TypedEvent),t.call(this,e,{cancelable:n})}return _createClass(TypedEvent)}(_wrapNativeSuper(Event)),F=function(e){_inherits(TypedEventTarget,e);var t=_createSuper(TypedEventTarget);function TypedEventTarget(){return _classCallCheck(this,TypedEventTarget),t.apply(this,arguments)}return _createClass(TypedEventTarget,[{key:"dispatchEvent",value:function(e){return _get(_getPrototypeOf(TypedEventTarget.prototype),"dispatchEvent",this).call(this,e)}},{key:"addEventListener",value:function(e,t,n){_get(_getPrototypeOf(TypedEventTarget.prototype),"addEventListener",this).call(this,e,t,n)}},{key:"removeEventListener",value:function(e,t,n){_get(_getPrototypeOf(TypedEventTarget.prototype),"removeEventListener",this).call(this,e,t,n)}}]),TypedEventTarget}(_wrapNativeSuper(EventTarget)),B=function(e){_inherits(_ViewerEvent,e);var t=_createSuper(_ViewerEvent);function _ViewerEvent(){return _classCallCheck(this,_ViewerEvent),t.apply(this,arguments)}return _createClass(_ViewerEvent)}(D),U=function(e){_inherits(_BeforeAnimateEvent,e);var t=_createSuper(_BeforeAnimateEvent);function _BeforeAnimateEvent(e,n){var i;return _classCallCheck(this,_BeforeAnimateEvent),(i=t.call(this,_BeforeAnimateEvent.type,!0)).position=e,i.zoomLevel=n,i}return _createClass(_BeforeAnimateEvent)}(B);U.type="before-animate";var V=function(e){_inherits(_BeforeRenderEvent,e);var t=_createSuper(_BeforeRenderEvent);function _BeforeRenderEvent(e,n){var i;return _classCallCheck(this,_BeforeRenderEvent),(i=t.call(this,_BeforeRenderEvent.type)).timestamp=e,i.elapsed=n,i}return _createClass(_BeforeRenderEvent)}(B);V.type="before-render";var W=function(e){_inherits(_BeforeRotateEvent,e);var t=_createSuper(_BeforeRotateEvent);function _BeforeRotateEvent(e){var n;return _classCallCheck(this,_BeforeRotateEvent),(n=t.call(this,_BeforeRotateEvent.type,!0)).position=e,n}return _createClass(_BeforeRotateEvent)}(B);W.type="before-rotate";var Z=function(e){_inherits(_ClickEvent,e);var t=_createSuper(_ClickEvent);function _ClickEvent(e){var n;return _classCallCheck(this,_ClickEvent),(n=t.call(this,_ClickEvent.type)).data=e,n}return _createClass(_ClickEvent)}(B);Z.type="click";var Y=function(e){_inherits(_ConfigChangedEvent,e);var t=_createSuper(_ConfigChangedEvent);function _ConfigChangedEvent(e){var n;return _classCallCheck(this,_ConfigChangedEvent),(n=t.call(this,_ConfigChangedEvent.type)).options=e,n}return _createClass(_ConfigChangedEvent,[{key:"containsOptions",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.some(function(t){return e.options.includes(t)})}}]),_ConfigChangedEvent}(B);Y.type="config-changed";var X=function(e){_inherits(_DoubleClickEvent,e);var t=_createSuper(_DoubleClickEvent);function _DoubleClickEvent(e){var n;return _classCallCheck(this,_DoubleClickEvent),(n=t.call(this,_DoubleClickEvent.type)).data=e,n}return _createClass(_DoubleClickEvent)}(B);X.type="dblclick";var G=function(e){_inherits(_FullscreenEvent,e);var t=_createSuper(_FullscreenEvent);function _FullscreenEvent(e){var n;return _classCallCheck(this,_FullscreenEvent),(n=t.call(this,_FullscreenEvent.type)).fullscreenEnabled=e,n}return _createClass(_FullscreenEvent)}(B);G.type="fullscreen";var q=function(e){_inherits(_HideNotificationEvent,e);var t=_createSuper(_HideNotificationEvent);function _HideNotificationEvent(e){var n;return _classCallCheck(this,_HideNotificationEvent),(n=t.call(this,_HideNotificationEvent.type)).notificationId=e,n}return _createClass(_HideNotificationEvent)}(B);q.type="hide-notification";var K=function(e){_inherits(_HideOverlayEvent,e);var t=_createSuper(_HideOverlayEvent);function _HideOverlayEvent(e){var n;return _classCallCheck(this,_HideOverlayEvent),(n=t.call(this,_HideOverlayEvent.type)).overlayId=e,n}return _createClass(_HideOverlayEvent)}(B);K.type="hide-overlay";var $=function(e){_inherits(_HidePanelEvent,e);var t=_createSuper(_HidePanelEvent);function _HidePanelEvent(e){var n;return _classCallCheck(this,_HidePanelEvent),(n=t.call(this,_HidePanelEvent.type)).panelId=e,n}return _createClass(_HidePanelEvent)}(B);$.type="hide-panel";var Q=function(e){_inherits(_HideTooltipEvent,e);var t=_createSuper(_HideTooltipEvent);function _HideTooltipEvent(e){var n;return _classCallCheck(this,_HideTooltipEvent),(n=t.call(this,_HideTooltipEvent.type)).tooltipData=e,n}return _createClass(_HideTooltipEvent)}(B);Q.type="hide-tooltip";var J=function(e){_inherits(_KeypressEvent,e);var t=_createSuper(_KeypressEvent);function _KeypressEvent(e){var n;return _classCallCheck(this,_KeypressEvent),(n=t.call(this,_KeypressEvent.type,!0)).key=e,n}return _createClass(_KeypressEvent)}(B);J.type="key-press";var ee=function(e){_inherits(_LoadProgressEvent,e);var t=_createSuper(_LoadProgressEvent);function _LoadProgressEvent(e){var n;return _classCallCheck(this,_LoadProgressEvent),(n=t.call(this,_LoadProgressEvent.type)).progress=e,n}return _createClass(_LoadProgressEvent)}(B);ee.type="load-progress";var et=function(e){_inherits(_PanoramaLoadedEvent,e);var t=_createSuper(_PanoramaLoadedEvent);function _PanoramaLoadedEvent(e){var n;return _classCallCheck(this,_PanoramaLoadedEvent),(n=t.call(this,_PanoramaLoadedEvent.type)).data=e,n}return _createClass(_PanoramaLoadedEvent)}(B);et.type="panorama-loaded";var en=function(e){_inherits(_PositionUpdatedEvent,e);var t=_createSuper(_PositionUpdatedEvent);function _PositionUpdatedEvent(e){var n;return _classCallCheck(this,_PositionUpdatedEvent),(n=t.call(this,_PositionUpdatedEvent.type)).position=e,n}return _createClass(_PositionUpdatedEvent)}(B);en.type="position-updated";var ei=function(e){_inherits(_ReadyEvent,e);var t=_createSuper(_ReadyEvent);function _ReadyEvent(){return _classCallCheck(this,_ReadyEvent),t.call(this,_ReadyEvent.type)}return _createClass(_ReadyEvent)}(B);ei.type="ready";var er=function(e){_inherits(_RenderEvent,e);var t=_createSuper(_RenderEvent);function _RenderEvent(){return _classCallCheck(this,_RenderEvent),t.call(this,_RenderEvent.type)}return _createClass(_RenderEvent)}(B);er.type="render";var eo=function(e){_inherits(_ShowNotificationEvent,e);var t=_createSuper(_ShowNotificationEvent);function _ShowNotificationEvent(e){var n;return _classCallCheck(this,_ShowNotificationEvent),(n=t.call(this,_ShowNotificationEvent.type)).notificationId=e,n}return _createClass(_ShowNotificationEvent)}(B);eo.type="show-notification";var ea=function(e){_inherits(_ShowOverlayEvent,e);var t=_createSuper(_ShowOverlayEvent);function _ShowOverlayEvent(e){var n;return _classCallCheck(this,_ShowOverlayEvent),(n=t.call(this,_ShowOverlayEvent.type)).overlayId=e,n}return _createClass(_ShowOverlayEvent)}(B);ea.type="show-overlay";var es=function(e){_inherits(_ShowPanelEvent,e);var t=_createSuper(_ShowPanelEvent);function _ShowPanelEvent(e){var n;return _classCallCheck(this,_ShowPanelEvent),(n=t.call(this,_ShowPanelEvent.type)).panelId=e,n}return _createClass(_ShowPanelEvent)}(B);es.type="show-panel";var ec=function(e){_inherits(_ShowTooltipEvent,e);var t=_createSuper(_ShowTooltipEvent);function _ShowTooltipEvent(e,n){var i;return _classCallCheck(this,_ShowTooltipEvent),(i=t.call(this,_ShowTooltipEvent.type)).tooltip=e,i.tooltipData=n,i}return _createClass(_ShowTooltipEvent)}(B);ec.type="show-tooltip";var el=function(e){_inherits(_SizeUpdatedEvent,e);var t=_createSuper(_SizeUpdatedEvent);function _SizeUpdatedEvent(e){var n;return _classCallCheck(this,_SizeUpdatedEvent),(n=t.call(this,_SizeUpdatedEvent.type)).size=e,n}return _createClass(_SizeUpdatedEvent)}(B);el.type="size-updated";var eu=function(e){_inherits(_StopAllEvent,e);var t=_createSuper(_StopAllEvent);function _StopAllEvent(){return _classCallCheck(this,_StopAllEvent),t.call(this,_StopAllEvent.type)}return _createClass(_StopAllEvent)}(B);eu.type="stop-all";var eh=function(e){_inherits(_ZoomUpdatedEvent,e);var t=_createSuper(_ZoomUpdatedEvent);function _ZoomUpdatedEvent(e){var n;return _classCallCheck(this,_ZoomUpdatedEvent),(n=t.call(this,_ZoomUpdatedEvent.type)).zoomLevel=e,n}return _createClass(_ZoomUpdatedEvent)}(B);eh.type="zoom-updated";var ed=function(e){_inherits(_ObjectEvent,e);var t=_createSuper(_ObjectEvent);function _ObjectEvent(e,n,i,r,o){var a;return _classCallCheck(this,_ObjectEvent),(a=t.call(this,e)).originalEvent=n,a.object=i,a.viewerPoint=r,a.userDataKey=o,a}return _createClass(_ObjectEvent)}(B),ev=function(e){_inherits(_ObjectEnterEvent,e);var t=_createSuper(_ObjectEnterEvent);function _ObjectEnterEvent(e,n,i,r){return _classCallCheck(this,_ObjectEnterEvent),t.call(this,_ObjectEnterEvent.type,e,n,i,r)}return _createClass(_ObjectEnterEvent)}(ed);ev.type="enter-object";var ep=function(e){_inherits(_ObjectLeaveEvent,e);var t=_createSuper(_ObjectLeaveEvent);function _ObjectLeaveEvent(e,n,i,r){return _classCallCheck(this,_ObjectLeaveEvent),t.call(this,_ObjectLeaveEvent.type,e,n,i,r)}return _createClass(_ObjectLeaveEvent)}(ed);ep.type="leave-object";var ef=function(e){_inherits(_ObjectHoverEvent,e);var t=_createSuper(_ObjectHoverEvent);function _ObjectHoverEvent(e,n,i,r){return _classCallCheck(this,_ObjectHoverEvent),t.call(this,_ObjectHoverEvent.type,e,n,i,r)}return _createClass(_ObjectHoverEvent)}(ed);ef.type="hover-object";var e_=function(){function _AbstractAdapter(e){_classCallCheck(this,_AbstractAdapter),this.viewer=e}return _createClass(_AbstractAdapter,[{key:"destroy",value:function(){}},{key:"supportsTransition",value:function(e){return!1}},{key:"supportsPreload",value:function(e){return!1}}],[{key:"createOverlayMaterial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.additionalUniforms,i=t.overrideVertexShader;return new a.jyz({uniforms:_objectSpread(_objectSpread({},n),{},(_defineProperty(e={},_AbstractAdapter.OVERLAY_UNIFORMS.panorama,{value:new a.xEZ}),_defineProperty(e,_AbstractAdapter.OVERLAY_UNIFORMS.overlay,{value:new a.xEZ}),_defineProperty(e,_AbstractAdapter.OVERLAY_UNIFORMS.globalOpacity,{value:1}),_defineProperty(e,_AbstractAdapter.OVERLAY_UNIFORMS.overlayOpacity,{value:1}),e)),vertexShader:i||"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix *  modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"\nuniform sampler2D ".concat(_AbstractAdapter.OVERLAY_UNIFORMS.panorama,";\nuniform sampler2D ").concat(_AbstractAdapter.OVERLAY_UNIFORMS.overlay,";\nuniform float ").concat(_AbstractAdapter.OVERLAY_UNIFORMS.globalOpacity,";\nuniform float ").concat(_AbstractAdapter.OVERLAY_UNIFORMS.overlayOpacity,";\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 tColor1 = texture2D( ").concat(_AbstractAdapter.OVERLAY_UNIFORMS.panorama,", vUv );\n  vec4 tColor2 = texture2D( ").concat(_AbstractAdapter.OVERLAY_UNIFORMS.overlay,", vUv );\n  gl_FragColor = vec4(\n    mix( tColor1.rgb, tColor2.rgb, tColor2.a * ").concat(_AbstractAdapter.OVERLAY_UNIFORMS.overlayOpacity," ),\n    ").concat(_AbstractAdapter.OVERLAY_UNIFORMS.globalOpacity,"\n  );\n}")})}}]),_AbstractAdapter}();function adapterInterop(e){if(e)for(var t=0,n=[["_",e]].concat(_toConsumableArray(Object.entries(e)));t<n.length;t++){var i=_slicedToArray(n[t],2)[1];if(i.prototype instanceof e_)return i}return null}e_.supportsDownload=!1,e_.supportsOverlay=!1,e_.OVERLAY_UNIFORMS={panorama:"panorama",overlay:"overlay",globalOpacity:"globalOpacity",overlayOpacity:"overlayOpacity"};var ey="".concat(m,"_touchSupport"),em={loaded:!1,pixelRatio:1,isWebGLSupported:!1,maxTextureWidth:0,isTouchEnabled:null,fullscreenEvent:null,__maxCanvasWidth:null,get maxCanvasWidth(){return null===this.__maxCanvasWidth&&(this.__maxCanvasWidth=getMaxCanvasWidth(this.maxTextureWidth)),this.__maxCanvasWidth},load:function(){if(!this.loaded){var e=getWebGLCtx();this.pixelRatio=window.devicePixelRatio||1,this.isWebGLSupported=null!==e,this.maxTextureWidth=e?e.getParameter(e.MAX_TEXTURE_SIZE):0,this.isTouchEnabled=isTouchEnabled(),this.fullscreenEvent=getFullscreenEvent(),this.loaded=!0}if(!em.isWebGLSupported)throw new T("WebGL is not supported.");if(0===em.maxTextureWidth)throw new T("Unable to detect system capabilities")}};function getWebGLCtx(){var e=document.createElement("canvas"),t=null;return e.getContext&&["webgl2","webgl","experimental-webgl","moz-webgl","webkit-3d"].some(function(n){try{return t=e.getContext(n),null!==t}catch(e){return!1}})?t:null}function isTouchEnabled(){var e="ontouchstart"in window||navigator.maxTouchPoints>0;ey in localStorage&&(e="true"===localStorage[ey]);var t=new Promise(function(t){var clear=function(){window.removeEventListener("mousedown",listenerMouse),window.removeEventListener("touchstart",listenerTouch),clearTimeout(n)},listenerMouse=function(){clear(),localStorage[ey]=!1,t(!1)},listenerTouch=function(){clear(),localStorage[ey]=!0,t(!0)};window.addEventListener("mousedown",listenerMouse,!1),window.addEventListener("touchstart",listenerTouch,!1);var n=setTimeout(function(){clear(),localStorage[ey]=e,t(e)},1e4)});return{initial:e,promise:t}}function getMaxCanvasWidth(e){var t=document.createElement("canvas"),n=t.getContext("2d");for(t.width=e,t.height=e/2;t.width>1024;){n.fillStyle="white",n.fillRect(0,0,1,1);try{if(n.getImageData(0,0,1,1).data[0]>0)return t.width}catch(e){}t.width/=2,t.height/=2}throw new T("Unable to detect system capabilities")}function getFullscreenEvent(){return"exitFullscreen"in document?"fullscreenchange":"webkitExitFullscreen"in document?"webkitfullscreenchange":null}var eg=_getConfigParser({resolution:64,blur:!1},{resolution:function(e){if(!e||!a.M8C.isPowerOfTwo(e))throw new T("EquirectangularAdapter resolution must be power of two");return e}}),ew=function(e){_inherits(EquirectangularAdapter,e);var t,n,i=_createSuper(EquirectangularAdapter);function EquirectangularAdapter(e,t){var n;return _classCallCheck(this,EquirectangularAdapter),(n=i.call(this,e)).config=eg(t),n.SPHERE_SEGMENTS=n.config.resolution,n.SPHERE_HORIZONTAL_SEGMENTS=n.SPHERE_SEGMENTS/2,n}return _createClass(EquirectangularAdapter,[{key:"supportsTransition",value:function(){return!0}},{key:"supportsPreload",value:function(){return!0}},{key:"loadTexture",value:(t=_asyncToGenerator(_regeneratorRuntime().mark(function _callee(e,t){var n,i,r,o,a,s,c,l,u,h,d,v,p,f,_,y,m,g,w,b,E,k,C,O=this,P=arguments;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(w=P.length>2&&void 0!==P[2]?P[2]:this.viewer.config.useXmpData,!("string"!=typeof e)){M.next=3;break}return M.abrupt("return",Promise.reject(new T("Invalid panorama url, are you using the right adapter?")));case 3:if(!w){M.next=12;break}return M.next=6,this.loadXMP(e,function(e){return O.viewer.loader.setProgress(e)});case 6:return E=M.sent,M.next=9,this.viewer.textureLoader.loadImage(e);case 9:b=M.sent,M.next=15;break;case 12:return M.next=14,this.viewer.textureLoader.loadImage(e,function(e){return O.viewer.loader.setProgress(e)});case 14:b=M.sent;case 15:return"function"==typeof t&&(t=t(b)),((k={fullWidth:_firstNonNull(null===(n=t)||void 0===n?void 0:n.fullWidth,null===(i=E)||void 0===i?void 0:i.fullWidth,b.width),fullHeight:_firstNonNull(null===(r=t)||void 0===r?void 0:r.fullHeight,null===(o=E)||void 0===o?void 0:o.fullHeight,b.height),croppedWidth:_firstNonNull(null===(a=t)||void 0===a?void 0:a.croppedWidth,null===(s=E)||void 0===s?void 0:s.croppedWidth,b.width),croppedHeight:_firstNonNull(null===(c=t)||void 0===c?void 0:c.croppedHeight,null===(l=E)||void 0===l?void 0:l.croppedHeight,b.height),croppedX:_firstNonNull(null===(u=t)||void 0===u?void 0:u.croppedX,null===(h=E)||void 0===h?void 0:h.croppedX,0),croppedY:_firstNonNull(null===(d=t)||void 0===d?void 0:d.croppedY,null===(v=E)||void 0===v?void 0:v.croppedY,0),poseHeading:_firstNonNull(null===(p=t)||void 0===p?void 0:p.poseHeading,null===(f=E)||void 0===f?void 0:f.poseHeading,0),posePitch:_firstNonNull(null===(_=t)||void 0===_?void 0:_.posePitch,null===(y=E)||void 0===y?void 0:y.posePitch,0),poseRoll:_firstNonNull(null===(m=t)||void 0===m?void 0:m.poseRoll,null===(g=E)||void 0===g?void 0:g.poseRoll,0)}).croppedWidth!==b.width||k.croppedHeight!==b.height)&&_logWarn("Invalid panoData, croppedWidth and/or croppedHeight is not coherent with loaded image.\n              panoData: ".concat(k.croppedWidth,"x").concat(k.croppedHeight,", image: ").concat(b.width,"x").concat(b.height)),(t||E)&&k.fullWidth!==2*k.fullHeight&&_logWarn("Invalid panoData, fullWidth should be twice fullHeight"),C=this.createEquirectangularTexture(b,k),M.abrupt("return",{panorama:e,texture:C,panoData:k});case 21:case"end":return M.stop()}},_callee,this)})),function(e,n){return t.apply(this,arguments)})},{key:"loadXMP",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function _callee2(e,t){var n,i,r,o,a;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.viewer.textureLoader.loadFile(e,t);case 2:return n=s.sent,s.next=5,this.loadBlobAsString(n);case 5:if(r=(i=s.sent).indexOf("<x:xmpmeta"),o=i.indexOf("</x:xmpmeta>"),a=i.substring(r,o),!(-1!==r&&-1!==o&&a.includes("GPano:"))){s.next=11;break}return s.abrupt("return",{fullWidth:_getXMPValue(a,"FullPanoWidthPixels"),fullHeight:_getXMPValue(a,"FullPanoHeightPixels"),croppedWidth:_getXMPValue(a,"CroppedAreaImageWidthPixels"),croppedHeight:_getXMPValue(a,"CroppedAreaImageHeightPixels"),croppedX:_getXMPValue(a,"CroppedAreaLeftPixels"),croppedY:_getXMPValue(a,"CroppedAreaTopPixels"),poseHeading:_getXMPValue(a,"PoseHeadingDegrees"),posePitch:_getXMPValue(a,"PosePitchDegrees"),poseRoll:_getXMPValue(a,"PoseRollDegrees")});case 11:return s.abrupt("return",null);case 12:case"end":return s.stop()}},_callee2,this)})),function(e,t){return n.apply(this,arguments)})},{key:"loadBlobAsString",value:function(e){return new Promise(function(t,n){var i=new FileReader;i.onload=function(){return t(i.result)},i.onerror=n,i.readAsText(e)})}},{key:"createEquirectangularTexture",value:function(e,t){if(this.config.blur||t.fullWidth>em.maxTextureWidth||t.croppedWidth!==t.fullWidth||t.croppedHeight!==t.fullHeight){var n=Math.min(1,em.maxCanvasWidth/t.fullWidth),i={fullWidth:t.fullWidth*n,fullHeight:t.fullHeight*n,croppedWidth:t.croppedWidth*n,croppedHeight:t.croppedHeight*n,croppedX:t.croppedX*n,croppedY:t.croppedY*n},r=document.createElement("canvas");r.width=i.fullWidth,r.height=i.fullHeight;var o=r.getContext("2d");return this.config.blur&&(o.filter="blur(1px)"),o.drawImage(e,i.croppedX,i.croppedY,i.croppedWidth,i.croppedHeight),_createTexture(r)}return _createTexture(e)}},{key:"createMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new a.xo$(y*e,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1),n=e_.createOverlayMaterial();return new a.Kj0(t,n)}},{key:"setTexture",value:function(e,t){this.__setUniform(e,e_.OVERLAY_UNIFORMS.panorama,t.texture),this.setOverlay(e,null,1)}},{key:"setOverlay",value:function(e,t,n){this.__setUniform(e,e_.OVERLAY_UNIFORMS.overlayOpacity,n),t?this.__setUniform(e,e_.OVERLAY_UNIFORMS.overlay,t.texture):this.__setUniform(e,e_.OVERLAY_UNIFORMS.overlay,new a.xEZ)}},{key:"setTextureOpacity",value:function(e,t){this.__setUniform(e,e_.OVERLAY_UNIFORMS.globalOpacity,t),e.material.transparent=t<1}},{key:"disposeTexture",value:function(e){var t;null===(t=e.texture)||void 0===t||t.dispose()}},{key:"__setUniform",value:function(e,t,n){e.material.uniforms[t].value instanceof a.xEZ&&e.material.uniforms[t].value.dispose(),e.material.uniforms[t].value=n}}]),EquirectangularAdapter}(e_);ew.id="equirectangular",ew.supportsDownload=!0,ew.supportsOverlay=!0;var eb=function(){function AbstractComponent(e,t){_classCallCheck(this,AbstractComponent),this.parent=e,this.children=[],this.container=document.createElement("div"),this.state={visible:!0},this.viewer=e instanceof AbstractComponent?e.viewer:e,this.container.className=t.className||"",this.parent.children.push(this),this.parent.container.appendChild(this.container)}return _createClass(AbstractComponent,[{key:"destroy",value:function(){this.parent.container.removeChild(this.container);var e=this.parent.children.indexOf(this);-1!==e&&this.parent.children.splice(e,1),this.children.slice().forEach(function(e){return e.destroy()}),this.children.length=0}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isVisible();e?this.show():this.hide()}},{key:"hide",value:function(e){this.container.style.display="none",this.state.visible=!1}},{key:"show",value:function(e){this.container.style.display="",this.state.visible=!0}},{key:"isVisible",value:function(){return this.state.visible}}]),AbstractComponent}(),eE=_getConfigParser({id:null,className:null,title:null,hoverScale:!1,collapsable:!1,tabbable:!0,icon:null,iconActive:null}),ek=function(e){_inherits(AbstractButton,e);var t=_createSuper(AbstractButton);function AbstractButton(e,n){var i;return _classCallCheck(this,AbstractButton),(i=t.call(this,e,{className:"psv-button ".concat(n.hoverScale?"psv-button--hover-scale":""," ").concat(n.className||"")})).state={visible:!0,enabled:!0,supported:!0,collapsed:!1,active:!1,width:0},i.config=eE(n),i.config.id=i.constructor.id,n.icon&&i.__setIcon(n.icon),i.state.width=i.container.offsetWidth,i.config.title?i.container.title=i.config.title:i.id&&i.id in i.viewer.config.lang&&(i.container.title=i.viewer.config.lang[i.id]),n.tabbable&&(i.container.tabIndex=0),i.container.addEventListener("click",function(e){i.state.enabled&&i.onClick(),e.stopPropagation()}),i.container.addEventListener("keydown",function(e){e.key===b.Enter&&i.state.enabled&&(i.onClick(),e.stopPropagation())}),i}return _createClass(AbstractButton,[{key:"id",get:function(){return this.config.id}},{key:"title",get:function(){return this.container.title}},{key:"content",get:function(){return this.container.innerHTML}},{key:"width",get:function(){return this.state.width}},{key:"collapsable",get:function(){return this.config.collapsable}},{key:"show",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];!this.isVisible()&&(this.state.visible=!0,this.state.collapsed||(this.container.style.display=""),e&&this.viewer.navbar.autoSize())}},{key:"hide",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.isVisible()&&(this.state.visible=!1,this.container.style.display="none",e&&this.viewer.navbar.autoSize())}},{key:"checkSupported",value:function(){var e=this;_resolveBoolean(this.isSupported(),function(t,n){e.state&&(e.state.supported=t,n?t||e.hide():e.toggle(t))})}},{key:"autoSize",value:function(){}},{key:"isSupported",value:function(){return!0}},{key:"toggleActive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.active;e!==this.state.active&&(this.state.active=e,_toggleClass(this.container,"psv-button--active",this.state.active),this.config.iconActive&&this.__setIcon(this.state.active?this.config.iconActive:this.config.icon))}},{key:"disable",value:function(){this.container.classList.add("psv-button--disabled"),this.state.enabled=!1}},{key:"enable",value:function(){this.container.classList.remove("psv-button--disabled"),this.state.enabled=!0}},{key:"collapse",value:function(){this.state.collapsed=!0,this.container.style.display="none"}},{key:"uncollapse",value:function(){this.state.collapsed=!1,this.state.visible&&(this.container.style.display="")}},{key:"__setIcon",value:function(e){this.container.innerHTML=e,_addClasses(this.container.querySelector("svg"),"psv-button-svg")}}]),AbstractButton}(eb),eC=function(e){_inherits(CustomButton,e);var t=_createSuper(CustomButton);function CustomButton(e,n){var i;return _classCallCheck(this,CustomButton),(i=t.call(this,e,{className:"psv-custom-button ".concat(n.className||""),hoverScale:!1,collapsable:!1!==n.collapsable,tabbable:!1!==n.tabbable,title:n.title})).customOnClick=n.onClick,n.id?i.config.id=n.id:i.config.id="psvButton-"+Math.random().toString(36).substring(2),n.content&&(i.container.innerHTML=n.content),i.state.width=i.container.offsetWidth,n.disabled&&i.disable(),!1===n.visible&&i.hide(),i}return _createClass(CustomButton,[{key:"onClick",value:function(){var e;null===(e=this.customOnClick)||void 0===e||e.call(this,this.viewer)}}]),CustomButton}(ek),eT=function(e){_inherits(DescriptionButton,e);var t=_createSuper(DescriptionButton);function DescriptionButton(e){var n;return _classCallCheck(this,DescriptionButton),(n=t.call(this,e,{className:"psv-description-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:E.info})).mode=0,n.viewer.addEventListener(q.type,_assertThisInitialized(n)),n.viewer.addEventListener(eo.type,_assertThisInitialized(n)),n.viewer.addEventListener($.type,_assertThisInitialized(n)),n.viewer.addEventListener(es.type,_assertThisInitialized(n)),n.viewer.addEventListener(Y.type,_assertThisInitialized(n)),n}return _createClass(DescriptionButton,[{key:"destroy",value:function(){this.viewer.removeEventListener(q.type,this),this.viewer.removeEventListener(eo.type,this),this.viewer.removeEventListener($.type,this),this.viewer.removeEventListener(es.type,this),this.viewer.removeEventListener(Y.type,this),_get(_getPrototypeOf(DescriptionButton.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){if(e instanceof Y){e.containsOptions("description")&&this.autoSize(!0);return}if(this.mode){var t=!1;e instanceof q?t=1===this.mode:e instanceof eo?t=1===this.mode&&e.notificationId!==w.DESCRIPTION:e instanceof $?t=2===this.mode:e instanceof es&&(t=2===this.mode&&e.panelId!==w.DESCRIPTION),t&&(this.toggleActive(!1),this.mode=0)}}},{key:"onClick",value:function(){this.mode?this.__close():this.__open()}},{key:"hide",value:function(e){_get(_getPrototypeOf(DescriptionButton.prototype),"hide",this).call(this,e),this.mode&&this.__close()}},{key:"autoSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var t=this.viewer.navbar.getButton("caption",!1),n=t&&!t.isVisible(),i=!!this.viewer.config.description;n||i?this.show(!1):this.hide(!1)}}},{key:"__close",value:function(){switch(this.mode){case 1:this.viewer.notification.hide(w.DESCRIPTION);break;case 2:this.viewer.panel.hide(w.DESCRIPTION)}}},{key:"__open",value:function(){this.toggleActive(!0),this.viewer.config.description?(this.mode=2,this.viewer.panel.show({id:w.DESCRIPTION,content:(this.viewer.config.caption?"<p>".concat(this.viewer.config.caption,"</p>"):"")+this.viewer.config.description})):(this.mode=1,this.viewer.notification.show({id:w.DESCRIPTION,content:this.viewer.config.caption}))}}]),DescriptionButton}(ek);eT.id="description";var eO=function(e){_inherits(DownloadButton,e);var t=_createSuper(DownloadButton);function DownloadButton(e){var n;return _classCallCheck(this,DownloadButton),(n=t.call(this,e,{className:"psv-download-butto",hoverScale:!0,collapsable:!0,tabbable:!0,icon:E.download})).viewer.addEventListener(Y.type,_assertThisInitialized(n)),n}return _createClass(DownloadButton,[{key:"destroy",value:function(){this.viewer.removeEventListener(Y.type,this),_get(_getPrototypeOf(DownloadButton.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof Y&&e.containsOptions("downloadUrl")&&this.checkSupported()}},{key:"onClick",value:function(){var e=this,t=document.createElement("a");t.href=this.viewer.config.downloadUrl||this.viewer.config.panorama,t.href.startsWith("data:")&&!this.viewer.config.downloadName?t.download="panorama."+t.href.substring(0,t.href.indexOf(";")).split("/").pop():t.download=this.viewer.config.downloadName||t.href.split("/").pop(),this.viewer.container.appendChild(t),t.click(),setTimeout(function(){e.viewer.container.removeChild(t)},100)}},{key:"checkSupported",value:function(){this.viewer.adapter.constructor.supportsDownload||this.viewer.config.downloadUrl?this.show():this.hide()}}]),DownloadButton}(ek);eO.id="download";var eP=function(e){_inherits(FullscreenButton,e);var t=_createSuper(FullscreenButton);function FullscreenButton(e){var n;return _classCallCheck(this,FullscreenButton),(n=t.call(this,e,{className:"psv-fullscreen-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:E.fullscreenIn,iconActive:E.fullscreenOut})).viewer.addEventListener(G.type,_assertThisInitialized(n)),n}return _createClass(FullscreenButton,[{key:"destroy",value:function(){this.viewer.removeEventListener(G.type,this),_get(_getPrototypeOf(FullscreenButton.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof G&&this.toggleActive(e.fullscreenEnabled)}},{key:"onClick",value:function(){this.viewer.toggleFullscreen()}}]),FullscreenButton}(ek);eP.id="fullscreen";var eM=function(e){_inherits(MenuButton,e);var t=_createSuper(MenuButton);function MenuButton(e){var n,i;return _classCallCheck(this,MenuButton),(i=t.call(this,e,{className:"psv-menu-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:E.menu})).viewer.addEventListener(es.type,_assertThisInitialized(i)),i.viewer.addEventListener($.type,_assertThisInitialized(i)),_get((n=_assertThisInitialized(i),_getPrototypeOf(MenuButton.prototype)),"hide",n).call(n),i}return _createClass(MenuButton,[{key:"destroy",value:function(){this.viewer.removeEventListener(es.type,this),this.viewer.removeEventListener($.type,this),_get(_getPrototypeOf(MenuButton.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof es?this.toggleActive(e.panelId===w.MENU):e instanceof $&&this.toggleActive(!1)}},{key:"onClick",value:function(){this.state.active?this.__hideMenu():this.__showMenu()}},{key:"hide",value:function(e){_get(_getPrototypeOf(MenuButton.prototype),"hide",this).call(this,e),this.__hideMenu()}},{key:"show",value:function(e){_get(_getPrototypeOf(MenuButton.prototype),"show",this).call(this,e),this.state.active&&this.__showMenu()}},{key:"__showMenu",value:function(){var e,t,n=this;this.viewer.panel.show({id:w.MENU,content:(e=this.viewer.navbar.collapsed,t=this.viewer.config.lang.menu,'\n<div class="psv-panel-menu psv-panel-menu--stripped">\n  <h1 class="psv-panel-menu-title">'.concat(E.menu," ").concat(t,'</h1>\n  <ul class="psv-panel-menu-list">\n    ').concat(e.map(function(e){return'\n    <li data-psv-button="'.concat(e.id,'" class="psv-panel-menu-item" tabindex="0">\n      <span class="psv-panel-menu-item-icon">').concat(e.content,'</span>\n      <span class="psv-panel-menu-item-label">').concat(e.title,"</span>\n    </li>\n    ")}).join(""),"\n  </ul>\n</div>\n")),noMargin:!0,clickHandler:function(e){var t=e?_getClosest(e,"li"):void 0,i=t?t.dataset.psvButton:void 0;i&&(n.viewer.navbar.getButton(i).onClick(),n.__hideMenu())}})}},{key:"__hideMenu",value:function(){this.viewer.panel.hide(w.MENU)}}]),MenuButton}(ek);function getIcon(e){var t=0;switch(e){case 0:t=90;break;case 1:t=-90;break;case 3:t=180;break;default:t=0}return E.arrow.replace("rotate(0","rotate(".concat(t))}eM.id="menu";var eS=function(e){_inherits(AbstractMoveButton,e);var t=_createSuper(AbstractMoveButton);function AbstractMoveButton(e,n){var i;return _classCallCheck(this,AbstractMoveButton),(i=t.call(this,e,{className:"psv-move-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:getIcon(n)})).direction=n,i.handler=new z,i.container.addEventListener("mousedown",_assertThisInitialized(i)),i.container.addEventListener("keydown",_assertThisInitialized(i)),i.container.addEventListener("keyup",_assertThisInitialized(i)),i.viewer.container.addEventListener("mouseup",_assertThisInitialized(i)),i.viewer.container.addEventListener("touchend",_assertThisInitialized(i)),i}return _createClass(AbstractMoveButton,[{key:"destroy",value:function(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),_get(_getPrototypeOf(AbstractMoveButton.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case"mousedown":this.__onMouseDown();break;case"mouseup":case"touchend":this.__onMouseUp();break;case"keydown":e.key===b.Enter&&this.__onMouseDown();break;case"keyup":e.key===b.Enter&&this.__onMouseUp()}}},{key:"onClick",value:function(){}},{key:"isSupported",value:function(){return _invertResolvableBoolean(em.isTouchEnabled)}},{key:"__onMouseDown",value:function(){if(this.state.enabled){var e={};switch(this.direction){case 0:e.pitch=!1;break;case 1:e.pitch=!0;break;case 3:e.yaw=!1;break;default:e.yaw=!0}this.viewer.stopAll(),this.viewer.dynamics.position.roll(e),this.handler.down()}}},{key:"__onMouseUp",value:function(){var e=this;this.state.enabled&&this.handler.up(function(){e.viewer.dynamics.position.stop(),e.viewer.resetIdleTimer()})}}]),AbstractMoveButton}(ek);eS.groupId="move";var ex=function(e){_inherits(MoveDownButton,e);var t=_createSuper(MoveDownButton);function MoveDownButton(e){return _classCallCheck(this,MoveDownButton),t.call(this,e,1)}return _createClass(MoveDownButton)}(eS);ex.id="moveDown";var eL=function(e){_inherits(MoveLeftButton,e);var t=_createSuper(MoveLeftButton);function MoveLeftButton(e){return _classCallCheck(this,MoveLeftButton),t.call(this,e,2)}return _createClass(MoveLeftButton)}(eS);eL.id="moveLeft";var eA=function(e){_inherits(MoveRightButton,e);var t=_createSuper(MoveRightButton);function MoveRightButton(e){return _classCallCheck(this,MoveRightButton),t.call(this,e,3)}return _createClass(MoveRightButton)}(eS);eA.id="moveRight";var eI=function(e){_inherits(MoveUpButton,e);var t=_createSuper(MoveUpButton);function MoveUpButton(e){return _classCallCheck(this,MoveUpButton),t.call(this,e,0)}return _createClass(MoveUpButton)}(eS);eI.id="moveUp";var eR=function(e){_inherits(AbstractZoomButton,e);var t=_createSuper(AbstractZoomButton);function AbstractZoomButton(e,n,i){var r;return _classCallCheck(this,AbstractZoomButton),(r=t.call(this,e,{className:"psv-zoom-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:i})).direction=n,r.handler=new z,r.container.addEventListener("mousedown",_assertThisInitialized(r)),r.container.addEventListener("keydown",_assertThisInitialized(r)),r.container.addEventListener("keyup",_assertThisInitialized(r)),r.viewer.container.addEventListener("mouseup",_assertThisInitialized(r)),r.viewer.container.addEventListener("touchend",_assertThisInitialized(r)),r}return _createClass(AbstractZoomButton,[{key:"destroy",value:function(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),_get(_getPrototypeOf(AbstractZoomButton.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case"mousedown":this.__onMouseDown();break;case"mouseup":case"touchend":this.__onMouseUp();break;case"keydown":e.key===b.Enter&&this.__onMouseDown();break;case"keyup":e.key===b.Enter&&this.__onMouseUp()}}},{key:"onClick",value:function(){}},{key:"isSupported",value:function(){return _invertResolvableBoolean(em.isTouchEnabled)}},{key:"__onMouseDown",value:function(){this.state.enabled&&(this.viewer.dynamics.zoom.roll(1===this.direction),this.handler.down())}},{key:"__onMouseUp",value:function(){var e=this;this.state.enabled&&this.handler.up(function(){return e.viewer.dynamics.zoom.stop()})}}]),AbstractZoomButton}(ek);eR.groupId="zoom";var ez=function(e){_inherits(ZoomInButton,e);var t=_createSuper(ZoomInButton);function ZoomInButton(e){return _classCallCheck(this,ZoomInButton),t.call(this,e,0,E.zoomIn)}return _createClass(ZoomInButton)}(eR);ez.id="zoomIn";var eH=function(e){_inherits(ZoomOutButton,e);var t=_createSuper(ZoomOutButton);function ZoomOutButton(e){return _classCallCheck(this,ZoomOutButton),t.call(this,e,1,E.zoomOut)}return _createClass(ZoomOutButton)}(eR);eH.id="zoomOut";var eN=function(e){_inherits(ZoomRangeButton,e);var t=_createSuper(ZoomRangeButton);function ZoomRangeButton(e){var n;return _classCallCheck(this,ZoomRangeButton),(n=t.call(this,e,{className:"psv-zoom-range",hoverScale:!1,collapsable:!1,tabbable:!1})).zoomRange=document.createElement("div"),n.zoomRange.className="psv-zoom-range-line",n.container.appendChild(n.zoomRange),n.zoomValue=document.createElement("div"),n.zoomValue.className="psv-zoom-range-handle",n.zoomRange.appendChild(n.zoomValue),n.slider=new N(n.container,"HORIZONTAL",function(e){return n.__onSliderUpdate(e)}),n.mediaMinWidth=parseInt(_getStyle(n.container,"maxWidth"),10),n.viewer.addEventListener(eh.type,_assertThisInitialized(n)),n.viewer.state.ready?n.__moveZoomValue(n.viewer.getZoomLevel()):n.viewer.addEventListener(ei.type,_assertThisInitialized(n)),n}return _createClass(ZoomRangeButton,[{key:"destroy",value:function(){this.slider.destroy(),this.viewer.removeEventListener(eh.type,this),this.viewer.removeEventListener(ei.type,this),_get(_getPrototypeOf(ZoomRangeButton.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof eh?this.__moveZoomValue(e.zoomLevel):e instanceof ei&&this.__moveZoomValue(this.viewer.getZoomLevel())}},{key:"onClick",value:function(){}},{key:"isSupported",value:function(){return _invertResolvableBoolean(em.isTouchEnabled)}},{key:"autoSize",value:function(){this.state.supported&&(this.viewer.state.size.width<=this.mediaMinWidth&&this.state.visible?this.hide(!1):this.viewer.state.size.width>this.mediaMinWidth&&!this.state.visible&&this.show(!1))}},{key:"__moveZoomValue",value:function(e){this.zoomValue.style.left=e/100*this.zoomRange.offsetWidth-this.zoomValue.offsetWidth/2+"px"}},{key:"__onSliderUpdate",value:function(e){e.mousedown&&this.viewer.zoom(100*e.value)}}]),ZoomRangeButton}(ek);eN.id="zoomRange",eN.groupId="zoom";var ej=function(e){_inherits(AbstractPlugin,e);var t=_createSuper(AbstractPlugin);function AbstractPlugin(e){var n;return _classCallCheck(this,AbstractPlugin),(n=t.call(this)).viewer=e,n}return _createClass(AbstractPlugin,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),AbstractPlugin}(F),eD=function(e){_inherits(AbstractConfigurablePlugin,e);var t=_createSuper(AbstractConfigurablePlugin);function AbstractConfigurablePlugin(e,n){var i;return _classCallCheck(this,AbstractConfigurablePlugin),(i=t.call(this,e)).config=i.constructor.configParser(n),i}return _createClass(AbstractConfigurablePlugin,[{key:"setOption",value:function(e,t){this.setOptions(_defineProperty({},e,t))}},{key:"setOptions",value:function(e){for(var t=_objectSpread(_objectSpread({},this.config),e),n=this.constructor,i=n.configParser,r=n.readonlyOptions,o=n.id,a=0,s=Object.entries(e);a<s.length;a++){var c=_slicedToArray(s[a],2),l=c[0],u=c[1];if(!(l in i.defaults)){_logWarn("".concat(o,': Unknown option "').concat(l,'"'));continue}if(r.includes(l)){_logWarn("".concat(o,': Option "').concat(l,'" cannot be updated'));continue}l in i.parsers&&(u=i.parsers[l](u,{rawConfig:t,defValue:i.defaults[l]})),this.config[l]=u}}}]),AbstractConfigurablePlugin}(ej);function pluginInterop(e){if(e)for(var t=0,n=[["_",e]].concat(_toConsumableArray(Object.entries(e)));t<n.length;t++){var i=_slicedToArray(n[t],2)[1];if(i.prototype instanceof ej)return i}return null}eD.readonlyOptions=[];var eF={panorama:null,overlay:null,overlayOpacity:1,container:null,adapter:[ew,null],plugins:[],caption:null,description:null,downloadUrl:null,downloadName:null,loadingImg:null,loadingTxt:"Loading...",size:null,fisheye:0,minFov:30,maxFov:90,defaultZoomLvl:50,defaultYaw:0,defaultPitch:0,sphereCorrection:null,moveSpeed:1,zoomSpeed:1,moveInertia:!0,mousewheel:!0,mousemove:!0,mousewheelCtrlKey:!1,touchmoveTwoFingers:!1,useXmpData:!0,panoData:null,requestHeaders:null,canvasBackground:"#000",withCredentials:!1,navbar:["zoom","move","download","description","caption","fullscreen"],lang:{zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right",download:"Download",fullscreen:"Fullscreen",menu:"Menu",close:"Close",twoFingers:"Use two fingers to navigate",ctrlZoom:"Use ctrl + scroll to zoom the image",loadError:"The panorama can't be loaded"},keyboard:"fullscreen",keyboardActions:(_defineProperty(o={},b.ArrowUp,"ROTATE_UP"),_defineProperty(o,b.ArrowDown,"ROTATE_DOWN"),_defineProperty(o,b.ArrowRight,"ROTATE_RIGHT"),_defineProperty(o,b.ArrowLeft,"ROTATE_LEFT"),_defineProperty(o,b.PageUp,"ZOOM_IN"),_defineProperty(o,b.PageDown,"ZOOM_OUT"),_defineProperty(o,b.Plus,"ZOOM_IN"),_defineProperty(o,b.Minus,"ZOOM_OUT"),o)},eB={panorama:"Use setPanorama method to change the panorama",panoData:"Use setPanorama method to change the panorama",overlay:"Use setOverlay method to changer the overlay",overlayOpacity:"Use setOverlay method to changer the overlay",container:"Cannot change viewer container",adapter:"Cannot change adapter",plugins:"Cannot change plugins"},eU={container:function(e){if(!e)throw new T("No value given for container.");return e},adapter:function(e,t){var n=t.defValue;if(!(e=e?Array.isArray(e)?[adapterInterop(e[0]),e[1]]:[adapterInterop(e),null]:n)[0])throw new T("An undefined value was given for adapter.");if(!e[0].id)throw new T("Adapter has no id.");return e},overlayOpacity:function(e){return a.M8C.clamp(e,0,1)},defaultYaw:function(e){return _parseAngle(e)},defaultPitch:function(e){return _parseAngle(e,!0)},defaultZoomLvl:function(e){return a.M8C.clamp(e,0,100)},minFov:function(e,t){var n=t.rawConfig;return n.maxFov<e&&(_logWarn("maxFov cannot be lower than minFov"),e=n.maxFov),a.M8C.clamp(e,1,179)},maxFov:function(e,t){var n=t.rawConfig;return e<n.minFov&&(e=n.minFov),a.M8C.clamp(e,1,179)},lang:function(e){return Array.isArray(e.twoFingers)&&(_logWarn("lang.twoFingers must not be an array"),e.twoFingers=e.twoFingers[0]),_objectSpread(_objectSpread({},eF.lang),e)},keyboard:function(e){return!!e&&("object"===_typeof(e)?(_logWarn("Use keyboardActions to configure the keyboard actions, keyboard option must be either true, false, 'fullscreen' or 'always'"),"fullscreen"):"always"===e?"always":"fullscreen")},keyboardActions:function(e,t){var n=t.rawConfig;return n.keyboard&&"object"===_typeof(n.keyboard)?n.keyboard:e},fisheye:function(e){return!0===e?1:!1===e?0:e},requestHeaders:function(e){return e&&"object"===_typeof(e)?function(){return e}:"function"==typeof e?e:null},plugins:function(e){return e.map(function(e,t){if(!(e=Array.isArray(e)?[pluginInterop(e[0]),e[1]]:[pluginInterop(e),null])[0])throw new T("An undefined value was given for plugin ".concat(t,"."));if(!e[0].id)throw new T("Plugin ".concat(t," has no id."));return e})},navbar:function(e){return!1===e?null:!0===e?_clone(eF.navbar):"string"==typeof e?e.split(/[ ,]/):e}},eV=_getConfigParser(eF,eU),eW=function(e){_inherits(NavbarCaption,e);var t=_createSuper(NavbarCaption);function NavbarCaption(e){var n;return _classCallCheck(this,NavbarCaption),(n=t.call(this,e,{className:"psv-caption",hoverScale:!1,collapsable:!1,tabbable:!0})).contentWidth=0,n.state.width=0,n.contentElt=document.createElement("div"),n.contentElt.className="psv-caption-content",n.container.appendChild(n.contentElt),n.setCaption(n.viewer.config.caption),n}return _createClass(NavbarCaption,[{key:"hide",value:function(){this.contentElt.style.display="none",this.state.visible=!1}},{key:"show",value:function(){this.contentElt.style.display="",this.state.visible=!0}},{key:"onClick",value:function(){}},{key:"setCaption",value:function(e){this.show(),this.contentElt.innerHTML=null!=e?e:"",this.contentElt.innerHTML?this.contentWidth=this.contentElt.offsetWidth:this.contentWidth=0,this.autoSize()}},{key:"autoSize",value:function(){this.toggle(this.container.offsetWidth>=this.contentWidth),this.__refreshButton()}},{key:"__refreshButton",value:function(){var e;null===(e=this.viewer.navbar.getButton(eT.id,!1))||void 0===e||e.autoSize(!0)}}]),NavbarCaption}(ek);eW.id="caption";var eZ={},eY={};function registerButton(e,t){if(!e.id)throw new T("Button id is required");if(eZ[e.id]=e,e.groupId&&(eY[e.groupId]=eY[e.groupId]||[]).push(e),t){var n=eF.navbar;switch(t){case"start":n.unshift(e.id);break;case"end":n.push(e.id);break;default:var i=_slicedToArray(t.split(":"),2),r=i[0],o=i[1],a=n.indexOf(r);if(!r||!o||-1===a)throw new T("Invalid defaultPosition ".concat(t));n.splice(a+("right"===o?1:0),0,e.id)}}}[eH,eN,ez,eT,eW,eO,eP,eL,eA,eI,ex].forEach(function(e){return registerButton(e)});var eX=function(e){_inherits(Navbar,e);var t=_createSuper(Navbar);function Navbar(e){var n;return _classCallCheck(this,Navbar),(n=t.call(this,e,{className:"psv-navbar psv--capture-event"})).collapsed=[],n.state.visible=!1,n}return _createClass(Navbar,[{key:"show",value:function(){this.container.classList.add("psv-navbar--open"),this.state.visible=!0}},{key:"hide",value:function(){this.container.classList.remove("psv-navbar--open"),this.state.visible=!1}},{key:"setButtons",value:function(e){var t=this;this.children.slice().forEach(function(e){return e.destroy()}),this.children.length=0,-1!==e.indexOf(eW.id)&&-1===e.indexOf(eT.id)&&e.splice(e.indexOf(eW.id),0,eT.id),e.forEach(function(e){"object"===_typeof(e)?new eC(t,e):eZ[e]?new eZ[e](t):eY[e]?eY[e].forEach(function(e){new e(t)}):_logWarn("Unknown button ".concat(e))}),new eM(this),this.children.forEach(function(e){e instanceof ek&&e.checkSupported()}),this.autoSize()}},{key:"setCaption",value:function(e){this.children.some(function(t){return t instanceof eW&&(t.setCaption(e),!0)})}},{key:"getButton",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.children.find(function(t){return t instanceof ek&&t.id===e});return!n&&t&&_logWarn('button "'.concat(e,'" not found in the navbar')),n}},{key:"autoSize",value:function(){this.children.forEach(function(e){e instanceof ek&&e.autoSize()});var e,t=this.container.offsetWidth,n=0,i=[];this.children.forEach(function(e){e.isVisible()&&e instanceof ek&&(n+=e.width,e.collapsable&&i.push(e))}),0!==n&&(t<n&&i.length>0?(i.forEach(function(e){return e.collapse()}),this.collapsed=i,this.getButton(eM.id).show(!1)):t>=n&&this.collapsed.length>0&&(this.collapsed.forEach(function(e){return e.uncollapse()}),this.collapsed=[],this.getButton(eM.id).hide(!1)),null===(e=this.getButton(eW.id,!1))||void 0===e||e.autoSize())}}]),Navbar}(eb),eG=function(e){_inherits(Loader,e);var t=_createSuper(Loader);function Loader(e){var n;return _classCallCheck(this,Loader),(n=t.call(this,e,{className:"psv-loader-container"})).loader=document.createElement("div"),n.loader.className="psv-loader",n.container.appendChild(n.loader),n.size=n.loader.offsetWidth,n.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.canvas.setAttribute("class","psv-loader-canvas"),n.canvas.setAttribute("viewBox","0 0 ".concat(n.size," ").concat(n.size)),n.loader.appendChild(n.canvas),n.textColor=_getStyle(n.loader,"color"),n.color=_getStyle(n.canvas,"color"),n.border=parseInt(_getStyle(n.loader,"outlineWidth"),10),n.thickness=parseInt(_getStyle(n.canvas,"outlineWidth"),10),n.viewer.addEventListener(Y.type,_assertThisInitialized(n)),n.__updateContent(),n.hide(),n}return _createClass(Loader,[{key:"destroy",value:function(){this.viewer.removeEventListener(Y.type,this),_get(_getPrototypeOf(Loader.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof Y&&e.containsOptions("loadingImg","loadingTxt")&&this.__updateContent()}},{key:"setProgress",value:function(e){var t=Math.min(e,99.999)/100*Math.PI*2,n=this.size/2,i=this.thickness/2+this.border,r=(this.size-this.thickness)/2-this.border,o=Math.sin(t)*r+n,a=-Math.cos(t)*r+n;this.canvas.innerHTML='\n            <circle cx="'.concat(n,'" cy="').concat(n,'" r="').concat(n,'" fill="').concat(this.color,'"/>\n            <path d="M ').concat(n," ").concat(i," A ").concat(r," ").concat(r," 0 ").concat(e>50?"1":"0"," 1 ").concat(o," ").concat(a,'" \n                  fill="none" stroke="').concat(this.textColor,'" stroke-width="').concat(this.thickness,'" stroke-linecap="round"/>\n        '),this.viewer.dispatchEvent(new ee(Math.round(e)))}},{key:"__updateContent",value:function(){var e,t=this.loader.querySelector(".psv-loader-image, .psv-loader-text");if(t&&this.loader.removeChild(t),this.viewer.config.loadingImg?((e=document.createElement("img")).className="psv-loader-image",e.src=this.viewer.config.loadingImg):this.viewer.config.loadingTxt&&((e=document.createElement("div")).className="psv-loader-text",e.innerHTML=this.viewer.config.loadingTxt),e){var n=Math.round(Math.sqrt(2*Math.pow(this.size/2-this.thickness/2-this.border,2)));e.style.maxWidth=n+"px",e.style.maxHeight=n+"px",this.loader.appendChild(e)}}}]),Loader}(eb),eq=function(e){_inherits(Notification,e);var t=_createSuper(Notification);function Notification(e){var n;return _classCallCheck(this,Notification),(n=t.call(this,e,{className:"psv-notification"})).state={visible:!1,contentId:null,timeout:null},n.content=document.createElement("div"),n.content.className="psv-notification-content",n.container.appendChild(n.content),n.content.addEventListener("click",function(){return n.hide()}),n}return _createClass(Notification,[{key:"isVisible",value:function(e){return this.state.visible&&(!e||!this.state.contentId||this.state.contentId===e)}},{key:"toggle",value:function(){throw new T("Notification cannot be toggled")}},{key:"show",value:function(e){var t=this;this.state.timeout&&(clearTimeout(this.state.timeout),this.state.timeout=null),"string"==typeof e&&(e={content:e}),this.state.contentId=e.id||null,this.content.innerHTML=e.content,this.container.classList.add("psv-notification--visible"),this.state.visible=!0,this.viewer.dispatchEvent(new eo(e.id)),e.timeout&&(this.state.timeout=setTimeout(function(){return t.hide(t.state.contentId)},e.timeout))}},{key:"hide",value:function(e){if(this.isVisible(e)){var t=this.state.contentId;this.container.classList.remove("psv-notification--visible"),this.state.visible=!1,this.state.contentId=null,this.viewer.dispatchEvent(new q(t))}}}]),Notification}(eb),eK=function(e){_inherits(Overlay,e);var t=_createSuper(Overlay);function Overlay(e){var n,i;return _classCallCheck(this,Overlay),(i=t.call(this,e,{className:"psv-overlay"})).state={visible:!1,contentId:null,dissmisable:!0},i.image=document.createElement("div"),i.image.className="psv-overlay-image",i.container.appendChild(i.image),i.title=document.createElement("div"),i.title.className="psv-overlay-title",i.container.appendChild(i.title),i.text=document.createElement("div"),i.text.className="psv-overlay-text",i.container.appendChild(i.text),i.viewer.addEventListener(Z.type,_assertThisInitialized(i)),i.viewer.addEventListener(J.type,_assertThisInitialized(i)),_get((n=_assertThisInitialized(i),_getPrototypeOf(Overlay.prototype)),"hide",n).call(n),i}return _createClass(Overlay,[{key:"destroy",value:function(){this.viewer.removeEventListener(Z.type,this),this.viewer.removeEventListener(J.type,this),_get(_getPrototypeOf(Overlay.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof Z?this.isVisible()&&this.state.dissmisable&&(this.hide(),e.stopPropagation()):e instanceof J&&this.isVisible()&&this.state.dissmisable&&e.key===b.Escape&&(this.hide(),e.preventDefault())}},{key:"isVisible",value:function(e){return this.state.visible&&(!e||!this.state.contentId||this.state.contentId===e)}},{key:"toggle",value:function(){throw new T("Overlay cannot be toggled")}},{key:"show",value:function(e){"string"==typeof e&&(e={title:e}),this.state.contentId=e.id||null,this.state.dissmisable=!1!==e.dissmisable,this.image.innerHTML=e.image||"",this.title.innerHTML=e.title||"",this.text.innerHTML=e.text||"",_get(_getPrototypeOf(Overlay.prototype),"show",this).call(this),this.viewer.dispatchEvent(new ea(e.id))}},{key:"hide",value:function(e){if(this.isVisible(e)){var t=this.state.contentId;_get(_getPrototypeOf(Overlay.prototype),"hide",this).call(this),this.state.contentId=null,this.viewer.dispatchEvent(new K(t))}}}]),Overlay}(eb),e$="psv-panel-content--no-interaction",eQ=function(e){_inherits(Panel,e);var t=_createSuper(Panel);function Panel(e){_classCallCheck(this,Panel),(n=t.call(this,e,{className:"psv-panel psv--capture-event"})).state={visible:!1,contentId:null,mouseX:0,mouseY:0,mousedown:!1,clickHandler:null,keyHandler:null,width:{}};var n,i=document.createElement("div");i.className="psv-panel-resizer",n.container.appendChild(i);var r=document.createElement("div");return r.className="psv-panel-close-button",r.innerHTML=E.close,r.title=e.config.lang.close,n.container.appendChild(r),n.content=document.createElement("div"),n.content.className="psv-panel-content",n.container.appendChild(n.content),n.container.addEventListener("wheel",function(e){return e.stopPropagation()}),r.addEventListener("click",function(){return n.hide()}),i.addEventListener("mousedown",_assertThisInitialized(n)),i.addEventListener("touchstart",_assertThisInitialized(n)),n.viewer.container.addEventListener("mouseup",_assertThisInitialized(n)),n.viewer.container.addEventListener("touchend",_assertThisInitialized(n)),n.viewer.container.addEventListener("mousemove",_assertThisInitialized(n)),n.viewer.container.addEventListener("touchmove",_assertThisInitialized(n)),n.viewer.addEventListener(J.type,_assertThisInitialized(n)),n}return _createClass(Panel,[{key:"destroy",value:function(){this.viewer.removeEventListener(J.type,this),this.viewer.container.removeEventListener("mousemove",this),this.viewer.container.removeEventListener("touchmove",this),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),_get(_getPrototypeOf(Panel.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case"mousedown":this.__onMouseDown(e);break;case"touchstart":this.__onTouchStart(e);break;case"mousemove":this.__onMouseMove(e);break;case"touchmove":this.__onTouchMove(e);break;case"mouseup":this.__onMouseUp(e);break;case"touchend":this.__onTouchEnd(e);break;case J.type:this.__onKeyPress(e)}}},{key:"isVisible",value:function(e){return this.state.visible&&(!e||!this.state.contentId||this.state.contentId===e)}},{key:"toggle",value:function(){throw new T("Panel cannot be toggled")}},{key:"show",value:function(e){var t=this;"string"==typeof e&&(e={content:e});var n=this.isVisible(e.id);this.state.contentId=e.id||null,this.state.visible=!0,this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),e.id&&this.state.width[e.id]?this.container.style.width=this.state.width[e.id]:e.width?this.container.style.width=e.width:this.container.style.width=null,this.content.innerHTML=e.content,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),_toggleClass(this.content,"psv-panel-content--no-margin",!0===e.noMargin),e.clickHandler&&(this.state.clickHandler=function(t){e.clickHandler(t.target)},this.state.keyHandler=function(t){t.key===b.Enter&&e.clickHandler(t.target)},this.content.addEventListener("click",this.state.clickHandler),this.content.addEventListener("keydown",this.state.keyHandler),n||setTimeout(function(){var e;null===(e=t.content.querySelector("a,button,[tabindex]"))||void 0===e||e.focus()},300)),this.viewer.dispatchEvent(new es(e.id))}},{key:"hide",value:function(e){if(this.isVisible(e)){var t=this.state.contentId;this.state.visible=!1,this.state.contentId=null,this.content.innerHTML=null,this.container.classList.remove("psv-panel--open"),this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.state.clickHandler=null),this.viewer.dispatchEvent(new $(t))}}},{key:"__onMouseDown",value:function(e){e.stopPropagation(),this.__startResize(e.clientX,e.clientY)}},{key:"__onTouchStart",value:function(e){if(e.stopPropagation(),1===e.touches.length){var t=e.touches[0];this.__startResize(t.clientX,t.clientY)}}},{key:"__onMouseUp",value:function(e){this.state.mousedown&&(e.stopPropagation(),this.state.mousedown=!1,this.content.classList.remove(e$))}},{key:"__onTouchEnd",value:function(e){this.state.mousedown&&(e.stopPropagation(),0===e.touches.length&&(this.state.mousedown=!1,this.content.classList.remove(e$)))}},{key:"__onMouseMove",value:function(e){this.state.mousedown&&(e.stopPropagation(),this.__resize(e.clientX,e.clientY))}},{key:"__onTouchMove",value:function(e){if(this.state.mousedown){var t=e.touches[0];this.__resize(t.clientX,t.clientY)}}},{key:"__onKeyPress",value:function(e){this.isVisible()&&e.key===b.Escape&&(this.hide(),e.preventDefault())}},{key:"__startResize",value:function(e,t){this.state.mouseX=e,this.state.mouseY=t,this.state.mousedown=!0,this.content.classList.add(e$)}},{key:"__resize",value:function(e,t){var n=Math.max(200,this.container.offsetWidth-(e-this.state.mouseX))+"px";this.state.contentId&&(this.state.width[this.state.contentId]=n),this.container.style.width=n,this.state.mouseX=e,this.state.mouseY=t}}]),Panel}(eb),eJ=function(e){_inherits(Tooltip,e);var t=_createSuper(Tooltip);function Tooltip(e,n){var i;return _classCallCheck(this,Tooltip),(i=t.call(this,e,{className:"psv-tooltip"})).state={visible:!0,arrow:0,border:0,state:0,width:0,height:0,pos:"",config:null,data:null},i.content=document.createElement("div"),i.content.className="psv-tooltip-content",i.container.appendChild(i.content),i.arrow=document.createElement("div"),i.arrow.className="psv-tooltip-arrow",i.container.appendChild(i.arrow),i.container.addEventListener("transitionend",_assertThisInitialized(i)),i.container.style.top="-1000px",i.container.style.left="-1000px",i.show(n),i}return _createClass(Tooltip,[{key:"handleEvent",value:function(e){"transitionend"===e.type&&this.__onTransitionEnd(e)}},{key:"destroy",value:function(){delete this.state.data,_get(_getPrototypeOf(Tooltip.prototype),"destroy",this).call(this)}},{key:"toggle",value:function(){throw new T("Tooltip cannot be toggled")}},{key:"show",value:function(e){if(0!==this.state.state)throw new T("Initialized tooltip cannot be re-initialized");e.className&&_addClasses(this.container,e.className),this.state.state=3,this.update(e.content,e),this.state.data=e.data,this.state.state=1,this.viewer.dispatchEvent(new ec(this,this.state.data)),this.__waitImages()}},{key:"update",value:function(e,t){this.content.innerHTML=e;var n=this.container.getBoundingClientRect();this.state.width=n.right-n.left,this.state.height=n.bottom-n.top,this.state.arrow=parseInt(_getStyle(this.arrow,"borderTopWidth"),10),this.state.border=parseInt(_getStyle(this.container,"borderTopLeftRadius"),10),this.move(null!=t?t:this.state.config)}},{key:"move",value:function(e){if(1!==this.state.state&&3!==this.state.state)throw new T("Uninitialized tooltip cannot be moved");e.box||(e.box={width:0,height:0}),this.state.config=e;var t=this.container,n=this.arrow,i={posClass:_cleanCssPosition(e.position,{allowCenter:!1,cssOrder:!1})||["top","center"],width:this.state.width,height:this.state.height,top:0,left:0,arrowTop:0,arrowLeft:0};this.__computeTooltipPosition(i,e);var r=null,o=null;if(i.top<0?r="bottom":i.top+i.height>this.viewer.state.size.height&&(r="top"),i.left<0?o="right":i.left+i.width>this.viewer.state.size.width&&(o="left"),o||r){var a=_cssPositionIsOrdered(i.posClass);r&&(i.posClass[a?0:1]=r),o&&(i.posClass[a?1:0]=o),this.__computeTooltipPosition(i,e)}t.style.top=i.top+"px",t.style.left=i.left+"px",n.style.top=i.arrowTop+"px",n.style.left=i.arrowLeft+"px";var s=i.posClass.join("-");s!==this.state.pos&&(t.classList.remove("psv-tooltip--".concat(this.state.pos)),this.state.pos=s,t.classList.add("psv-tooltip--".concat(this.state.pos)))}},{key:"hide",value:function(){this.container.classList.remove("psv-tooltip--visible"),this.state.state=2,this.viewer.dispatchEvent(new Q(this.state.data))}},{key:"__onTransitionEnd",value:function(e){if("transform"===e.propertyName)switch(this.state.state){case 1:this.container.classList.add("psv-tooltip--visible"),this.state.state=3;break;case 2:this.state.state=0,this.destroy()}}},{key:"__computeTooltipPosition",value:function(e,t){var n=this.state.arrow,i=t.top,r=e.height,o=t.left,a=e.width,s=n+this.state.border,c=t.box.width/2+2*n,l=t.box.height/2+2*n;switch(e.posClass.join("-")){case"top-left":e.top=i-l-r,e.left=o+s-a,e.arrowTop=r,e.arrowLeft=a-s-n;break;case"top-center":e.top=i-l-r,e.left=o-a/2,e.arrowTop=r,e.arrowLeft=a/2-n;break;case"top-right":e.top=i-l-r,e.left=o-s,e.arrowTop=r,e.arrowLeft=n;break;case"bottom-left":e.top=i+l,e.left=o+s-a,e.arrowTop=-(2*n),e.arrowLeft=a-s-n;break;case"bottom-center":e.top=i+l,e.left=o-a/2,e.arrowTop=-(2*n),e.arrowLeft=a/2-n;break;case"bottom-right":e.top=i+l,e.left=o-s,e.arrowTop=-(2*n),e.arrowLeft=n;break;case"left-top":e.top=i+s-r,e.left=o-c-a,e.arrowTop=r-s-n,e.arrowLeft=a;break;case"center-left":e.top=i-r/2,e.left=o-c-a,e.arrowTop=r/2-n,e.arrowLeft=a;break;case"left-bottom":e.top=i-s,e.left=o-c-a,e.arrowTop=n,e.arrowLeft=a;break;case"right-top":e.top=i+s-r,e.left=o+c,e.arrowTop=r-s-n,e.arrowLeft=-(2*n);break;case"center-right":e.top=i-r/2,e.left=o+c,e.arrowTop=r/2-n,e.arrowLeft=-(2*n);break;case"right-bottom":e.top=i-s,e.left=o+c,e.arrowTop=n,e.arrowLeft=-(2*n)}}},{key:"__waitImages",value:function(){var e=this,t=this.content.querySelectorAll("img");if(t.length>0){var n=[];t.forEach(function(e){n.push(new Promise(function(t){e.onload=t,e.onerror=t}))}),Promise.all(n).then(function(){if(1===e.state.state||3===e.state.state){var t=e.container.getBoundingClientRect();e.state.width=t.right-t.left,e.state.height=t.bottom-t.top,e.move(e.state.config)}})}}}]),Tooltip}(eb),e0=function(){function AbstractService(e){_classCallCheck(this,AbstractService),this.viewer=e,this.config=e.config,this.state=e.state}return _createClass(AbstractService,[{key:"destroy",value:function(){}}]),AbstractService}(),e1=new a.Pa4,e2=new a.USm(0,0,0,"ZXY"),e3=function(e){_inherits(DataHelper,e);var t=_createSuper(DataHelper);function DataHelper(e){return _classCallCheck(this,DataHelper),t.call(this,e)}return _createClass(DataHelper,[{key:"fovToZoomLevel",value:function(e){var t=Math.round((e-this.config.minFov)/(this.config.maxFov-this.config.minFov)*100);return t-2*(t-50)}},{key:"zoomLevelToFov",value:function(e){return this.config.maxFov+e/100*(this.config.minFov-this.config.maxFov)}},{key:"vFovToHFov",value:function(e){return a.M8C.radToDeg(2*Math.atan(Math.tan(a.M8C.degToRad(e)/2)*this.state.aspect))}},{key:"speedToDuration",value:function(e,t){return"number"!=typeof e?t/Math.abs(_parseSpeed(e))*1e3:Math.abs(e)}},{key:"textureCoordsToSphericalCoords",value:function(e){var t=this.state.panoData;if(!t)throw new T("Current adapter does not support texture coordinates.");var n=(e.textureX+t.croppedX)/t.fullWidth*Math.PI*2,i={yaw:n>=Math.PI?n-Math.PI:n+Math.PI,pitch:Math.PI/2-(e.textureY+t.croppedY)/t.fullHeight*Math.PI};return e2.equals(this.viewer.renderer.panoramaPose)&&e2.equals(this.viewer.renderer.sphereCorrection)?i:(this.sphericalCoordsToVector3(i,e1),e1.applyEuler(this.viewer.renderer.panoramaPose),e1.applyEuler(this.viewer.renderer.sphereCorrection),this.vector3ToSphericalCoords(e1))}},{key:"sphericalCoordsToTextureCoords",value:function(e){var t=this.state.panoData;if(!t)throw new T("Current adapter does not support texture coordinates.");e2.equals(this.viewer.renderer.panoramaPose)&&e2.equals(this.viewer.renderer.sphereCorrection)||(this.sphericalCoordsToVector3(e,e1),_applyEulerInverse(e1,this.viewer.renderer.sphereCorrection),_applyEulerInverse(e1,this.viewer.renderer.panoramaPose),e=this.vector3ToSphericalCoords(e1));var n=e.yaw/Math.PI/2*t.fullWidth,i=e.pitch/Math.PI*t.fullHeight;return{textureX:Math.round(e.yaw<Math.PI?n+t.fullWidth/2:n-t.fullWidth/2)-t.croppedX,textureY:Math.round(t.fullHeight/2-i)-t.croppedY}}},{key:"sphericalCoordsToVector3",value:function(e,t){return t||(t=new a.Pa4),t.x=-(y*Math.cos(e.pitch))*Math.sin(e.yaw),t.y=y*Math.sin(e.pitch),t.z=y*Math.cos(e.pitch)*Math.cos(e.yaw),t}},{key:"vector3ToSphericalCoords",value:function(e){var t=Math.acos(e.y/Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)),n=Math.atan2(e.x,e.z);return{yaw:n<0?-n:2*Math.PI-n,pitch:Math.PI/2-t}}},{key:"viewerCoordsToVector3",value:function(e){var t=this.viewer.renderer.getIntersections(e).filter(function(e){return e.object.userData[m]});return t.length?t[0].point:null}},{key:"viewerCoordsToSphericalCoords",value:function(e){var t=this.viewerCoordsToVector3(e);return t?this.vector3ToSphericalCoords(t):null}},{key:"vector3ToViewerCoords",value:function(e){var t=e.clone();return t.project(this.viewer.renderer.camera),{x:Math.round((t.x+1)/2*this.state.size.width),y:Math.round((1-t.y)/2*this.state.size.height)}}},{key:"sphericalCoordsToViewerCoords",value:function(e){return this.sphericalCoordsToVector3(e,e1),this.vector3ToViewerCoords(e1)}},{key:"cleanPosition",value:function(e){return void 0!==e.textureX&&void 0!==e.textureY?this.textureCoordsToSphericalCoords(e):{yaw:_parseAngle(e.yaw),pitch:_parseAngle(e.pitch,!this.state.littlePlanet)}}},{key:"cleanSphereCorrection",value:function(e){return{pan:_parseAngle((null==e?void 0:e.pan)||0),tilt:_parseAngle((null==e?void 0:e.tilt)||0,!0),roll:_parseAngle((null==e?void 0:e.roll)||0,!0,!1)}}},{key:"cleanPanoramaPose",value:function(e){return{pan:a.M8C.degToRad((null==e?void 0:e.poseHeading)||0),tilt:a.M8C.degToRad((null==e?void 0:e.posePitch)||0),roll:a.M8C.degToRad((null==e?void 0:e.poseRoll)||0)}}}]),DataHelper}(e0),e5=function(e){_inherits(EventsHandler,e);var t=_createSuper(EventsHandler);function EventsHandler(e){var n;return _classCallCheck(this,EventsHandler),(n=t.call(this,e)).data={step:0,startMouseX:0,startMouseY:0,mouseX:0,mouseY:0,mouseHistory:[],pinchDist:0,ctrlKeyDown:!1,dblclickData:null,dblclickTimeout:null,longtouchTimeout:null,twofingersTimeout:null,ctrlZoomTimeout:null},n.keyHandler=new z,n.resizeObserver=new ResizeObserver(_throttle(function(){return n.viewer.autoSize()},50)),n.moveThreshold=h*em.pixelRatio,n}return _createClass(EventsHandler,[{key:"init",value:function(){window.addEventListener("keydown",this,{passive:!1}),window.addEventListener("keyup",this),this.viewer.container.addEventListener("mousedown",this),window.addEventListener("mousemove",this,{passive:!1}),window.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchstart",this,{passive:!1}),window.addEventListener("touchmove",this,{passive:!1}),window.addEventListener("touchend",this,{passive:!1}),this.viewer.container.addEventListener("wheel",this,{passive:!1}),document.addEventListener(em.fullscreenEvent,this),this.resizeObserver.observe(this.viewer.container)}},{key:"destroy",value:function(){window.removeEventListener("keydown",this),window.removeEventListener("keyup",this),this.viewer.container.removeEventListener("mousedown",this),window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchstart",this),window.removeEventListener("touchmove",this),window.removeEventListener("touchend",this),this.viewer.container.removeEventListener("wheel",this),document.removeEventListener(em.fullscreenEvent,this),this.resizeObserver.disconnect(),clearTimeout(this.data.dblclickTimeout),clearTimeout(this.data.longtouchTimeout),clearTimeout(this.data.twofingersTimeout),clearTimeout(this.data.ctrlZoomTimeout),_get(_getPrototypeOf(EventsHandler.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case"keydown":this.__onKeyDown(e);break;case"keyup":this.__onKeyUp();break;case"mousemove":this.__onMouseMove(e);break;case"mouseup":this.__onMouseUp(e);break;case"touchmove":this.__onTouchMove(e);break;case"touchend":this.__onTouchEnd(e);break;case em.fullscreenEvent:this.__onFullscreenChange()}if(!_getClosest(e.target,".psv--capture-event"))switch(e.type){case"mousedown":this.__onMouseDown(e);break;case"touchstart":this.__onTouchStart(e);break;case"wheel":this.__onMouseWheel(e)}}},{key:"__isStep",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return -1!==t.indexOf(this.data.step)}},{key:"__onKeyDown",value:function(e){if(this.config.mousewheelCtrlKey&&(this.data.ctrlKeyDown=e.key===b.Control,this.data.ctrlKeyDown&&(clearTimeout(this.data.ctrlZoomTimeout),this.viewer.overlay.hide(w.CTRL_ZOOM))),this.viewer.dispatchEvent(new J(e.key))&&this.state.keyboardEnabled&&this.config.keyboard){var t=this.config.keyboardActions[e.key];if("function"==typeof t)t(this.viewer),e.preventDefault();else if(t&&!this.keyHandler.pending){switch("ZOOM_IN"!==t&&"ZOOM_OUT"!==t&&this.viewer.stopAll(),t){case"ROTATE_UP":this.viewer.dynamics.position.roll({pitch:!1});break;case"ROTATE_DOWN":this.viewer.dynamics.position.roll({pitch:!0});break;case"ROTATE_RIGHT":this.viewer.dynamics.position.roll({yaw:!1});break;case"ROTATE_LEFT":this.viewer.dynamics.position.roll({yaw:!0});break;case"ZOOM_IN":this.viewer.dynamics.zoom.roll(!1);break;case"ZOOM_OUT":this.viewer.dynamics.zoom.roll(!0)}this.keyHandler.down(),e.preventDefault()}}}},{key:"__onKeyUp",value:function(){var e=this;this.data.ctrlKeyDown=!1,this.state.keyboardEnabled&&this.keyHandler.up(function(){e.viewer.dynamics.position.stop(),e.viewer.dynamics.zoom.stop(),e.viewer.resetIdleTimer()})}},{key:"__onMouseDown",value:function(e){this.data.step=1,this.data.startMouseX=e.clientX,this.data.startMouseY=e.clientY}},{key:"__onMouseUp",value:function(e){this.__isStep(1,2)&&this.__stopMove(e.clientX,e.clientY,e.target,2===e.button)}},{key:"__onMouseMove",value:function(e){this.config.mousemove&&this.__isStep(1,2)&&(e.preventDefault(),this.__doMove(e.clientX,e.clientY)),this.__handleObjectsEvents(e)}},{key:"__onTouchStart",value:function(e){var t=this;1===e.touches.length?(this.data.step=1,this.data.startMouseX=e.touches[0].clientX,this.data.startMouseY=e.touches[0].clientY,this.data.longtouchTimeout||(this.data.longtouchTimeout=setTimeout(function(){var n=e.touches[0];t.__stopMove(n.clientX,n.clientY,n.target,!0),t.data.longtouchTimeout=null},v))):2===e.touches.length&&(this.data.step=0,this.__cancelLongTouch(),this.config.mousemove&&(this.__cancelTwoFingersOverlay(),this.__startMoveZoom(e),e.preventDefault()))}},{key:"__onTouchEnd",value:function(e){if(this.__cancelLongTouch(),this.__isStep(1,2)){if(e.preventDefault(),this.__cancelTwoFingersOverlay(),1===e.touches.length)this.__stopMove(this.data.mouseX,this.data.mouseY);else if(0===e.touches.length){var t=e.changedTouches[0];this.__stopMove(t.clientX,t.clientY,t.target)}}}},{key:"__onTouchMove",value:function(e){var t=this;if(this.__cancelLongTouch(),this.config.mousemove){if(1===e.touches.length){if(this.config.touchmoveTwoFingers)this.__isStep(1)&&!this.data.twofingersTimeout&&(this.data.twofingersTimeout=setTimeout(function(){t.viewer.overlay.show({id:w.TWO_FINGERS,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z"/><!--Created by AomAm from the Noun Project--></svg>\n',title:t.config.lang.twoFingers})},p));else if(this.__isStep(1,2)){e.preventDefault();var n=e.touches[0];this.__doMove(n.clientX,n.clientY)}}else this.__doMoveZoom(e),this.__cancelTwoFingersOverlay()}}},{key:"__cancelLongTouch",value:function(){this.data.longtouchTimeout&&(clearTimeout(this.data.longtouchTimeout),this.data.longtouchTimeout=null)}},{key:"__cancelTwoFingersOverlay",value:function(){this.config.touchmoveTwoFingers&&(this.data.twofingersTimeout&&(clearTimeout(this.data.twofingersTimeout),this.data.twofingersTimeout=null),this.viewer.overlay.hide(w.TWO_FINGERS))}},{key:"__onMouseWheel",value:function(e){var t=this;if(this.config.mousewheel){if(this.config.mousewheelCtrlKey&&!this.data.ctrlKeyDown){this.viewer.overlay.show({id:w.CTRL_ZOOM,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 17 79 79"><path fill="currentColor" d="M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z"/><!-- Created by Icon Island from the Noun Project --></svg>\n',title:this.config.lang.ctrlZoom}),clearTimeout(this.data.ctrlZoomTimeout),this.data.ctrlZoomTimeout=setTimeout(function(){return t.viewer.overlay.hide(w.CTRL_ZOOM)},f);return}e.preventDefault(),e.stopPropagation();var n=e.deltaY/Math.abs(e.deltaY)*5*this.config.zoomSpeed;0!==n&&this.viewer.dynamics.zoom.step(-n,5)}}},{key:"__onFullscreenChange",value:function(){var e=this.viewer.isFullscreenEnabled();"fullscreen"===this.config.keyboard&&(e?this.viewer.startKeyboardControl():this.viewer.stopKeyboardControl()),this.viewer.dispatchEvent(new G(e))}},{key:"__resetMove",value:function(){this.data.step=0,this.data.mouseX=0,this.data.mouseY=0,this.data.startMouseX=0,this.data.startMouseY=0,this.data.mouseHistory.length=0}},{key:"__startMoveZoom",value:function(e){this.viewer.stopAll(),this.__resetMove();var t=_getTouchData(e);this.data.step=2,this.data.pinchDist=t.distance;var n=t.center;this.data.mouseX=n.x,this.data.mouseY=n.y,this.__logMouseMove(this.data.mouseX,this.data.mouseY)}},{key:"__stopMove",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.__isStep(2)?this.config.moveInertia?(this.__logMouseMove(e,t),this.__stopMoveInertia(e,t)):(this.__resetMove(),this.viewer.resetIdleTimer()):this.__isStep(1)&&(this.viewer.stopAnimation(),this.__doClick(e,t,n,i),this.__resetMove(),this.viewer.resetIdleTimer())}},{key:"__stopMoveInertia",value:function(e,t){var n=this,i=new a.gti(this.data.mouseHistory.map(function(e){var t=_slicedToArray(e,3),n=t[1],i=t[2];return new a.FM8(n,i)})).getTangent(1),r=this.data.mouseHistory.reduce(function(e,t){var n=e.total,i=e.prev;return{total:i?n+_distance({x:i[1],y:i[2]},{x:t[1],y:t[2]})/(t[0]-i[0]):0,prev:t}},{total:0,prev:null}).total/this.data.mouseHistory.length;if(!r){this.__resetMove(),this.viewer.resetIdleTimer();return}this.data.step=3;var o=e,s=t;this.state.animation=new A({properties:{speed:{start:r,end:0}},duration:1e3,easing:"outQuad",onTick:function(e){o+=e.speed*i.x*3*em.pixelRatio,s+=e.speed*i.y*3*em.pixelRatio,n.__applyMove(o,s)}}),this.state.animation.then(function(e){n.state.animation=null,e&&(n.__resetMove(),n.viewer.resetIdleTimer())})}},{key:"__doClick",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.viewer.container.getBoundingClientRect(),a=e-o.left,s=t-o.top,c=this.viewer.renderer.getIntersections({x:a,y:s}),l=c.find(function(e){return e.object.userData[m]});if(l){var u=this.viewer.dataHelper.vector3ToSphericalCoords(l.point),h={rightclick:r,target:n,clientX:e,clientY:t,viewerX:a,viewerY:s,yaw:u.yaw,pitch:u.pitch,objects:c.map(function(e){return e.object}).filter(function(e){return!e.userData[m]})};try{var v=this.viewer.dataHelper.sphericalCoordsToTextureCoords(h);h.textureX=v.textureX,h.textureY=v.textureY}catch(e){h.textureX=NaN,h.textureY=NaN}this.data.dblclickTimeout?(Math.abs(this.data.dblclickData.clientX-h.clientX)<this.moveThreshold&&Math.abs(this.data.dblclickData.clientY-h.clientY)<this.moveThreshold&&this.viewer.dispatchEvent(new X(this.data.dblclickData)),clearTimeout(this.data.dblclickTimeout),this.data.dblclickTimeout=null,this.data.dblclickData=null):(this.viewer.dispatchEvent(new Z(h)),this.data.dblclickData=_clone(h),this.data.dblclickTimeout=setTimeout(function(){i.data.dblclickTimeout=null,i.data.dblclickData=null},d))}}},{key:"__handleObjectsEvents",value:function(e){var t=this;if(!_isEmpty(this.state.objectsObservers)&&_hasParent(e.target,this.viewer.container))for(var n=_getPosition(this.viewer.container),i={x:e.clientX-n.x,y:e.clientY-n.y},r=this.viewer.renderer.getIntersections(i),emit=function(n,r,o){t.viewer.dispatchEvent(new o(e,n,i,r))},o=0,a=Object.entries(this.state.objectsObservers);o<a.length;o++)!function(){var e=_slicedToArray(a[o],2),n=e[0],i=e[1],s=r.find(function(e){return e.object.userData[n]});s?(i&&s.object!==i&&(emit(i,n,ep),t.state.objectsObservers[n]=null),i?emit(s.object,n,ef):(t.state.objectsObservers[n]=s.object,emit(s.object,n,ev))):i&&(emit(i,n,ep),t.state.objectsObservers[n]=null)}()}},{key:"__doMove",value:function(e,t){this.__isStep(1)&&(Math.abs(e-this.data.startMouseX)>=this.moveThreshold||Math.abs(t-this.data.startMouseY)>=this.moveThreshold)?(this.viewer.stopAll(),this.__resetMove(),this.data.step=2,this.data.mouseX=e,this.data.mouseY=t,this.__logMouseMove(e,t)):this.__isStep(2)&&(this.__applyMove(e,t),this.__logMouseMove(e,t))}},{key:"__applyMove",value:function(e,t){var n={yaw:this.config.moveSpeed*((e-this.data.mouseX)/this.state.size.width)*a.M8C.degToRad(this.state.littlePlanet?90:this.state.hFov),pitch:this.config.moveSpeed*((t-this.data.mouseY)/this.state.size.height)*a.M8C.degToRad(this.state.littlePlanet?90:this.state.vFov)},i=this.viewer.getPosition();this.viewer.rotate({yaw:i.yaw-n.yaw,pitch:i.pitch+n.pitch}),this.data.mouseX=e,this.data.mouseY=t}},{key:"__doMoveZoom",value:function(e){if(this.__isStep(2)){e.preventDefault();var t=_getTouchData(e),n=(t.distance-this.data.pinchDist)/em.pixelRatio*this.config.zoomSpeed;this.viewer.zoom(this.viewer.getZoomLevel()+n),this.__doMove(t.center.x,t.center.y),this.data.pinchDist=t.distance}}},{key:"__logMouseMove",value:function(e,t){var n=Date.now(),i=this.data.mouseHistory.length?this.data.mouseHistory[this.data.mouseHistory.length-1]:[0,-1,-1];i[1]===e&&i[2]===t?i[0]=n:n===i[0]?(i[1]=e,i[2]=t):this.data.mouseHistory.push([n,e,t]);for(var r=null,o=0;o<this.data.mouseHistory.length;)this.data.mouseHistory[o][0]<n-_?this.data.mouseHistory.splice(o,1):r&&this.data.mouseHistory[o][0]-r>_/10?(this.data.mouseHistory.splice(0,o),o=0,r=this.data.mouseHistory[o][0]):(r=this.data.mouseHistory[o][0],o++)}}]),EventsHandler}(e0),e4=new a.FM8,e8=function(e){_inherits(Renderer,e);var t=_createSuper(Renderer);function Renderer(e){var n;return _classCallCheck(this,Renderer),(n=t.call(this,e)).renderer=new a.CP7({alpha:!0,antialias:!0}),n.renderer.setPixelRatio(em.pixelRatio),n.renderer.domElement.className="psv-canvas",n.scene=new a.xsS,n.camera=new a.cPb(50,16/9,.1,2*y),n.mesh=n.viewer.adapter.createMesh(),n.mesh.userData=_defineProperty({},m,!0),n.meshContainer=new a.ZAu,n.meshContainer.add(n.mesh),n.scene.add(n.meshContainer),n.raycaster=new a.iMs,n.container=document.createElement("div"),n.container.className="psv-canvas-container",n.container.style.background=n.config.canvasBackground,n.container.appendChild(n.renderer.domElement),n.viewer.container.appendChild(n.container),n.viewer.addEventListener(el.type,_assertThisInitialized(n)),n.viewer.addEventListener(eh.type,_assertThisInitialized(n)),n.viewer.addEventListener(en.type,_assertThisInitialized(n)),n.viewer.addEventListener(Y.type,_assertThisInitialized(n)),n.hide(),n}return _createClass(Renderer,[{key:"panoramaPose",get:function(){return this.mesh.rotation}},{key:"sphereCorrection",get:function(){return this.meshContainer.rotation}},{key:"init",value:function(){var e=this;this.config.mousemove&&(this.container.style.cursor="move"),this.show(),this.renderer.setAnimationLoop(function(t){return e.__renderLoop(t)})}},{key:"destroy",value:function(){this.renderer.setAnimationLoop(null),this.cleanScene(this.scene),this.viewer.container.removeChild(this.container),this.viewer.removeEventListener(el.type,this),this.viewer.removeEventListener(eh.type,this),this.viewer.removeEventListener(en.type,this),this.viewer.removeEventListener(Y.type,this),_get(_getPrototypeOf(Renderer.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case el.type:this.__onSizeUpdated();break;case eh.type:this.__onZoomUpdated();break;case en.type:this.__onPositionUpdated();break;case Y.type:e.containsOptions("fisheye")&&this.__onPositionUpdated(),e.containsOptions("mousemove")&&(this.container.style.cursor=this.config.mousemove?"move":"default"),e.containsOptions("canvasBackground")&&(this.container.style.background=this.config.canvasBackground)}}},{key:"hide",value:function(){this.container.style.opacity="0"}},{key:"show",value:function(){this.container.style.opacity="1"}},{key:"setCustomRenderer",value:function(e){e?this.customRenderer=e(this.renderer):this.customRenderer=null,this.viewer.needsUpdate()}},{key:"__onSizeUpdated",value:function(){this.renderer.setSize(this.state.size.width,this.state.size.height),this.camera.aspect=this.state.aspect,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate()}},{key:"__onZoomUpdated",value:function(){this.camera.fov=this.state.vFov,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate()}},{key:"__onPositionUpdated",value:function(){this.camera.position.set(0,0,0),this.camera.lookAt(this.state.direction),this.config.fisheye&&this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye/2).negate(),this.viewer.needsUpdate()}},{key:"__renderLoop",value:function(e){var t=this.timestamp?e-this.timestamp:0;this.timestamp=e,this.viewer.dispatchEvent(new V(e,t)),this.viewer.dynamics.update(t),this.state.needsUpdate&&((this.customRenderer||this.renderer).render(this.scene,this.camera),this.viewer.dispatchEvent(new er),this.state.needsUpdate=!1)}},{key:"setTexture",value:function(e){this.state.panoData=e.panoData,this.viewer.adapter.setTexture(this.mesh,e),this.viewer.needsUpdate()}},{key:"setOverlay",value:function(e,t){this.viewer.adapter.setOverlay(this.mesh,e,t),this.viewer.needsUpdate()}},{key:"setPanoramaPose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mesh,n=this.viewer.dataHelper.cleanPanoramaPose(e);t.rotation.set(-n.tilt,-n.pan,-n.roll,"ZXY")}},{key:"setSphereCorrection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.meshContainer,n=this.viewer.dataHelper.cleanSphereCorrection(e);t.rotation.set(n.tilt,n.pan,n.roll,"ZXY")}},{key:"transition",value:function(e,t){var n=this,i=_isExtendedPosition(t),r="zoom"in t,o=new a.ZAu,s=this.viewer.adapter.createMesh(.5);if(this.viewer.adapter.setTexture(s,e,!0),this.viewer.adapter.setTextureOpacity(s,0),this.setPanoramaPose(e.panoData,s),this.setSphereCorrection(t.sphereCorrection,o),i){var c=this.viewer.dataHelper.cleanPosition(t),l=this.viewer.getPosition(),u=new a.Pa4(0,1,0);o.rotateOnWorldAxis(u,c.yaw-l.yaw);var h=new a.Pa4(0,1,0).cross(this.camera.getWorldDirection(new a.Pa4)).normalize();o.rotateOnWorldAxis(h,c.pitch-l.pitch)}o.add(s),this.scene.add(o),this.renderer.setRenderTarget(new a.dd2),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null);var d=new A({properties:{opacity:{start:0,end:1},zoom:r?{start:this.viewer.getZoomLevel(),end:t.zoom}:void 0},duration:t.transition,easing:"outCubic",onTick:function(e){n.viewer.adapter.setTextureOpacity(s,e.opacity),n.viewer.adapter.setTextureOpacity(n.mesh,1-e.opacity),r&&n.viewer.zoom(e.zoom),n.viewer.needsUpdate()}});return d.then(function(r){r?(n.setTexture(e),n.viewer.adapter.setTextureOpacity(n.mesh,1),n.setPanoramaPose(e.panoData),n.setSphereCorrection(t.sphereCorrection),i&&n.viewer.rotate(t)):n.viewer.adapter.disposeTexture(e),n.scene.remove(o),s.geometry.dispose(),s.geometry=null}),d}},{key:"getIntersections",value:function(e){return e4.x=2*e.x/this.state.size.width-1,e4.y=-2*e.y/this.state.size.height+1,this.raycaster.setFromCamera(e4,this.camera),this.raycaster.intersectObjects(this.scene.children,!0).filter(function(e){return e.object.isMesh&&!!e.object.userData})}},{key:"addObject",value:function(e){this.scene.add(e)}},{key:"removeObject",value:function(e){this.scene.remove(e)}},{key:"cleanScene",value:function(e){var t=this;e.traverse(function(n){n.geometry&&n.geometry.dispose(),n.material&&(Array.isArray(n.material)?n.material.forEach(function(e){e.map&&e.map.dispose(),e.dispose()}):(n.material.map&&n.material.map.dispose(),n.material.dispose())),!n.dispose||n instanceof a.xsS||n.dispose(),n!==e&&t.cleanScene(n)})}}]),Renderer}(e0),e7=function(e){_inherits(TextureLoader,e);var t=_createSuper(TextureLoader);function TextureLoader(e){var n;return _classCallCheck(this,TextureLoader),(n=t.call(this,e)).loader=new a.hH6,n.loader.setResponseType("blob"),n.config.withCredentials&&n.loader.setWithCredentials(!0),n}return _createClass(TextureLoader,[{key:"destroy",value:function(){this.abortLoading(),_get(_getPrototypeOf(TextureLoader.prototype),"destroy",this).call(this)}},{key:"abortLoading",value:function(){}},{key:"loadFile",value:function(e,t){var n=this;return this.config.requestHeaders&&this.loader.setRequestHeader(this.config.requestHeaders(e)),new Promise(function(i,r){var o=0;null==t||t(o),n.loader.load(e,function(e){o=100,null==t||t(o),i(e)},function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;n>o&&(o=n,null==t||t(o))}},function(e){r(e)})})}},{key:"loadImage",value:function(e,t){return this.loadFile(e,t).then(function(e){return new Promise(function(t,n){var i=document.createElement("img");i.onload=function(){URL.revokeObjectURL(i.src),t(i)},i.onerror=n,i.src=URL.createObjectURL(e)})})}},{key:"preloadPanorama",value:function(e){return this.viewer.adapter.supportsPreload(e)?this.viewer.adapter.loadTexture(e):Promise.reject(new T("Current adapter does not support preload"))}}]),TextureLoader}(e0),e6=function(e){_inherits(ViewerDynamics,e);var t=_createSuper(ViewerDynamics);function ViewerDynamics(e){var n;return _classCallCheck(this,ViewerDynamics),(n=t.call(this,e)).zoom=new I(function(e){n.viewer.state.vFov=n.viewer.dataHelper.zoomLevelToFov(e),n.viewer.state.hFov=n.viewer.dataHelper.vFovToHFov(n.viewer.state.vFov),n.viewer.dispatchEvent(new eh(e))},{defaultValue:n.viewer.config.defaultZoomLvl,min:0,max:100,wrap:!1}),n.position=new R(function(e){n.viewer.dataHelper.sphericalCoordsToVector3(e,n.viewer.state.direction),n.viewer.dispatchEvent(new en(e))},{yaw:new I(null,{defaultValue:n.config.defaultYaw,min:0,max:2*Math.PI,wrap:!0}),pitch:new I(null,{defaultValue:n.config.defaultPitch,min:n.viewer.state.littlePlanet?0:-Math.PI/2,max:n.viewer.state.littlePlanet?2*Math.PI:Math.PI/2,wrap:n.viewer.state.littlePlanet})}),n.updateSpeeds(),n}return _createClass(ViewerDynamics,[{key:"updateSpeeds",value:function(){this.zoom.setSpeed(50*this.config.zoomSpeed),this.position.setSpeed(a.M8C.degToRad(50*this.config.moveSpeed))}},{key:"update",value:function(e){this.zoom.update(e),this.position.update(e)}}]),ViewerDynamics}(e0),e9=_createClass(function ViewerState(){_classCallCheck(this,ViewerState),this.ready=!1,this.needsUpdate=!1,this.keyboardEnabled=!1,this.direction=new a.Pa4(0,0,y),this.vFov=60,this.hFov=60,this.aspect=1,this.animation=null,this.transitionAnimation=null,this.loadingPromise=null,this.littlePlanet=!1,this.idleTime=-1,this.objectsObservers={},this.size={width:0,height:0},this.panoData={fullWidth:0,fullHeight:0,croppedWidth:0,croppedHeight:0,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0}}),te=function(e){_inherits(Viewer,e);var t=_createSuper(Viewer);function Viewer(e){var n;_classCallCheck(this,Viewer),(n=t.call(this)).plugins={},n.children=[],n.onResize=_throttle(function(){return n.navbar.autoSize()},500),em.load(),n.state=new e9,n.config=eV(e),n.parent=_getElement(e.container),n.parent[m]=_assertThisInitialized(n),n.container=document.createElement("div"),n.container.classList.add("psv-container"),n.parent.appendChild(n.container),n.adapter=new n.config.adapter[0](_assertThisInitialized(n),n.config.adapter[1]),n.renderer=new e8(_assertThisInitialized(n)),n.textureLoader=new e7(_assertThisInitialized(n)),n.eventsHandler=new e5(_assertThisInitialized(n)),n.dataHelper=new e3(_assertThisInitialized(n)),n.dynamics=new e6(_assertThisInitialized(n)),n.loader=new eG(_assertThisInitialized(n)),n.navbar=new eX(_assertThisInitialized(n)),n.panel=new eQ(_assertThisInitialized(n)),n.notification=new eq(_assertThisInitialized(n)),n.overlay=new eK(_assertThisInitialized(n)),n.resize(n.config.size),_resolveBoolean(em.isTouchEnabled,function(e){_toggleClass(n.container,"psv--is-touch",e)}),n.config.plugins.forEach(function(e){var t=_slicedToArray(e,2),i=t[0],r=t[1];n.plugins[i.id]=new i(_assertThisInitialized(n),r)});for(var i=0,r=Object.values(n.plugins);i<r.length;i++){var o,a=r[i];null===(o=a.init)||void 0===o||o.call(a)}return n.config.navbar&&n.navbar.setButtons(n.config.navbar),n.config.panorama?n.setPanorama(n.config.panorama):n.loader.show(),n}return _createClass(Viewer,[{key:"destroy",value:function(){this.stopAll(),this.stopKeyboardControl(),this.exitFullscreen();for(var e=0,t=Object.entries(this.plugins);e<t.length;e++){var n=_slicedToArray(t[e],2),i=n[0];n[1].destroy(),delete this.plugins[i]}this.children.slice().forEach(function(e){return e.destroy()}),this.children.length=0,this.eventsHandler.destroy(),this.renderer.destroy(),this.textureLoader.destroy(),this.dataHelper.destroy(),this.adapter.destroy(),this.dynamics.destroy(),this.parent.removeChild(this.container),delete this.parent[m]}},{key:"init",value:function(){this.eventsHandler.init(),this.renderer.init(),this.config.navbar&&(this.container.classList.add("psv--has-navbar"),this.navbar.show()),"always"===this.config.keyboard&&this.startKeyboardControl(),this.resetIdleTimer(),this.state.ready=!0,this.dispatchEvent(new ei)}},{key:"resetIdleTimer",value:function(){this.state.idleTime=performance.now()}},{key:"disableIdleTimer",value:function(){this.state.idleTime=-1}},{key:"getPlugin",value:function(e){if("string"==typeof e)return this.plugins[e];var t=pluginInterop(e);return t?this.plugins[t.id]:null}},{key:"getPosition",value:function(){return this.dataHelper.cleanPosition(this.dynamics.position.current)}},{key:"getZoomLevel",value:function(){return this.dynamics.zoom.current}},{key:"getSize",value:function(){return _objectSpread({},this.state.size)}},{key:"isFullscreenEnabled",value:function(){return _isFullscreenEnabled(this.container)}},{key:"needsUpdate",value:function(){this.state.needsUpdate=!0}},{key:"autoSize",value:function(){(this.container.clientWidth!==this.state.size.width||this.container.clientHeight!==this.state.size.height)&&(this.state.size.width=Math.round(this.container.clientWidth),this.state.size.height=Math.round(this.container.clientHeight),this.state.aspect=this.state.size.width/this.state.size.height,this.state.hFov=this.dataHelper.vFovToHFov(this.state.vFov),this.dispatchEvent(new el(this.getSize())),this.onResize())}},{key:"setPanorama",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.textureLoader.abortLoading(),null===(t=this.state.transitionAnimation)||void 0===t||t.cancel(),this.state.ready||["sphereCorrection","panoData","overlay","overlayOpacity"].forEach(function(e){e in i||(i[e]=n.config[e])}),(void 0===i.transition||!0===i.transition)&&(i.transition=l),void 0===i.showLoader&&(i.showLoader=!0),void 0===i.caption&&(i.caption=this.config.caption),void 0===i.description&&(i.description=this.config.description),i.panoData||"function"!=typeof this.config.panoData||(i.panoData=this.config.panoData);var r=_isExtendedPosition(i),o="zoom"in i;(r||o)&&this.stopAll(),this.hideError(),this.resetIdleTimer(),this.config.panorama=e,this.config.caption=i.caption,this.config.description=i.description;var done=function(e){if(n.loader.hide(),n.state.loadingPromise=null,_isAbortError(e))return!1;if(!e)return n.setOverlay(i.overlay,i.overlayOpacity),n.navbar.setCaption(n.config.caption),!0;throw n.navbar.setCaption(""),n.showError(n.config.lang.loadError),console.error(e),e};this.navbar.setCaption("<em>".concat(this.config.loadingTxt||"","</em>")),(i.showLoader||!this.state.ready)&&this.loader.show();var a=this.adapter.loadTexture(this.config.panorama,i.panoData).then(function(e){if(e.panorama!==n.config.panorama)throw n.adapter.disposeTexture(e),_getAbortError();return e});return i.transition&&this.state.ready&&this.adapter.supportsTransition(this.config.panorama)?this.state.loadingPromise=a.then(function(e){return n.loader.hide(),n.dispatchEvent(new et(e)),n.state.transitionAnimation=n.renderer.transition(e,i),n.state.transitionAnimation}).then(function(e){if(n.state.transitionAnimation=null,!e)throw _getAbortError()}).then(function(){return done()},function(e){return done(e)}):this.state.loadingPromise=a.then(function(e){n.renderer.show(),n.renderer.setTexture(e),n.renderer.setPanoramaPose(e.panoData),n.renderer.setSphereCorrection(i.sphereCorrection),n.dispatchEvent(new et(e)),o&&n.zoom(i.zoom),r&&n.rotate(i),n.state.ready||n.init()}).then(function(){return done()},function(e){return done(e)}),this.state.loadingPromise}},{key:"setOverlay",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.overlayOpacity,i=this.adapter.constructor.supportsOverlay;return e?i?this.adapter.loadTexture(e,function(e){var n=t.state.panoData,i=e.width/n.croppedWidth;return{fullWidth:i*n.fullWidth,fullHeight:i*n.fullHeight,croppedWidth:i*n.croppedWidth,croppedHeight:i*n.croppedHeight,croppedX:i*n.croppedX,croppedY:i*n.croppedY}},!1).then(function(e){t.renderer.setOverlay(e,n)}):Promise.reject(new T("Current adapter does not supports overlay")):(i&&this.renderer.setOverlay(null,0),Promise.resolve())}},{key:"setOptions",value:function(e){for(var t=_objectSpread(_objectSpread({},this.config),e),n=0,i=Object.entries(e);n<i.length;n++){var r=_slicedToArray(i[n],2),o=r[0],a=r[1];if(!(o in eF)){_logWarn("Unknown option ".concat(o));continue}if(o in eB){_logWarn(eB[o]);continue}switch(o in eU&&(a=eU[o](a,{rawConfig:t,defValue:eF[o]})),this.config[o]=a,o){case"caption":this.navbar.setCaption(this.config.caption);break;case"size":this.resize(this.config.size);break;case"sphereCorrection":this.renderer.setSphereCorrection(this.config.sphereCorrection);break;case"navbar":case"lang":this.navbar.setButtons(this.config.navbar);break;case"moveSpeed":case"zoomSpeed":this.dynamics.updateSpeeds();break;case"minFov":case"maxFov":this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov)),this.dispatchEvent(new eh(this.getZoomLevel()));break;case"keyboard":"always"===this.config.keyboard?this.startKeyboardControl():this.stopKeyboardControl()}}this.needsUpdate(),this.dispatchEvent(new Y(Object.keys(e)))}},{key:"setOption",value:function(e,t){this.setOptions(_defineProperty({},e,t))}},{key:"showError",value:function(e){this.overlay.show({id:w.ERROR,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="15 15 70 70"><path fill="currentColor" d="M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z"/><rect fill="currentColor" x="48" y="31.7" width="4" height="28"/><rect fill="currentColor" x="48" y="63.2" width="4" height="5"/><!--Created by Shastry from the Noun Project--></svg>\n',title:e,dissmisable:!1})}},{key:"hideError",value:function(){this.overlay.hide(w.ERROR)}},{key:"rotate",value:function(e){var t=new W(this.dataHelper.cleanPosition(e));this.dispatchEvent(t),t.defaultPrevented||this.dynamics.position.setValue(t.position)}},{key:"zoom",value:function(e){this.dynamics.zoom.setValue(e)}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.dynamics.zoom.step(e)}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.dynamics.zoom.step(-e)}},{key:"animate",value:function(e){var t,n=this,i=_isExtendedPosition(e),r=void 0!==e.zoom,o=new U(i?this.dataHelper.cleanPosition(e):void 0,e.zoom);if(this.dispatchEvent(o),!o.defaultPrevented){var a=o.position,s=o.zoomLevel;this.stopAll();var c={};if(i){var l=this.getPosition(),h=_getShortestArc(l.yaw,a.yaw);c.yaw={start:l.yaw,end:l.yaw+h},c.pitch={start:l.pitch,end:a.pitch},t=this.dataHelper.speedToDuration(e.speed,_getAngle(l,a))}if(r){var d=Math.abs(s-this.getZoomLevel());c.zoom={start:this.getZoomLevel(),end:s},t||(t=this.dataHelper.speedToDuration(e.speed,Math.PI/4*d/100))}return t?(this.state.animation=new A({properties:c,duration:Math.max(u,t),easing:"inOutSine",onTick:function(e){i&&n.dynamics.position.setValue({yaw:e.yaw,pitch:e.pitch}),r&&n.dynamics.zoom.setValue(e.zoom)}}),this.state.animation.then(function(){n.state.animation=null,n.resetIdleTimer()}),this.state.animation):(i&&this.rotate(a),r&&this.zoom(s),new A(null))}}},{key:"stopAnimation",value:function(){return this.state.animation?(this.state.animation.cancel(),this.state.animation):Promise.resolve()}},{key:"resize",value:function(e){var t=this;["width","height"].forEach(function(n){e&&e[n]&&(/^[0-9.]+$/.test(e[n])&&(e[n]+="px"),t.parent.style[n]=e[n])}),this.autoSize()}},{key:"enterFullscreen",value:function(){this.isFullscreenEnabled()||_requestFullscreen(this.container)}},{key:"exitFullscreen",value:function(){this.isFullscreenEnabled()&&_exitFullscreen()}},{key:"toggleFullscreen",value:function(){this.isFullscreenEnabled()?this.exitFullscreen():this.enterFullscreen()}},{key:"startKeyboardControl",value:function(){this.state.keyboardEnabled=!0}},{key:"stopKeyboardControl",value:function(){this.state.keyboardEnabled=!1}},{key:"createTooltip",value:function(e){return new eJ(this,e)}},{key:"observeObjects",value:function(e){this.state.objectsObservers[e]=null}},{key:"unobserveObjects",value:function(e){delete this.state.objectsObservers[e]}},{key:"stopAll",value:function(){return this.dispatchEvent(new eu),this.disableIdleTimer(),this.stopAnimation()}}]),Viewer}(F)}}]);
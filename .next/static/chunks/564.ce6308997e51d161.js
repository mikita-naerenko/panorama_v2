"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{2929:function(e,t,n){n.d(t,{zT:function(){return f},Ib:function(){return tY}});var i,o,r,a,s,_assign=function(){return(_assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __spreadArray(e,t,n){if(n||2==arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}var l=n(7294),u=n(2256);function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}styleInject("/* add css styles here (optional) */\n.view-container {\n    position: relative;\n    overflow: hidden;\n}"),styleInject('/*!\n * PhotoSphereViewer 5.1.4\n * @copyright 2014-2015 J\xe9r\xe9my Heleine\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/styles/index.scss */\n.psv-container {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  background: radial-gradient(#fff 0%, #fdfdfd 16%, #fbfbfb 33%, #f8f8f8 49%, #efefef 66%, #dfdfdf 82%, #bfbfbf 100%);\n  overflow: hidden;\n}\n.psv-container * {\n  box-sizing: content-box;\n}\n.psv-canvas-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 0;\n  transition: opacity linear 100ms;\n}\n.psv-canvas {\n  display: block;\n}\n.psv-loader-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 80;\n}\n.psv-loader {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: rgba(255, 255, 255, 0.7);\n  width: 150px;\n  height: 150px;\n  outline: 3px solid transparent;\n}\n.psv-loader-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  color: rgba(61, 61, 61, 0.5);\n  outline: 10px solid transparent;\n  z-index: -1;\n}\n.psv-loader-text {\n  font: 600 16px sans-serif;\n}\n.psv-navbar {\n  display: flex;\n  position: absolute;\n  z-index: 90;\n  bottom: -40px;\n  left: 0;\n  width: 100%;\n  height: 40px;\n  background: rgba(61, 61, 61, 0.5);\n  transition: bottom ease-in-out 0.1s;\n}\n.psv-navbar--open {\n  bottom: 0;\n}\n.psv-navbar,\n.psv-navbar * {\n  box-sizing: content-box;\n}\n.psv-button {\n  flex: 0 0 auto;\n  padding: 10px;\n  position: relative;\n  cursor: pointer;\n  height: 20px;\n  width: 20px;\n  background: transparent;\n  color: rgba(255, 255, 255, 0.7);\n}\n.psv-button--active {\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-button--disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n.psv-button-svg {\n  width: 100%;\n  transform: scale(1);\n  transition: transform 200ms ease;\n}\n.psv-button:not(.psv-button--disabled):focus-visible {\n  outline: 2px solid #007cff;\n  outline-offset: -2px;\n}\n.psv-container:not(.psv--is-touch) .psv-button--hover-scale:not(.psv-button--disabled):hover .psv-button-svg {\n  transform: scale(1.2);\n}\n.psv-move-button + .psv-move-button {\n  margin-left: -10px;\n}\n.psv-custom-button {\n  width: auto;\n  min-width: 20px;\n}\n.psv-caption {\n  flex: 1 1 100%;\n  color: rgba(255, 255, 255, 0.7);\n  overflow: hidden;\n  text-align: center;\n  cursor: default;\n  padding: unset;\n  height: unset;\n  width: unset;\n}\n.psv-caption-content {\n  display: inline-block;\n  padding: 10px;\n  font: 16px sans-serif;\n  white-space: nowrap;\n}\n.psv-zoom-range.psv-button {\n  width: 80px;\n  height: 1px;\n  margin: 10px 0;\n  padding: 9.5px 0;\n  max-width: 600px;\n}\n.psv-zoom-range-line {\n  position: relative;\n  width: 80px;\n  height: 1px;\n  background: rgba(255, 255, 255, 0.7);\n  transition: all 0.3s ease;\n}\n.psv-zoom-range-handle {\n  position: absolute;\n  border-radius: 50%;\n  top: -3px;\n  width: 7px;\n  height: 7px;\n  background: rgba(255, 255, 255, 0.7);\n  transform: scale(1);\n  transition: transform 0.3s ease;\n}\n.psv-zoom-range:not(.psv-button--disabled):hover .psv-zoom-range-line {\n  box-shadow: 0 0 2px rgba(255, 255, 255, 0.7);\n}\n.psv-zoom-range:not(.psv-button--disabled):hover .psv-zoom-range-handle {\n  transform: scale(1.3);\n}\n.psv-notification {\n  position: absolute;\n  z-index: 100;\n  bottom: -40px;\n  display: flex;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0 2em;\n  opacity: 0;\n  transition-property: opacity, bottom;\n  transition-timing-function: ease-in-out;\n  transition-duration: 200ms;\n}\n.psv-notification-content {\n  max-width: 50em;\n  background: rgba(61, 61, 61, 0.8);\n  border-radius: 4px;\n  padding: 0.5em 1em;\n  font: 14px sans-serif;\n  color: rgb(255, 255, 255);\n}\n.psv-notification--visible {\n  opacity: 100;\n  bottom: 80px;\n}\n.psv-overlay {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  z-index: 110;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: radial-gradient(#fff 0%, #fdfdfd 16%, #fbfbfb 33%, #f8f8f8 49%, #efefef 66%, #dfdfdf 82%, #bfbfbf 100%);\n  opacity: 0.8;\n}\n.psv-overlay-image {\n  margin-bottom: 4vh;\n}\n.psv-overlay-image svg {\n  width: 50vw;\n}\n@media (orientation: landscape) {\n  .psv-overlay-image svg {\n    width: 25vw;\n  }\n}\n.psv-overlay-title {\n  color: black;\n  font: 30px sans-serif;\n  text-align: center;\n}\n.psv-overlay-text {\n  color: rgba(0, 0, 0, 0.8);\n  font: 20px sans-serif;\n  opacity: 0.8;\n  text-align: center;\n}\n.psv-panel {\n  position: absolute;\n  z-index: 90;\n  right: 0;\n  height: 100%;\n  width: 400px;\n  max-width: calc(100% - 9px);\n  background: rgba(10, 10, 10, 0.7);\n  transform: translate3d(100%, 0, 0);\n  opacity: 0;\n  transition-property: opacity, transform;\n  transition-timing-function: ease-in-out;\n  transition-duration: 100ms;\n  cursor: default;\n  margin-left: 9px;\n}\n.psv--has-navbar .psv-panel {\n  height: calc(100% - 40px);\n}\n.psv-panel-close-button {\n  display: none;\n  position: absolute;\n  top: -1px;\n  right: 0;\n  width: 19.2px;\n  height: 19.2px;\n  padding: 6.4px;\n  background: transparent;\n  color: #fff;\n  transition: background 300ms ease-in-out;\n  cursor: pointer;\n}\n.psv-panel-close-button svg {\n  transition: transform 300ms ease-in-out;\n}\n.psv-panel-close-button:hover {\n  background: rgba(0, 0, 0, 0.9);\n}\n.psv-panel-close-button:hover svg {\n  transform: scale(-1);\n}\n.psv-panel-resizer {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: -9px;\n  width: 9px;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.9);\n  cursor: col-resize;\n}\n.psv-panel-resizer::before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: 1px;\n  margin-top: -14.5px;\n  width: 1px;\n  height: 1px;\n  box-shadow:\n    1px 0 #fff,\n    3px 0px #fff,\n    5px 0px #fff,\n    1px 2px #fff,\n    3px 2px #fff,\n    5px 2px #fff,\n    1px 4px #fff,\n    3px 4px #fff,\n    5px 4px #fff,\n    1px 6px #fff,\n    3px 6px #fff,\n    5px 6px #fff,\n    1px 8px #fff,\n    3px 8px #fff,\n    5px 8px #fff,\n    1px 10px #fff,\n    3px 10px #fff,\n    5px 10px #fff,\n    1px 12px #fff,\n    3px 12px #fff,\n    5px 12px #fff,\n    1px 14px #fff,\n    3px 14px #fff,\n    5px 14px #fff,\n    1px 16px #fff,\n    3px 16px #fff,\n    5px 16px #fff,\n    1px 18px #fff,\n    3px 18px #fff,\n    5px 18px #fff,\n    1px 20px #fff,\n    3px 20px #fff,\n    5px 20px #fff,\n    1px 22px #fff,\n    3px 22px #fff,\n    5px 22px #fff,\n    1px 24px #fff,\n    3px 24px #fff,\n    5px 24px #fff,\n    1px 26px #fff,\n    3px 26px #fff,\n    5px 26px #fff,\n    1px 28px #fff,\n    3px 28px #fff,\n    5px 28px #fff;\n  background: transparent;\n}\n.psv-panel-content {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  color: rgb(220, 220, 220);\n  font: 16px sans-serif;\n  overflow: auto;\n}\n.psv-panel-content:not(.psv-panel-content--no-margin) {\n  padding: 1em;\n}\n.psv-panel-content--no-interaction {\n  user-select: none;\n  pointer-events: none;\n}\n.psv-panel--open {\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n  transition-duration: 0.2s;\n}\n.psv-panel--open .psv-panel-close-button,\n.psv-panel--open .psv-panel-resizer {\n  display: block;\n}\n@media screen and (max-width: 400px) {\n  .psv-panel {\n    width: 100% !important;\n    max-width: none;\n  }\n  .psv-panel-resizer {\n    display: none !important;\n  }\n}\n.psv-panel-menu {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.psv-panel-menu-title {\n  flex: none;\n  display: flex;\n  align-items: center;\n  font: 24px sans-serif;\n  margin: 24px 12px;\n}\n.psv-panel-menu-title svg {\n  width: 24px;\n  height: 24px;\n  margin-right: 12px;\n}\n.psv-panel-menu-list {\n  flex: 1;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow-x: hidden;\n}\n.psv-panel-menu-item {\n  min-height: 1.5em;\n  padding: 0.5em 1em;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  transition: background 0.1s ease-in-out;\n}\n.psv-panel-menu-item--active {\n  outline: 1px solid currentcolor;\n  outline-offset: -1px;\n}\n.psv-panel-menu-item-icon {\n  flex: none;\n  height: 1.5em;\n  width: 1.5em;\n  margin-right: 0.5em;\n}\n.psv-panel-menu-item-icon img {\n  max-width: 100%;\n  max-height: 100%;\n}\n.psv-panel-menu-item-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.psv-panel-menu-item:focus-visible {\n  outline: 2px solid #007cff;\n  outline-offset: -2px;\n}\n.psv-panel-menu--stripped .psv-panel-menu-item:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-panel-menu--stripped .psv-panel-menu-item:nth-child(odd),\n.psv-panel-menu--stripped .psv-panel-menu-item:nth-child(odd)::before {\n  background: rgba(255, 255, 255, 0.1);\n}\n.psv-panel-menu--stripped .psv-panel-menu-item:nth-child(even),\n.psv-panel-menu--stripped .psv-panel-menu-item:nth-child(even)::before {\n  background: transparent;\n}\n.psv-container:not(.psv--is-touch) .psv-panel-menu-item:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-tooltip {\n  position: absolute;\n  z-index: 50;\n  box-sizing: border-box;\n  max-width: 200px;\n  background: rgba(61, 61, 61, 0.8);\n  border-radius: 4px;\n  padding: 0.5em 1em;\n  opacity: 0;\n  transition-property: opacity, transform;\n  transition-timing-function: ease-in-out;\n  transition-duration: 100ms;\n}\n.psv-tooltip-content {\n  color: rgb(255, 255, 255);\n  font: 14px sans-serif;\n  text-shadow: 0 1px #000;\n}\n.psv-tooltip-arrow {\n  position: absolute;\n  height: 0;\n  width: 0;\n  border: 7px solid transparent;\n}\n.psv-tooltip--top-left,\n.psv-tooltip--top-center,\n.psv-tooltip--top-right {\n  transform: translate3d(0, 5px, 0);\n}\n.psv-tooltip--top-left .psv-tooltip-arrow,\n.psv-tooltip--top-center .psv-tooltip-arrow,\n.psv-tooltip--top-right .psv-tooltip-arrow {\n  border-top-color: rgba(61, 61, 61, 0.8);\n}\n.psv-tooltip--bottom-left,\n.psv-tooltip--bottom-center,\n.psv-tooltip--bottom-right {\n  transform: translate3d(0, -5px, 0);\n}\n.psv-tooltip--bottom-left .psv-tooltip-arrow,\n.psv-tooltip--bottom-center .psv-tooltip-arrow,\n.psv-tooltip--bottom-right .psv-tooltip-arrow {\n  border-bottom-color: rgba(61, 61, 61, 0.8);\n}\n.psv-tooltip--left-top,\n.psv-tooltip--center-left,\n.psv-tooltip--left-bottom {\n  transform: translate3d(5px, 0, 0);\n}\n.psv-tooltip--left-top .psv-tooltip-arrow,\n.psv-tooltip--center-left .psv-tooltip-arrow,\n.psv-tooltip--left-bottom .psv-tooltip-arrow {\n  border-left-color: rgba(61, 61, 61, 0.8);\n}\n.psv-tooltip--right-top,\n.psv-tooltip--center-right,\n.psv-tooltip--right-bottom {\n  transform: translate3d(-5px, 0, 0);\n}\n.psv-tooltip--right-top .psv-tooltip-arrow,\n.psv-tooltip--center-right .psv-tooltip-arrow,\n.psv-tooltip--right-bottom .psv-tooltip-arrow {\n  border-right-color: rgba(61, 61, 61, 0.8);\n}\n.psv-tooltip--left-top,\n.psv-tooltip--top-left {\n  box-shadow: -3px -3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--top-center {\n  box-shadow: 0 -3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--right-top,\n.psv-tooltip--top-right {\n  box-shadow: 3px -3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--left-bottom,\n.psv-tooltip--bottom-left {\n  box-shadow: -3px 3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--bottom-center {\n  box-shadow: 0 3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--right-bottom,\n.psv-tooltip--bottom-right {\n  box-shadow: 3px 3px 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--center-left {\n  box-shadow: -3px 0 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--center-right {\n  box-shadow: 3px 0 0 rgba(90, 90, 90, 0.7);\n}\n.psv-tooltip--visible {\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n  transition-duration: 100ms;\n}');var c=n(5161);function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}/*!
 * PhotoSphereViewer.AutorotatePlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var d=Object.defineProperty;!function(e,t){for(var n in t)d(e,n,{get:t[n],enumerable:!0})}({},{AutorotateEvent:function(){return p}});var p=function(e){_inherits(_AutorotateEvent,e);var t=_createSuper(_AutorotateEvent);function _AutorotateEvent(e){var n;return _classCallCheck(this,_AutorotateEvent),(n=t.call(this,_AutorotateEvent.type)).autorotateEnabled=e,n}return _createClass(_AutorotateEvent)}(u.$N);p.type="autorotate";var _=function(e){_inherits(AutorotateButton,e);var t=_createSuper(AutorotateButton);function AutorotateButton(e){var n,i;return _classCallCheck(this,AutorotateButton),(i=t.call(this,e,{className:"psv-autorotate-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.899-1-.101 0-.2-.1-.2-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.4 2.7.9.1 0 .2.1.2.199C6.3 34.4 12.9 39 20.5 39c7.601 0 14.101-4.6 16.9-11.1 0-.101.1-.101.2-.2 1.699-.6 2.699-1 2.8-1l.6-.3V14.3l-.5-.2zM20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.8-1-8.8-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5C9.7 7 14.8 4 20.5 4zm0 33c-5.9 0-11.1-3.1-14-7.899-.2-.301.1-.601.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.601-2 .3-.1.5.2.399.5A16.422 16.422 0 0 1 20.5 37zm18.601-12.1c0 .1-.101.3-.2.3-2.5.9-10.4 3.6-18.4 3.6-7.1 0-15.6-2.699-18.3-3.6C2.1 25.2 2 25 2 24.9V16c0-.1.1-.3.2-.3 2.6-.9 10.6-3.6 18.2-3.6 7.5 0 15.899 2.7 18.5 3.6.1 0 .2.2.2.3v8.9z"/><path d="M18.7 24l6.4-3.7c.3-.2.3-.7 0-.8l-6.4-3.8c-.3-.2-.7 0-.7.4v7.4c0 .5.4.7.7.5z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>\n',iconActive:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 41" overflow="visible"><g fill="currentColor" transform-origin="center" transform="scale(1.3)"><path d="M40.5 14.1c-.1-.1-1.2-.5-2.898-1-.102 0-.202-.1-.202-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.399 2.7.899.1 0 .2.101.2.199C6.3 34.4 12.9 39 20.5 39c7.602 0 14.102-4.6 16.9-11.1 0-.102.1-.102.199-.2 1.699-.601 2.699-1 2.801-1l.6-.3V14.3l-.5-.2zM6.701 11.5C9.7 7 14.8 4 20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.799-1-8.799-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5zM25.1 20.3L18.7 24c-.3.2-.7 0-.7-.5v-7.4c0-.4.4-.6.7-.4l6.399 3.8c.301.1.301.6.001.8zm9.4 8.901A16.421 16.421 0 0 1 20.5 37c-5.9 0-11.1-3.1-14-7.898-.2-.302.1-.602.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.602-2 .298-.1.5.198.398.499z"/></g><!--Created by Nick Bluth from the Noun Project--></svg>\n'})).plugin=i.viewer.getPlugin("autorotate"),null===(n=i.plugin)||void 0===n||n.addEventListener(p.type,_assertThisInitialized(i)),i}return _createClass(AutorotateButton,[{key:"destroy",value:function(){var e;null===(e=this.plugin)||void 0===e||e.removeEventListener(p.type,this),_get(_getPrototypeOf(AutorotateButton.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(e){e instanceof p&&this.toggleActive(e.autorotateEnabled)}},{key:"onClick",value:function(){this.plugin.isEnabled()&&(this.plugin.config.autostartOnIdle=!1),this.plugin.toggle()}}]),AutorotateButton}(u.T9);_.id="autorotate";var h=u.P6.getConfigParser({autostartDelay:2e3,autostartOnIdle:!0,autorotateSpeed:u.P6.parseSpeed("2rpm"),autorotatePitch:null,autorotateZoomLvl:null,keypoints:null,startFromClosest:!0},{autostartOnIdle:function(e,t){var n=t.rawConfig;return e&&u.P6.isNil(n.autostartDelay)?(u.P6.logWarn("autostartOnIdle requires a non null autostartDelay"),!1):e},autorotateSpeed:function(e){return u.P6.parseSpeed(e)},autorotatePitch:function(e){return u.P6.isNil(e)?null:u.P6.parseAngle(e,!0)},autorotateZoomLvl:function(e){return u.P6.isNil(e)?null:c.M8C.clamp(e,0,100)}});function serializePt(e){return[e.yaw,e.pitch]}var f=function(e){_inherits(AutorotatePlugin,e);var t=_createSuper(AutorotatePlugin);function AutorotatePlugin(e,n){var i;return _classCallCheck(this,AutorotatePlugin),(i=t.call(this,e,n)).state={initialStart:!0,enabled:!1,idx:-1,curve:[],startStep:null,endStep:null,startTime:null,stepDuration:null,remainingPause:null,lastTime:null,tooltip:null},i.state.initialStart=!u.P6.isNil(i.config.autostartDelay),i}return _createClass(AutorotatePlugin,[{key:"init",value:function(){_get(_getPrototypeOf(AutorotatePlugin.prototype),"init",this).call(this),this.video=this.viewer.getPlugin("video"),this.markers=this.viewer.getPlugin("markers"),this.config.keypoints&&(this.setKeypoints(this.config.keypoints),delete this.config.keypoints),this.viewer.addEventListener(u.U3.StopAllEvent.type,this),this.viewer.addEventListener(u.U3.BeforeRenderEvent.type,this),this.video||this.viewer.addEventListener(u.U3.KeypressEvent.type,this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.StopAllEvent.type,this),this.viewer.removeEventListener(u.U3.BeforeRenderEvent.type,this),this.viewer.removeEventListener(u.U3.KeypressEvent.type,this),delete this.video,delete this.markers,delete this.keypoints,_get(_getPrototypeOf(AutorotatePlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.StopAllEvent.type:this.stop();break;case u.U3.BeforeRenderEvent.type:this.__beforeRender(e.timestamp);break;case u.U3.KeypressEvent.type:e.key===u.tl.KEY_CODES.Space&&(this.toggle(),e.preventDefault())}}},{key:"setKeypoints",value:function(e){var t=this;if(e){if(e.length<2)throw new u.Il("At least two points are required");this.keypoints=e.map(function(e,n){var i,o={position:null,markerId:null,pause:0,tooltip:null};if("string"==typeof e?o.markerId=e:u.P6.isExtendedPosition(e)?i=e:(o.markerId=e.markerId,o.pause=e.pause,i=e.position,e.tooltip&&"object"===_typeof(e.tooltip)?o.tooltip=e.tooltip:"string"==typeof e.tooltip&&(o.tooltip={content:e.tooltip})),o.markerId){if(!t.markers)throw new u.Il("Keypoint #".concat(n," references a marker but the markers plugin is not loaded"));var r=t.markers.getMarker(o.markerId);o.position=serializePt(r.state.position)}else if(i)o.position=serializePt(t.viewer.dataHelper.cleanPosition(i));else throw new u.Il("Keypoint #".concat(n," is missing marker or position"));return o})}else this.keypoints=null;this.isEnabled()&&(this.stop(),this.start())}},{key:"isEnabled",value:function(){return this.state.enabled}},{key:"start",value:function(){this.isEnabled()||(this.viewer.stopAll(),this.keypoints?this.config.startFromClosest&&this.__shiftKeypoints():this.__animate(),this.state.initialStart=!1,this.state.enabled=!0,this.dispatchEvent(new p(!0)))}},{key:"stop",value:function(){this.isEnabled()&&(this.__reset(),this.__hideTooltip(),this.viewer.dynamics.position.stop(),this.viewer.dynamics.zoom.stop(),this.state.enabled=!1,this.dispatchEvent(new p(!1)))}},{key:"toggle",value:function(){this.isEnabled()?this.stop():this.start()}},{key:"reverse",value:function(){this.isEnabled()&&!this.keypoints&&(this.config.autorotateSpeed=-this.config.autorotateSpeed,this.__animate())}},{key:"__animate",value:function(){var e=this;(u.P6.isNil(this.config.autorotateZoomLvl)?Promise.resolve():this.viewer.animate({zoom:this.config.autorotateZoomLvl,speed:"".concat(2*this.viewer.config.zoomSpeed,"rpm")})).then(function(){var t;e.viewer.dynamics.position.roll({yaw:e.config.autorotateSpeed<0},Math.abs(e.config.autorotateSpeed/e.viewer.config.moveSpeed)),e.viewer.dynamics.position.goto({pitch:null!==(t=e.config.autorotatePitch)&&void 0!==t?t:e.viewer.config.defaultPitch},Math.abs(e.config.autorotateSpeed/e.viewer.config.moveSpeed))})}},{key:"__reset",value:function(){this.state.idx=-1,this.state.curve=[],this.state.startStep=null,this.state.endStep=null,this.state.startTime=null,this.state.stepDuration=null,this.state.remainingPause=null,this.state.lastTime=null,this.state.tooltip=null}},{key:"__beforeRender",value:function(e){(this.state.initialStart||this.config.autostartOnIdle)&&this.viewer.state.idleTime>0&&e-this.viewer.state.idleTime>this.config.autostartDelay&&this.start(),this.isEnabled()&&this.keypoints&&(this.state.startTime||(this.state.endStep=serializePt(this.viewer.getPosition()),this.__nextStep(),this.state.startTime=e,this.state.lastTime=e),this.__nextFrame(e))}},{key:"__shiftKeypoints",value:function(){var e,t=serializePt(this.viewer.getPosition()),n=this.__findMinIndex(this.keypoints,function(e){return u.P6.greatArcDistance(e.position,t)});(e=this.keypoints).push.apply(e,_toConsumableArray(this.keypoints.splice(0,n)))}},{key:"__incrementIdx",value:function(){this.state.idx++,this.state.idx===this.keypoints.length&&(this.state.idx=0)}},{key:"__showTooltip",value:function(){var e=this.keypoints[this.state.idx];if(e.tooltip){var t=this.viewer.dataHelper.vector3ToViewerCoords(this.viewer.state.direction);this.state.tooltip=this.viewer.createTooltip({content:e.tooltip.content,position:e.tooltip.position,top:t.y,left:t.x})}else if(e.markerId){var n=this.markers.getMarker(e.markerId);n.showTooltip(),this.state.tooltip=n.tooltip}}},{key:"__hideTooltip",value:function(){if(this.state.tooltip){var e=this.keypoints[this.state.idx];e.tooltip?this.state.tooltip.hide():e.markerId&&this.markers.getMarker(e.markerId).hideTooltip(),this.state.tooltip=null}}},{key:"__nextPoint",value:function(){var e=[];if(-1===this.state.idx){var t=serializePt(this.viewer.getPosition());e.push(t,t,this.keypoints[0].position,this.keypoints[1].position)}else for(var n=-1;n<3;n++){var i=this.state.idx+n<0?this.keypoints[this.keypoints.length-1]:this.keypoints[(this.state.idx+n)%this.keypoints.length];e.push(i.position)}for(var o=[new c.FM8(e[0][0],e[0][1])],r=0,a=1;a<=3;a++){var s=e[a-1][0]-e[a][0];s>Math.PI?r+=1:s<-Math.PI&&(r-=1),0!==r&&1===a&&(o[0].x-=2*r*Math.PI,r=0),o.push(new c.FM8(e[a][0]+2*r*Math.PI,e[a][1]))}var l=new c.gti(o).getPoints(48).map(function(e){return[e.x,e.y]});this.state.curve=l.slice(17,33),-1!==this.state.idx?(this.state.remainingPause=this.keypoints[this.state.idx].pause,this.state.remainingPause?this.__showTooltip():this.__incrementIdx()):this.__incrementIdx()}},{key:"__nextStep",value:function(){0===this.state.curve.length&&(this.__nextPoint(),this.state.endStep[0]=u.P6.parseAngle(this.state.endStep[0])),this.state.startStep=this.state.endStep,this.state.endStep=this.state.curve.shift();var e=u.P6.greatArcDistance(this.state.startStep,this.state.endStep);this.state.stepDuration=1e3*e/Math.abs(this.config.autorotateSpeed),0===e&&this.__nextStep()}},{key:"__nextFrame",value:function(e){var t=e-this.state.lastTime;if(this.state.lastTime=e,this.state.remainingPause){if(this.state.remainingPause=Math.max(0,this.state.remainingPause-t),this.state.remainingPause>0)return;this.__hideTooltip(),this.__incrementIdx(),this.state.startTime=e}var n=(e-this.state.startTime)/this.state.stepDuration;n>=1&&(this.__nextStep(),n=0,this.state.startTime=e),this.viewer.rotate({yaw:this.state.startStep[0]+(this.state.endStep[0]-this.state.startStep[0])*n,pitch:this.state.startStep[1]+(this.state.endStep[1]-this.state.startStep[1])*n})}},{key:"__findMinIndex",value:function(e,t){var n=0,i=Number.MAX_VALUE;return e.forEach(function(e,o){var r=t(e);r<i&&(i=r,n=o)}),n}}]),AutorotatePlugin}(u.Yc);function index_module_typeof(e){return(index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return(t=index_module_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||index_module_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function index_module_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return index_module_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return index_module_arrayLikeToArray(e,t)}}function index_module_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function index_module_get(){return(index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=index_module_getPrototypeOf(e)););return e}function index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,index_module_toPropertyKey(i.key),i)}}function index_module_createClass(e,t,n){return t&&index_module_defineProperties(e.prototype,t),n&&index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function index_module_toPropertyKey(e){var t=index_module_toPrimitive(e,"string");return"symbol"===index_module_typeof(t)?t:String(t)}function index_module_toPrimitive(e,t){if("object"!==index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&index_module_setPrototypeOf(e,t)}function index_module_setPrototypeOf(e,t){return(index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function index_module_createSuper(e){var t=index_module_isNativeReflectConstruct();return function(){var n,i=index_module_getPrototypeOf(e);if(t){var o=index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return index_module_possibleConstructorReturn(this,n)}}function index_module_possibleConstructorReturn(e,t){if(t&&("object"===index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return index_module_assertThisInitialized(e)}function index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function index_module_getPrototypeOf(e){return(index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}f.id="autorotate",f.configParser=h,f.readonlyOptions=["keypoints"],(0,u.KI)(_,"start"),u.Of.lang[_.id]="Automatic rotation";/*!
 * PhotoSphereViewer.MarkersPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var g=Object.defineProperty;!function(e,t){for(var n in t)g(e,n,{get:t[n],enumerable:!0})}({},{EnterMarkerEvent:function(){return w},GotoMarkerDoneEvent:function(){return b},HideMarkersEvent:function(){return O},LeaveMarkerEvent:function(){return x},MarkerVisibilityEvent:function(){return y},MarkersPluginEvent:function(){return m},RenderMarkersListEvent:function(){return T},SelectMarkerEvent:function(){return P},SelectMarkerListEvent:function(){return k},SetMarkersEvent:function(){return C},ShowMarkersEvent:function(){return S},UnselectMarkerEvent:function(){return E}});var m=function(e){index_module_inherits(_MarkersPluginEvent,e);var t=index_module_createSuper(_MarkersPluginEvent);function _MarkersPluginEvent(){return index_module_classCallCheck(this,_MarkersPluginEvent),t.apply(this,arguments)}return index_module_createClass(_MarkersPluginEvent)}(u.$N),y=function(e){index_module_inherits(_MarkerVisibilityEvent,e);var t=index_module_createSuper(_MarkerVisibilityEvent);function _MarkerVisibilityEvent(e,n){var i;return index_module_classCallCheck(this,_MarkerVisibilityEvent),(i=t.call(this,_MarkerVisibilityEvent.type)).marker=e,i.visible=n,i}return index_module_createClass(_MarkerVisibilityEvent)}(m);y.type="marker-visibility";var b=function(e){index_module_inherits(_GotoMarkerDoneEvent,e);var t=index_module_createSuper(_GotoMarkerDoneEvent);function _GotoMarkerDoneEvent(e){var n;return index_module_classCallCheck(this,_GotoMarkerDoneEvent),(n=t.call(this,_GotoMarkerDoneEvent.type)).marker=e,n}return index_module_createClass(_GotoMarkerDoneEvent)}(m);b.type="goto-marker-done";var x=function(e){index_module_inherits(_LeaveMarkerEvent,e);var t=index_module_createSuper(_LeaveMarkerEvent);function _LeaveMarkerEvent(e){var n;return index_module_classCallCheck(this,_LeaveMarkerEvent),(n=t.call(this,_LeaveMarkerEvent.type)).marker=e,n}return index_module_createClass(_LeaveMarkerEvent)}(m);x.type="leave-marker";var w=function(e){index_module_inherits(_EnterMarkerEvent,e);var t=index_module_createSuper(_EnterMarkerEvent);function _EnterMarkerEvent(e){var n;return index_module_classCallCheck(this,_EnterMarkerEvent),(n=t.call(this,_EnterMarkerEvent.type)).marker=e,n}return index_module_createClass(_EnterMarkerEvent)}(m);w.type="enter-marker";var P=function(e){index_module_inherits(_SelectMarkerEvent,e);var t=index_module_createSuper(_SelectMarkerEvent);function _SelectMarkerEvent(e,n,i){var o;return index_module_classCallCheck(this,_SelectMarkerEvent),(o=t.call(this,_SelectMarkerEvent.type)).marker=e,o.doubleClick=n,o.rightClick=i,o}return index_module_createClass(_SelectMarkerEvent)}(m);P.type="select-marker";var k=function(e){index_module_inherits(_SelectMarkerListEvent,e);var t=index_module_createSuper(_SelectMarkerListEvent);function _SelectMarkerListEvent(e){var n;return index_module_classCallCheck(this,_SelectMarkerListEvent),(n=t.call(this,_SelectMarkerListEvent.type)).marker=e,n}return index_module_createClass(_SelectMarkerListEvent)}(m);k.type="select-marker-list";var E=function(e){index_module_inherits(_UnselectMarkerEvent,e);var t=index_module_createSuper(_UnselectMarkerEvent);function _UnselectMarkerEvent(e){var n;return index_module_classCallCheck(this,_UnselectMarkerEvent),(n=t.call(this,_UnselectMarkerEvent.type)).marker=e,n}return index_module_createClass(_UnselectMarkerEvent)}(m);E.type="unselect-marker";var O=function(e){index_module_inherits(_HideMarkersEvent,e);var t=index_module_createSuper(_HideMarkersEvent);function _HideMarkersEvent(){return index_module_classCallCheck(this,_HideMarkersEvent),t.call(this,_HideMarkersEvent.type)}return index_module_createClass(_HideMarkersEvent)}(m);O.type="hide-markers";var C=function(e){index_module_inherits(_SetMarkersEvent,e);var t=index_module_createSuper(_SetMarkersEvent);function _SetMarkersEvent(e){var n;return index_module_classCallCheck(this,_SetMarkersEvent),(n=t.call(this,_SetMarkersEvent.type)).markers=e,n}return index_module_createClass(_SetMarkersEvent)}(m);C.type="set-markers";var S=function(e){index_module_inherits(_ShowMarkersEvent,e);var t=index_module_createSuper(_ShowMarkersEvent);function _ShowMarkersEvent(){return index_module_classCallCheck(this,_ShowMarkersEvent),t.call(this,_ShowMarkersEvent.type)}return index_module_createClass(_ShowMarkersEvent)}(m);S.type="show-markers";var T=function(e){index_module_inherits(_RenderMarkersListEvent,e);var t=index_module_createSuper(_RenderMarkersListEvent);function _RenderMarkersListEvent(e){var n;return index_module_classCallCheck(this,_RenderMarkersListEvent),(n=t.call(this,_RenderMarkersListEvent.type)).markers=e,n}return index_module_createClass(_RenderMarkersListEvent)}(m);T.type="render-markers-list";var M=function(e){index_module_inherits(MarkersButton,e);var t=index_module_createSuper(MarkersButton);function MarkersButton(e){var n;return index_module_classCallCheck(this,MarkersButton),(n=t.call(this,e,{className:"psv-markers-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 9 81 81"><path fill="currentColor" d="M50.5 90S22.9 51.9 22.9 36.6 35.2 9 50.5 9s27.6 12.4 27.6 27.6S50.5 90 50.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11z"/><!--Created by Rohith M S from the Noun Project--></svg>\n',hoverScale:!0,collapsable:!0,tabbable:!0})).plugin=n.viewer.getPlugin("markers"),n.plugin&&(n.plugin.addEventListener(S.type,index_module_assertThisInitialized(n)),n.plugin.addEventListener(O.type,index_module_assertThisInitialized(n)),n.toggleActive(!0)),n}return index_module_createClass(MarkersButton,[{key:"destroy",value:function(){this.plugin&&(this.plugin.removeEventListener(S.type,this),this.plugin.removeEventListener(O.type,this)),index_module_get(index_module_getPrototypeOf(MarkersButton.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(e){e instanceof S?this.toggleActive(!0):e instanceof O&&this.toggleActive(!1)}},{key:"onClick",value:function(){this.plugin.toggleAllMarkers()}}]),MarkersButton}(u.T9);M.id="markers";var j='<svg xmlns="http://www.w3.org/2000/svg" viewBox="9 9 81 81"><path fill="currentColor" d="M37.5 90S9.9 51.9 9.9 36.6 22.2 9 37.5 9s27.6 12.4 27.6 27.6S37.5 90 37.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11zM86.7 55H70c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h16.7c1.8 0 3.3 1.5 3.3 3.3S88.5 55 86.7 55zm0-25h-15a3.3 3.3 0 0 1-3.3-3.3c0-1.8 1.5-3.3 3.3-3.3h15c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3zM56.5 73h30c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3h-30a3.3 3.3 0 0 1-3.3-3.3 3.2 3.2 0 0 1 3.3-3.3z"/><!--Created by Rohith M S from the Noun Project--></svg>\n',R="http://www.w3.org/2000/svg",I="psvMarker",L=u.P6.dasherize(I),A="marker",z="markersList",B=function(e){index_module_inherits(MarkersListButton,e);var t=index_module_createSuper(MarkersListButton);function MarkersListButton(e){var n;return index_module_classCallCheck(this,MarkersListButton),(n=t.call(this,e,{className:" psv-markers-list-button",icon:j,hoverScale:!0,collapsable:!0,tabbable:!0})).plugin=n.viewer.getPlugin("markers"),n.plugin&&(n.viewer.addEventListener(u.U3.ShowPanelEvent.type,index_module_assertThisInitialized(n)),n.viewer.addEventListener(u.U3.HidePanelEvent.type,index_module_assertThisInitialized(n))),n}return index_module_createClass(MarkersListButton,[{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.ShowPanelEvent.type,this),this.viewer.removeEventListener(u.U3.HidePanelEvent.type,this),index_module_get(index_module_getPrototypeOf(MarkersListButton.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(e){e instanceof u.U3.ShowPanelEvent?this.toggleActive(e.panelId===z):e instanceof u.U3.HidePanelEvent&&this.toggleActive(!1)}},{key:"onClick",value:function(){this.plugin.toggleMarkersList()}}]),MarkersListButton}(u.T9);function greatArcIntermediaryPoint(e,t,n){var i=_slicedToArray(e,2),o=i[0],r=i[1],a=_slicedToArray(t,2),s=a[0],l=a[1],c=u.P6.greatArcDistance(e,t),d=Math.sin((1-n)*c)/Math.sin(c),p=Math.sin(n*c)/Math.sin(c),_=d*Math.cos(r)*Math.cos(o)+p*Math.cos(l)*Math.cos(s),h=d*Math.cos(r)*Math.sin(o)+p*Math.cos(l)*Math.sin(s);return[Math.atan2(h,_),Math.atan2(d*Math.sin(r)+p*Math.sin(l),Math.sqrt(_*_+h*h))]}function getPolygonCoherentPoints(e){for(var t=[e[0]],n=0,i=1;i<e.length;i++){var o=e[i-1][0]-e[i][0];o>Math.PI?n+=1:o<-Math.PI&&(n-=1),t.push([e[i][0]+2*n*Math.PI,e[i][1]])}return t}function getPolygonCenter(e){var t=getPolygonCoherentPoints(e).reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]});return[u.P6.parseAngle(t[0]/e.length),t[1]/e.length]}function getPolylineCenter(e){for(var t=getPolygonCoherentPoints(e),n=0,i=[],o=0;o<t.length-1;o++){var r=u.P6.greatArcDistance(t[o],t[o+1])*u.tl.SPHERE_RADIUS;i.push(r),n+=r}for(var a=0,s=0;s<t.length-1;s++){if(a+i[s]>n/2){var l=(n/2-a)/i[s];return greatArcIntermediaryPoint(t[s],t[s+1],l)}a+=i[s]}return t[Math.round(t.length/2)]}B.id="markersList";var N=((i=N||{}).image="image",i.imageLayer="imageLayer",i.html="html",i.polygon="polygon",i.polygonPixels="polygonPixels",i.polyline="polyline",i.polylinePixels="polylinePixels",i.square="square",i.rect="rect",i.circle="circle",i.ellipse="ellipse",i.path="path",i),U=function(){function Marker(e,t){if(index_module_classCallCheck(this,Marker),this.viewer=e,this.visible=!0,this.state={dynamicSize:!1,anchor:null,visible:!1,staticTooltip:!1,position:null,position2D:null,positions3D:null,size:null},!t.id)throw new u.Il("missing marker id");if(this.type=Marker.getType(t),this.isNormal())this.element=document.createElement("div");else if(this.isPolygon())this.element=document.createElementNS(R,"polygon");else if(this.isPolyline())this.element=document.createElementNS(R,"polyline");else if(this.isSvg()){var n="square"===this.type?"rect":this.type;this.element=document.createElementNS(R,n)}else this.is3d()&&(this.element=this.__createMesh(),this.loader=new c.dpR,this.viewer.config.withCredentials&&this.loader.setWithCredentials(!0));this.is3d()||(this.element.id="psv-marker-".concat(t.id),this.element[I]=this),this.update(t)}return index_module_createClass(Marker,[{key:"id",get:function(){return this.config.id}},{key:"data",get:function(){return this.config.data}},{key:"domElement",get:function(){return this.is3d()?null:this.element}},{key:"threeElement",get:function(){return this.is3d()?this.element:null}},{key:"destroy",value:function(){this.hideTooltip(),this.is3d()?delete this.threeElement.children[0].userData[I]:delete this.element[I]}},{key:"is3d",value:function(){return"imageLayer"===this.type}},{key:"isNormal",value:function(){return"image"===this.type||"html"===this.type}},{key:"isPoly",value:function(){return this.isPolygon()||this.isPolyline()}},{key:"isPolyPixels",value:function(){return"polygonPixels"===this.type||"polylinePixels"===this.type}},{key:"isPolyAngles",value:function(){return"polygon"===this.type||"polyline"===this.type}},{key:"isPolygon",value:function(){return"polygon"===this.type||"polygonPixels"===this.type}},{key:"isPolyline",value:function(){return"polyline"===this.type||"polylinePixels"===this.type}},{key:"isSvg",value:function(){return"square"===this.type||"rect"===this.type||"circle"===this.type||"ellipse"===this.type||"path"===this.type}},{key:"getScale",value:function(e,t){if(!this.config.scale)return 1;if("function"==typeof this.config.scale)return this.config.scale(e,t);var n=1;if(Array.isArray(this.config.scale.zoom)){var i=_slicedToArray(this.config.scale.zoom,2),o=i[0];n*=o+(i[1]-o)*u.tl.EASINGS.inQuad(e/100)}if(Array.isArray(this.config.scale.yaw)){var r=_slicedToArray(this.config.scale.yaw,2),a=r[0],s=r[1],l=c.M8C.degToRad(this.viewer.state.hFov)/2,d=Math.abs(u.P6.getShortestArc(this.state.position.yaw,t.yaw));n*=s+(a-s)*u.tl.EASINGS.outQuad(Math.max(0,(l-d)/l))}return n}},{key:"getListContent",value:function(){var e;return this.config.listContent?this.config.listContent:null!==(e=this.config.tooltip)&&void 0!==e&&e.content?this.config.tooltip.content:this.config.html?this.config.html:this.id}},{key:"showTooltip",value:function(e,t){var n;if(this.state.visible&&null!==(n=this.config.tooltip)&&void 0!==n&&n.content&&this.state.position2D){var i=_objectSpread(_objectSpread({},this.config.tooltip),{},{data:this,top:0,left:0});if(this.isPoly()){if(e||t){var o=u.P6.getPosition(this.viewer.container);i.top=t-o.y,i.left=e-o.x,i.box={width:20,height:20}}else i.top=this.state.position2D.y,i.left=this.state.position2D.x}else i.top=this.state.position2D.y+this.state.size.height/2,i.left=this.state.position2D.x+this.state.size.width/2,i.box={width:this.state.size.width,height:this.state.size.height};this.tooltip?this.tooltip.move(i):this.tooltip=this.viewer.createTooltip(i)}}},{key:"refreshTooltip",value:function(){this.tooltip&&this.showTooltip()}},{key:"hideTooltip",value:function(){this.tooltip&&(this.tooltip.hide(),this.tooltip=null)}},{key:"update",value:function(e){var t=Marker.getType(e,!0);if(void 0!==t&&t!==this.type)throw new u.Il("cannot change marker type");if(u.P6.isExtendedPosition(e)&&(u.P6.logWarn('Use the "position" property to configure the position of a marker'),e.position=this.viewer.dataHelper.cleanPosition(e)),"width"in e&&"height"in e&&(u.P6.logWarn('Use the "size" property to configure the size of a marker'),e.size={width:e.width,height:e.height}),this.config=u.P6.deepmerge(this.config,e),"string"==typeof this.config.tooltip&&(this.config.tooltip={content:this.config.tooltip}),this.config.tooltip&&!this.config.tooltip.trigger&&(this.config.tooltip.trigger="hover"),this.config.scale&&Array.isArray(this.config.scale)&&(this.config.scale={zoom:this.config.scale}),this.visible=!1!==this.config.visible,this.state.anchor=u.P6.parsePoint(this.config.anchor),!this.is3d()){var n,i=this.domElement;this.isNormal()?i.setAttribute("class","psv-marker psv-marker--normal"):i.setAttribute("class","psv-marker psv-marker--svg"),this.config.className&&u.P6.addClasses(i,this.config.className),this.config.tooltip&&i.classList.add("psv-marker--has-tooltip"),this.config.content&&i.classList.add("psv-marler--has-content"),i.style.opacity="".concat(null!==(n=this.config.opacity)&&void 0!==n?n:1),this.config.style&&Object.assign(i.style,this.config.style)}this.isNormal()?this.__updateNormal():this.isPoly()?this.__updatePoly():this.isSvg()?this.__updateSvg():this.is3d()&&this.__update3d()}},{key:"__updateNormal",value:function(){var e=this.domElement;if(!u.P6.isExtendedPosition(this.config.position))throw new u.Il("missing marker position");if(this.config.image&&!this.config.size)throw new u.Il("missing marker size");this.config.size?(this.state.dynamicSize=!1,this.state.size=this.config.size,e.style.width=this.config.size.width+"px",e.style.height=this.config.size.height+"px"):this.state.dynamicSize=!0,this.config.image?(this.definition=this.config.image,e.style.backgroundImage="url(".concat(this.config.image,")")):this.config.html&&(this.definition=this.config.html,e.innerHTML=this.config.html),e.style.transformOrigin="".concat(100*this.state.anchor.x,"% ").concat(100*this.state.anchor.y,"%"),this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position),this.state.positions3D=[this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)]}},{key:"__updateSvg",value:function(){var e=this.domElement;if(!u.P6.isExtendedPosition(this.config.position))throw new u.Il("missing marker position");switch(this.state.dynamicSize=!0,this.type){case"square":this.definition={x:0,y:0,width:this.config.square,height:this.config.square};break;case"rect":Array.isArray(this.config.rect)?this.definition={x:0,y:0,width:this.config.rect[0],height:this.config.rect[1]}:this.definition={x:0,y:0,width:this.config.rect.width,height:this.config.rect.height};break;case"circle":this.definition={cx:this.config.circle,cy:this.config.circle,r:this.config.circle};break;case"ellipse":Array.isArray(this.config.ellipse)?this.definition={cx:this.config.ellipse[0],cy:this.config.ellipse[1],rx:this.config.ellipse[0],ry:this.config.ellipse[1]}:this.definition={cx:this.config.ellipse.rx,cy:this.config.ellipse.ry,rx:this.config.ellipse.rx,ry:this.config.ellipse.ry};break;case"path":this.definition={d:this.config.path}}Object.entries(this.definition).forEach(function(t){var n=_slicedToArray(t,2),i=n[0],o=n[1];e.setAttributeNS(null,i,o)}),this.config.svgStyle?Object.entries(this.config.svgStyle).forEach(function(t){var n=_slicedToArray(t,2),i=n[0],o=n[1];e.setAttributeNS(null,u.P6.dasherize(i),o)}):e.setAttributeNS(null,"fill","rgba(0,0,0,0.5)"),this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position),this.state.positions3D=[this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)]}},{key:"__updatePoly",value:function(){var e=this,t=this.domElement;this.state.dynamicSize=!0,this.config.svgStyle?(Object.entries(this.config.svgStyle).forEach(function(e){var n=_slicedToArray(e,2),i=n[0],o=n[1];t.setAttributeNS(null,u.P6.dasherize(i),o)}),this.isPolyline()&&!this.config.svgStyle.fill&&t.setAttributeNS(null,"fill","none")):this.isPolygon()?t.setAttributeNS(null,"fill","rgba(0,0,0,0.5)"):this.isPolyline()&&(t.setAttributeNS(null,"fill","none"),t.setAttributeNS(null,"stroke","rgb(0,0,0)"));var n=this.config[this.type];if(!Array.isArray(n[0]))for(var i=0;i<n.length;i++)n.splice(i,2,[n[i],n[i+1]]);this.isPolyPixels()?this.definition=n.map(function(t){var n=e.viewer.dataHelper.textureCoordsToSphericalCoords({textureX:t[0],textureY:t[1]});return[n.yaw,n.pitch]}):this.definition=n.map(function(e){return[u.P6.parseAngle(e[0]),u.P6.parseAngle(e[1],!0)]});var o=this.isPolygon()?getPolygonCenter(this.definition):getPolylineCenter(this.definition);this.state.position={yaw:o[0],pitch:o[1]},this.state.positions3D=this.definition.map(function(t){return e.viewer.dataHelper.sphericalCoordsToVector3({yaw:t[0],pitch:t[1]})})}},{key:"__update3d",value:function(){var e,t=this,n=this.threeElement;if(!u.P6.isExtendedPosition(this.config.position))throw new u.Il("missing marker position");if(!this.config.size)throw new u.Il("missing marker size");if(this.state.dynamicSize=!1,this.state.size=this.config.size,this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position),this.state.positions3D=[this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)],"imageLayer"===this.type){switch(this.definition!==this.config.imageLayer&&(this.viewer.config.requestHeaders&&this.loader.setRequestHeader(this.viewer.config.requestHeaders(this.config.imageLayer)),n.children[0].material.map=this.loader.load(this.config.imageLayer,function(e){e.anisotropy=4,t.viewer.needsUpdate()}),this.definition=this.config.imageLayer),n.children[0].position.set(this.state.anchor.x-.5,this.state.anchor.y-.5,0),n.children[0].material.opacity=null!==(e=this.config.opacity)&&void 0!==e?e:1,n.position.copy(this.state.positions3D[0]),this.config.orientation){case"horizontal":n.lookAt(0,n.position.y,0),n.rotateX(this.state.position.pitch<0?-Math.PI/2:Math.PI/2);break;case"vertical-left":n.lookAt(0,0,0),n.rotateY(-(.4*Math.PI));break;case"vertical-right":n.lookAt(0,0,0),n.rotateY(.4*Math.PI);break;default:n.lookAt(0,0,0)}n.scale.set(this.config.size.width/100,this.config.size.height/100,1)}}},{key:"__createMesh",value:function(){var e=new c.vBJ({transparent:!0,opacity:1,depthTest:!1}),t=new c._12(1,1),n=new c.Kj0(t,e);n.userData=_defineProperty({},I,this);var i=new c.ZAu().add(n);return Object.defineProperty(i,"visible",{enumerable:!0,get:function(){return this.children[0].userData[I].visible},set:function(e){this.children[0].userData[I].visible=e}}),i}}],[{key:"getType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];if(Object.keys(N).forEach(function(t){e[t]&&n.push(t)}),0!==n.length||t){if(n.length>1)throw new u.Il("multiple marker content, either ".concat(Object.keys(N).join(", ")))}else throw new u.Il("missing marker content, either ".concat(Object.keys(N).join(", ")));return n[0]}}]),Marker}(),H=u.P6.getConfigParser({clickEventOnMarker:!1,gotoMarkerSpeed:"8rpm",markers:null}),D=function(e){index_module_inherits(MarkersPlugin,e);var t=index_module_createSuper(MarkersPlugin);function MarkersPlugin(e,n){var i;return index_module_classCallCheck(this,MarkersPlugin),(i=t.call(this,e,n)).markers={},i.state={visible:!0,showAllTooltips:!1,currentMarker:null,hoveringMarker:null},i.container=document.createElement("div"),i.container.className="psv-markers",i.container.style.cursor=i.viewer.config.mousemove?"move":"default",i.svgContainer=document.createElementNS(R,"svg"),i.svgContainer.setAttribute("class","psv-markers-svg-container"),i.container.appendChild(i.svgContainer),i.container.addEventListener("mouseenter",index_module_assertThisInitialized(i),!0),i.container.addEventListener("mouseleave",index_module_assertThisInitialized(i),!0),i.container.addEventListener("mousemove",index_module_assertThisInitialized(i),!0),i.container.addEventListener("contextmenu",index_module_assertThisInitialized(i)),i}return index_module_createClass(MarkersPlugin,[{key:"init",value:function(){index_module_get(index_module_getPrototypeOf(MarkersPlugin.prototype),"init",this).call(this),this.viewer.container.appendChild(this.container),this.viewer.addEventListener(u.U3.ClickEvent.type,this),this.viewer.addEventListener(u.U3.DoubleClickEvent.type,this),this.viewer.addEventListener(u.U3.RenderEvent.type,this),this.viewer.addEventListener(u.U3.ConfigChangedEvent.type,this),this.viewer.addEventListener(u.U3.ObjectEnterEvent.type,this),this.viewer.addEventListener(u.U3.ObjectHoverEvent.type,this),this.viewer.addEventListener(u.U3.ObjectLeaveEvent.type,this),this.viewer.addEventListener(u.U3.ReadyEvent.type,this,{once:!0})}},{key:"destroy",value:function(){this.clearMarkers(!1),this.viewer.unobserveObjects(I),this.viewer.removeEventListener(u.U3.ClickEvent.type,this),this.viewer.removeEventListener(u.U3.DoubleClickEvent.type,this),this.viewer.removeEventListener(u.U3.RenderEvent.type,this),this.viewer.removeEventListener(u.U3.ConfigChangedEvent.type,this),this.viewer.removeEventListener(u.U3.ObjectEnterEvent.type,this),this.viewer.removeEventListener(u.U3.ObjectHoverEvent.type,this),this.viewer.removeEventListener(u.U3.ObjectLeaveEvent.type,this),this.viewer.removeEventListener(u.U3.ReadyEvent.type,this),this.viewer.container.removeChild(this.container),index_module_get(index_module_getPrototypeOf(MarkersPlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.ReadyEvent.type:this.config.markers&&(this.setMarkers(this.config.markers),delete this.config.markers);break;case u.U3.RenderEvent.type:this.renderMarkers();break;case u.U3.ClickEvent.type:this.__onClick(e,!1);break;case u.U3.DoubleClickEvent.type:this.__onClick(e,!0);break;case u.U3.ConfigChangedEvent.type:this.container.style.cursor=this.viewer.config.mousemove?"move":"default";break;case u.U3.ObjectEnterEvent.type:case u.U3.ObjectLeaveEvent.type:case u.U3.ObjectHoverEvent.type:if(e.userDataKey===I){var t=e.originalEvent,n=e.object.userData[I];switch(e.type){case u.U3.ObjectEnterEvent.type:this.__onMouseEnter(t,n);break;case u.U3.ObjectLeaveEvent.type:this.__onMouseLeave(t,n);break;case u.U3.ObjectHoverEvent.type:this.__onMouseMove(t,n)}}break;case"mouseenter":this.__onMouseEnter(e,this.__getTargetMarker(e.target));break;case"mouseleave":this.__onMouseLeave(e,this.__getTargetMarker(e.target));break;case"mousemove":this.__onMouseMove(e,this.__getTargetMarker(e.target));break;case"contextmenu":e.preventDefault()}}},{key:"toggleAllMarkers",value:function(){this.state.visible?this.hideAllMarkers():this.showAllMarkers()}},{key:"showAllMarkers",value:function(){this.state.visible=!0,this.renderMarkers(),this.dispatchEvent(new S)}},{key:"hideAllMarkers",value:function(){this.state.visible=!1,this.renderMarkers(),this.dispatchEvent(new O)}},{key:"toggleAllTooltips",value:function(){this.state.showAllTooltips?this.hideAllTooltips():this.showAllTooltips()}},{key:"showAllTooltips",value:function(){this.state.showAllTooltips=!0,Object.values(this.markers).forEach(function(e){e.state.staticTooltip=!0,e.showTooltip()})}},{key:"hideAllTooltips",value:function(){this.state.showAllTooltips=!1,Object.values(this.markers).forEach(function(e){e.state.staticTooltip=!1,e.hideTooltip()})}},{key:"getNbMarkers",value:function(){return Object.keys(this.markers).length}},{key:"getMarkers",value:function(){return Object.values(this.markers)}},{key:"addMarker",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.markers[e.id])throw new u.Il('marker "'.concat(e.id,'" already exists'));var n=new U(this.viewer,e);if(n.isNormal())this.container.appendChild(n.domElement);else if(n.isPoly()||n.isSvg())this.svgContainer.appendChild(n.domElement);else if(n.is3d())this.viewer.renderer.addObject(n.threeElement);else throw new u.Il("invalid state");this.markers[n.id]=n,t&&this.__afterChangerMarkers()}},{key:"getMarker",value:function(e){var t="object"===index_module_typeof(e)?e.id:e;if(!this.markers[t])throw new u.Il('cannot find marker "'.concat(t,'"'));return this.markers[t]}},{key:"getCurrentMarker",value:function(){return this.state.currentMarker}},{key:"updateMarker",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.getMarker(e.id).update(e),t&&this.__afterChangerMarkers()}},{key:"removeMarker",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=this.getMarker(e);n.isNormal()?this.container.removeChild(n.domElement):n.isPoly()||n.isSvg()?this.svgContainer.removeChild(n.domElement):n.is3d()&&this.viewer.renderer.removeObject(n.threeElement),this.state.hoveringMarker===n&&(this.state.hoveringMarker=null),this.state.currentMarker===n&&(this.state.currentMarker=null),n.destroy(),delete this.markers[n.id],t&&this.__afterChangerMarkers()}},{key:"removeMarkers",value:function(e){var t=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e.forEach(function(e){return t.removeMarker(e,!1)}),n&&this.__afterChangerMarkers()}},{key:"setMarkers",value:function(e){var t=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.clearMarkers(!1),null==e||e.forEach(function(e){t.addMarker(e,!1)}),n&&this.__afterChangerMarkers()}},{key:"clearMarkers",value:function(){var e=this,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];Object.keys(this.markers).forEach(function(t){e.removeMarker(t,!1)}),t&&this.__afterChangerMarkers()}},{key:"gotoMarker",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.gotoMarkerSpeed,i=this.getMarker(e);return n?this.viewer.animate(_objectSpread(_objectSpread({},i.state.position),{},{zoom:i.config.zoomLvl,speed:n})).then(function(){t.dispatchEvent(new b(i))}):(this.viewer.rotate(i.state.position),u.P6.isNil(i.config.zoomLvl)||this.viewer.zoom(i.config.zoomLvl),this.dispatchEvent(new b(i)),Promise.resolve())}},{key:"hideMarker",value:function(e){this.toggleMarker(e,!1)}},{key:"showMarker",value:function(e){this.toggleMarker(e,!0)}},{key:"showMarkerTooltip",value:function(e){var t=this.getMarker(e);t.state.staticTooltip=!0,t.showTooltip()}},{key:"hideMarkerTooltip",value:function(e){var t=this.getMarker(e);t.state.staticTooltip=!1,t.hideTooltip()}},{key:"toggleMarker",value:function(e,t){var n=this.getMarker(e);n.visible=null===t?!n.visible:t,this.viewer.needsUpdate()}},{key:"showMarkerPanel",value:function(e){var t,n=this.getMarker(e);null!=n&&null!==(t=n.config)&&void 0!==t&&t.content?this.viewer.panel.show({id:A,content:n.config.content}):this.hideMarkerPanel()}},{key:"hideMarkerPanel",value:function(){this.viewer.panel.hide(A)}},{key:"toggleMarkersList",value:function(){this.viewer.panel.isVisible(z)?this.hideMarkersList():this.showMarkersList()}},{key:"showMarkersList",value:function(){var e,t,n=this,i=[];Object.values(this.markers).forEach(function(e){e.visible&&!e.config.hideList&&i.push(e)});var o=new T(i);this.dispatchEvent(o),i=o.markers,this.viewer.panel.show({id:z,content:(e=i,t=this.viewer.config.lang[M.id],'\n<div class="psv-panel-menu psv-panel-menu--stripped">\n <h1 class="psv-panel-menu-title">'.concat(j," ").concat(t,'</h1>\n <ul class="psv-panel-menu-list">\n   ').concat(e.map(function(e){return"\n   <li data-".concat(L,'="').concat(e.id,'" class="psv-panel-menu-item" tabindex="0">\n     ').concat("image"===e.type?'<span class="psv-panel-menu-item-icon"><img src="'.concat(e.definition,'"/></span>'):"",'\n     <span class="psv-panel-menu-item-label">').concat(e.getListContent(),"</span>\n   </li>\n   ")}).join(""),"\n </ul>\n</div>\n")),noMargin:!0,clickHandler:function(e){var t=u.P6.getClosest(e,"li"),i=t?t.dataset[I]:void 0;if(i){var o=n.getMarker(i);n.dispatchEvent(new k(o)),n.gotoMarker(o.id),n.hideMarkersList()}}})}},{key:"hideMarkersList",value:function(){this.viewer.panel.hide(z)}},{key:"renderMarkers",value:function(){var e=this,t=this.viewer.getZoomLevel(),n=this.viewer.getPosition();Object.values(this.markers).forEach(function(i){var o,r=e.state.visible&&i.visible,a=!1,s=null;if(r&&i.is3d())s=e.__getMarkerPosition(i),r=e.__isMarkerVisible(i,s);else if(r&&i.isPoly()){var l=e.__getPolyPositions(i);if(r=l.length>(i.isPolygon()?2:1)){s=e.__getMarkerPosition(i);var c=l.map(function(e){return e.x-s.x+","+(e.y-s.y)}).join(" ");i.domElement.setAttributeNS(null,"points",c),i.domElement.setAttributeNS(null,"transform","translate(".concat(s.x," ").concat(s.y,")"))}}else if(r&&(i.state.dynamicSize&&e.__updateMarkerSize(i),s=e.__getMarkerPosition(i),r=e.__isMarkerVisible(i,s))){var d=i.getScale(t,n);if(i.isSvg()){var p=s.x+i.state.size.width*i.state.anchor.x*(1-d),_=s.y+i.state.size.height*i.state.anchor.y*(1-d);i.domElement.setAttributeNS(null,"transform","translate(".concat(p,", ").concat(_,") scale(").concat(d,", ").concat(d,")"))}else i.domElement.style.transform="translate3D(".concat(s.x,"px, ").concat(s.y,"px, 0px) scale(").concat(d,", ").concat(d,")")}a=i.state.visible!==r,i.state.visible=r,i.state.position2D=r?s:null,i.is3d()||u.P6.toggleClass(i.domElement,"psv-marker--visible",r),r?i.state.staticTooltip?i.showTooltip():(null===(o=i.config.tooltip)||void 0===o?void 0:o.trigger)!=="click"&&(i!==e.state.hoveringMarker||i.isPoly())?i!==e.state.hoveringMarker&&i.hideTooltip():i.refreshTooltip():i.hideTooltip(),a&&e.dispatchEvent(new y(i,r))})}},{key:"__isMarkerVisible",value:function(e,t){return e.state.positions3D[0].dot(this.viewer.state.direction)>0&&t.x+e.state.size.width>=0&&t.x-e.state.size.width<=this.viewer.state.size.width&&t.y+e.state.size.height>=0&&t.y-e.state.size.height<=this.viewer.state.size.height}},{key:"__updateMarkerSize",value:function(e){var t,n=e.domElement;n.classList.add("psv-marker--transparent"),e.isSvg()?(t=n.getAttributeNS(null,"transform"),n.removeAttributeNS(null,"transform")):(t=n.style.transform,n.style.transform="");var i=n.getBoundingClientRect();e.state.size={width:i.width,height:i.height},n.classList.remove("psv-marker--transparent"),t&&(e.isSvg()?n.setAttributeNS(null,"transform",t):n.style.transform=t),e.state.dynamicSize=!1}},{key:"__getMarkerPosition",value:function(e){if(e.isPoly())return this.viewer.dataHelper.sphericalCoordsToViewerCoords(e.state.position);var t=this.viewer.dataHelper.vector3ToViewerCoords(e.state.positions3D[0]);return t.x-=e.state.size.width*e.state.anchor.x,t.y-=e.state.size.height*e.state.anchor.y,t}},{key:"__getPolyPositions",value:function(e){var t=this,n=e.state.positions3D.length,i=e.state.positions3D.map(function(e){return{vector:e,visible:e.dot(t.viewer.state.direction)>0}}),o=[];return i.forEach(function(e,t){e.visible||[0===t?i[n-1]:i[t-1],t===n-1?i[0]:i[t+1]].forEach(function(n){n.visible&&o.push({visible:n.vector,invisible:e.vector,index:t})})}),o.reverse().forEach(function(e){i.splice(e.index,0,{vector:t.__getPolyIntermediaryPoint(e.visible,e.invisible),visible:!0})}),i.filter(function(e){return e.visible}).map(function(e){return t.viewer.dataHelper.vector3ToViewerCoords(e.vector)})}},{key:"__getPolyIntermediaryPoint",value:function(e,t){var n=this.viewer.state.direction.clone().normalize(),i=new c.Pa4().crossVectors(e,t).normalize(),o=new c.Pa4().crossVectors(i,e).normalize(),r=e.clone().multiplyScalar(-n.dot(o)),a=o.clone().multiplyScalar(n.dot(e)),s=new c.Pa4().addVectors(r,a).normalize(),l=new c.Pa4().crossVectors(s,n);return s.applyAxisAngle(l,.01).multiplyScalar(u.tl.SPHERE_RADIUS)}},{key:"__getTargetMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?u.P6.getClosest(e,".psv-marker"):e;return n?n[I]:void 0}},{key:"__targetOnTooltip",value:function(e,t){return!!e&&!!t&&u.P6.hasParent(e,t.container)}},{key:"__onMouseEnter",value:function(e,t){if(t&&!t.isPoly()){var n;this.state.hoveringMarker=t,this.dispatchEvent(new w(t)),t.state.staticTooltip||(null===(n=t.config.tooltip)||void 0===n?void 0:n.trigger)!=="hover"||t.showTooltip(e.clientX,e.clientY)}}},{key:"__onMouseLeave",value:function(e,t){if(t&&!(t.isPoly()&&this.__targetOnTooltip(e.relatedTarget,t.tooltip))){var n;this.dispatchEvent(new x(t)),this.state.hoveringMarker=null,t.state.staticTooltip||(null===(n=t.config.tooltip)||void 0===n?void 0:n.trigger)!=="hover"||t.hideTooltip()}}},{key:"__onMouseMove",value:function(e,t){var n,i;null!=t&&t.isPoly()?i=t:this.state.hoveringMarker&&this.__targetOnTooltip(e.target,this.state.hoveringMarker.tooltip)&&(i=this.state.hoveringMarker),i?(this.state.hoveringMarker||(this.dispatchEvent(new w(i)),this.state.hoveringMarker=i),i.state.staticTooltip||i.showTooltip(e.clientX,e.clientY)):null!==(n=this.state.hoveringMarker)&&void 0!==n&&n.isPoly()&&(this.dispatchEvent(new x(this.state.hoveringMarker)),this.state.hoveringMarker.state.staticTooltip||this.state.hoveringMarker.hideTooltip(),this.state.hoveringMarker=null)}},{key:"__onClick",value:function(e,t){var n,i,o,r=null===(n=e.data.objects.find(function(e){return e.userData[I]}))||void 0===n?void 0:n.userData[I];r||(r=this.__getTargetMarker(e.data.target,!0)),this.state.currentMarker&&this.state.currentMarker!==r&&(this.dispatchEvent(new E(this.state.currentMarker)),this.viewer.panel.hide(A),this.state.showAllTooltips||(null===(i=this.state.currentMarker.config.tooltip)||void 0===i?void 0:i.trigger)!=="click"||this.hideMarkerTooltip(this.state.currentMarker.id),this.state.currentMarker=null),r&&(this.state.currentMarker=r,this.dispatchEvent(new P(r,t,e.data.rightclick)),this.config.clickEventOnMarker?e.data.marker=r:e.stopImmediatePropagation(),this.markers[r.id]&&((null===(o=r.config.tooltip)||void 0===o?void 0:o.trigger)==="click"?r.tooltip?this.hideMarkerTooltip(r):this.showMarkerTooltip(r):this.showMarkerPanel(r.id)))}},{key:"__afterChangerMarkers",value:function(){this.__refreshUi(),this.__checkObjectsObserver(),this.viewer.needsUpdate(),this.dispatchEvent(new C(this.getMarkers()))}},{key:"__refreshUi",value:function(){var e,t,n=Object.values(this.markers).filter(function(e){return!e.config.hideList}).length;0===n?(this.viewer.panel.isVisible(z)||this.viewer.panel.isVisible(A))&&this.viewer.panel.hide():this.viewer.panel.isVisible(z)?this.showMarkersList():this.viewer.panel.isVisible(A)&&(this.state.currentMarker?this.showMarkerPanel(this.state.currentMarker.id):this.viewer.panel.hide()),null===(e=this.viewer.navbar.getButton(M.id,!1))||void 0===e||e.toggle(n>0),null===(t=this.viewer.navbar.getButton(B.id,!1))||void 0===t||t.toggle(n>0)}},{key:"__checkObjectsObserver",value:function(){Object.values(this.markers).some(function(e){return e.is3d()})?this.viewer.observeObjects(I):this.viewer.unobserveObjects(I)}}]),MarkersPlugin}(u.Yc);function compass_plugin_index_module_typeof(e){return(compass_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function index_module_slicedToArray(e,t){return index_module_arrayWithHoles(e)||index_module_iterableToArrayLimit(e,t)||compass_plugin_index_module_unsupportedIterableToArray(e,t)||index_module_nonIterableRest()}function index_module_nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function compass_plugin_index_module_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return compass_plugin_index_module_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return compass_plugin_index_module_arrayLikeToArray(e,t)}}function compass_plugin_index_module_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function index_module_iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function index_module_arrayWithHoles(e){if(Array.isArray(e))return e}function compass_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function compass_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,compass_plugin_index_module_toPropertyKey(i.key),i)}}function compass_plugin_index_module_createClass(e,t,n){return t&&compass_plugin_index_module_defineProperties(e.prototype,t),n&&compass_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function compass_plugin_index_module_toPropertyKey(e){var t=compass_plugin_index_module_toPrimitive(e,"string");return"symbol"===compass_plugin_index_module_typeof(t)?t:String(t)}function compass_plugin_index_module_toPrimitive(e,t){if("object"!==compass_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==compass_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function compass_plugin_index_module_get(){return(compass_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=compass_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function compass_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=compass_plugin_index_module_getPrototypeOf(e)););return e}function compass_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&compass_plugin_index_module_setPrototypeOf(e,t)}function compass_plugin_index_module_setPrototypeOf(e,t){return(compass_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function compass_plugin_index_module_createSuper(e){var t=compass_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=compass_plugin_index_module_getPrototypeOf(e);if(t){var o=compass_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return compass_plugin_index_module_possibleConstructorReturn(this,n)}}function compass_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===compass_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return compass_plugin_index_module_assertThisInitialized(e)}function compass_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function compass_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function compass_plugin_index_module_getPrototypeOf(e){return(compass_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}D.id="markers",D.configParser=H,D.readonlyOptions=["markers"],u.Of.lang[M.id]="Markers",u.Of.lang[B.id]="Markers list",(0,u.KI)(M,"caption:left"),(0,u.KI)(B,"caption:left");var V=1/40,q=function(e){compass_plugin_index_module_inherits(CompassComponent,e);var t=compass_plugin_index_module_createSuper(CompassComponent);function CompassComponent(e,n){var i;return compass_plugin_index_module_classCallCheck(this,CompassComponent),(i=t.call(this,e,{})).plugin=n,i.state={visible:!0,mouse:null,mousedown:!1,markers:[]},i.background=document.createElement("div"),i.canvas=document.createElement("canvas"),i.container.appendChild(i.background),i.container.appendChild(i.canvas),i.config.navigation&&(i.container.addEventListener("mouseenter",compass_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("mouseleave",compass_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("mousemove",compass_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("mousedown",compass_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("mouseup",compass_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("touchstart",compass_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("touchmove",compass_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("touchend",compass_plugin_index_module_assertThisInitialized(i))),i.applyConfig(),i.hide(),i}return compass_plugin_index_module_createClass(CompassComponent,[{key:"config",get:function(){return this.plugin.config}},{key:"handleEvent",value:function(e){var t,n;switch(e.type){case"mouseenter":case"mousemove":case"touchmove":this.state.mouse=(null===(t=e.changedTouches)||void 0===t?void 0:t[0])||e,this.state.mousedown?this.click():this.update(),e.stopPropagation(),e.preventDefault();break;case"mousedown":case"touchstart":this.state.mousedown=!0,e.stopPropagation(),e.preventDefault();break;case"mouseup":case"touchend":this.state.mouse=(null===(n=e.changedTouches)||void 0===n?void 0:n[0])||e,this.state.mousedown=!1,this.click(),e.changedTouches&&(this.state.mouse=null,this.update()),e.stopPropagation(),e.preventDefault();break;case"mouseleave":this.state.mouse=null,this.state.mousedown=!1,this.update()}}},{key:"applyConfig",value:function(){this.container.className="psv-compass psv-compass--".concat(this.config.position.join("-")),this.background.innerHTML=this.config.backgroundSvg,this.container.style.width=this.config.size,this.container.style.height=this.config.size,this.container.style.marginTop="center"===this.config.position[0]?"calc(-".concat(this.config.size," / 2)"):"",this.container.style.marginLeft="center"===this.config.position[1]?"calc(-".concat(this.config.size," / 2)"):""}},{key:"show",value:function(){compass_plugin_index_module_get(compass_plugin_index_module_getPrototypeOf(CompassComponent.prototype),"show",this).call(this),this.update()}},{key:"setMarkers",value:function(e){this.state.markers=e,this.update()}},{key:"update",value:function(){var e,t=this;if(this.isVisible()){this.canvas.width=this.container.clientWidth*u.we.pixelRatio,this.canvas.height=this.container.clientWidth*u.we.pixelRatio;var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height);var i=this.viewer.getPosition().yaw,o=c.M8C.degToRad(this.viewer.state.hFov);this.__drawCone(n,this.config.coneColor,i,o);var r=this.__getMouseAngle();null!==r&&this.__drawCone(n,this.config.navigationColor,r,o),this.state.markers.forEach(function(e){t.__drawMarker(n,e)}),null===(e=this.config.hotspots)||void 0===e||e.forEach(function(e){"yaw"in e&&!("pitch"in e)&&(e.pitch=0);var i=t.viewer.dataHelper.cleanPosition(e);t.__drawPoint(n,e.color||t.config.hotspotColor,i.yaw,i.pitch)})}}},{key:"click",value:function(){var e=this.__getMouseAngle();null!==e&&this.viewer.rotate({yaw:e,pitch:0})}},{key:"__drawCone",value:function(e,t,n,i){var o=n-Math.PI/2-i/2,r=o+i,a=this.canvas.width/2;e.beginPath(),e.moveTo(a,a),e.lineTo(a+Math.cos(o)*a,a+Math.sin(o)*a),e.arc(a,a,a,o,r,!1),e.lineTo(a,a),e.fillStyle=t,e.fill()}},{key:"__drawMarker",value:function(e,t){var n=this,i=this.config.hotspotColor;if("string"==typeof t.data.compass&&(i=t.data.compass),t.isPoly())e.beginPath(),t.definition.forEach(function(t,i){var o=index_module_slicedToArray(t,2),r=o[0],a=o[1],s=r-Math.PI/2,l=(a+Math.PI/2)/Math.PI,u=n.canvas.width/2;e[0===i?"moveTo":"lineTo"](u+Math.cos(s)*u*l,u+Math.sin(s)*u*l)}),t.isPolygon()?(e.fillStyle=i,e.fill()):(e.strokeStyle=i,e.lineWidth=Math.max(1,this.canvas.width*V/2),e.stroke());else{var o=t.state.position;this.__drawPoint(e,i,o.yaw,o.pitch)}}},{key:"__drawPoint",value:function(e,t,n,i){var o=n-Math.PI/2,r=(i+Math.PI/2)/Math.PI,a=this.canvas.width/2,s=Math.max(2,this.canvas.width*V);e.beginPath(),e.ellipse(a+Math.cos(o)*a*r,a+Math.sin(o)*a*r,s,s,0,0,2*Math.PI),e.fillStyle=t,e.fill()}},{key:"__getMouseAngle",value:function(){if(!this.state.mouse)return null;var e=this.container.getBoundingClientRect(),t=this.state.mouse.clientX-e.left-e.width/2,n=this.state.mouse.clientY-e.top-e.width/2;return Math.sqrt(t*t+n*n)>e.width/2?null:Math.atan2(n,t)+Math.PI/2}}]),CompassComponent}(u.k8),G=u.P6.getConfigParser({size:"120px",position:["top","left"],backgroundSvg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="rgba(61, 61, 61, .5)"/><path fill="rgba(255, 255, 255, .7)" d="M50 97.1A47 47 0 0 1 32.5 6.5l.8 1.8a45 45 0 1 0 33.4 0l.8-1.8A47 47 0 0 1 50 97Zm0-42a5 5 0 1 1 5-5 5 5 0 0 1-5 5Zm4-41.7h-1.6a.4.4 0 0 1-.4-.2l-4.6-7.7V13a.3.3 0 0 1-.3.3h-1.6a.3.3 0 0 1-.3-.3V1.8a.3.3 0 0 1 .3-.3h1.6a.3.3 0 0 1 .4.2L52 9.4V1.8a.3.3 0 0 1 .3-.3H54c.2 0 .3 0 .3.3V13c0 .2-.1.3-.3.3Z"/></svg>\n',coneColor:"rgba(255, 255, 255, 0.5)",navigation:!0,navigationColor:"rgba(255, 0, 0, 0.2)",hotspots:[],hotspotColor:"rgba(0, 0, 0, 0.5)"},{position:function(e,t){var n=t.defValue;return u.P6.cleanCssPosition(e,{allowCenter:!0,cssOrder:!0})||n}}),W=function(e){compass_plugin_index_module_inherits(CompassPlugin,e);var t=compass_plugin_index_module_createSuper(CompassPlugin);function CompassPlugin(e,n){var i;return compass_plugin_index_module_classCallCheck(this,CompassPlugin),(i=t.call(this,e,n)).component=new q(i.viewer,compass_plugin_index_module_assertThisInitialized(i)),i}return compass_plugin_index_module_createClass(CompassPlugin,[{key:"init",value:function(){compass_plugin_index_module_get(compass_plugin_index_module_getPrototypeOf(CompassPlugin.prototype),"init",this).call(this),this.markers=this.viewer.getPlugin("markers"),this.viewer.addEventListener(u.U3.RenderEvent.type,this),this.viewer.addEventListener(u.U3.ReadyEvent.type,this,{once:!0}),this.markers&&this.markers.addEventListener("set-markers",this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.RenderEvent.type,this),this.viewer.removeEventListener(u.U3.ReadyEvent.type,this),this.markers&&this.markers.removeEventListener("set-markers",this),this.component.destroy(),delete this.markers,compass_plugin_index_module_get(compass_plugin_index_module_getPrototypeOf(CompassPlugin.prototype),"destroy",this).call(this)}},{key:"setOptions",value:function(e){compass_plugin_index_module_get(compass_plugin_index_module_getPrototypeOf(CompassPlugin.prototype),"setOptions",this).call(this,e),this.component.applyConfig(),this.component.update()}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.ReadyEvent.type:this.component.show();break;case u.U3.RenderEvent.type:this.component.update();break;case"set-markers":this.component.setMarkers(e.markers.filter(function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.compass}))}}},{key:"hide",value:function(){this.component.hide()}},{key:"show",value:function(){this.component.show()}},{key:"setHotspots",value:function(e){this.config.hotspots=e,this.component.update()}},{key:"clearHotspots",value:function(){this.setHotspots(null)}}]),CompassPlugin}(u.Yc);function gallery_plugin_index_module_typeof(e){return(gallery_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function index_module_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function index_module_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?index_module_ownKeys(Object(n),!0).forEach(function(t){index_module_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):index_module_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function index_module_defineProperty(e,t,n){return(t=gallery_plugin_index_module_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gallery_plugin_index_module_get(){return(gallery_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=gallery_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gallery_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gallery_plugin_index_module_getPrototypeOf(e)););return e}function gallery_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,gallery_plugin_index_module_toPropertyKey(i.key),i)}}function gallery_plugin_index_module_createClass(e,t,n){return t&&gallery_plugin_index_module_defineProperties(e.prototype,t),n&&gallery_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gallery_plugin_index_module_toPropertyKey(e){var t=gallery_plugin_index_module_toPrimitive(e,"string");return"symbol"===gallery_plugin_index_module_typeof(t)?t:String(t)}function gallery_plugin_index_module_toPrimitive(e,t){if("object"!==gallery_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==gallery_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function gallery_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function gallery_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gallery_plugin_index_module_setPrototypeOf(e,t)}function gallery_plugin_index_module_setPrototypeOf(e,t){return(gallery_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gallery_plugin_index_module_createSuper(e){var t=gallery_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=gallery_plugin_index_module_getPrototypeOf(e);if(t){var o=gallery_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return gallery_plugin_index_module_possibleConstructorReturn(this,n)}}function gallery_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===gallery_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return gallery_plugin_index_module_assertThisInitialized(e)}function gallery_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gallery_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function gallery_plugin_index_module_getPrototypeOf(e){return(gallery_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.id="compass",W.configParser=G,W.readonlyOptions=["navigation"];/*!
 * PhotoSphereViewer.GalleryPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var Y=Object.defineProperty;!function(e,t){for(var n in t)Y(e,n,{get:t[n],enumerable:!0})}({},{HideGalleryEvent:function(){return X},ShowGalleryEvent:function(){return K}});var K=function(e){gallery_plugin_index_module_inherits(_ShowGalleryEvent,e);var t=gallery_plugin_index_module_createSuper(_ShowGalleryEvent);function _ShowGalleryEvent(){return gallery_plugin_index_module_classCallCheck(this,_ShowGalleryEvent),t.call(this,_ShowGalleryEvent.type)}return gallery_plugin_index_module_createClass(_ShowGalleryEvent)}(u.$N);K.type="show-gallery";var X=function(e){gallery_plugin_index_module_inherits(_HideGalleryEvent,e);var t=gallery_plugin_index_module_createSuper(_HideGalleryEvent);function _HideGalleryEvent(){return gallery_plugin_index_module_classCallCheck(this,_HideGalleryEvent),t.call(this,K.type)}return gallery_plugin_index_module_createClass(_HideGalleryEvent)}(u.$N);X.type="hide-gallery";var F=function(e){gallery_plugin_index_module_inherits(GalleryButton,e);var t=gallery_plugin_index_module_createSuper(GalleryButton);function GalleryButton(e){var n;return gallery_plugin_index_module_classCallCheck(this,GalleryButton),(n=t.call(this,e,{className:"psv-gallery-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:'<svg viewBox="185 115 330 330" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M186.7 326.7V163.3c0-15 8.3-23.3 23.3-23.3h210c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H210c-15 0-23.3-8.3-23.3-23.3zm70 70v-23.4H420c30.2 0 46.7-16.4 46.7-46.6V210H490c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H280c-15 0-23.3-8.3-23.3-23.3zm-23.8-105H397l-40-50.4-26.7 29.7-44.3-54.5zm106.7-76c9.6 0 17.8-7.8 17.8-17.2a18 18 0 0 0-17.8-17.8c-9.4 0-17.2 8.2-17.2 17.8 0 9.4 7.8 17.2 17.2 17.2z"/><!--Created by Wolf B\xf6se from the Noun Project--></svg>'})).plugin=n.viewer.getPlugin("gallery"),n.plugin&&(n.plugin.addEventListener(K.type,gallery_plugin_index_module_assertThisInitialized(n)),n.plugin.addEventListener(X.type,gallery_plugin_index_module_assertThisInitialized(n))),n}return gallery_plugin_index_module_createClass(GalleryButton,[{key:"destroy",value:function(){this.plugin&&(this.plugin.removeEventListener(K.type,this),this.plugin.removeEventListener(X.type,this)),gallery_plugin_index_module_get(gallery_plugin_index_module_getPrototypeOf(GalleryButton.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof K?this.toggleActive(!0):e instanceof X&&this.toggleActive(!1)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"onClick",value:function(){this.plugin.toggle()}}]),GalleryButton}(u.T9);F.id="gallery";var Z="psvGalleryItem",$=u.P6.dasherize(Z),J="psv-gallery-item--active",Q=function(e){gallery_plugin_index_module_inherits(GalleryComponent,e);var t=gallery_plugin_index_module_createSuper(GalleryComponent);function GalleryComponent(e,n){gallery_plugin_index_module_classCallCheck(this,GalleryComponent),(i=t.call(this,n,{className:"psv-gallery psv--capture-event"})).plugin=e,i.state={visible:!0,mousedown:!1,initMouseX:null,mouseX:null},i.container.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">\n  <defs>\n    <symbol id="psvGalleryBlankIcon" viewBox="0 0 200 200">\n      <rect x="0" y="0" width="200" height="200" fill="#666"/>\n      <g transform="scale(0.25) translate(25 20) " fill="#eee">\n        <path d="M376 220.61c-85.84 0-155.39 69.56-155.39 155.39 0 85.84 69.56 155.39 155.39 155.39 85.84 0 155.39-69.56 155.39-155.39 0-85.84-69.56-155.39-155.39-155.39zm0 300.92c-80.41 0-145.53-65.12-145.53-145.53S295.59 230.47 376 230.47 521.53 295.59 521.53 376 456.41 521.53 376 521.53z"/>\n        <path d="M467.27 300.03H284.74a18.21 18.21 0 0 0-18.25 18.25v115.43a18.21 18.21 0 0 0 18.25 18.26h182.53a18.21 18.21 0 0 0 18.25-18.26V318.28a18.2 18.2 0 0 0-18.25-18.25zm-190.91 18.25a8.64 8.64 0 0 1 8.39-8.38h182.53a8.64 8.64 0 0 1 8.38 8.38V413l-44.89-35.52c-.49-.5-.99-.5-1.48-.99h-2.46c-.5 0-1 0-1.48.5l-37.5 21.2-43.9-58.7-.5-.5s0-.48-.49-.48c0 0-.49 0-.49-.5-.49 0-.49-.49-.99-.49-.49 0-.49 0-.98-.49H337.53c-.5 0-.5.5-.99.5h-.49l-.5.48s-.48 0-.48.5l-58.7 65.12zM467.27 442.1H284.74a8.64 8.64 0 0 1-8.39-8.38v-15.3l63.15-68.07 42.92 57.22 1.48 1.48h.49c.5.5 1.48.5 1.97.5H388.83l38.47-21.72 46.37 36.5c.5.5 1.49 1 1.98 1v8.88c0 3.95-3.45 7.9-8.38 7.9z"/>\n        <path d="M429.77 333.58a13.81 13.81 0 1 1-27.63 0 13.81 13.81 0 0 1 27.63 0"/>\n      </g>\n    </symbol>\n  </defs>\n</svg>',i.container.querySelector("svg").style.display="none";var i,o=document.createElement("div");return o.className="psv-panel-close-button",o.innerHTML=u.tl.ICONS.close,i.container.appendChild(o),i.items=document.createElement("div"),i.items.className="psv-gallery-container",i.container.appendChild(i.items),i.observer=new IntersectionObserver(function(e){e.forEach(function(e){if(e.intersectionRatio>0){var t=e.target;t.style.backgroundImage="url(".concat(t.dataset.src,")"),delete t.dataset.src,i.observer.unobserve(e.target)}})},{root:i.viewer.container}),i.container.addEventListener("wheel",gallery_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("mousedown",gallery_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("mousemove",gallery_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("click",gallery_plugin_index_module_assertThisInitialized(i)),window.addEventListener("mouseup",gallery_plugin_index_module_assertThisInitialized(i)),o.addEventListener("click",function(){return i.plugin.hide()}),i.hide(),i}return gallery_plugin_index_module_createClass(GalleryComponent,[{key:"destroy",value:function(){window.removeEventListener("mouseup",this),this.observer.disconnect(),gallery_plugin_index_module_get(gallery_plugin_index_module_getPrototypeOf(GalleryComponent.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case"wheel":this.container.scrollLeft+=50*e.deltaY,e.preventDefault();break;case"mousedown":this.state.mousedown=!0,this.state.initMouseX=e.clientX,this.state.mouseX=e.clientX;break;case"mousemove":if(this.state.mousedown){var t=this.state.mouseX-e.clientX;this.container.scrollLeft+=t,this.state.mouseX=e.clientX}break;case"mouseup":this.state.mousedown=!1,this.state.mouseX=null,e.preventDefault();break;case"click":if(10>Math.abs(this.state.initMouseX-e.clientX)){var n=u.P6.getClosest(e.target,"[data-".concat($,"]"));n&&this.plugin.__click(n.dataset[Z])}}}},{key:"show",value:function(){this.container.classList.add("psv-gallery--open"),this.state.visible=!0}},{key:"hide",value:function(){this.container.classList.remove("psv-gallery--open"),this.state.visible=!1}},{key:"setItems",value:function(e){var t,n=this;this.items.innerHTML=(t=this.plugin.config.thumbnailSize,"\n".concat(e.map(function(e){return'\n<div class="psv-gallery-item" data-'.concat($,'="').concat(e.id,'" style="width:').concat(t.width,'px">\n  <div class="psv-gallery-item-wrapper" style="padding-bottom:calc(100% * ').concat(t.height," / ").concat(t.width,')">\n    ').concat(e.name?'<div class="psv-gallery-item-title"><span>'.concat(e.name,"</span></div>"):"",'\n    <svg class="psv-gallery-item-thumb" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid slice"><use href="#psvGalleryBlankIcon"></use></svg>\n    ').concat(e.thumbnail?'<div class="psv-gallery-item-thumb" data-src="'.concat(e.thumbnail,'"></div>'):"","\n  </div>\n</div>\n")}).join(""),"\n")),this.observer&&(this.observer.disconnect(),this.items.querySelectorAll("[data-src]").forEach(function(e){n.observer.observe(e)}))}},{key:"setActive",value:function(e){var t=this.items.querySelector("."+J);if(null==t||t.classList.remove(J),e){var n=this.items.querySelector("[data-".concat($,'="').concat(e,'"]'));null==n||n.classList.add(J)}}}]),GalleryComponent}(u.k8),ee=u.P6.getConfigParser({items:[],visibleOnLoad:!1,hideOnClick:!0,thumbnailSize:{width:200,height:100}}),et=function(e){gallery_plugin_index_module_inherits(GalleryPlugin,e);var t=gallery_plugin_index_module_createSuper(GalleryPlugin);function GalleryPlugin(e,n){var i;return gallery_plugin_index_module_classCallCheck(this,GalleryPlugin),(i=t.call(this,e,n)).items=[],i.gallery=new Q(gallery_plugin_index_module_assertThisInitialized(i),i.viewer),i}return gallery_plugin_index_module_createClass(GalleryPlugin,[{key:"init",value:function(){var e=this;gallery_plugin_index_module_get(gallery_plugin_index_module_getPrototypeOf(GalleryPlugin.prototype),"init",this).call(this),this.viewer.addEventListener(u.U3.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(u.U3.ShowPanelEvent.type,this),this.config.visibleOnLoad&&this.viewer.addEventListener(u.U3.ReadyEvent.type,function(){e.show()},{once:!0}),this.setItems(this.config.items),delete this.config.items,setTimeout(function(){return e.__updateButton()})}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(u.U3.ShowPanelEvent.type,this),this.gallery.destroy(),gallery_plugin_index_module_get(gallery_plugin_index_module_getPrototypeOf(GalleryPlugin.prototype),"destroy",this).call(this)}},{key:"setOptions",value:function(e){gallery_plugin_index_module_get(gallery_plugin_index_module_getPrototypeOf(GalleryPlugin.prototype),"setOptions",this).call(this,e),e.thumbnailSize&&this.gallery.setItems(this.items)}},{key:"handleEvent",value:function(e){if(e instanceof u.U3.PanoramaLoadedEvent){var t=this.items.find(function(t){return u.P6.deepEqual(t.panorama,e.data.panorama)});this.currentId=null==t?void 0:t.id,this.gallery.setActive(null==t?void 0:t.id)}else e instanceof u.U3.ShowPanelEvent&&this.gallery.isVisible()&&this.hide()}},{key:"show",value:function(){return this.dispatchEvent(new K),this.gallery.show()}},{key:"hide",value:function(){return this.dispatchEvent(new X),this.gallery.hide()}},{key:"toggle",value:function(){this.gallery.isVisible()?this.hide():this.show()}},{key:"setItems",value:function(e,t){e?e.forEach(function(e,t){if(!e.id)throw new u.Il("Item ".concat(t,' has no "id".'));if(!e.panorama)throw new u.Il("Item ".concat(e.id,' has no "panorama".'))}):e=[],this.handler=t,this.items=e.map(function(e){return index_module_objectSpread(index_module_objectSpread({},e),{},{id:"".concat(e.id)})}),this.gallery.setItems(this.items),this.__updateButton()}},{key:"__click",value:function(e){if(e!==this.currentId){if(this.handler)this.handler(e);else{var t=this.items.find(function(t){return t.id===e});this.viewer.setPanorama(t.panorama,index_module_objectSpread({caption:t.name},t.options))}this.currentId=e,this.gallery.setActive(e),this.config.hideOnClick&&this.hide()}}},{key:"__updateButton",value:function(){var e;null===(e=this.viewer.navbar.getButton(F.id,!1))||void 0===e||e.toggle(this.items.length>0)}}]),GalleryPlugin}(u.Yc);function gyroscope_plugin_index_module_typeof(e){return(gyroscope_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gyroscope_plugin_index_module_get(){return(gyroscope_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=gyroscope_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function gyroscope_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gyroscope_plugin_index_module_getPrototypeOf(e)););return e}function gyroscope_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,gyroscope_plugin_index_module_toPropertyKey(i.key),i)}}function gyroscope_plugin_index_module_createClass(e,t,n){return t&&gyroscope_plugin_index_module_defineProperties(e.prototype,t),n&&gyroscope_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gyroscope_plugin_index_module_toPropertyKey(e){var t=gyroscope_plugin_index_module_toPrimitive(e,"string");return"symbol"===gyroscope_plugin_index_module_typeof(t)?t:String(t)}function gyroscope_plugin_index_module_toPrimitive(e,t){if("object"!==gyroscope_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==gyroscope_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function gyroscope_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function gyroscope_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gyroscope_plugin_index_module_setPrototypeOf(e,t)}function gyroscope_plugin_index_module_setPrototypeOf(e,t){return(gyroscope_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gyroscope_plugin_index_module_createSuper(e){var t=gyroscope_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=gyroscope_plugin_index_module_getPrototypeOf(e);if(t){var o=gyroscope_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return gyroscope_plugin_index_module_possibleConstructorReturn(this,n)}}function gyroscope_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===gyroscope_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return gyroscope_plugin_index_module_assertThisInitialized(e)}function gyroscope_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gyroscope_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function gyroscope_plugin_index_module_getPrototypeOf(e){return(gyroscope_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}et.id="gallery",et.configParser=ee,et.readonlyOptions=["visibleOnLoad","items"],u.Of.lang[F.id]="Gallery",(0,u.KI)(F,"caption:left");/*!
 * PhotoSphereViewer.GyroscopePlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var en=Object.defineProperty;!function(e,t){for(var n in t)en(e,n,{get:t[n],enumerable:!0})}({},{GyroscopeUpdatedEvent:function(){return ei}});var ei=function(e){gyroscope_plugin_index_module_inherits(_GyroscopeUpdatedEvent,e);var t=gyroscope_plugin_index_module_createSuper(_GyroscopeUpdatedEvent);function _GyroscopeUpdatedEvent(e){var n;return gyroscope_plugin_index_module_classCallCheck(this,_GyroscopeUpdatedEvent),(n=t.call(this,_GyroscopeUpdatedEvent.type)).gyroscopeEnabled=e,n}return gyroscope_plugin_index_module_createClass(_GyroscopeUpdatedEvent)}(u.$N);ei.type="gyroscope-updated";var eo=function(e){gyroscope_plugin_index_module_inherits(GyroscopeButton,e);var t=gyroscope_plugin_index_module_createSuper(GyroscopeButton);function GyroscopeButton(e){var n;return gyroscope_plugin_index_module_classCallCheck(this,GyroscopeButton),(n=t.call(this,e,{className:"psv-gyroscope-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M50 0a50 50 0 1 0 0 100A50 50 0 0 0 50 0zm0 88.81a38.86 38.86 0 0 1-38.81-38.8 38.86 38.86 0 0 1 38.8-38.82A38.86 38.86 0 0 1 88.82 50 38.87 38.87 0 0 1 50 88.81z"/><path fill="currentColor" d="M72.07 25.9L40.25 41.06 27.92 74.12l31.82-15.18v-.01l12.32-33.03zM57.84 54.4L44.9 42.58l21.1-10.06-8.17 21.9z"/><!--Created by iconoci from the Noun Project--></svg>',hoverScale:!0,collapsable:!0,tabbable:!0})).plugin=n.viewer.getPlugin("gyroscope"),n.plugin&&n.plugin.addEventListener(ei.type,gyroscope_plugin_index_module_assertThisInitialized(n)),n}return gyroscope_plugin_index_module_createClass(GyroscopeButton,[{key:"destroy",value:function(){this.plugin&&this.plugin.removeEventListener(ei.type,this),gyroscope_plugin_index_module_get(gyroscope_plugin_index_module_getPrototypeOf(GyroscopeButton.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin&&{initial:!1,promise:this.plugin.isSupported()}}},{key:"handleEvent",value:function(e){e instanceof ei&&this.toggleActive(e.gyroscopeEnabled)}},{key:"onClick",value:function(){this.plugin.toggle()}}]),GyroscopeButton}(u.T9);eo.id="gyroscope";var er=new c.Pa4(0,0,1),ea=new c.USm,es=new c._fP,el=new c._fP(-Math.sqrt(.5),0,0,Math.sqrt(.5)),eu=gyroscope_plugin_index_module_createClass(function DeviceOrientationControls(e){gyroscope_plugin_index_module_classCallCheck(this,DeviceOrientationControls),!1===window.isSecureContext&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");var t=this,n=new c._fP;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var onDeviceOrientationChangeEvent=function(e){t.deviceOrientation=e},onScreenOrientationChangeEvent=function(){t.screenOrientation=window.orientation||0},setObjectQuaternion=function(e,t,n,i,o){ea.set(n,t,-i,"YXZ"),e.setFromEuler(ea),e.multiply(el),e.multiply(es.setFromAxisAngle(er,-o))};this.connect=function(){onScreenOrientationChangeEvent(),void 0!==window.DeviceOrientationEvent&&"function"==typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then(function(e){"granted"==e&&(window.addEventListener("orientationchange",onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",onDeviceOrientationChangeEvent))}).catch(function(e){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",e)}):(window.addEventListener("orientationchange",onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",onDeviceOrientationChangeEvent)),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",onDeviceOrientationChangeEvent),t.enabled=!1},this.update=function(){if(!1!==t.enabled){var e=t.deviceOrientation;if(e){var i=e.alpha?c.M8C.degToRad(e.alpha)+t.alphaOffset:0,o=e.beta?c.M8C.degToRad(e.beta):0,r=e.gamma?c.M8C.degToRad(e.gamma):0,a=t.screenOrientation?c.M8C.degToRad(t.screenOrientation):0;setObjectQuaternion(t.object.quaternion,i,o,r,a),8*(1-n.dot(t.object.quaternion))>1e-6&&n.copy(t.object.quaternion)}}},this.dispose=function(){t.disconnect()},this.connect()}),ec=u.P6.getConfigParser({touchmove:!0,absolutePosition:!1,moveMode:"smooth"},{moveMode:function(e,t){var n=t.defValue;return"smooth"!==e&&"fast"!==e?(u.P6.logWarn("GyroscopePlugin: invalid moveMode"),n):e}}),ed=new c.Pa4,ep=function(e){gyroscope_plugin_index_module_inherits(GyroscopePlugin,e);var t=gyroscope_plugin_index_module_createSuper(GyroscopePlugin);function GyroscopePlugin(e,n){var i;return gyroscope_plugin_index_module_classCallCheck(this,GyroscopePlugin),(i=t.call(this,e,n)).state={isSupported:i.__checkSupport(),alphaOffset:0,enabled:!1,config_moveInertia:!0,moveMode:i.config.moveMode},i}return gyroscope_plugin_index_module_createClass(GyroscopePlugin,[{key:"init",value:function(){gyroscope_plugin_index_module_get(gyroscope_plugin_index_module_getPrototypeOf(GyroscopePlugin.prototype),"init",this).call(this),this.viewer.addEventListener(u.U3.StopAllEvent.type,this),this.viewer.addEventListener(u.U3.BeforeRotateEvent.type,this),this.viewer.addEventListener(u.U3.BeforeRenderEvent.type,this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.StopAllEvent.type,this),this.viewer.removeEventListener(u.U3.BeforeRotateEvent.type,this),this.viewer.removeEventListener(u.U3.BeforeRenderEvent.type,this),this.stop(),delete this.controls,gyroscope_plugin_index_module_get(gyroscope_plugin_index_module_getPrototypeOf(GyroscopePlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof u.U3.StopAllEvent?this.stop():e instanceof u.U3.BeforeRenderEvent?this.__onBeforeRender():e instanceof u.U3.BeforeRotateEvent&&this.__onBeforeRotate(e)}},{key:"isSupported",value:function(){return this.state.isSupported}},{key:"isEnabled",value:function(){return this.state.enabled}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.moveMode;return this.state.isSupported.then(function(t){return t?e.__requestPermission():(u.P6.logWarn("gyroscope not available"),Promise.reject())}).then(function(e){return e?Promise.resolve():(u.P6.logWarn("gyroscope not allowed"),Promise.reject())}).then(function(){e.viewer.stopAll(),e.state.moveMode=t,e.state.config_moveInertia=e.viewer.config.moveInertia,e.viewer.config.moveInertia=!1,e.controls?e.controls.connect():e.controls=new eu(new c.Tme),e.controls.deviceOrientation=null,e.controls.screenOrientation=0,e.controls.alphaOffset=0,e.state.alphaOffset=e.config.absolutePosition?0:null,e.state.enabled=!0,e.dispatchEvent(new ei(!0))})}},{key:"stop",value:function(){this.isEnabled()&&(this.controls.disconnect(),this.state.enabled=!1,this.viewer.config.moveInertia=this.state.config_moveInertia,this.dispatchEvent(new ei(!1)),this.viewer.resetIdleTimer())}},{key:"toggle",value:function(){this.isEnabled()?this.stop():this.start()}},{key:"__onBeforeRender",value:function(){if(this.isEnabled()&&this.controls.deviceOrientation){var e=this.viewer.getPosition();if(null===this.state.alphaOffset){this.controls.update(),this.controls.object.getWorldDirection(ed);var t=this.viewer.dataHelper.vector3ToSphericalCoords(ed);this.state.alphaOffset=t.yaw-e.yaw}else{this.controls.alphaOffset=this.state.alphaOffset,this.controls.update(),this.controls.object.getWorldDirection(ed);var n=this.viewer.dataHelper.vector3ToSphericalCoords(ed),i={yaw:n.yaw,pitch:-n.pitch},o="smooth"===this.state.moveMode?3:10;this.viewer.dynamics.position.goto(i,.01>u.P6.getAngle(e,i)?1:o)}}}},{key:"__onBeforeRotate",value:function(e){this.isEnabled()&&(e.preventDefault(),this.config.touchmove&&(this.state.alphaOffset-=e.position.yaw-this.viewer.getPosition().pitch))}},{key:"__checkSupport",value:function(){return"DeviceOrientationEvent"in window&&"function"==typeof DeviceOrientationEvent.requestPermission?Promise.resolve(!0):"DeviceOrientationEvent"in window?new Promise(function(e){var listener=function listener(t){e(!!t&&!u.P6.isNil(t.alpha)&&!isNaN(t.alpha)),window.removeEventListener("deviceorientation",listener)};window.addEventListener("deviceorientation",listener,!1),setTimeout(listener,1e4)}):Promise.resolve(!1)}},{key:"__requestPermission",value:function(){return"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(e){return"granted"===e}).catch(function(){return!1}):Promise.resolve(!0)}}]),GyroscopePlugin}(u.Yc);function resolution_plugin_index_module_typeof(e){return(resolution_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function resolution_plugin_index_module_get(){return(resolution_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=resolution_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function resolution_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=resolution_plugin_index_module_getPrototypeOf(e)););return e}function resolution_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,resolution_plugin_index_module_toPropertyKey(i.key),i)}}function resolution_plugin_index_module_createClass(e,t,n){return t&&resolution_plugin_index_module_defineProperties(e.prototype,t),n&&resolution_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function resolution_plugin_index_module_toPropertyKey(e){var t=resolution_plugin_index_module_toPrimitive(e,"string");return"symbol"===resolution_plugin_index_module_typeof(t)?t:String(t)}function resolution_plugin_index_module_toPrimitive(e,t){if("object"!==resolution_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==resolution_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function resolution_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function resolution_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&resolution_plugin_index_module_setPrototypeOf(e,t)}function resolution_plugin_index_module_setPrototypeOf(e,t){return(resolution_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function resolution_plugin_index_module_createSuper(e){var t=resolution_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=resolution_plugin_index_module_getPrototypeOf(e);if(t){var o=resolution_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return resolution_plugin_index_module_possibleConstructorReturn(this,n)}}function resolution_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===resolution_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return resolution_plugin_index_module_assertThisInitialized(e)}function resolution_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function resolution_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function resolution_plugin_index_module_getPrototypeOf(e){return(resolution_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ep.id="gyroscope",ep.configParser=ec,u.Of.lang[eo.id]="Gyroscope",(0,u.KI)(eo,"caption:right");/*!
 * PhotoSphereViewer.ResolutionPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var e_=Object.defineProperty;!function(e,t){for(var n in t)e_(e,n,{get:t[n],enumerable:!0})}({},{ResolutionChangedEvent:function(){return eh}});var eh=function(e){resolution_plugin_index_module_inherits(_ResolutionChangedEvent,e);var t=resolution_plugin_index_module_createSuper(_ResolutionChangedEvent);function _ResolutionChangedEvent(e){var n;return resolution_plugin_index_module_classCallCheck(this,_ResolutionChangedEvent),(n=t.call(this,_ResolutionChangedEvent.type)).resolutionId=e,n}return resolution_plugin_index_module_createClass(_ResolutionChangedEvent)}(u.$N);eh.type="resolution-changed";var ev=u.P6.getConfigParser({resolutions:null,defaultResolution:null,showBadge:!0});function settings_plugin_index_module_typeof(e){return(settings_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function settings_plugin_index_module_get(){return(settings_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=settings_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function settings_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=settings_plugin_index_module_getPrototypeOf(e)););return e}function settings_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,settings_plugin_index_module_toPropertyKey(i.key),i)}}function settings_plugin_index_module_createClass(e,t,n){return t&&settings_plugin_index_module_defineProperties(e.prototype,t),n&&settings_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function settings_plugin_index_module_toPropertyKey(e){var t=settings_plugin_index_module_toPrimitive(e,"string");return"symbol"===settings_plugin_index_module_typeof(t)?t:String(t)}function settings_plugin_index_module_toPrimitive(e,t){if("object"!==settings_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==settings_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function settings_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function settings_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&settings_plugin_index_module_setPrototypeOf(e,t)}function settings_plugin_index_module_setPrototypeOf(e,t){return(settings_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function settings_plugin_index_module_createSuper(e){var t=settings_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=settings_plugin_index_module_getPrototypeOf(e);if(t){var o=settings_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return settings_plugin_index_module_possibleConstructorReturn(this,n)}}function settings_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===settings_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return settings_plugin_index_module_assertThisInitialized(e)}function settings_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function settings_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function settings_plugin_index_module_getPrototypeOf(e){return(settings_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(function(e){resolution_plugin_index_module_inherits(_ResolutionPlugin,e);var t=resolution_plugin_index_module_createSuper(_ResolutionPlugin);function _ResolutionPlugin(e,n){var i;return resolution_plugin_index_module_classCallCheck(this,_ResolutionPlugin),(i=t.call(this,e)).resolutions=[],i.resolutionsById={},i.state={resolution:null},i.config=ev(n),i.config.defaultResolution&&i.viewer.config.panorama&&u.P6.logWarn("ResolutionPlugin, a defaultResolution was provided but a panorama is already configured on the viewer, the defaultResolution will be ignored."),i}return resolution_plugin_index_module_createClass(_ResolutionPlugin,[{key:"init",value:function(){var e=this;if(resolution_plugin_index_module_get(resolution_plugin_index_module_getPrototypeOf(_ResolutionPlugin.prototype),"init",this).call(this),this.settings=this.viewer.getPlugin("settings"),!this.settings)throw new u.Il("Resolution plugin requires the Settings plugin");this.settings.addSetting({id:_ResolutionPlugin.id,type:"options",label:this.viewer.config.lang.resolution,current:function(){return e.state.resolution},options:function(){return e.resolutions},apply:function(t){return e.__setResolutionIfExists(t)},badge:this.config.showBadge?function(){return e.state.resolution}:null}),this.viewer.addEventListener(u.U3.PanoramaLoadedEvent.type,this),this.config.resolutions&&(this.setResolutions(this.config.resolutions,this.viewer.config.panorama?null:this.config.defaultResolution),delete this.config.resolutions,delete this.config.defaultResolution)}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.PanoramaLoadedEvent.type,this),this.settings.removeSetting(_ResolutionPlugin.id),resolution_plugin_index_module_get(resolution_plugin_index_module_getPrototypeOf(_ResolutionPlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof u.U3.PanoramaLoadedEvent&&this.__refreshResolution()}},{key:"setResolutions",value:function(e,t){var n=this;this.resolutions=e||[],this.resolutionsById={},e.forEach(function(e){if(!e.id)throw new u.Il("Missing resolution id");if(!e.panorama)throw new u.Il("Missing resolution panorama");n.resolutionsById[e.id]=e}),this.viewer.config.panorama||t||(t=e[0].id),t&&!this.resolutionsById[t]&&(u.P6.logWarn("Resolution ".concat(t," unknown")),t=e[0].id),t&&this.setResolution(t),this.__refreshResolution()}},{key:"setResolution",value:function(e){if(!this.resolutionsById[e])throw new u.Il("Resolution ".concat(e," unknown"));return this.__setResolutionIfExists(e)}},{key:"__setResolutionIfExists",value:function(e){return this.resolutionsById[e]?this.viewer.setPanorama(this.resolutionsById[e].panorama,{transition:!1,showLoader:!1}):Promise.resolve()}},{key:"getResolution",value:function(){return this.state.resolution}},{key:"__refreshResolution",value:function(){var e,t=this,n=this.resolutions.find(function(e){return u.P6.deepEqual(t.viewer.config.panorama,e.panorama)});this.state.resolution!==(null==n?void 0:n.id)&&(this.state.resolution=null==n?void 0:n.id,null===(e=this.settings)||void 0===e||e.updateButton(),this.dispatchEvent(new eh(this.state.resolution)))}}]),_ResolutionPlugin})(u.Vw).id="resolution",u.Of.lang.resolution="Quality";/*!
 * PhotoSphereViewer.SettingsPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var ef=Object.defineProperty;!function(e,t){for(var n in t)ef(e,n,{get:t[n],enumerable:!0})}({},{SettingChangedEvent:function(){return eg}});var eg=function(e){settings_plugin_index_module_inherits(_SettingChangedEvent,e);var t=settings_plugin_index_module_createSuper(_SettingChangedEvent);function _SettingChangedEvent(e,n){var i;return settings_plugin_index_module_classCallCheck(this,_SettingChangedEvent),(i=t.call(this,_SettingChangedEvent.type)).settingId=e,i.settingValue=n,i}return settings_plugin_index_module_createClass(_SettingChangedEvent)}(u.$N);eg.type="setting-changed";var em=function(e){settings_plugin_index_module_inherits(SettingsButton,e);var t=settings_plugin_index_module_createSuper(SettingsButton);function SettingsButton(e){var n;return settings_plugin_index_module_classCallCheck(this,SettingsButton),(n=t.call(this,e,{className:"psv-settings-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M98.4 43.7c-.8-.5-7-4.3-9.6-5.4l-3-7.5c.9-2.5 2.6-9.4 3-10.6a3.3 3.3 0 00-1-3.1L83 12.2a3.3 3.3 0 00-3-.9c-1 .2-8 2-10.7 3l-7.5-3.1c-1-2.4-4.8-8.6-5.4-9.6A3.3 3.3 0 0053.4 0h-6.8a3.4 3.4 0 00-2.9 1.6c-.5.8-4.2 7-5.4 9.6l-7.5 3-10.6-3a3.3 3.3 0 00-3.1 1L12.2 17a3.3 3.3 0 00-.9 3c.2 1 2 8 3 10.7l-3.1 7.5c-2.4 1-8.6 4.8-9.6 5.4A3.3 3.3 0 000 46.6v6.8a3.4 3.4 0 001.6 2.9c.8.5 7 4.2 9.6 5.4l3 7.5-3 10.6a3.3 3.3 0 001 3.1l4.8 4.9a3.3 3.3 0 003.1.9c1-.2 8-2 10.7-3l7.5 3c1 2.5 4.7 8.6 5.4 9.7a3.3 3.3 0 002.9 1.6h6.8a3.4 3.4 0 002.9-1.6c.5-.8 4.2-7 5.4-9.6l7.5-3c2.5.9 9.4 2.6 10.6 3a3.3 3.3 0 003.1-1l4.9-4.8a3.3 3.3 0 00.9-3.1c-.2-1-2-8-3-10.7l3-7.5c2.5-1 8.6-4.7 9.7-5.4a3.3 3.3 0 001.6-2.9v-6.8a3.3 3.3 0 00-1.6-2.9zM50 71.7A21.8 21.8 0 1171.8 50 21.8 21.8 0 0150 71.8z"/><!-- Created by i cons from the Noun Project --></svg>\n',hoverScale:!0,collapsable:!1,tabbable:!0})).plugin=n.viewer.getPlugin("settings"),n.badge=document.createElement("div"),n.badge.className="psv-settings-badge",n.badge.style.display="none",n.container.appendChild(n.badge),n}return settings_plugin_index_module_createClass(SettingsButton,[{key:"isSupported",value:function(){return!!this.plugin}},{key:"onClick",value:function(){this.plugin.toggleSettings()}},{key:"setBadge",value:function(e){this.badge.innerText=e,this.badge.style.display=e?"":"none"}}]),SettingsButton}(u.T9);em.id="settings";var ey='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M86.2 50.7l-44 44-9.9-9.9 34.1-34.1-34.7-34.8L41.6 6z"/><!-- Created by Renee Ramsey-Passmore from the Noun Project--></svg>\n',eb="psvSettings",ex="settingId",ew="optionId",eP="__back",ek="__enter",eE=u.P6.dasherize(ex),eO=u.P6.dasherize(ew),eC={options:function(e,t){return'\n<span class="psv-settings-item-label">'.concat(e.label,'</span>\n<span class="psv-settings-item-value">').concat(t(e),'</span>\n<span class="psv-settings-item-icon">').concat(ey,"</span>\n")},toggle:function(e){return'\n<span class="psv-settings-item-label">'.concat(e.label,'</span>\n<span class="psv-settings-item-value">').concat(e.active()?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 100" width="2.4em" height="1.2em"><path fill="currentColor" transform="scale(1.88) translate(0, -25)" d="M72 73.2A21.6 21.6 0 1172 30a21.6 21.6 0 010 43.2M2.4 51.6A26.4 26.4 0 0028.8 78H72a26.4 26.4 0 000-52.8H28.8A26.4 26.4 0 002.4 51.6"/><!-- Created by Nikita from the Noun Project --></svg>\n':'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 100" width="2.4em" height="1.2em"><path fill="currentColor" transform="scale(1.88) translate(0, -25)" d="M72 73.2H44A26.4 26.4 0 0044 30h28a21.6 21.6 0 010 43.2M7.2 51.6a21.6 21.6 0 1143.2 0 21.6 21.6 0 01-43.2 0M72 25.2H28.8a26.4 26.4 0 000 52.8H72a26.4 26.4 0 000-52.8"/><!-- Created by Nikita from the Noun Project --></svg>\n',"</span>\n")}},eS=function(e){settings_plugin_index_module_inherits(SettingsComponent,e);var t=settings_plugin_index_module_createSuper(SettingsComponent);function SettingsComponent(e,n){var i;return settings_plugin_index_module_classCallCheck(this,SettingsComponent),(i=t.call(this,n,{className:"psv-settings psv--capture-event"})).plugin=e,i.container.addEventListener("click",settings_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("transitionend",settings_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("keydown",settings_plugin_index_module_assertThisInitialized(i)),i.hide(),i}return settings_plugin_index_module_createClass(SettingsComponent,[{key:"handleEvent",value:function(e){switch(e.type){case"click":this.__click(e.target);break;case"transitionend":this.isVisible()?this.__focusFirstOption():this.container.innerHTML="";break;case"keydown":if(this.isVisible())switch(e.key){case u.tl.KEY_CODES.Escape:this.plugin.hideSettings();break;case u.tl.KEY_CODES.Enter:this.__click(e.target)}}}},{key:"show",value:function(e){if(this.__showSettings(!1),this.container.classList.add("psv-settings--open"),this.container.style.right="",this.container.style.left="",e){var t=this.viewer.container.getBoundingClientRect(),n=e.left-t.left,i=t.right-e.right,o=e.width,r=this.container.offsetWidth;r>=n+o?this.container.style.left="0px":n+r<t.width?this.container.style.left="".concat(n,"px"):r>=i+o?this.container.style.right="0px":this.container.style.right="".concat(i,"px")}else this.container.style.right="0px";this.state.visible=!0}},{key:"hide",value:function(){this.container.classList.remove("psv-settings--open"),this.state.visible=!1}},{key:"__click",value:function(e){var t=u.P6.getClosest(e,"li");if(t){var n=t.dataset[ex],i=t.dataset[ew],o=this.plugin.settings.find(function(e){return e.id===n});switch(i){case eP:this.__showSettings(!0);break;case ek:switch(o.type){case"toggle":this.plugin.toggleSettingValue(o),this.__showSettings(!0);break;case"options":this.__showOptions(o)}break;default:"options"===o.type&&(this.hide(),this.plugin.applySettingOption(o,i))}}}},{key:"__showSettings",value:function(e){var t,n;this.container.innerHTML=(t=this.plugin.settings,n=function(e){var t=e.current(),n=e.options().find(function(e){return e.id===t});return null==n?void 0:n.label},'\n<ul class="psv-settings-list">\n  '.concat(t.map(function(e){return'\n    <li class="psv-settings-item" tabindex="0"\n        data-'.concat(eE,'="').concat(e.id,'" data-').concat(eO,'="').concat(ek,'">\n      ').concat(eC[e.type](e,n),"\n    </li>\n  ")}).join(""),"\n</ul>\n")),e&&this.__focusFirstOption()}},{key:"__showOptions",value:function(e){var t=e.current();this.container.innerHTML='\n<ul class="psv-settings-list">\n  <li class="psv-settings-item psv-settings-item--header" tabindex="0"\n      data-'.concat(eE,'="').concat(e.id,'" data-').concat(eO,'="').concat(eP,'">\n    <span class="psv-settings-item-icon">').concat(ey,'</span>\n    <span class="psv-settings-item-label">').concat(e.label,"</span>\n  </li>\n  ").concat(e.options().map(function(n){return'\n    <li class="psv-settings-item" tabindex="0"\n        data-'.concat(eE,'="').concat(e.id,'" data-').concat(eO,'="').concat(n.id,'">\n      <span class="psv-settings-item-icon">').concat(n.id===t?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 90"><polygon fill="currentColor" points="0,48 10,35 36,57 78,10 90,21 37,79 "/><!-- Created by Zahroe from the Noun Project --></svg>\n':"",'</span>\n      <span class="psv-settings-item-value">').concat(n.label,"</span>\n    </li>\n  ")}).join(""),"\n</ul>\n"),this.__focusFirstOption()}},{key:"__focusFirstOption",value:function(){var e;null===(e=this.container.querySelector("[tabindex]"))||void 0===e||e.focus()}}]),SettingsComponent}(u.k8);function getData(){return JSON.parse(localStorage.getItem(eb))||{}}function setData(e){localStorage.setItem(eb,JSON.stringify(e))}var eT=u.P6.getConfigParser({persist:!1,storage:{set:function(e,t){var n=getData();n[e]=t,setData(n)},get:function(e){return getData()[e]}}});function stereo_plugin_index_module_typeof(e){return(stereo_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function stereo_plugin_index_module_get(){return(stereo_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=stereo_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function stereo_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=stereo_plugin_index_module_getPrototypeOf(e)););return e}function stereo_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,stereo_plugin_index_module_toPropertyKey(i.key),i)}}function stereo_plugin_index_module_createClass(e,t,n){return t&&stereo_plugin_index_module_defineProperties(e.prototype,t),n&&stereo_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function stereo_plugin_index_module_toPropertyKey(e){var t=stereo_plugin_index_module_toPrimitive(e,"string");return"symbol"===stereo_plugin_index_module_typeof(t)?t:String(t)}function stereo_plugin_index_module_toPrimitive(e,t){if("object"!==stereo_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==stereo_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function stereo_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function stereo_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&stereo_plugin_index_module_setPrototypeOf(e,t)}function stereo_plugin_index_module_setPrototypeOf(e,t){return(stereo_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function stereo_plugin_index_module_createSuper(e){var t=stereo_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=stereo_plugin_index_module_getPrototypeOf(e);if(t){var o=stereo_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return stereo_plugin_index_module_possibleConstructorReturn(this,n)}}function stereo_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===stereo_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return stereo_plugin_index_module_assertThisInitialized(e)}function stereo_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function stereo_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function stereo_plugin_index_module_getPrototypeOf(e){return(stereo_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(function(e){settings_plugin_index_module_inherits(SettingsPlugin,e);var t=settings_plugin_index_module_createSuper(SettingsPlugin);function SettingsPlugin(e,n){var i;return settings_plugin_index_module_classCallCheck(this,SettingsPlugin),(i=t.call(this,e)).settings=[],i.config=eT(n),i.component=new eS(settings_plugin_index_module_assertThisInitialized(i),i.viewer),i}return settings_plugin_index_module_createClass(SettingsPlugin,[{key:"init",value:function(){var e=this;settings_plugin_index_module_get(settings_plugin_index_module_getPrototypeOf(SettingsPlugin.prototype),"init",this).call(this),this.viewer.addEventListener(u.U3.ClickEvent.type,this),this.viewer.addEventListener(u.U3.ShowPanelEvent.type,this),setTimeout(function(){return e.updateButton()})}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.ClickEvent.type,this),this.viewer.removeEventListener(u.U3.ShowPanelEvent.type,this),this.component.destroy(),this.settings.length=0,settings_plugin_index_module_get(settings_plugin_index_module_getPrototypeOf(SettingsPlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){(e instanceof u.U3.ClickEvent||e instanceof u.U3.ShowPanelEvent)&&this.component.isVisible()&&this.hideSettings()}},{key:"addSetting",value:function(e){var t=this;if(!e.id)throw new u.Il("Missing setting id");if(!e.type)throw new u.Il("Missing setting type");e.badge&&this.settings.some(function(e){return e.badge})&&u.P6.logWarn("More than one setting with a badge are declared, the result is unpredictable."),this.settings.push(e),this.component.isVisible()&&this.component.show(),this.updateButton(),this.config.persist&&Promise.resolve(this.config.storage.get(e.id)).then(function(n){switch(e.type){case"toggle":u.P6.isNil(n)||n===e.active()||(e.toggle(),t.dispatchEvent(new eg(e.id,e.active())));break;case"options":u.P6.isNil(n)||n===e.current()||(e.apply(n),t.dispatchEvent(new eg(e.id,e.current())))}t.updateButton()})}},{key:"removeSetting",value:function(e){var t=this.settings.findIndex(function(t){return t.id===e});-1!==t&&(this.settings.splice(t,1),this.component.isVisible()&&this.component.show(),this.updateButton())}},{key:"toggleSettings",value:function(){this.component.isVisible()?this.hideSettings():this.showSettings()}},{key:"hideSettings",value:function(){this.component.hide(),this.updateButton()}},{key:"showSettings",value:function(){var e=this.viewer.navbar.getButton(em.id,!1),t=null==e?void 0:e.container.getBoundingClientRect();this.component.show(t),this.updateButton()}},{key:"updateButton",value:function(){var e,t=null===(e=this.settings.find(function(e){return e.badge}))||void 0===e?void 0:e.badge(),n=this.viewer.navbar.getButton(em.id,!1);null==n||n.toggleActive(this.component.isVisible()),null==n||n.setBadge(t)}},{key:"toggleSettingValue",value:function(e){var t=!e.active();e.toggle(),this.dispatchEvent(new eg(e.id,t)),this.config.persist&&this.config.storage.set(e.id,t),this.updateButton()}},{key:"applySettingOption",value:function(e,t){e.apply(t),this.dispatchEvent(new eg(e.id,t)),this.config.persist&&this.config.storage.set(e.id,t),this.updateButton()}}]),SettingsPlugin})(u.Vw).id="settings",u.Of.lang[em.id]="Settings",(0,u.KI)(em,"fullscreen:left");/*!
 * PhotoSphereViewer.StereoPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var eM=Object.defineProperty;!function(e,t){for(var n in t)eM(e,n,{get:t[n],enumerable:!0})}({},{StereoUpdatedEvent:function(){return ej}});var ej=function(e){stereo_plugin_index_module_inherits(_StereoUpdatedEvent,e);var t=stereo_plugin_index_module_createSuper(_StereoUpdatedEvent);function _StereoUpdatedEvent(e){var n;return stereo_plugin_index_module_classCallCheck(this,_StereoUpdatedEvent),(n=t.call(this,_StereoUpdatedEvent.type)).stereoEnabled=e,n}return stereo_plugin_index_module_createClass(_StereoUpdatedEvent)}(u.$N);ej.type="stereo-updated";var eR=function(e){stereo_plugin_index_module_inherits(StereoButton,e);var t=stereo_plugin_index_module_createSuper(StereoButton);function StereoButton(e){var n;return stereo_plugin_index_module_classCallCheck(this,StereoButton),(n=t.call(this,e,{className:"psv-stereo-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -2 16 16"><path fill="currentColor" d="M13.104 0H2.896C2.332 0 1 .392 1 .875h14C15 .392 13.668 0 13.104 0zM15 1H1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h3.534a2 2 0 0 0 1.821-1.172l1.19-2.618a.5.5 0 0 1 .91 0l1.19 2.618A2 2 0 0 0 11.466 11H15a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM4 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm8 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/><!--Created by Idev\xe3 Batista from the Noun Project--></svg>',hoverScale:!0,collapsable:!0,tabbable:!0})).plugin=n.viewer.getPlugin("stereo"),n.plugin&&n.plugin.addEventListener(ej.type,stereo_plugin_index_module_assertThisInitialized(n)),n}return stereo_plugin_index_module_createClass(StereoButton,[{key:"destroy",value:function(){this.plugin&&this.plugin.removeEventListener(ej.type,this),stereo_plugin_index_module_get(stereo_plugin_index_module_getPrototypeOf(StereoButton.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin&&{initial:!1,promise:this.plugin.isSupported}}},{key:"handleEvent",value:function(e){e instanceof ej&&this.toggleActive(e.stereoEnabled)}},{key:"onClick",value:function(){this.plugin.toggle()}}]),StereoButton}(u.T9);eR.id="stereo";var eI=stereo_plugin_index_module_createClass(function StereoEffect(e){stereo_plugin_index_module_classCallCheck(this,StereoEffect);var t=new c.u37;t.aspect=.5;var n=new c.FM8;this.setEyeSeparation=function(e){t.eyeSep=e},this.setSize=function(t,n){e.setSize(t,n)},this.render=function(i,o){!0===i.matrixWorldAutoUpdate&&i.updateMatrixWorld(),null===o.parent&&!0===o.matrixWorldAutoUpdate&&o.updateMatrixWorld(),t.update(o),e.getSize(n),e.autoClear&&e.clear(),e.setScissorTest(!0),e.setScissor(0,0,n.width/2,n.height),e.setViewport(0,0,n.width/2,n.height),e.render(i,t.cameraL),e.setScissor(n.width/2,0,n.width/2,n.height),e.setViewport(n.width/2,0,n.width/2,n.height),e.render(i,t.cameraR),e.setScissorTest(!1)}}),eL="pleaseRotate";function video_plugin_index_module_typeof(e){return(video_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function video_plugin_index_module_get(){return(video_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=video_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function video_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=video_plugin_index_module_getPrototypeOf(e)););return e}function video_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,video_plugin_index_module_toPropertyKey(i.key),i)}}function video_plugin_index_module_createClass(e,t,n){return t&&video_plugin_index_module_defineProperties(e.prototype,t),n&&video_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function video_plugin_index_module_toPropertyKey(e){var t=video_plugin_index_module_toPrimitive(e,"string");return"symbol"===video_plugin_index_module_typeof(t)?t:String(t)}function video_plugin_index_module_toPrimitive(e,t){if("object"!==video_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==video_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function video_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function video_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&video_plugin_index_module_setPrototypeOf(e,t)}function video_plugin_index_module_setPrototypeOf(e,t){return(video_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function video_plugin_index_module_createSuper(e){var t=video_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=video_plugin_index_module_getPrototypeOf(e);if(t){var o=video_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return video_plugin_index_module_possibleConstructorReturn(this,n)}}function video_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===video_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return video_plugin_index_module_assertThisInitialized(e)}function video_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function video_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function video_plugin_index_module_getPrototypeOf(e){return(video_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(function(e){stereo_plugin_index_module_inherits(StereoPlugin,e);var t=stereo_plugin_index_module_createSuper(StereoPlugin);function StereoPlugin(e){var n;return stereo_plugin_index_module_classCallCheck(this,StereoPlugin),(n=t.call(this,e)).state={enabled:!1,wakeLock:null},n}return stereo_plugin_index_module_createClass(StereoPlugin,[{key:"isSupported",get:function(){return this.gyroscope.isSupported()}},{key:"init",value:function(){if(stereo_plugin_index_module_get(stereo_plugin_index_module_getPrototypeOf(StereoPlugin.prototype),"init",this).call(this),this.markers=this.viewer.getPlugin("markers"),this.compass=this.viewer.getPlugin("compass"),this.gyroscope=this.viewer.getPlugin("gyroscope"),!this.gyroscope)throw new u.Il("Stereo plugin requires the Gyroscope plugin");this.viewer.addEventListener(u.U3.StopAllEvent.type,this),this.viewer.addEventListener(u.U3.ClickEvent.type,this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.StopAllEvent.type,this),this.viewer.removeEventListener(u.U3.ClickEvent.type,this),this.stop(),delete this.markers,delete this.compass,delete this.gyroscope,stereo_plugin_index_module_get(stereo_plugin_index_module_getPrototypeOf(StereoPlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){(e instanceof u.U3.StopAllEvent||e instanceof u.U3.ClickEvent)&&this.stop()}},{key:"isEnabled",value:function(){return this.state.enabled}},{key:"start",value:function(){var e=this;return this.viewer.enterFullscreen(),this.__startWakelock(),this.__lockOrientation(),this.gyroscope.start("fast").then(function(){var t,n;e.viewer.renderer.setCustomRenderer(function(e){return new eI(e)}),e.state.enabled=!0,null===(t=e.markers)||void 0===t||t.hideAllMarkers(),null===(n=e.compass)||void 0===n||n.hide(),e.viewer.navbar.hide(),e.viewer.panel.hide(),e.dispatchEvent(new ej(!0)),e.viewer.notification.show({content:e.viewer.config.lang.stereoNotification,timeout:3e3})},function(){return e.__unlockOrientation(),e.__stopWakelock(),e.viewer.exitFullscreen(),Promise.reject()})}},{key:"stop",value:function(){if(this.isEnabled()){var e,t;this.viewer.renderer.setCustomRenderer(null),this.state.enabled=!1,null===(e=this.markers)||void 0===e||e.showAllMarkers(),null===(t=this.compass)||void 0===t||t.show(),this.viewer.navbar.show(),this.__unlockOrientation(),this.__stopWakelock(),this.viewer.exitFullscreen(),this.gyroscope.stop(),this.dispatchEvent(new ej(!1))}}},{key:"toggle",value:function(){this.isEnabled()?this.stop():this.start()}},{key:"__startWakelock",value:function(){var e=this;"wakeLock"in navigator?navigator.wakeLock.request("screen").then(function(t){e.state.wakeLock=t}).catch(function(){return u.P6.logWarn("Cannot acquire WakeLock")}):u.P6.logWarn("WakeLock is not available")}},{key:"__stopWakelock",value:function(){this.state.wakeLock&&(this.state.wakeLock.release(),this.state.wakeLock=null)}},{key:"__lockOrientation",value:function(){var e,t,n=this,displayRotateMessage=function(){window.innerHeight>window.innerWidth&&n.viewer.overlay.show({id:eL,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66.7 19a14 14 0 0 1 13.8 12.1l-3.9-2.7c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l5.7 3.9.6.2c.3 0 .6-.2.8-.4l3.9-5.7c.3-.5.2-1.1-.3-1.4-.5-.3-1.1-.2-1.4.3l-2.4 3.5A16 16 0 0 0 66.7 17c-.6 0-1 .4-1 1s.4 1 1 1zM25 15h10c.6 0 1-.4 1-1s-.4-1-1-1H25c-.6 0-1 .4-1 1s.4 1 1 1zm-6.9 30H16l-2 .2a1 1 0 0 0-.8 1.2c.1.5.5.8 1 .8h.2l1.7-.2h2.1c.6 0 1-.4 1-1s-.5-1-1.1-1zm10 0h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1zM84 45H55V16A11 11 0 0 0 44 5H16A11 11 0 0 0 5 16v68a11 11 0 0 0 11 11h68a11 11 0 0 0 11-11V56a11 11 0 0 0-11-11zM16 93c-5 0-9-4-9-9V53.2c.3-.1.6-.3.7-.6a9.8 9.8 0 0 1 2-3c.4-.4.4-1 0-1.4a1 1 0 0 0-1.4 0l-1.2 1.5V16c0-5 4-9 9-9h28c5 0 9 4 9 9v68c0 5-4 9-9 9H16zm77-9c0 5-4 9-9 9H50.3c2.8-2 4.7-5.3 4.7-9V47h29c5 0 9 4 9 9v28zM38.1 45h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.5-1-1-1zm9.9 0h-4c-.6 0-1 .4-1 1s.4 1 1 1h4c.6 0 1-.4 1-1s-.4-1-1-1zm38 19c-.6 0-1 .4-1 1v10c0 .6.4 1 1 1s1-.4 1-1V65c0-.6-.4-1-1-1z"/><!--Created by Anthony Bresset from the Noun Project--></svg>',title:n.viewer.config.lang.pleaseRotate,text:n.viewer.config.lang.tapToContinue}),e&&(clearTimeout(e),e=null)};null!==(t=window.screen)&&void 0!==t&&t.orientation?(window.screen.orientation.lock("landscape").then(null,function(){return displayRotateMessage()}),e=setTimeout(function(){return displayRotateMessage()},500)):displayRotateMessage()}},{key:"__unlockOrientation",value:function(){var e;null!==(e=window.screen)&&void 0!==e&&e.orientation?window.screen.orientation.unlock():this.viewer.overlay.hide(eL)}}]),StereoPlugin})(u.Vw).id="stereo",u.Of.lang[eR.id]="Stereo view",(0,u.KI)(eR,"caption:right"),u.Of.lang.stereoNotification="Tap anywhere to exit stereo view.",u.Of.lang.pleaseRotate="Please rotate your device",u.Of.lang.tapToContinue="(or tap to continue)";/*!
 * PhotoSphereViewer.VideoPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var eA=Object.defineProperty;!function(e,t){for(var n in t)eA(e,n,{get:t[n],enumerable:!0})}({},{BufferEvent:function(){return eU},PlayPauseEvent:function(){return ez},ProgressEvent:function(){return eN},VolumeChangeEvent:function(){return eB}});var ez=function(e){video_plugin_index_module_inherits(_PlayPauseEvent,e);var t=video_plugin_index_module_createSuper(_PlayPauseEvent);function _PlayPauseEvent(e){var n;return video_plugin_index_module_classCallCheck(this,_PlayPauseEvent),(n=t.call(this,_PlayPauseEvent.type)).playing=e,n}return video_plugin_index_module_createClass(_PlayPauseEvent)}(u.$N);ez.type="play-pause";var eB=function(e){video_plugin_index_module_inherits(_VolumeChangeEvent,e);var t=video_plugin_index_module_createSuper(_VolumeChangeEvent);function _VolumeChangeEvent(e){var n;return video_plugin_index_module_classCallCheck(this,_VolumeChangeEvent),(n=t.call(this,_VolumeChangeEvent.type)).volume=e,n}return video_plugin_index_module_createClass(_VolumeChangeEvent)}(u.$N);eB.type="volume-change";var eN=function(e){video_plugin_index_module_inherits(_ProgressEvent,e);var t=video_plugin_index_module_createSuper(_ProgressEvent);function _ProgressEvent(e,n,i){var o;return video_plugin_index_module_classCallCheck(this,_ProgressEvent),(o=t.call(this,_ProgressEvent.type)).time=e,o.duration=n,o.progress=i,o}return video_plugin_index_module_createClass(_ProgressEvent)}(u.$N);eN.type="progress";var eU=function(e){video_plugin_index_module_inherits(_BufferEvent,e);var t=video_plugin_index_module_createSuper(_BufferEvent);function _BufferEvent(e){var n;return video_plugin_index_module_classCallCheck(this,_BufferEvent),(n=t.call(this,_BufferEvent.type)).maxBuffer=e,n}return video_plugin_index_module_createClass(_BufferEvent)}(u.$N);eU.type="buffer";var eH='<svg viewBox="76 5 550 550" xmlns="http://www.w3.org/2000/svg"><path fill="currentcolor" d="M351.1 5.6A274.1 274.1 0 0 0 76.7 280a274.1 274.1 0 0 0 274.4 274.4A274.1 274.1 0 0 0 625.5 280 274.1 274.1 0 0 0 351.1 5.6zm146.7 282.8-219 134.4c-6.6 4-15.6-.6-15.6-8.4V145.6c0-7.8 9-12.9 15.7-8.4l219 134.4a10 10 0 0 1 0 16.8z"/></svg>',eD=function(e){video_plugin_index_module_inherits(PlayPauseButton,e);var t=video_plugin_index_module_createSuper(PlayPauseButton);function PlayPauseButton(e){var n,i;return video_plugin_index_module_classCallCheck(this,PlayPauseButton),(i=t.call(this,e,{className:"psv-video-play-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:eH,iconActive:'<svg viewBox="80 10 540 540" xmlns="http://www.w3.org/2000/svg"><path d="M80.58 279.67c0-148.76 120.33-269.09 269.09-269.09s269.75 120.33 269.75 269.09-121 269.75-269.75 269.75-269.1-120.99-269.1-269.75zm175.87 105.12V175.2c0-9.26 7.27-15.87 15.86-15.87h39.01c8.6 0 15.87 6.62 15.87 15.87v209.59c0 8.6-7.27 15.87-15.87 15.87h-39c-8.6 0-15.87-7.28-15.87-15.87zm116.36 0V175.2c0-9.26 7.27-15.87 15.86-15.87h38.35c9.26 0 15.87 6.62 15.87 15.87v209.59c0 8.6-6.61 15.87-15.87 15.87h-38.34c-8.6 0-15.87-7.28-15.87-15.87z" fill-rule="evenodd" fill="currentcolor"/></svg>'})).plugin=i.viewer.getPlugin("video"),null===(n=i.plugin)||void 0===n||n.addEventListener(ez.type,video_plugin_index_module_assertThisInitialized(i)),i}return video_plugin_index_module_createClass(PlayPauseButton,[{key:"destroy",value:function(){var e;null===(e=this.plugin)||void 0===e||e.removeEventListener(ez.type,this),video_plugin_index_module_get(video_plugin_index_module_getPrototypeOf(PlayPauseButton.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(e){e instanceof ez&&this.toggleActive(e.playing)}},{key:"onClick",value:function(){this.plugin.playPause()}}]),PlayPauseButton}(u.T9);function formatTime(e){var t=Math.round(e%60);return"".concat(Math.round(e-t)/60,":").concat(("0"+t).slice(-2))}eD.id="videoPlay",eD.groupId="video";var eV=function(e){video_plugin_index_module_inherits(TimeCaption,e);var t=video_plugin_index_module_createSuper(TimeCaption);function TimeCaption(e){var n;return video_plugin_index_module_classCallCheck(this,TimeCaption),(n=t.call(this,e,{className:"psv-caption psv-video-time",hoverScale:!1,collapsable:!1,tabbable:!1})).contentElt=document.createElement("div"),n.contentElt.className="psv-caption-content",n.container.appendChild(n.contentElt),n.plugin=n.viewer.getPlugin("video"),n.plugin&&(n.viewer.addEventListener(u.U3.PanoramaLoadedEvent.type,video_plugin_index_module_assertThisInitialized(n)),n.plugin.addEventListener(eN.type,video_plugin_index_module_assertThisInitialized(n))),n}return video_plugin_index_module_createClass(TimeCaption,[{key:"destroy",value:function(){this.plugin&&(this.viewer.removeEventListener(u.U3.PanoramaLoadedEvent.type,this),this.plugin.removeEventListener(eN.type,this)),delete this.plugin,video_plugin_index_module_get(video_plugin_index_module_getPrototypeOf(TimeCaption.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.PanoramaLoadedEvent.type:case eN.type:this.contentElt.innerHTML="<strong>".concat(formatTime(this.plugin.getTime()),"</strong> / ").concat(formatTime(this.plugin.getDuration()))}}},{key:"onClick",value:function(){}}]),TimeCaption}(u.T9);eV.id="videoTime",eV.groupId="video";var eq=function(e){video_plugin_index_module_inherits(VolumeButton,e);var t=video_plugin_index_module_createSuper(VolumeButton);function VolumeButton(e){var n;return video_plugin_index_module_classCallCheck(this,VolumeButton),(n=t.call(this,e,{className:"psv-video-volume-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="17 16 71 71"><path fill="currentColor" d="M20.19 61.66H32.9c.54 0 1.07.16 1.52.47L51.02 73.5a2.7 2.7 0 0 0 4.22-2.23V28.74a2.7 2.7 0 0 0-4.22-2.23L34.43 37.87c-.45.3-.98.47-1.52.47H20.19a2.7 2.7 0 0 0-2.7 2.7v17.92a2.7 2.7 0 0 0 2.7 2.7z"/><path id="lvl0" fill="currentColor" d="M63.802 58.834c.39.39.902.586 1.414.586s1.023-.195 1.414-.586l7.234-7.233 7.234 7.233c.39.39.902.586 1.414.586s1.023-.195 1.414-.586a2 2 0 0 0 0-2.828l-7.234-7.234 7.234-7.233a2 2 0 1 0-2.828-2.828l-7.234 7.233-7.234-7.233a2 2 0 1 0-2.828 2.828l7.234 7.233-7.234 7.234a2 2 0 0 0 0 2.828z"/><path id="lvl1" fill="currentColor" d="M59.573 59.65c.39.394.904.59 1.418.59.51 0 1.02-.194 1.41-.582A13.53 13.53 0 0 0 66.411 50a13.56 13.56 0 0 0-3.996-9.654 2 2 0 0 0-2.828 2.829A9.586 9.586 0 0 1 62.41 50a9.56 9.56 0 0 1-2.83 6.823 2 2 0 0 0-.008 2.828z"/><path id="lvl2" fill="currentColor" d="M72.501 50c0 5.267-2.055 10.227-5.786 13.967a2 2 0 0 0 2.832 2.825C74.03 62.297 76.5 56.333 76.5 50s-2.47-12.297-6.954-16.792a2 2 0 0 0-2.832 2.825c3.731 3.74 5.786 8.7 5.786 13.967z"/><path id="lvl3" fill="currentColor" d="M83.001 50c0 8.084-3.147 15.679-8.863 21.384a2 2 0 0 0 2.826 2.831C83.437 67.754 87 59.155 87 50c0-9.154-3.564-17.753-10.037-24.215a2 2 0 0 0-2.826 2.83C79.854 34.323 83 41.917 83 50z"/><!--Created by Rudez Studio from the Noun Project--></svg>'})).plugin=n.viewer.getPlugin("video"),n.plugin&&(n.rangeContainer=document.createElement("div"),n.rangeContainer.className="psv-video-volume__container",n.container.appendChild(n.rangeContainer),n.range=document.createElement("div"),n.range.className="psv-video-volume__range",n.rangeContainer.appendChild(n.range),n.trackElt=document.createElement("div"),n.trackElt.className="psv-video-volume__track",n.range.appendChild(n.trackElt),n.progressElt=document.createElement("div"),n.progressElt.className="psv-video-volume__progress",n.range.appendChild(n.progressElt),n.handleElt=document.createElement("div"),n.handleElt.className="psv-video-volume__handle",n.range.appendChild(n.handleElt),n.slider=new u.P6.Slider(n.range,u.P6.SliderDirection.VERTICAL,n.__onSliderUpdate.bind(video_plugin_index_module_assertThisInitialized(n))),n.viewer.addEventListener(u.U3.PanoramaLoadedEvent.type,video_plugin_index_module_assertThisInitialized(n)),n.plugin.addEventListener(ez.type,video_plugin_index_module_assertThisInitialized(n)),n.plugin.addEventListener(eB.type,video_plugin_index_module_assertThisInitialized(n)),n.__setVolume(0)),n}return video_plugin_index_module_createClass(VolumeButton,[{key:"destroy",value:function(){this.plugin&&(this.viewer.removeEventListener(u.U3.PanoramaLoadedEvent.type,this),this.plugin.removeEventListener(ez.type,this),this.plugin.removeEventListener(eB.type,this)),this.slider.destroy(),video_plugin_index_module_get(video_plugin_index_module_getPrototypeOf(VolumeButton.prototype),"destroy",this).call(this)}},{key:"isSupported",value:function(){return!!this.plugin}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.PanoramaLoadedEvent.type:case ez.type:case eB.type:this.__setVolume(this.plugin.getVolume())}}},{key:"onClick",value:function(){this.plugin.setMute()}},{key:"__onSliderUpdate",value:function(e){e.mousedown&&this.plugin.setVolume(e.value)}},{key:"__setVolume",value:function(e){var t;t=0===e?0:e<.333?1:e<.666?2:3,u.P6.toggleClass(this.container,"psv-video-volume-button--0",0===t),u.P6.toggleClass(this.container,"psv-video-volume-button--1",1===t),u.P6.toggleClass(this.container,"psv-video-volume-button--2",2===t),u.P6.toggleClass(this.container,"psv-video-volume-button--3",3===t),this.handleElt.style.bottom="".concat(100*e,"%"),this.progressElt.style.height="".concat(100*e,"%")}}]),VolumeButton}(u.T9);eq.id="videoVolume",eq.groupId="video";var eG=function(e){video_plugin_index_module_inherits(PauseOverlay,e);var t=video_plugin_index_module_createSuper(PauseOverlay);function PauseOverlay(e,n){var i;return video_plugin_index_module_classCallCheck(this,PauseOverlay),(i=t.call(this,n,{className:"psv-video-overlay"})).plugin=e,i.button=document.createElement("button"),i.button.className="psv-video-bigbutton psv--capture-event",i.button.innerHTML=eH,i.container.appendChild(i.button),i.viewer.addEventListener(u.U3.PanoramaLoadedEvent.type,video_plugin_index_module_assertThisInitialized(i)),i.plugin.addEventListener(ez.type,video_plugin_index_module_assertThisInitialized(i)),i.button.addEventListener("click",video_plugin_index_module_assertThisInitialized(i)),i}return video_plugin_index_module_createClass(PauseOverlay,[{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.PanoramaLoadedEvent.type,this),this.plugin.removeEventListener(ez.type,this),video_plugin_index_module_get(video_plugin_index_module_getPrototypeOf(PauseOverlay.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.PanoramaLoadedEvent.type:case ez.type:u.P6.toggleClass(this.button,"psv-video-bigbutton--pause",!this.plugin.isPlaying());break;case"click":this.plugin.playPause()}}}]),PauseOverlay}(u.k8),eW=function(e){video_plugin_index_module_inherits(ProgressBar,e);var t=video_plugin_index_module_createSuper(ProgressBar);function ProgressBar(e,n){var i;return video_plugin_index_module_classCallCheck(this,ProgressBar),(i=t.call(this,n,{className:"psv-video-progressbar"})).plugin=e,i.state={visible:!0,req:null,tooltip:null},i.bufferElt=document.createElement("div"),i.bufferElt.className="psv-video-progressbar__buffer",i.container.appendChild(i.bufferElt),i.progressElt=document.createElement("div"),i.progressElt.className="psv-video-progressbar__progress",i.container.appendChild(i.progressElt),i.handleElt=document.createElement("div"),i.handleElt.className="psv-video-progressbar__handle",i.container.appendChild(i.handleElt),i.slider=new u.P6.Slider(i.container,u.P6.SliderDirection.HORIZONTAL,i.__onSliderUpdate.bind(video_plugin_index_module_assertThisInitialized(i))),i.viewer.addEventListener(u.U3.PanoramaLoadedEvent.type,video_plugin_index_module_assertThisInitialized(i)),i.plugin.addEventListener(eU.type,video_plugin_index_module_assertThisInitialized(i)),i.plugin.addEventListener(eN.type,video_plugin_index_module_assertThisInitialized(i)),i.state.req=window.requestAnimationFrame(function(){return i.__updateProgress()}),i.hide(),i}return video_plugin_index_module_createClass(ProgressBar,[{key:"destroy",value:function(){var e;this.viewer.removeEventListener(u.U3.PanoramaLoadedEvent.type,this),this.plugin.removeEventListener(eU.type,this),this.plugin.removeEventListener(eN.type,this),this.slider.destroy(),null===(e=this.state.tooltip)||void 0===e||e.hide(),window.cancelAnimationFrame(this.state.req),delete this.state.tooltip,video_plugin_index_module_get(video_plugin_index_module_getPrototypeOf(ProgressBar.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.PanoramaLoadedEvent.type:case eU.type:case eN.type:this.bufferElt.style.width="".concat(100*this.plugin.getBufferProgress(),"%")}}},{key:"__updateProgress",value:function(){var e=this;this.progressElt.style.width="".concat(100*this.plugin.getProgress(),"%"),this.state.req=window.requestAnimationFrame(function(){return e.__updateProgress()})}},{key:"__onSliderUpdate",value:function(e){if(e.mouseover){this.handleElt.style.display="block",this.handleElt.style.left="".concat(100*e.value,"%");var t,n=formatTime(this.plugin.getDuration()*e.value);this.state.tooltip?this.state.tooltip.update(n,{top:e.cursor.clientY,left:e.cursor.clientX}):this.state.tooltip=this.viewer.createTooltip({top:e.cursor.clientY,left:e.cursor.clientX,content:n})}else this.handleElt.style.display="none",null===(t=this.state.tooltip)||void 0===t||t.hide(),delete this.state.tooltip;e.click&&this.plugin.setProgress(e.value)}}]),ProgressBar}(u.k8),eY=u.P6.getConfigParser({progressbar:!0,bigbutton:!0,keypoints:null}),eK=function(e){video_plugin_index_module_inherits(VideoPlugin,e);var t=video_plugin_index_module_createSuper(VideoPlugin);function VideoPlugin(e,n){var i;if(video_plugin_index_module_classCallCheck(this,VideoPlugin),(i=t.call(this,e,n)).state={curve:null,start:null,end:null,keypoints:null},!i.viewer.adapter.constructor.id.includes("video"))throw new u.Il("VideoPlugin can only be used with a video adapter.");return i.config.progressbar&&(i.progressbar=new eW(video_plugin_index_module_assertThisInitialized(i),e)),i.config.bigbutton&&(i.overlay=new eG(video_plugin_index_module_assertThisInitialized(i),e)),i}return video_plugin_index_module_createClass(VideoPlugin,[{key:"init",value:function(){var e;video_plugin_index_module_get(video_plugin_index_module_getPrototypeOf(VideoPlugin.prototype),"init",this).call(this),this.markers=this.viewer.getPlugin("markers"),this.autorotate=this.viewer.getPlugin("autorotate"),this.autorotate&&(this.autorotate.config.autostartDelay=0,this.autorotate.config.autostartOnIdle=!1),this.config.keypoints&&(this.setKeypoints(this.config.keypoints),delete this.config.keypoints),null===(e=this.autorotate)||void 0===e||e.addEventListener("autorotate",this),this.viewer.addEventListener(u.U3.BeforeRenderEvent.type,this),this.viewer.addEventListener(u.U3.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(u.U3.KeypressEvent.type,this)}},{key:"destroy",value:function(){var e;null===(e=this.autorotate)||void 0===e||e.removeEventListener("autorotate",this),this.viewer.removeEventListener(u.U3.BeforeRenderEvent.type,this),this.viewer.removeEventListener(u.U3.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(u.U3.KeypressEvent.type,this),delete this.progressbar,delete this.overlay,delete this.markers,video_plugin_index_module_get(video_plugin_index_module_getPrototypeOf(VideoPlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){var t;switch(e.type){case u.U3.BeforeRenderEvent.type:this.__autorotate();break;case"autorotate":this.__configureAutorotate();break;case u.U3.PanoramaLoadedEvent.type:this.__bindVideo(e.data),null===(t=this.progressbar)||void 0===t||t.show();break;case u.U3.KeypressEvent.type:this.__onKeyPress(e);break;case"play":case"pause":this.dispatchEvent(new ez(this.isPlaying()));break;case"progress":this.dispatchEvent(new eU(this.getBufferProgress()));break;case"volumechange":this.dispatchEvent(new eB(this.getVolume()));break;case"timeupdate":this.dispatchEvent(new eN(this.getTime(),this.getDuration(),this.getProgress()))}}},{key:"__bindVideo",value:function(e){this.video&&(this.video.removeEventListener("play",this),this.video.removeEventListener("pause",this),this.video.removeEventListener("progress",this),this.video.removeEventListener("volumechange",this),this.video.removeEventListener("timeupdate",this)),this.video=e.texture.image,this.video.addEventListener("play",this),this.video.addEventListener("pause",this),this.video.addEventListener("progress",this),this.video.addEventListener("volumechange",this),this.video.addEventListener("timeupdate",this)}},{key:"__onKeyPress",value:function(e){e.key===u.tl.KEY_CODES.Space&&(this.playPause(),e.preventDefault())}},{key:"getDuration",value:function(){var e,t;return null!==(e=null===(t=this.video)||void 0===t?void 0:t.duration)&&void 0!==e?e:0}},{key:"getTime",value:function(){var e,t;return null!==(e=null===(t=this.video)||void 0===t?void 0:t.currentTime)&&void 0!==e?e:0}},{key:"getProgress",value:function(){return this.video?this.video.currentTime/this.video.duration:0}},{key:"isPlaying",value:function(){return!!this.video&&!this.video.paused}},{key:"getVolume",value:function(){var e,t,n;return null!==(e=this.video)&&void 0!==e&&e.muted?0:null!==(t=null===(n=this.video)||void 0===n?void 0:n.volume)&&void 0!==t?t:0}},{key:"playPause",value:function(){this.video&&(this.video.paused?this.video.play():this.video.pause())}},{key:"play",value:function(){var e;null!==(e=this.video)&&void 0!==e&&e.paused&&this.video.play()}},{key:"pause",value:function(){this.video&&!this.video.paused&&this.video.pause()}},{key:"setVolume",value:function(e){this.video&&(this.video.muted=!1,this.video.volume=c.M8C.clamp(e,0,1))}},{key:"setMute",value:function(e){this.video&&(this.video.muted=void 0===e?!this.video.muted:e,this.video.muted||0!==this.video.volume||(this.video.volume=.1))}},{key:"setTime",value:function(e){this.video&&(this.video.currentTime=e)}},{key:"setProgress",value:function(e){this.video&&(this.video.currentTime=this.video.duration*e)}},{key:"getBufferProgress",value:function(){if(!this.video)return 0;for(var e=0,t=this.video.buffered,n=0,i=t.length;n<i;n++)if(t.start(n)<=this.video.currentTime&&t.end(n)>=this.video.currentTime){e=t.end(n);break}return Math.max(this.video.currentTime,e)/this.video.duration}},{key:"setKeypoints",value:function(e){var t=this;if(!this.autorotate)throw new u.Il("Video keypoints required the AutorotatePlugin");if(!e){this.state.keypoints=null,this.__configureAutorotate();return}if(e.length<2)throw new u.Il("At least two points are required");this.state.keypoints=u.P6.clone(e),this.state.keypoints&&(this.state.keypoints.forEach(function(e,n){if(e.position)e.position=t.viewer.dataHelper.cleanPosition(e.position);else throw new u.Il("Keypoint #".concat(n," is missing marker or position"));if(u.P6.isNil(e.time))throw new u.Il("Keypoint #".concat(n," is missing time"))}),this.state.keypoints.sort(function(e,t){return e.time-t.time})),this.__configureAutorotate()}},{key:"__configureAutorotate",value:function(){delete this.state.curve,delete this.state.start,delete this.state.end,this.autorotate.isEnabled()&&this.state.keypoints&&this.viewer.dynamics.position.stop()}},{key:"__autorotate",value:function(){if(null!==(e=this.autorotate)&&void 0!==e&&e.isEnabled()&&this.state.keypoints){var e,t=this.getTime(),n=this.state;if((!n.curve||t<n.start.time||t>=n.end.time)&&this.__autorotateNext(t),n.start===n.end)this.viewer.rotate(n.start.position);else{var i=(t-n.start.time)/(n.end.time-n.start.time),o=n.curve.getPoint(1/3+i/3);this.viewer.dynamics.position.goto({yaw:o.x,pitch:o.y})}}}},{key:"__autorotateNext",value:function(e){var t=null,n=null,i=this.state.keypoints,o=i.length-1;e<i[0].time&&(t=0,n=0);for(var r=0;r<o;r++)if(e>=i[r].time&&e<i[r+1].time){t=r,n=r+1;break}e>=i[o].time&&(t=o,n=o);for(var a=[i[Math.max(0,t-1)].position,i[t].position,i[n].position,i[Math.min(o,n+1)].position],s=[new c.FM8(a[0].yaw,a[0].pitch)],l=0,u=1;u<=3;u++){var d=a[u-1].yaw-a[u].yaw;d>Math.PI?l+=1:d<-Math.PI&&(l-=1),0!==l&&1===u&&(s[0].x-=2*l*Math.PI,l=0),s.push(new c.FM8(a[u].yaw+2*l*Math.PI,a[u].pitch))}this.state.curve=new c.gti(s),this.state.start=i[t],this.state.end=i[n]}}]),VideoPlugin}(u.Yc);function virtual_tour_plugin_index_module_typeof(e){return(virtual_tour_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function index_module_toConsumableArray(e){return index_module_arrayWithoutHoles(e)||index_module_iterableToArray(e)||virtual_tour_plugin_index_module_unsupportedIterableToArray(e)||index_module_nonIterableSpread()}function index_module_nonIterableSpread(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function index_module_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function index_module_arrayWithoutHoles(e){if(Array.isArray(e))return virtual_tour_plugin_index_module_arrayLikeToArray(e)}function virtual_tour_plugin_index_module_get(){return(virtual_tour_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=virtual_tour_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function virtual_tour_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=virtual_tour_plugin_index_module_getPrototypeOf(e)););return e}function virtual_tour_plugin_index_module_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function virtual_tour_plugin_index_module_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?virtual_tour_plugin_index_module_ownKeys(Object(n),!0).forEach(function(t){virtual_tour_plugin_index_module_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):virtual_tour_plugin_index_module_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function virtual_tour_plugin_index_module_defineProperty(e,t,n){return(t=virtual_tour_plugin_index_module_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function virtual_tour_plugin_index_module_slicedToArray(e,t){return virtual_tour_plugin_index_module_arrayWithHoles(e)||virtual_tour_plugin_index_module_iterableToArrayLimit(e,t)||virtual_tour_plugin_index_module_unsupportedIterableToArray(e,t)||virtual_tour_plugin_index_module_nonIterableRest()}function virtual_tour_plugin_index_module_nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function virtual_tour_plugin_index_module_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return virtual_tour_plugin_index_module_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return virtual_tour_plugin_index_module_arrayLikeToArray(e,t)}}function virtual_tour_plugin_index_module_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function virtual_tour_plugin_index_module_iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function virtual_tour_plugin_index_module_arrayWithHoles(e){if(Array.isArray(e))return e}function virtual_tour_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,virtual_tour_plugin_index_module_toPropertyKey(i.key),i)}}function virtual_tour_plugin_index_module_createClass(e,t,n){return t&&virtual_tour_plugin_index_module_defineProperties(e.prototype,t),n&&virtual_tour_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function virtual_tour_plugin_index_module_toPropertyKey(e){var t=virtual_tour_plugin_index_module_toPrimitive(e,"string");return"symbol"===virtual_tour_plugin_index_module_typeof(t)?t:String(t)}function virtual_tour_plugin_index_module_toPrimitive(e,t){if("object"!==virtual_tour_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==virtual_tour_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function virtual_tour_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function virtual_tour_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&virtual_tour_plugin_index_module_setPrototypeOf(e,t)}function virtual_tour_plugin_index_module_setPrototypeOf(e,t){return(virtual_tour_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function virtual_tour_plugin_index_module_createSuper(e){var t=virtual_tour_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=virtual_tour_plugin_index_module_getPrototypeOf(e);if(t){var o=virtual_tour_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return virtual_tour_plugin_index_module_possibleConstructorReturn(this,n)}}function virtual_tour_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===virtual_tour_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return virtual_tour_plugin_index_module_assertThisInitialized(e)}function virtual_tour_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function virtual_tour_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function virtual_tour_plugin_index_module_getPrototypeOf(e){return(virtual_tour_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}eK.id="video",eK.configParser=eY,eK.readonlyOptions=Object.keys(eY.defaults),u.Of.lang[eD.id]="Play/Pause",u.Of.lang[eq.id]="Volume",(0,u.KI)(eD),(0,u.KI)(eq),(0,u.KI)(eV),u.Of.navbar.unshift(eD.groupId);/*!
 * PhotoSphereViewer.VirtualTourPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var eX=Object.defineProperty;!function(e,t){for(var n in t)eX(e,n,{get:t[n],enumerable:!0})}({},{NodeChangedEvent:function(){return eF}});var eF=function(e){virtual_tour_plugin_index_module_inherits(_NodeChangedEvent,e);var t=virtual_tour_plugin_index_module_createSuper(_NodeChangedEvent);function _NodeChangedEvent(e,n){var i;return virtual_tour_plugin_index_module_classCallCheck(this,_NodeChangedEvent),(i=t.call(this,_NodeChangedEvent.type)).node=e,i.data=n,i}return virtual_tour_plugin_index_module_createClass(_NodeChangedEvent)}(u.$N);eF.type="node-changed";var eZ={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"8B1A6E5B-A7CC-4471-9CA0-BD64D80ABB79",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-25,-15,-2.5,0,0,-2.5,0,-5,-2.5,0,-5,-2.5,0,0,-2.5,25,-15,-2.5,0,-5,-2.5,25,-15,-2.5,25,-20,-2.5,0,-5,-2.5,-25,-20,-2.5,-25,-15,-2.5,25,-15,2.5,25,-20,2.5,25,-15,-2.5,25,-15,-2.5,25,-20,2.5,25,-20,-2.5,25,-20,2.5,0,-5,2.5,25,-20,-2.5,25,-20,-2.5,0,-5,2.5,0,-5,-2.5,0,-5,2.5,-25,-20,2.5,0,-5,-2.5,0,-5,-2.5,-25,-20,2.5,-25,-20,-2.5,-25,-20,2.5,-25,-15,2.5,-25,-20,-2.5,-25,-20,-2.5,-25,-15,2.5,-25,-15,-2.5,-25,-15,2.5,0,0,2.5,-25,-15,-2.5,-25,-15,-2.5,0,0,2.5,0,0,-2.5,0,0,2.5,25,-15,2.5,0,0,-2.5,0,0,-2.5,25,-15,2.5,25,-15,-2.5,25,-20,2.5,25,-15,2.5,0,-5,2.5,0,-5,2.5,25,-15,2.5,0,0,2.5,0,-5,2.5,0,0,2.5,-25,-15,2.5,-25,-15,2.5,-25,-20,2.5,0,-5,2.5],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],normalized:!1}},boundingSphere:{center:[0,-10,0],radius:27.041634}}},e$={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"},uuid:"B12A1453-6E56-40AC-840B-BA7DF5DB9E2A",type:"BufferGeometry",data:{attributes:{position:{itemSize:3,type:"Float32Array",array:[-26,-21.766189,-3.5,-26,-14.433809,-3.5,0,-6.16619,-3.5,0,-6.16619,-3.5,-26,-14.433809,-3.5,0,1.16619,-3.5,0,-6.16619,-3.5,0,1.16619,-3.5,26,-14.43381,-3.5,26,-14.43381,-3.5,26,-21.766191,-3.5,0,-6.16619,-3.5,-26,-14.433809,3.5,0,1.16619,3.5,-26,-14.433809,-3.5,-26,-14.433809,-3.5,0,1.16619,3.5,0,1.16619,-3.5,0,1.16619,3.5,26,-14.43381,3.5,0,1.16619,-3.5,0,1.16619,-3.5,26,-14.43381,3.5,26,-14.43381,-3.5,26,-14.43381,3.5,26,-21.766191,3.5,26,-14.43381,-3.5,26,-14.43381,-3.5,26,-21.766191,3.5,26,-21.766191,-3.5,26,-21.766191,3.5,0,-6.16619,3.5,26,-21.766191,-3.5,26,-21.766191,-3.5,0,-6.16619,3.5,0,-6.16619,-3.5,0,-6.16619,3.5,-26,-21.766189,3.5,0,-6.16619,-3.5,0,-6.16619,-3.5,-26,-21.766189,3.5,-26,-21.766189,-3.5,-26,-21.766189,3.5,-26,-14.433809,3.5,-26,-21.766189,-3.5,-26,-21.766189,-3.5,-26,-14.433809,3.5,-26,-14.433809,-3.5,-26,-21.766189,3.5,0,-6.16619,3.5,-26,-14.433809,3.5,-26,-14.433809,3.5,0,-6.16619,3.5,0,1.16619,3.5,0,1.16619,3.5,0,-6.16619,3.5,26,-14.43381,3.5,26,-14.43381,3.5,0,-6.16619,3.5,26,-21.766191,3.5],normalized:!1},normal:{itemSize:3,type:"Float32Array",array:[0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,-.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,.514495,.857492,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,-.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,.514495,-.857492,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1],normalized:!1}},boundingSphere:{center:[0,-10.3,0],radius:28.630814}}},eJ="tourLink",eQ="__tour-link__",e0=(r=(o=new c.Gql().parseGeometries([eZ,e$]))[eZ.uuid],a=o[e$.uuid],s=Math.PI/2,r.scale(.015,.015,.015),r.rotateX(s),a.scale(.015,.015,.015),a.rotateX(s),{ARROW_GEOM:r,ARROW_OUTLINE_GEOM:a}),e1=e0.ARROW_GEOM,e2=e0.ARROW_OUTLINE_GEOM,e3=function(){function AbstractDatasource(e,t){virtual_tour_plugin_index_module_classCallCheck(this,AbstractDatasource),this.plugin=e,this.viewer=t,this.nodes={}}return virtual_tour_plugin_index_module_createClass(AbstractDatasource,[{key:"destroy",value:function(){}},{key:"checkNode",value:function(e){var t,n;if(!e.id)throw new u.Il("No id given for node");if(!e.panorama)throw new u.Il("No panorama provided for node ".concat(e.id));if("position"in e&&(u.P6.logWarn('Use the "gps" property to configure the GPS position of a virtual node'),e.gps=e.position),this.plugin.isGps&&!((null===(t=e.gps)||void 0===t?void 0:t.length)>=2))throw new u.Il("No GPS position provided for node ".concat(e.id));if(!this.plugin.isGps&&null!==(n=e.markers)&&void 0!==n&&n.some(function(e){return e.gps&&!e.position}))throw new u.Il("Cannot use GPS positioning for markers in manual mode")}},{key:"checkLink",value:function(e,t){if(!t.nodeId)throw new u.Il("Link of node ".concat(e.id," has no target id"));if(Array.isArray(t.position)&&(u.P6.logWarn('Use the "gps" property to configure the GPS position of a virtual link'),t.gps=t.position,delete t.position),u.P6.isExtendedPosition(t)&&(u.P6.logWarn('Use the "position" property to configure the position of a virtual link'),t.position=this.viewer.dataHelper.cleanPosition(t)),!this.plugin.isGps&&!u.P6.isExtendedPosition(t.position))throw new u.Il("No position provided for link ".concat(t.nodeId," of node ").concat(e.id));if(this.plugin.isGps&&!t.gps)throw new u.Il("No GPS position provided for link ".concat(t.nodeId," of node ").concat(e.id))}}]),AbstractDatasource}(),e5=function(e){virtual_tour_plugin_index_module_inherits(ClientSideDatasource,e);var t=virtual_tour_plugin_index_module_createSuper(ClientSideDatasource);function ClientSideDatasource(){return virtual_tour_plugin_index_module_classCallCheck(this,ClientSideDatasource),t.apply(this,arguments)}return virtual_tour_plugin_index_module_createClass(ClientSideDatasource,[{key:"loadNode",value:function(e){return this.nodes[e]?Promise.resolve(this.nodes[e]):Promise.reject(new u.Il("Node ".concat(e," not found")))}},{key:"setNodes",value:function(e){var t=this;if(!(null!=e&&e.length))throw new u.Il("No nodes provided");var n={},i={};e.forEach(function(e){if(t.checkNode(e),n[e.id])throw new u.Il("Duplicate node ".concat(e.id));e.links||(u.P6.logWarn("Node ".concat(e.id," has no links")),e.links=[]),n[e.id]=e}),e.forEach(function(e){e.links.forEach(function(o){if(!n[o.nodeId])throw new u.Il("Target node ".concat(o.nodeId," of node ").concat(e.id," does not exists"));o.gps=o.gps||n[o.nodeId].gps,o.name=o.name||n[o.nodeId].name,t.checkLink(e,o),i[o.nodeId]=!0})}),e.forEach(function(e){i[e.id]||u.P6.logWarn("Node ".concat(e.id," is never linked to"))}),this.nodes=n}}]),ClientSideDatasource}(e3),e4=function(e){virtual_tour_plugin_index_module_inherits(ServerSideDatasource,e);var t=virtual_tour_plugin_index_module_createSuper(ServerSideDatasource);function ServerSideDatasource(e,n){var i;if(virtual_tour_plugin_index_module_classCallCheck(this,ServerSideDatasource),i=t.call(this,e,n),!e.config.getNode)throw new u.Il("Missing getNode() option.");return i.nodeResolver=e.config.getNode,i}return virtual_tour_plugin_index_module_createClass(ServerSideDatasource,[{key:"loadNode",value:function(e){var t=this;return this.nodes[e]?Promise.resolve(this.nodes[e]):Promise.resolve(this.nodeResolver(e)).then(function(n){return t.checkNode(n),n.links||(u.P6.logWarn("Node ".concat(n.id," has no links")),n.links=[]),n.links.forEach(function(e){t.nodes[e.nodeId]&&(e.gps=e.gps||t.nodes[e.nodeId].gps,e.name=e.name||t.nodes[e.nodeId].name),t.checkLink(n,e)}),t.nodes[e]=n,n})}}]),ServerSideDatasource}(e3);function setMeshColor(e,t){e.material.color.set(t)}function distance(e,t){return 6371e3*u.P6.greatArcDistance(e,t)}function bearing(e,t){var n=virtual_tour_plugin_index_module_slicedToArray(e,2),i=n[0],o=n[1],r=virtual_tour_plugin_index_module_slicedToArray(t,2),a=r[0],s=r[1];return Math.atan2(Math.sin(a-i)*Math.cos(s),Math.cos(o)*Math.sin(s)-Math.sin(o)*Math.cos(s)*Math.cos(a-i))}function gpsToSpherical(e,t){var n,i,o=[c.M8C.degToRad(e[0]),c.M8C.degToRad(e[1])],r=[c.M8C.degToRad(t[0]),c.M8C.degToRad(t[1])],a=null!==(n=e[2])&&void 0!==n?n:0,s=null!==(i=t[2])&&void 0!==i?i:0,l=0;return a!==s&&(l=Math.atan((s-a)/distance(o,r))),{yaw:bearing(o,r),pitch:l}}var e6=u.P6.getConfigParser({dataMode:"client",positionMode:"manual",renderMode:"3d",nodes:null,getNode:null,startNodeId:null,preload:!1,rotateSpeed:"20rpm",transition:u.tl.DEFAULT_TRANSITION,linksOnCompass:!0,markerStyle:{html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 210 210" x="0px" y="0px"><path fill="currentColor" transform="translate(0 10)" d="M0 181l105 -181 105 181 -105 -61 -105 61zm105 -167l0 99 86 50 -86 -148z"/><!-- Created by Saifurrijal from the Noun Project --></svg>\n',size:{width:80,height:80},scale:[.5,2],anchor:"top center",className:"psv-virtual-tour__marker",style:{color:"rgba(0, 208, 255, 0.8)"}},arrowStyle:{color:"#aaaaaa",hoverColor:"#aa5500",outlineColor:"#000000",scale:[.5,2]},markerPitchOffset:-.1,arrowPosition:"bottom",map:null},{dataMode:function(e){if("client"!==e&&"server"!==e)throw new u.Il("VirtualTourPlugin: invalid dataMode");return e},positionMode:function(e){if("gps"!==e&&"manual"!==e)throw new u.Il("VirtualTourPlugin: invalid positionMode");return e},renderMode:function(e){if("3d"!==e&&"markers"!==e)throw new u.Il("VirtualTourPlugin: invalid renderMode");return e},markerStyle:function(e,t){return virtual_tour_plugin_index_module_objectSpread(virtual_tour_plugin_index_module_objectSpread({},t.defValue),e)},arrowStyle:function(e,t){return virtual_tour_plugin_index_module_objectSpread(virtual_tour_plugin_index_module_objectSpread({},t.defValue),e)},map:function(e,t){var n=t.rawConfig;if(e){if("server"===n.dataMode)return u.P6.logWarn("VirtualTourPlugin: The map cannot be used in server side mode"),null;if(!e.imageUrl)return u.P6.logWarn('VirtualTourPlugin: configuring the map requires at least "imageUrl"'),null}return e}}),e8=function(e){virtual_tour_plugin_index_module_inherits(VirtualTourPlugin,e);var t=virtual_tour_plugin_index_module_createSuper(VirtualTourPlugin);function VirtualTourPlugin(e,n){var i;if(virtual_tour_plugin_index_module_classCallCheck(this,VirtualTourPlugin),(i=t.call(this,e,n)).state={currentNode:null,currentTooltip:null,loadingNode:null,preload:{}},i.is3D){i.arrowsGroup=new c.ZAu;var o=new c.cek(16777215,1,0);o.position.set(0,"bottom"===i.config.arrowPosition?2:-2,0),i.arrowsGroup.add(o)}return i}return virtual_tour_plugin_index_module_createClass(VirtualTourPlugin,[{key:"is3D",get:function(){return"3d"===this.config.renderMode}},{key:"isServerSide",get:function(){return"server"===this.config.dataMode}},{key:"isGps",get:function(){return"gps"===this.config.positionMode}},{key:"init",value:function(){var e;if(virtual_tour_plugin_index_module_get(virtual_tour_plugin_index_module_getPrototypeOf(VirtualTourPlugin.prototype),"init",this).call(this),this.markers=this.viewer.getPlugin("markers"),this.compass=this.viewer.getPlugin("compass"),this.gallery=this.viewer.getPlugin("gallery"),!this.is3D&&!this.markers)throw new u.Il("VirtualTour plugin requires the Markers plugin in markers mode.");null!==(e=this.markers)&&void 0!==e&&e.config.markers&&(u.P6.logWarn("No default markers can be configured on Markers plugin when using VirtualTour plugin. Consider defining `markers` on each tour node."),delete this.markers.config.markers),this.config.map&&(this.map=this.viewer.getPlugin("map"),this.map||u.P6.logWarn("The map is configured on the VirtualTourPlugin but the MapPlugin is not loaded.")),this.datasource=this.isServerSide?new e4(this,this.viewer):new e5(this,this.viewer),this.is3D?(this.viewer.observeObjects(eJ),this.viewer.addEventListener(u.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(u.U3.ZoomUpdatedEvent.type,this),this.viewer.addEventListener(u.U3.ClickEvent.type,this),this.viewer.addEventListener(u.U3.ObjectEnterEvent.type,this),this.viewer.addEventListener(u.U3.ObjectHoverEvent.type,this),this.viewer.addEventListener(u.U3.ObjectLeaveEvent.type,this),this.viewer.addEventListener(u.U3.ReadyEvent.type,this,{once:!0})):this.markers.addEventListener("select-marker",this),this.map&&(this.map.addEventListener("select-hotspot",this),this.map.setImage(this.config.map.imageUrl)),this.isServerSide?this.config.startNodeId&&this.setCurrentNode(this.config.startNodeId):this.config.nodes&&(this.setNodes(this.config.nodes,this.config.startNodeId),delete this.config.nodes)}},{key:"destroy",value:function(){var e;this.markers&&this.markers.removeEventListener("select-marker",this),this.arrowsGroup&&this.viewer.renderer.removeObject(this.arrowsGroup),null===(e=this.map)||void 0===e||e.removeEventListener("select-hotspot",this),this.viewer.removeEventListener(u.U3.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(u.U3.ZoomUpdatedEvent.type,this),this.viewer.removeEventListener(u.U3.ClickEvent.type,this),this.viewer.removeEventListener(u.U3.ObjectEnterEvent.type,this),this.viewer.removeEventListener(u.U3.ObjectHoverEvent.type,this),this.viewer.removeEventListener(u.U3.ObjectLeaveEvent.type,this),this.viewer.removeEventListener(u.U3.ReadyEvent.type,this),this.viewer.unobserveObjects(eJ),this.datasource.destroy(),delete this.datasource,delete this.markers,delete this.compass,delete this.gallery,delete this.arrowsGroup,virtual_tour_plugin_index_module_get(virtual_tour_plugin_index_module_getPrototypeOf(VirtualTourPlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){if(e instanceof u.U3.ReadyEvent){this.__positionArrows(),this.viewer.renderer.addObject(this.arrowsGroup);var t=new c.Mig(16777215,1);this.viewer.renderer.addObject(t),this.viewer.needsUpdate()}else if(e instanceof u.U3.PositionUpdatedEvent||e instanceof u.U3.ZoomUpdatedEvent)this.__positionArrows();else if(e instanceof u.U3.ClickEvent){var n,i=null===(n=e.data.objects.find(function(e){return e.userData[eJ]}))||void 0===n?void 0:n.userData[eJ];i&&this.setCurrentNode(i.nodeId,i)}else if("select-marker"===e.type){var o,r=null===(o=e.marker.data)||void 0===o?void 0:o[eJ];r&&this.setCurrentNode(r.nodeId,r)}else if(e instanceof u.U3.ObjectEnterEvent)e.userDataKey===eJ&&this.__onEnterObject(e.object,e.viewerPoint);else if(e instanceof u.U3.ObjectLeaveEvent)e.userDataKey===eJ&&this.__onLeaveObject(e.object);else if(e instanceof u.U3.ObjectHoverEvent)e.userDataKey===eJ&&this.__onHoverObject(e.viewerPoint);else if("select-hotspot"===e.type){var a=e.hotspotId;a.startsWith(eQ)&&this.setCurrentNode(a.substring(eQ.length))}}},{key:"setNodes",value:function(e,t){var n=this;if(this.isServerSide)throw new u.Il("Cannot set nodes in server side mode");this.datasource.setNodes(e),t?this.datasource.nodes[t]||(t=e[0].id,u.P6.logWarn("startNodeId not found is provided nodes, resetted to ".concat(t))):t=e[0].id,this.setCurrentNode(t),this.gallery&&this.gallery.setItems(e.map(function(e){return{id:e.id,panorama:e.panorama,name:e.name,thumbnail:e.thumbnail,options:{caption:e.caption,panoData:e.panoData,sphereCorrection:e.sphereCorrection,description:e.description}}}),function(e){n.setCurrentNode(e)}),this.map&&this.map.setHotspots(index_module_toConsumableArray(e.map(function(e){return virtual_tour_plugin_index_module_objectSpread(virtual_tour_plugin_index_module_objectSpread(virtual_tour_plugin_index_module_objectSpread({},e.map||{}),n.__getNodeMapPosition(e)),{},{id:eQ+e.id,tooltip:e.name})})))}},{key:"setCurrentNode",value:function(e,t){var n,i=this;if(e===(null===(n=this.state.currentNode)||void 0===n?void 0:n.id))return Promise.resolve(!0);this.viewer.hideError(),this.state.loadingNode=e;var o=this.state.currentNode,r=o&&t?this.__getLinkPosition(o,t):null;return Promise.all([Promise.resolve(this.state.preload[e]).then(function(){if(i.state.loadingNode!==e)throw u.P6.getAbortError();return i.datasource.loadNode(e)}),Promise.resolve(!!r&&this.config.rotateSpeed).then(function(e){if(e)return i.viewer.animate(virtual_tour_plugin_index_module_objectSpread(virtual_tour_plugin_index_module_objectSpread({},r),{},{speed:e}))}).then(function(){i.viewer.loader.show()})]).then(function(t){var n,o,r,a,s=virtual_tour_plugin_index_module_slicedToArray(t,1)[0];if(i.state.loadingNode!==e)throw u.P6.getAbortError();if(i.state.currentNode=s,i.state.currentTooltip&&(i.state.currentTooltip.hide(),i.state.currentTooltip=null),i.is3D&&(a=i.arrowsGroup).remove.apply(a,index_module_toConsumableArray(i.arrowsGroup.children.filter(function(e){return e.isMesh}))),null===(n=i.gallery)||void 0===n||n.hide(),null===(o=i.markers)||void 0===o||o.clearMarkers(),null===(r=i.compass)||void 0===r||r.clearHotspots(),i.map){i.map.minimize();var l=i.__getNodeMapPosition(s);"number"==typeof i.config.transition?setTimeout(function(){return i.map.setCenter(l)},i.config.transition/2):i.map.setCenter(l)}return i.viewer.setPanorama(s.panorama,{transition:i.config.transition,caption:s.caption,description:s.description,panoData:s.panoData,sphereCorrection:s.sphereCorrection}).then(function(e){if(!e)throw u.P6.getAbortError()})}).then(function(){if(i.state.loadingNode!==e)throw u.P6.getAbortError();var n=i.state.currentNode;return n.markers&&i.__addNodeMarkers(n),i.__renderLinks(n),i.__preload(n),i.dispatchEvent(new eF(n,{fromNode:o,fromLink:t,fromLinkPosition:r})),i.state.loadingNode=null,!0}).catch(function(e){if(u.P6.isAbortError(e))return!1;throw i.viewer.showError(i.viewer.config.lang.loadError),i.viewer.loader.hide(),i.viewer.navbar.setCaption(""),i.state.loadingNode=null,e})}},{key:"__renderLinks",value:function(e){var t=this,n=[];e.links.forEach(function(i){var o=t.__getLinkPosition(e,i);if(n.push(o),t.is3D){var r,a,s=new c.Kj0(e1,new c.YBo);s.userData=virtual_tour_plugin_index_module_defineProperty({},eJ,i),s.rotation.order="YXZ",s.rotateY(-o.yaw),t.viewer.dataHelper.sphericalCoordsToVector3({yaw:o.yaw,pitch:0},s.position).multiplyScalar(1/u.tl.SPHERE_RADIUS);var l=new c.Kj0(e2,new c.vBJ({side:c._Li}));l.position.copy(s.position),l.rotation.copy(s.rotation),setMeshColor(s,(null===(r=i.arrowStyle)||void 0===r?void 0:r.color)||t.config.arrowStyle.color),setMeshColor(l,(null===(a=i.arrowStyle)||void 0===a?void 0:a.outlineColor)||t.config.arrowStyle.outlineColor),t.arrowsGroup.add(s),t.arrowsGroup.add(l)}else t.isGps&&(o.pitch+=t.config.markerPitchOffset),t.markers.addMarker(virtual_tour_plugin_index_module_objectSpread(virtual_tour_plugin_index_module_objectSpread(virtual_tour_plugin_index_module_objectSpread({},t.config.markerStyle),i.markerStyle),{},{position:o,id:eQ+i.nodeId,tooltip:i.name,visible:!0,hideList:!0,data:virtual_tour_plugin_index_module_defineProperty({},eJ,i)}),!1)}),this.is3D?this.__positionArrows():this.markers.renderMarkers(),this.config.linksOnCompass&&this.compass&&this.compass.setHotspots(n)}},{key:"__getLinkPosition",value:function(e,t){return this.isGps?gpsToSpherical(e.gps,t.gps):this.viewer.dataHelper.cleanPosition(t.position)}},{key:"__onEnterObject",value:function(e,t){var n,i=e.userData[eJ];setMeshColor(e,(null===(n=i.arrowStyle)||void 0===n?void 0:n.hoverColor)||this.config.arrowStyle.hoverColor),i.name&&(this.state.currentTooltip=this.viewer.createTooltip({left:t.x,top:t.y,content:i.name})),this.viewer.needsUpdate()}},{key:"__onHoverObject",value:function(e){this.state.currentTooltip&&this.state.currentTooltip.move({left:e.x,top:e.y})}},{key:"__onLeaveObject",value:function(e){var t,n=e.userData[eJ];setMeshColor(e,(null===(t=n.arrowStyle)||void 0===t?void 0:t.color)||this.config.arrowStyle.color),this.state.currentTooltip&&(this.state.currentTooltip.hide(),this.state.currentTooltip=null),this.viewer.needsUpdate()}},{key:"__positionArrows",value:function(){this.arrowsGroup.position.copy(this.viewer.state.direction).multiplyScalar(.5);var e=this.config.arrowStyle.scale,t=e[1]+(e[0]-e[1])*(this.viewer.getZoomLevel()/100),n=2.5-this.viewer.getZoomLevel()/100*1.5;this.arrowsGroup.position.y+="bottom"===this.config.arrowPosition?-n:n,this.arrowsGroup.scale.set(t,t,t)}},{key:"__preload",value:function(e){var t=this;this.config.preload&&(this.state.preload[e.id]=!0,this.state.currentNode.links.filter(function(e){return!t.state.preload[e.nodeId]}).filter(function(e){return"function"!=typeof t.config.preload||t.config.preload(t.state.currentNode,e)}).forEach(function(e){t.state.preload[e.nodeId]=t.datasource.loadNode(e.nodeId).then(function(e){return t.viewer.textureLoader.preloadPanorama(e.panorama)}).then(function(){t.state.preload[e.nodeId]=!0}).catch(function(){delete t.state.preload[e.nodeId]})}))}},{key:"__addNodeMarkers",value:function(e){var t=this;this.markers?this.markers.setMarkers(e.markers.map(function(n){if(n.gps&&t.isGps){var i;n.position=gpsToSpherical(e.gps,n.gps),null!==(i=n.data)&&void 0!==i&&i.map&&t.map&&Object.assign(n.data.map,t.__getGpsMapPosition(n.gps))}return n})):u.P6.logWarn("Node ".concat(e.id," markers ignored because the plugin is not loaded."))}},{key:"__getNodeMapPosition",value:function(e){return this.__getGpsMapPosition(e.gps)||(e.map?{x:e.map.x,y:e.map.y}:null)}},{key:"__getGpsMapPosition",value:function(e){var t=this.config.map;return this.isGps&&t.extent&&t.size?{x:c.M8C.mapLinear(e[0],t.extent[0],t.extent[2],0,t.size.width),y:c.M8C.mapLinear(e[1],t.extent[1],t.extent[3],0,t.size.height)}:null}}]),VirtualTourPlugin}(u.Yc);function visible_range_plugin_index_module_typeof(e){return(visible_range_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function visible_range_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function visible_range_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,visible_range_plugin_index_module_toPropertyKey(i.key),i)}}function visible_range_plugin_index_module_createClass(e,t,n){return t&&visible_range_plugin_index_module_defineProperties(e.prototype,t),n&&visible_range_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function visible_range_plugin_index_module_toPropertyKey(e){var t=visible_range_plugin_index_module_toPrimitive(e,"string");return"symbol"===visible_range_plugin_index_module_typeof(t)?t:String(t)}function visible_range_plugin_index_module_toPrimitive(e,t){if("object"!==visible_range_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==visible_range_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function visible_range_plugin_index_module_get(){return(visible_range_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=visible_range_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function visible_range_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=visible_range_plugin_index_module_getPrototypeOf(e)););return e}function visible_range_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&visible_range_plugin_index_module_setPrototypeOf(e,t)}function visible_range_plugin_index_module_setPrototypeOf(e,t){return(visible_range_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function visible_range_plugin_index_module_createSuper(e){var t=visible_range_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=visible_range_plugin_index_module_getPrototypeOf(e);if(t){var o=visible_range_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return visible_range_plugin_index_module_possibleConstructorReturn(this,n)}}function visible_range_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===visible_range_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return visible_range_plugin_index_module_assertThisInitialized(e)}function visible_range_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function visible_range_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function visible_range_plugin_index_module_getPrototypeOf(e){return(visible_range_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e8.id="virtual-tour",e8.configParser=e6,e8.readonlyOptions=Object.keys(e6.defaults);var e9=u.P6.getConfigParser({verticalRange:null,horizontalRange:null,usePanoData:!1}),e7=function(e){visible_range_plugin_index_module_inherits(VisibleRangePlugin,e);var t=visible_range_plugin_index_module_createSuper(VisibleRangePlugin);function VisibleRangePlugin(e,n){return visible_range_plugin_index_module_classCallCheck(this,VisibleRangePlugin),t.call(this,e,n)}return visible_range_plugin_index_module_createClass(VisibleRangePlugin,[{key:"init",value:function(){visible_range_plugin_index_module_get(visible_range_plugin_index_module_getPrototypeOf(VisibleRangePlugin.prototype),"init",this).call(this),this.autorotate=this.viewer.getPlugin("autorotate"),this.viewer.addEventListener(u.U3.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(u.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(u.U3.ZoomUpdatedEvent.type,this),this.viewer.addEventListener(u.U3.BeforeAnimateEvent.type,this),this.viewer.addEventListener(u.U3.BeforeRotateEvent.type,this),this.setVerticalRange(this.config.verticalRange),this.setHorizontalRange(this.config.horizontalRange)}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(u.U3.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(u.U3.ZoomUpdatedEvent.type,this),this.viewer.removeEventListener(u.U3.BeforeAnimateEvent.type,this),this.viewer.removeEventListener(u.U3.BeforeRotateEvent.type,this),visible_range_plugin_index_module_get(visible_range_plugin_index_module_getPrototypeOf(VisibleRangePlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.PanoramaLoadedEvent.type:this.config.usePanoData&&this.setRangesFromPanoData();break;case u.U3.BeforeRotateEvent.type:case u.U3.BeforeAnimateEvent.type:var t=this.__applyRanges(e.position,e.zoomLevel).rangedPosition;e.position=t;break;case u.U3.PositionUpdatedEvent.type:var n,i=e.position,o=this.__applyRanges(i),r=o.sidesReached,a=o.rangedPosition;(r.left||r.right)&&null!==(n=this.autorotate)&&void 0!==n&&n.isEnabled()?this.__reverseAutorotate(r.left,r.right):(Math.abs(i.yaw-a.yaw)>1e-6||Math.abs(i.pitch-a.pitch)>1e-6)&&this.viewer.dynamics.position.setValue(a);break;case u.U3.ZoomUpdatedEvent.type:var s=this.viewer.getPosition(),l=this.__applyRanges(s).rangedPosition;(Math.abs(s.yaw-l.yaw)>1e-6||Math.abs(s.pitch-l.pitch)>1e-6)&&this.viewer.dynamics.position.setValue(l)}}},{key:"setVerticalRange",value:function(e){e&&2!==e.length&&(u.P6.logWarn("vertical range must have exactly two elements"),e=null),e?(this.config.verticalRange=e.map(function(e){return u.P6.parseAngle(e,!0)}),this.config.verticalRange[0]>this.config.verticalRange[1]&&(u.P6.logWarn("vertical range values must be ordered"),this.config.verticalRange=[this.config.verticalRange[1],this.config.verticalRange[0]]),this.viewer.state.ready&&this.viewer.rotate(this.viewer.getPosition())):this.config.verticalRange=null}},{key:"setHorizontalRange",value:function(e){e&&2!==e.length&&(u.P6.logWarn("horizontal range must have exactly two elements"),e=null),e?(this.config.horizontalRange=e.map(function(e){return u.P6.parseAngle(e)}),this.viewer.state.ready&&this.viewer.rotate(this.viewer.getPosition())):this.config.horizontalRange=null}},{key:"setRangesFromPanoData",value:function(){this.setVerticalRange(this.__getPanoVerticalRange()),this.setHorizontalRange(this.__getPanoHorizontalRange())}},{key:"__getPanoVerticalRange",value:function(){var e=this.viewer.state.panoData;if(e.croppedHeight===e.fullHeight)return null;var getAngle=function(t){return Math.PI*(1-t/e.fullHeight)-Math.PI/2};return[getAngle(e.croppedY+e.croppedHeight),getAngle(e.croppedY)]}},{key:"__getPanoHorizontalRange",value:function(){var e=this.viewer.state.panoData;if(e.croppedWidth===e.fullWidth)return null;var getAngle=function(t){return 2*Math.PI*(t/e.fullWidth)-Math.PI};return[getAngle(e.croppedX),getAngle(e.croppedX+e.croppedWidth)]}},{key:"__applyRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewer.getPosition(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.viewer.getZoomLevel(),n={yaw:e.yaw,pitch:e.pitch},i={},o=this.viewer.dataHelper.zoomLevelToFov(t),r=this.viewer.dataHelper.vFovToHFov(o);if(this.config.horizontalRange){var a=u.P6.clone(this.config.horizontalRange),s=c.M8C.degToRad(r)/2;a[0]=u.P6.parseAngle(a[0]+s),a[1]=u.P6.parseAngle(a[1]-s),a[0]>a[1]?e.yaw>a[1]&&e.yaw<a[0]&&(e.yaw>a[0]/2+a[1]/2?(n.yaw=a[0],i.left=!0):(n.yaw=a[1],i.right=!0)):e.yaw<a[0]?(n.yaw=a[0],i.left=!0):e.yaw>a[1]&&(n.yaw=a[1],i.right=!0)}if(this.config.verticalRange){var l=u.P6.clone(this.config.verticalRange),d=c.M8C.degToRad(o)/2;l[0]=u.P6.parseAngle(l[0]+d,!0),l[1]=u.P6.parseAngle(l[1]-d,!0),l[0]>l[1]&&(l[0]=(l[0]+l[1])/2,l[1]=l[0]),e.pitch<l[0]?(n.pitch=l[0],i.bottom=!0):e.pitch>l[1]&&(n.pitch=l[1],i.top=!0)}return{rangedPosition:n,sidesReached:i}}},{key:"__reverseAutorotate",value:function(e,t){e&&this.autorotate.config.autorotateSpeed>0||t&&this.autorotate.config.autorotateSpeed<0||this.autorotate.reverse()}}]),VisibleRangePlugin}(u.Yc);function map_plugin_index_module_typeof(e){return(map_plugin_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function map_plugin_index_module_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function map_plugin_index_module_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?map_plugin_index_module_ownKeys(Object(n),!0).forEach(function(t){map_plugin_index_module_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):map_plugin_index_module_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function map_plugin_index_module_defineProperty(e,t,n){return(t=map_plugin_index_module_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function map_plugin_index_module_toConsumableArray(e){return map_plugin_index_module_arrayWithoutHoles(e)||map_plugin_index_module_iterableToArray(e)||map_plugin_index_module_unsupportedIterableToArray(e)||map_plugin_index_module_nonIterableSpread()}function map_plugin_index_module_nonIterableSpread(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function map_plugin_index_module_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function map_plugin_index_module_arrayWithoutHoles(e){if(Array.isArray(e))return map_plugin_index_module_arrayLikeToArray(e)}function map_plugin_index_module_get(){return(map_plugin_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=map_plugin_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function map_plugin_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=map_plugin_index_module_getPrototypeOf(e)););return e}function map_plugin_index_module_slicedToArray(e,t){return map_plugin_index_module_arrayWithHoles(e)||map_plugin_index_module_iterableToArrayLimit(e,t)||map_plugin_index_module_unsupportedIterableToArray(e,t)||map_plugin_index_module_nonIterableRest()}function map_plugin_index_module_nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function map_plugin_index_module_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return map_plugin_index_module_arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return map_plugin_index_module_arrayLikeToArray(e,t)}}function map_plugin_index_module_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function map_plugin_index_module_iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function map_plugin_index_module_arrayWithHoles(e){if(Array.isArray(e))return e}function map_plugin_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,map_plugin_index_module_toPropertyKey(i.key),i)}}function map_plugin_index_module_createClass(e,t,n){return t&&map_plugin_index_module_defineProperties(e.prototype,t),n&&map_plugin_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function map_plugin_index_module_toPropertyKey(e){var t=map_plugin_index_module_toPrimitive(e,"string");return"symbol"===map_plugin_index_module_typeof(t)?t:String(t)}function map_plugin_index_module_toPrimitive(e,t){if("object"!==map_plugin_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==map_plugin_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function map_plugin_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function map_plugin_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&map_plugin_index_module_setPrototypeOf(e,t)}function map_plugin_index_module_setPrototypeOf(e,t){return(map_plugin_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function map_plugin_index_module_createSuper(e){var t=map_plugin_index_module_isNativeReflectConstruct();return function(){var n,i=map_plugin_index_module_getPrototypeOf(e);if(t){var o=map_plugin_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return map_plugin_index_module_possibleConstructorReturn(this,n)}}function map_plugin_index_module_possibleConstructorReturn(e,t){if(t&&("object"===map_plugin_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return map_plugin_index_module_assertThisInitialized(e)}function map_plugin_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function map_plugin_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function map_plugin_index_module_getPrototypeOf(e){return(map_plugin_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e7.id="visible-range",e7.configParser=e9,e7.readonlyOptions=["horizontalRange","verticalRange"];/*!
 * PhotoSphereViewer.MapPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var te=Object.defineProperty;!function(e,t){for(var n in t)te(e,n,{get:t[n],enumerable:!0})}({},{SelectHotspot:function(){return tt}});var tt=function(e){map_plugin_index_module_inherits(_SelectHotspot,e);var t=map_plugin_index_module_createSuper(_SelectHotspot);function _SelectHotspot(e){var n;return map_plugin_index_module_classCallCheck(this,_SelectHotspot),(n=t.call(this,_SelectHotspot.type)).hotspotId=e,n}return map_plugin_index_module_createClass(_SelectHotspot)}(u.$N);tt.type="select-hotspot";var tn="__marker__";function loadImage(e){var t=document.createElement("img");if(e.includes("<svg")){if(!/<svg[^>]*width="/.test(e)&&e.includes("viewBox")){var n=map_plugin_index_module_slicedToArray(/viewBox="([0-9-]+) ([0-9-]+) ([0-9]+) ([0-9]+)"/.exec(e),5),i=n[3],o=n[4];e=e.replace("<svg",'<svg width="'.concat(i,'px" height="').concat(o,'px"'))}var r="data:image/svg+xml;base64,".concat(window.btoa(e));t.src=r}else t.src=e;return t}function getImageHtml(e){return e?e.includes("<svg")?e:'<img src="'.concat(e,'">'):""}function unprojectPoint(e,t,n){return{x:(Math.cos(t)*e.x-Math.sin(t)*e.y)/n,y:(Math.sin(t)*e.x+Math.cos(t)*e.y)/n}}function projectPoint(e,t,n){return{x:(Math.cos(-t)*e.x-Math.sin(-t)*e.y)*n,y:(Math.sin(-t)*e.x+Math.cos(-t)*e.y)*n}}function canvasShadow(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"black";e.shadowOffsetX=t*u.we.pixelRatio,e.shadowOffsetY=n*u.we.pixelRatio,e.shadowBlur=i*u.we.pixelRatio,e.shadowColor=o}function drawImageCentered(e,t,n){var i=t.width,o=t.height;drawImageHighDpi(e,t,-n/2,-(o/i*n)/2,n,o/i*n)}function drawImageHighDpi(e,t,n,i,o,r){e.drawImage(t,0,0,t.width,t.height,n*u.we.pixelRatio,i*u.we.pixelRatio,o*u.we.pixelRatio,r*u.we.pixelRatio)}var ti={top:"bottom",bottom:"top",left:"right",right:"left"};function getButtonPosition(e,t){switch(t){case 1:return[ti[e[0]],ti[e[1]]];case 2:return[e[0],ti[e[1]]];case 3:return[ti[e[0]],e[1]];default:return e}}var to=function(e){map_plugin_index_module_inherits(AbstractMapButton,e);var t=map_plugin_index_module_createSuper(AbstractMapButton);function AbstractMapButton(e,n){var i;return map_plugin_index_module_classCallCheck(this,AbstractMapButton),(i=t.call(this,e,{})).map=e,i.position=n,i}return map_plugin_index_module_createClass(AbstractMapButton,[{key:"applyConfig",value:function(){this.container.className="psv-map__button psv-map__button--".concat(getButtonPosition(this.map.config.position,this.position).join("-")),this.update()}},{key:"update",value:function(){}}]),AbstractMapButton}(u.k8),tr=function(e){map_plugin_index_module_inherits(MapCloseButton,e);var t=map_plugin_index_module_createSuper(MapCloseButton);function MapCloseButton(e){var n;return map_plugin_index_module_classCallCheck(this,MapCloseButton),(n=t.call(this,e,0)).container.addEventListener("click",function(t){e.toggleCollapse(),t.stopPropagation()}),n}return map_plugin_index_module_createClass(MapCloseButton,[{key:"applyConfig",value:function(){map_plugin_index_module_get(map_plugin_index_module_getPrototypeOf(MapCloseButton.prototype),"applyConfig",this).call(this),this.container.classList.add("psv-map__button-close")}},{key:"update",value:function(){this.container.innerHTML=this.map.collapsed?'<svg viewBox="114 45 472 472" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M383.6 196a67.3 67.3 0 1 0-134.5.1 67.3 67.3 0 0 0 134.5-.1zm-100.8 0a33.6 33.6 0 1 1 67.3 0 33.6 33.6 0 0 1-67.3 0z"/><path d="M584 340.8a16.8 16.8 0 0 0-15.6-10.4H403.8c25.2-40.2 47-88 47-133.4A135 135 0 0 0 316.4 61.6 135 135 0 0 0 182 197c0 55.8 33 115.3 64.7 159.8L120.4 469a16.8 16.8 0 0 0 11.2 29.4H434c4.5 0 8.7-1.8 11.9-5l134.4-134.3c4.8-4.8 6.2-12 3.6-18.3zM215.5 197c0-56.1 45.2-101.8 100.8-101.8 55.6 0 100.8 45.6 100.8 101.8 0 65-57.1 144.2-100.8 192.8C273 341.7 215.6 262.3 215.6 197zM427 464.8H175.8l91.3-81.1a575.6 575.6 0 0 0 37.4 42.6 16.8 16.8 0 0 0 23.8 0c2.2-2.2 26.3-26.7 52.6-62.3h147z"/></g><!-- Created by Ayub Irawan from Noun Project --></svg>':u.tl.ICONS.close,this.container.title=this.map.collapsed?this.viewer.config.lang.map:this.viewer.config.lang.close}}]),MapCloseButton}(to),ta=function(e){map_plugin_index_module_inherits(MapCompassButton,e);var t=map_plugin_index_module_createSuper(MapCompassButton);function MapCompassButton(e){var n;return map_plugin_index_module_classCallCheck(this,MapCompassButton),(n=t.call(this,e,3)).container.innerHTML='<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M50,0L70,50L50,100L30,50Z M50,86L64,50L36,50Z" fill="currentColor"/></svg>',n.container.querySelector("svg").style.width="80%",n.container.addEventListener("click",function(t){n.viewer.dynamics.position.goto({yaw:-e.config.rotation},2),t.stopPropagation()}),n}return map_plugin_index_module_createClass(MapCompassButton,[{key:"rotate",value:function(e){this.container.querySelector("svg").style.transform="rotate3d(0, 0, 1, ".concat(-e,"rad)")}}]),MapCompassButton}(to),ts={"bottom-left":0,"bottom-right":-90,"top-right":180,"top-left":90},tl=function(e){map_plugin_index_module_inherits(MapMaximizeButton,e);var t=map_plugin_index_module_createSuper(MapMaximizeButton);function MapMaximizeButton(e){var n;return map_plugin_index_module_classCallCheck(this,MapMaximizeButton),(n=t.call(this,e,1)).container.addEventListener("click",function(t){e.toggleMaximized(),t.stopPropagation()}),n}return map_plugin_index_module_createClass(MapMaximizeButton,[{key:"update",value:function(){this.container.innerHTML=this.map.maximized?'<svg viewBox="95 25 510 510" xmlns="http://www.w3.org/2000/svg"><path d="M109.8 25.8h481c7.8 0 14 6.1 14 14v481c0 7.8-6.2 14-14 14H358.4c-7.8 0-14-6.2-14-14s6.2-14 14-14h217.8v-453H123.8v216.7c0 7.8-6.2 14-14 14-7.9 0-14-6.2-14-14V39.8c0-7.9 6.1-14 14-14zm176.4 508.4H109.8c-7.9 0-14-6.1-14-14V343.8c0-7.8 6.1-14 14-14h176.4c7.8 0 14 6.2 14 14v176.4c0 7.9-6.8 14-14 14zm-14-176.4H123.8v148.4h148.4zm64.4-191.5c-7.9 0-14 6.2-14 14v113.1c0 7.9 6.1 14 14 14h113c8 0 14-6.1 14-14s-6-14-14-14h-79.4l141-141a13.5 13.5 0 0 0 0-19.7 13.5 13.5 0 0 0-19.5 0L350.6 259.8v-79.5c0-7.8-6.2-14-14-14z" fill="currentColor"/><!-- Created by Gregor Cresnar from Noun Project --></svg>':'<svg viewBox="95 25 510 510" xmlns="http://www.w3.org/2000/svg"><path d="M604.2 39.8v481c0 7.8-6.1 14-14 14H358.4c-7.8 0-14-6.2-14-14s6.2-14 14-14h217.8v-453H123.8v216.7c0 7.8-6.2 14-14 14-7.9 0-14-6.2-14-14V39.8c0-7.9 6.1-14 14-14h481c7.3 0 13.4 6.1 13.4 14zm-304 304v176.4c0 7.9-6.2 14-14 14H109.8c-7.9 0-14-6.1-14-14V343.8c0-7.8 6.1-14 14-14h176.4c7.2 0 14 6.8 14 14zm-28 14H123.8v148.4h148.4zm215.6-195.4v79.5c0 7.9 6.1 14 14 14 7.8 0 14-6.1 14-14V128.2c0-7.8-6.2-14-14-14H388.6c-7.8 0-14 6.2-14 14 0 7.9 6.2 14 14 14h79L326.5 283.4a13.5 13.5 0 0 0 0 19.6c2.8 2.8 6.1 3.9 10 3.9 4 0 7.3-1.1 10.1-4z" fill="currentColor"/><!-- Created by Gregor Cresnar from Noun Project --></svg>',this.container.querySelector("svg").style.transform="rotate3d(0, 0, 1, ".concat(ts[this.map.config.position.join("-")],"deg)"),this.container.title=this.map.maximized?this.viewer.config.lang.mapMinimize:this.viewer.config.lang.mapMaximize}}]),MapMaximizeButton}(to),tu=function(e){map_plugin_index_module_inherits(MapResetButton,e);var t=map_plugin_index_module_createSuper(MapResetButton);function MapResetButton(e){var n;return map_plugin_index_module_classCallCheck(this,MapResetButton),(n=t.call(this,e,2)).container.title=n.viewer.config.lang.mapReset,n.container.innerHTML='<svg viewBox="170 100 360 360" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M518.6 269h-18.5a150.8 150.8 0 0 0-138-137.9v-20.9c0-5.8-4.7-10.6-10.5-10.6h-3.2c-5.8 0-10.6 4.8-10.6 10.6v21A150.8 150.8 0 0 0 200 269h-18.5c-5.9 0-10.6 4.7-10.6 10.6v3.2c0 5.8 4.7 10.5 10.6 10.5h18.5c6 73.4 64.6 132 138 138v18.5c0 5.8 4.7 10.6 10.5 10.6h3.2c5.8 0 10.6-4.8 10.6-10.6v-18.6c73.3-5.9 132-64.5 137.9-137.9h18.5c5.9 0 10.6-4.7 10.6-10.5v-3.2c0-5.9-4.7-10.6-10.6-10.6zM362.2 414.4v-9.8c0-5.9-4.8-10.6-10.6-10.6h-3.2c-5.8 0-10.6 4.7-10.6 10.6v9.8a134 134 0 0 1-121-121h9.8c5.9 0 10.6-4.8 10.6-10.6v-3.2c0-5.9-4.7-10.6-10.6-10.6h-9.8a134 134 0 0 1 121-121v7.5c0 5.8 4.8 10.5 10.6 10.5h3.2c5.8 0 10.6-4.7 10.6-10.5V148a134 134 0 0 1 121 121h-9.8c-5.9 0-10.6 4.7-10.6 10.6v3.2c0 5.8 4.7 10.5 10.6 10.5h9.8a134 134 0 0 1-121 121z"/><path d="M355.4 222a6 6 0 0 0-10.7 0L291 320a8.3 8.3 0 0 0 9.7 12l39.2-11.7c6.6-2 13.6-2 20.2 0l39.2 11.7a8.3 8.3 0 0 0 9.7-12z"/></g><!-- Created by muhammad benani from Noun Project --></svg>',n.container.querySelector("svg").style.width="80%",n.container.addEventListener("click",function(t){e.reset(),t.stopPropagation()}),n}return map_plugin_index_module_createClass(MapResetButton)}(to),tc=function(e){map_plugin_index_module_inherits(MapZoomToolbar,e);var t=map_plugin_index_module_createSuper(MapZoomToolbar);function MapZoomToolbar(e){map_plugin_index_module_classCallCheck(this,MapZoomToolbar),(n=t.call(this,e,{className:"psv-map__toolbar"})).map=e,n.handler=new u.P6.PressHandler(100),n.container.innerHTML="".concat('<svg viewBox="128 58 444 444" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M350 58.2a221.8 221.8 0 1 0 0 443.6 221.8 221.8 0 0 0 0-443.6zm130.3 252.7H219.7a31 31 0 1 1 0-61.8h260.6a31 31 0 1 1 0 61.8z"/><!-- Created by Iconika from Noun Project --></svg>','<span class="psv-map__toolbar-text">100%</span>').concat('<svg viewBox="143.8 73.8 412.5 412.5" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M350 73.8a206.2 206.2 0 1 0 0 412.4 206.2 206.2 0 0 0 0-412.4zm117.3 234H378v89.5a27.9 27.9 0 1 1-55.8 0V308h-89.4a27.9 27.9 0 1 1 0-55.8H322v-89.5a27.9 27.9 0 1 1 55.8 0v89.5h89.5a27.9 27.9 0 1 1 0 55.8z"/><!-- Created by Iconika from Noun Project --></svg>'),n.zoomIndicator=n.container.querySelector(".psv-map__toolbar-text");var n,i=n.container.querySelectorAll("svg");return i[0].dataset.delta="-1",i[1].dataset.delta="1",n.container.addEventListener("mousedown",map_plugin_index_module_assertThisInitialized(n)),window.addEventListener("mouseup",map_plugin_index_module_assertThisInitialized(n)),n.container.addEventListener("touchstart",map_plugin_index_module_assertThisInitialized(n)),window.addEventListener("touchend",map_plugin_index_module_assertThisInitialized(n)),n}return map_plugin_index_module_createClass(MapZoomToolbar,[{key:"destroy",value:function(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this),map_plugin_index_module_get(map_plugin_index_module_getPrototypeOf(MapZoomToolbar.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){var t=this;switch(e.type){case"mousedown":case"touchstart":var n=u.P6.getClosest(e.target,"svg"),i=null==n?void 0:n.dataset.delta;i&&(cancelAnimationFrame(this.animation),this.handler.down(),this.time=performance.now(),this.animateZoom(parseInt(i,10)),e.preventDefault(),e.stopPropagation());break;case"mouseup":case"touchend":this.animation&&(this.handler.up(function(){cancelAnimationFrame(t.animation),t.animation=null}),e.preventDefault(),e.stopPropagation())}}},{key:"setText",value:function(e){this.zoomIndicator.innerText="".concat(Math.round(100*Math.exp(e)),"%")}},{key:"animateZoom",value:function(e){var t=this;this.animation=requestAnimationFrame(function(n){t.map.zoom(e*(n-t.time)/1e3),t.time=n,t.animateZoom(e)})}}]),MapZoomToolbar}(u.k8),td=function(e){map_plugin_index_module_inherits(MapComponent,e);var t=map_plugin_index_module_createSuper(MapComponent);function MapComponent(e,n){map_plugin_index_module_classCallCheck(this,MapComponent),(i=t.call(this,e,{className:"psv-map psv--capture-event"})).plugin=n,i.state={visible:!1,maximized:!1,collapsed:!1,imgScale:1,zoom:i.config.defaultZoom,offset:{x:0,y:0},mouseX:null,mouseY:null,mousedown:!1,pinchDist:0,pinchAngle:0,hotspotPos:{},hotspotId:null,hotspotTooltip:null,markers:[],forceRender:!1,needsUpdate:!1,renderLoop:null,images:{}};var i,o=document.createElement("div");return o.className="psv-map__container",o.addEventListener("mousedown",map_plugin_index_module_assertThisInitialized(i)),window.addEventListener("mousemove",map_plugin_index_module_assertThisInitialized(i)),window.addEventListener("mouseup",map_plugin_index_module_assertThisInitialized(i)),o.addEventListener("touchstart",map_plugin_index_module_assertThisInitialized(i)),window.addEventListener("touchmove",map_plugin_index_module_assertThisInitialized(i)),window.addEventListener("touchend",map_plugin_index_module_assertThisInitialized(i)),o.addEventListener("wheel",map_plugin_index_module_assertThisInitialized(i)),i.canvas=document.createElement("canvas"),o.appendChild(i.canvas),i.overlay=document.createElement("div"),i.overlay.className="psv-map__overlay",o.appendChild(i.overlay),i.container.appendChild(o),i.container.addEventListener("transitionstart",map_plugin_index_module_assertThisInitialized(i)),i.container.addEventListener("transitionend",map_plugin_index_module_assertThisInitialized(i)),i.resetButton=new tu(map_plugin_index_module_assertThisInitialized(i)),i.maximizeButton=new tl(map_plugin_index_module_assertThisInitialized(i)),i.closeButton=new tr(map_plugin_index_module_assertThisInitialized(i)),i.compassButton=new ta(map_plugin_index_module_assertThisInitialized(i)),i.zoomToolbar=new tc(map_plugin_index_module_assertThisInitialized(i)),!function renderLoop(){i.isVisible()&&(i.state.needsUpdate||i.state.forceRender)&&(i.render(),i.state.needsUpdate=!1),i.state.renderLoop=requestAnimationFrame(renderLoop)}(),i.applyConfig(),i.hide(),i.config.visibleOnLoad||i.toggleCollapse(),i}return map_plugin_index_module_createClass(MapComponent,[{key:"config",get:function(){return this.plugin.config}},{key:"maximized",get:function(){return this.state.maximized}},{key:"collapsed",get:function(){return this.state.collapsed}},{key:"destroy",value:function(){window.removeEventListener("touchmove",this),window.removeEventListener("mousemove",this),window.removeEventListener("touchend",this),window.removeEventListener("mouseup",this),cancelAnimationFrame(this.state.renderLoop),map_plugin_index_module_get(map_plugin_index_module_getPrototypeOf(MapComponent.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case"mousedown":this.state.mouseX=e.clientX,this.state.mouseY=e.clientY,this.state.mousedown=!0,e.stopPropagation();break;case"touchstart":if(1===e.touches.length)this.state.mouseX=e.touches[0].clientX,this.state.mouseY=e.touches[0].clientY,this.state.mousedown=!0;else if(2===e.touches.length){var t=u.P6.getTouchData(e);this.state.pinchDist=t.distance,this.state.pinchAngle=t.angle;var n=t.center;this.state.mouseX=n.x,this.state.mouseY=n.y}e.stopPropagation(),e.preventDefault();break;case"mousemove":this.state.mousedown?(this.__move(e.clientX,e.clientY),e.stopPropagation()):this.__handleHotspots(e.clientX,e.clientY);break;case"touchmove":if(this.state.mousedown&&1===e.touches.length)this.__move(e.touches[0].clientX,e.touches[0].clientY),e.stopPropagation();else if(this.state.mousedown&&2===e.touches.length){var i=u.P6.getTouchData(e),o=(i.distance-this.state.pinchDist)/u.we.pixelRatio;this.zoom(o/100),this.__move(i.center.x,i.center.y),this.state.maximized&&!this.config.static&&this.viewer.dynamics.position.step({yaw:this.state.pinchAngle-i.angle},0),this.state.pinchDist=i.distance,this.state.pinchAngle=i.angle,e.stopPropagation()}break;case"mouseup":case"touchend":var r,a=(null===(r=e.changedTouches)||void 0===r?void 0:r[0])||e;this.state.mousedown&&(this.state.mousedown=!1,e.stopPropagation()),this.__clickHotspot(a.clientX,a.clientY);break;case"wheel":var s=e.deltaY/Math.abs(e.deltaY);this.zoom(-s/10),e.stopPropagation(),e.preventDefault();break;case"transitionstart":this.state.forceRender=!0;break;case"transitionend":this.state.maximized||(this.overlay.style.display=""),this.state.forceRender=!1,this.update()}}},{key:"applyConfig",value:function(){this.container.classList.remove("psv-map--top-right","psv-map--top-left","psv-map--bottom-right","psv-map--bottom-left"),this.container.classList.add("psv-map--".concat(this.config.position.join("-"))),this.container.style.width=this.config.size,this.container.style.height=this.config.size,this.overlay.innerHTML=getImageHtml(this.config.overlayImage),this.resetButton.applyConfig(),this.closeButton.applyConfig(),this.compassButton.applyConfig(),this.maximizeButton.applyConfig(),this.config.static&&(this.compassButton.rotate(0),this.overlay.style.transform=""),this.update()}},{key:"isVisible",value:function(){return this.state.visible&&!this.state.collapsed}},{key:"show",value:function(){map_plugin_index_module_get(map_plugin_index_module_getPrototypeOf(MapComponent.prototype),"show",this).call(this),this.update(),this.state.maximized||(this.overlay.style.display="")}},{key:"hide",value:function(){map_plugin_index_module_get(map_plugin_index_module_getPrototypeOf(MapComponent.prototype),"hide",this).call(this),this.state.forceRender=!1}},{key:"update",value:function(){this.state.needsUpdate=!0}},{key:"reload",value:function(e){delete this.state.images[this.config.imageUrl],this.config.imageUrl=e,this.state.imgScale=1,this.__loadImage(this.config.imageUrl,!0),this.recenter()}},{key:"reset",value:function(){this.state.zoom=this.config.defaultZoom,this.recenter()}},{key:"recenter",value:function(){this.state.offset.x=0,this.state.offset.y=0,this.update()}},{key:"toggleCollapse",value:function(){this.state.maximized&&this.toggleMaximized(),this.state.collapsed=!this.state.collapsed,u.P6.toggleClass(this.container,"psv-map--collapsed",this.state.collapsed),this.state.collapsed||this.reset(),this.closeButton.update()}},{key:"toggleMaximized",value:function(){this.state.collapsed||(this.state.maximized=!this.state.maximized,u.P6.toggleClass(this.container,"psv-map--maximized",this.state.maximized),this.state.maximized&&(this.overlay.style.display="none"),this.maximizeButton.update())}},{key:"zoom",value:function(e){this.state.zoom=c.M8C.clamp(this.state.zoom+e,this.config.minZoom,this.config.maxZoom),this.update()}},{key:"setMarkers",value:function(e){this.state.markers=e,this.update()}},{key:"render",value:function(){var e=this;if(this.config.center){var t=this.__loadImage(this.config.imageUrl);if(t){this.state.hotspotPos={},this.__resetHotspot();var n=this.viewer.getPosition().yaw,i=Math.exp(this.state.zoom)/this.state.imgScale,o={x:this.config.center.x*this.state.imgScale,y:this.config.center.y*this.state.imgScale},r={x:this.state.offset.x*this.state.imgScale,y:this.state.offset.y*this.state.imgScale},a=this.config.rotation,s=this.config.static?0:n+a;this.config.static||(this.overlay.style.transform="rotate(".concat(-s,"rad)"),this.compassButton.rotate(s)),this.zoomToolbar.setText(this.state.zoom),this.canvas.width=this.container.clientWidth*u.we.pixelRatio,this.canvas.height=this.container.clientHeight*u.we.pixelRatio;var l=u.P6.getPosition(this.canvas),c=this.canvas.width,d=this.canvas.height,p=c/2/u.we.pixelRatio,_=d/2/u.we.pixelRatio,h=this.canvas.getContext("2d");h.clearRect(0,0,c,d);var f=t.width,g=t.height;h.save(),h.translate(c/2,d/2),h.rotate(-s),h.scale(i,i),canvasShadow(h,0,0,10),drawImageHighDpi(h,t,-o.x-r.x,-o.y-r.y,f,g),h.restore(),[].concat(map_plugin_index_module_toConsumableArray(this.config.hotspots),map_plugin_index_module_toConsumableArray(this.state.markers)).forEach(function(t){var n=e.__loadImage(t.image||e.config.spotImage),c=map_plugin_index_module_objectSpread({},r);if("yaw"in t&&"distance"in t){var d=u.P6.parseAngle(t.yaw)+a;c.x+=Math.sin(-d)*t.distance*e.state.imgScale,c.y+=Math.cos(-d)*t.distance*e.state.imgScale}else if("x"in t&&"y"in t)c.x+=o.x-t.x*e.state.imgScale,c.y+=o.y-t.y*e.state.imgScale;else{u.P6.logWarn("Hotspot ".concat(t.id," is missing position (yaw+distance or x+y)"));return}var f=projectPoint(c,s,i),g=p-f.x,m=_-f.y,y=t.size||e.config.spotSize;e.state.hotspotPos[t.id]={x:g+l.x,y:m+l.y,s:y},h.save(),h.translate(g*u.we.pixelRatio,m*u.we.pixelRatio),canvasShadow(h,2,2,4),n?drawImageCentered(h,n,y):(h.fillStyle=t.color||e.config.spotColor,h.beginPath(),h.arc(0,0,y*u.we.pixelRatio/2,0,2*Math.PI),h.fill()),h.restore()});var m=this.__loadImage(this.config.pinImage);if(m){var y=projectPoint(r,s,i),b=p-y.x,x=_-y.y,w=this.config.pinSize,P=this.config.static?n+a:0;h.save(),h.translate(b*u.we.pixelRatio,x*u.we.pixelRatio),h.rotate(P),canvasShadow(h,2,2,4),drawImageCentered(h,m,w),h.restore()}}}}},{key:"__move",value:function(e,t){var n=this.viewer.getPosition().yaw,i=Math.exp(this.state.zoom),o=unprojectPoint({x:this.state.mouseX-e,y:this.state.mouseY-t},this.config.static?0:n+this.config.rotation,i);this.state.offset.x+=o.x,this.state.offset.y+=o.y,this.update(),this.state.mouseX=e,this.state.mouseY=t}},{key:"__findHotspot",value:function(e,t){for(var n=this.config.spotSize/2,i=null,o=0,r=Object.entries(this.state.hotspotPos);o<r.length;o++){var a=map_plugin_index_module_slicedToArray(r[o],2),s=a[0],l=a[1],u=l.x,c=l.y;if(e>u-n&&e<u+n&&t>c-n&&t<c+n){i=s;break}}return i}},{key:"__handleHotspots",value:function(e,t){var n=this.__findHotspot(e,t);if(this.state.hotspotId!==n){if(this.__resetHotspot(),n&&(i=n.startsWith(tn)?null===(o=this.state.markers.find(function(e){return e.id===n}))||void 0===o?void 0:o.tooltip:null===(r=this.config.hotspots.find(function(e){return e.id===n}))||void 0===r?void 0:r.tooltip)){var i,o,r,a=this.state.hotspotPos[n],s=u.P6.getPosition(this.viewer.container);this.state.hotspotTooltip=this.viewer.createTooltip({content:i,left:a.x-s.x,top:a.y-s.y,box:{width:a.s,height:a.s}})}this.state.hotspotId=n}}},{key:"__clickHotspot",value:function(e,t){var n=this.__findHotspot(e,t);if(n){if(this.plugin.dispatchEvent(new tt(n)),n.startsWith(tn)){var i=n.substring(tn.length);this.viewer.getPlugin("markers").gotoMarker(i)}this.maximized&&this.toggleMaximized()}this.__resetHotspot()}},{key:"__resetHotspot",value:function(){var e;null===(e=this.state.hotspotTooltip)||void 0===e||e.hide(),this.state.hotspotTooltip=null,this.state.hotspotId=null}},{key:"__loadImage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;if(!this.state.images[e]){var i=loadImage(e);return this.state.images[e]={loading:!0,value:i},i.onload=function(){if(n&&Math.max(i.width,i.height)>u.we.maxCanvasWidth){t.state.imgScale=u.we.maxCanvasWidth/Math.max(i.width,i.height);var o=document.createElement("canvas");o.width=i.width*t.state.imgScale,o.height=i.height*t.state.imgScale,o.getContext("2d").drawImage(i,0,0,o.width,o.height),t.state.images[e].value=o}t.state.images[e].loading=!1,t.update(),n&&t.show()},null}return this.state.images[e].loading?null:this.state.images[e].value}}]),MapComponent}(u.k8),tp=u.P6.getConfigParser({imageUrl:null,center:null,rotation:0,size:"200px",position:["bottom","left"],visibleOnLoad:!0,overlayImage:'<svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">\n    <defs>\n        <radialGradient id="gradient">\n            <stop offset="80%" stop-color="rgba(255, 255, 255, 0)"/>\n            <stop offset="90%" stop-color="rgba(255, 255, 255, .5)"/>\n        </radialGradient>\n    </defs>\n    <circle cx="250" cy="250" r="250" fill="url(#gradient)"/>\n    <circle cx="250" cy="250" r="245" fill="none" stroke="rgba(255, 255, 255, 0.8)" stroke-width="10"/>\n    <g fill="#222">\n        <rect x="1" y="248" width="18" height="4"/>\n        <rect x="481" y="248" width="18" height="4"/>\n        <rect x="248" y="1" width="4" height="18"/>\n        <rect x="248" y="481" width="4" height="18"/>\n    </g>\n</svg>',compassImage:null,pinImage:'<svg viewBox="-20 -20 740 740" xmlns="http://www.w3.org/2000/svg">\n    <path d="M350 540a189.4 189.4 0 0 1-189.2-189.1c0-92.4 47.7-143 98.3-225L350-20l90.9 146c50.6 81.9 98.2 132.5 98.2 224.9A189.4 189.4 0 0 1 350 540z" fill="white"/>\n    <circle cx="350" cy="350" r="150" fill="#1E78E6"/>\n</svg>\n',pinSize:35,spotColor:"white",spotImage:null,spotSize:15,static:!1,defaultZoom:100,minZoom:20,maxZoom:200,hotspots:[]},{overlayImage:function(e,t){var n=t.rawConfig;return n.compassImage?(u.P6.logWarn('map: "compassImage" is deprecated, use "overlayImage" instead'),n.compassImage):e},position:function(e,t){var n=t.defValue;return u.P6.cleanCssPosition(e,{allowCenter:!1,cssOrder:!0})||n},rotation:function(e){return u.P6.parseAngle(e)},defaultZoom:function(e){return Math.log(e/100)},maxZoom:function(e){return Math.log(e/100)},minZoom:function(e){return Math.log(e/100)}}),t_=function(e){map_plugin_index_module_inherits(MapPlugin,e);var t=map_plugin_index_module_createSuper(MapPlugin);function MapPlugin(e,n){var i;return map_plugin_index_module_classCallCheck(this,MapPlugin),(i=t.call(this,e,n)).component=new td(i.viewer,map_plugin_index_module_assertThisInitialized(i)),i}return map_plugin_index_module_createClass(MapPlugin,[{key:"init",value:function(){map_plugin_index_module_get(map_plugin_index_module_getPrototypeOf(MapPlugin.prototype),"init",this).call(this),this.markers=this.viewer.getPlugin("markers"),this.viewer.addEventListener(u.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(u.U3.SizeUpdatedEvent.type,this),this.viewer.addEventListener(u.U3.ReadyEvent.type,this,{once:!0}),this.setHotspots(this.config.hotspots,!1),this.markers&&this.markers.addEventListener("set-markers",this)}},{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(u.U3.SizeUpdatedEvent.type,this),this.viewer.removeEventListener(u.U3.ReadyEvent.type,this),this.markers&&this.markers.removeEventListener("set-markers",this),this.component.destroy(),delete this.markers,map_plugin_index_module_get(map_plugin_index_module_getPrototypeOf(MapPlugin.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){switch(e.type){case u.U3.ReadyEvent.type:this.component.reload(this.config.imageUrl);break;case u.U3.PositionUpdatedEvent.type:this.component.update();break;case u.U3.SizeUpdatedEvent.type:this.component.maximized&&this.component.update();break;case"set-markers":this.component.setMarkers(this.__markersToHotspots(e.markers))}}},{key:"setOptions",value:function(e){map_plugin_index_module_get(map_plugin_index_module_getPrototypeOf(MapPlugin.prototype),"setOptions",this).call(this,e),this.component.applyConfig()}},{key:"hide",value:function(){this.component.hide()}},{key:"show",value:function(){this.component.show()}},{key:"close",value:function(){this.component.collapsed||this.component.toggleCollapse()}},{key:"open",value:function(){this.component.collapsed&&this.component.toggleCollapse()}},{key:"minimize",value:function(){this.component.maximized&&this.component.toggleMaximized()}},{key:"maximize",value:function(){this.component.maximized||this.component.toggleMaximized()}},{key:"setImage",value:function(e,t,n){u.P6.isNil(n)||(this.config.rotation=u.P6.parseAngle(n)),u.P6.isNil(t)||(this.config.center=t),this.component.reload(e)}},{key:"setCenter",value:function(e){this.config.center=e,this.component.recenter()}},{key:"setHotspots",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=[],i=1;null==e||e.forEach(function(e){e.id?n.includes(e.id)?u.P6.logWarn('Duplicated hotspot id "'.concat(e.id)):n.push(e.id):e.id="__generated__"+i++}),this.config.hotspots=e||[],t&&this.component.update()}},{key:"clearHotspots",value:function(){this.setHotspots(null)}},{key:"__markersToHotspots",value:function(e){return e.filter(function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.map}).map(function(e){var t,n=e.data.map,i=map_plugin_index_module_objectSpread(map_plugin_index_module_objectSpread({},n),{},{id:tn+e.id,tooltip:null===(t=e.config.tooltip)||void 0===t?void 0:t.content});if("distance"in n)i.yaw=e.state.position.yaw;else if(!("x"in n)||!("y"in n))return u.P6.logWarn("Marker ".concat(e.id,' "map" data is missing position (distance or x+y)')),null;return i}).filter(function(e){return e})}}]),MapPlugin}(u.Yc);function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,o){var r=Object.create((t&&t.prototype instanceof Generator?t:Generator).prototype);return i(r,"_invoke",{value:makeInvokeMethod(e,n,new Context(o||[]))}),r}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var l={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var u={};define(u,r,function(){return this});var c=Object.getPrototypeOf,d=c&&c(c(values([])));d&&d!==t&&n.call(d,r)&&(u=d);var p=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(u);function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){define(e,t,function(e){return this._invoke(t,e)})})}function AsyncIterator(e,t){var o;function invoke(i,o,r,a){var s=tryCatch(e[i],e,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==cubemap_adapter_index_module_typeof(u)&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){invoke("next",e,r,a)},function(e){invoke("throw",e,r,a)}):t.resolve(u).then(function(e){l.value=e,r(l)},function(e){return invoke("throw",e,r,a)})}a(s.arg)}i(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t(function(t,i){invoke(e,n,t,i)})}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var i="suspendedStart";return function(o,r){if("executing"===i)throw Error("Generator is already running");if("completed"===i){if("throw"===o)throw r;return doneResult()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=maybeInvokeDelegate(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=tryCatch(e,t,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}function maybeInvokeDelegate(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=TypeError("The iterator does not provide a '"+n+"' method")),l;var o=tryCatch(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,l;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):r:(t.method="throw",t.arg=TypeError("iterator result is not an object"),t.delegate=null,l)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,next=function next(){for(;++i<e.length;)if(n.call(e,i))return next.value=e[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,i(p,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),i(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,a,function(){return this}),e.AsyncIterator=AsyncIterator,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new AsyncIterator(wrap(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},defineIteratorMethods(p),define(p,s,"Generator"),define(p,r,function(){return this}),define(p,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(n,i){return r.type="throw",r.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:values(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function asyncGeneratorStep(e,t,n,i,o,r,a){try{var s=e[r](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(i,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function _next(e){asyncGeneratorStep(r,i,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(r,i,o,_next,_throw,"throw",e)}_next(void 0)})}}function cubemap_adapter_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function cubemap_adapter_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,cubemap_adapter_index_module_toPropertyKey(i.key),i)}}function cubemap_adapter_index_module_createClass(e,t,n){return t&&cubemap_adapter_index_module_defineProperties(e.prototype,t),n&&cubemap_adapter_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cubemap_adapter_index_module_toPropertyKey(e){var t=cubemap_adapter_index_module_toPrimitive(e,"string");return"symbol"===cubemap_adapter_index_module_typeof(t)?t:String(t)}function cubemap_adapter_index_module_toPrimitive(e,t){if("object"!==cubemap_adapter_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==cubemap_adapter_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function cubemap_adapter_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cubemap_adapter_index_module_setPrototypeOf(e,t)}function cubemap_adapter_index_module_setPrototypeOf(e,t){return(cubemap_adapter_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cubemap_adapter_index_module_createSuper(e){var t=cubemap_adapter_index_module_isNativeReflectConstruct();return function(){var n,i=cubemap_adapter_index_module_getPrototypeOf(e);if(t){var o=cubemap_adapter_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return cubemap_adapter_index_module_possibleConstructorReturn(this,n)}}function cubemap_adapter_index_module_possibleConstructorReturn(e,t){if(t&&("object"===cubemap_adapter_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return cubemap_adapter_index_module_assertThisInitialized(e)}function cubemap_adapter_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cubemap_adapter_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function cubemap_adapter_index_module_getPrototypeOf(e){return(cubemap_adapter_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cubemap_adapter_index_module_typeof(e){return(cubemap_adapter_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t_.id="map",t_.configParser=tp,t_.readonlyOptions=["imageUrl","center","visibleOnLoad","hotspots","defaultZoom"],u.Of.lang.map="Map",u.Of.lang.mapMaximize="Maximize",u.Of.lang.mapMinimize="Minimize",u.Of.lang.mapReset="Reset";/*!
 * PhotoSphereViewer.CubemapAdapter 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var th=[0,2,4,5,3,1],tv=["left","right","top","bottom","back","front"];function isCubemap(e){return e&&"object"===cubemap_adapter_index_module_typeof(e)&&tv.every(function(t){return t in e})}function cleanCubemapArray(e){var t=[];if(6!==e.length)throw new u.Il("A cubemap array must contain exactly 6 images.");for(var n=0;n<6;n++)t[n]=e[th[n]];return t}function cleanCubemap(e){var t=[];if(!isCubemap(e))throw new u.Il("A cubemap object must contain exactly left, front, right, back, top, bottom images.");return tv.forEach(function(n,i){t[i]=e[n]}),t}var tf=u.P6.getConfigParser({flipTopBottom:!1,blur:!1}),tg=function(e){cubemap_adapter_index_module_inherits(CubemapAdapter,e);var t,n,i,o=cubemap_adapter_index_module_createSuper(CubemapAdapter);function CubemapAdapter(e,t){var n;return cubemap_adapter_index_module_classCallCheck(this,CubemapAdapter),(n=o.call(this,e)).config=tf(t),n}return cubemap_adapter_index_module_createClass(CubemapAdapter,[{key:"supportsTransition",value:function(){return!0}},{key:"supportsPreload",value:function(){return!0}},{key:"loadTexture",value:(t=_asyncToGenerator(_regeneratorRuntime().mark(function _callee(e){var t,n,i;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.viewer.config.fisheye&&u.P6.logWarn("fisheye effect with cubemap texture can generate distorsion"),t=Array.isArray(e)||isCubemap(e)?{type:"separate",paths:e}:e,o.t0=t.type,o.next="separate"===o.t0?5:"stripe"===o.t0?10:"net"===o.t0?14:18;break;case 5:return i=Array.isArray(t.paths)?cleanCubemapArray(t.paths):cleanCubemap(t.paths),o.next=8,this.loadTexturesSeparate(i);case 8:case 12:case 16:return n=o.sent,o.abrupt("break",19);case 10:return o.next=12,this.loadTexturesStripe(t.path,t.order);case 14:return o.next=16,this.loadTexturesNet(t.path);case 18:throw new u.Il("Invalid cubemap panorama, are you using the right adapter?");case 19:return o.abrupt("return",{panorama:e,texture:n});case 20:case"end":return o.stop()}},_callee,this)})),function(e){return t.apply(this,arguments)})},{key:"loadTexturesSeparate",value:function(e){for(var t=this,n=[],i=[0,0,0,0,0,0],_loop=function(o){n.push(t.viewer.textureLoader.loadImage(e[o],function(e){i[o]=e,t.viewer.loader.setProgress(u.P6.sum(i)/6)}).then(function(e){return t.createCubemapTexture(e)}))},o=0;o<6;o++)_loop(o);return Promise.all(n)}},{key:"createCubemapTexture",value:function(e){if(e.width!==e.height&&u.P6.logWarn("Invalid cubemap image, the width should equal the height"),this.config.blur||e.width>u.we.maxTextureWidth){var t=Math.min(1,u.we.maxCanvasWidth/e.width),n=document.createElement("canvas");n.width=e.width*t,n.height=e.height*t;var i=n.getContext("2d");return this.config.blur&&(i.filter="blur(1px)"),i.drawImage(e,0,0,n.width,n.height),u.P6.createTexture(n)}return u.P6.createTexture(e)}},{key:"loadTexturesStripe",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function _callee2(e){var t,n,i,o,r,a,s,l,c=this,d=arguments;return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:["left","front","right","back","top","bottom"],p.next=3,this.viewer.textureLoader.loadImage(e,function(e){return c.viewer.loader.setProgress(e)});case 3:for((n=p.sent).width!==6*n.height&&u.P6.logWarn("Invalid cubemap image, the width should be six times the height"),i=Math.min(1,u.we.maxCanvasWidth/n.height),o=n.height*i,r={},a=0;a<6;a++)(s=document.createElement("canvas")).width=o,s.height=o,l=s.getContext("2d"),this.config.blur&&(l.filter="blur(1px)"),l.drawImage(n,n.height*a,0,n.height,n.height,0,0,o,o),r[t[a]]=u.P6.createTexture(s);return p.abrupt("return",cleanCubemap(r));case 10:case"end":return p.stop()}},_callee2,this)})),function(e){return n.apply(this,arguments)})},{key:"loadTexturesNet",value:(i=_asyncToGenerator(_regeneratorRuntime().mark(function _callee3(e){var t,n,i,o,r,a,s,l,c=this;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,this.viewer.textureLoader.loadImage(e,function(e){return c.viewer.loader.setProgress(e)});case 2:for((t=d.sent).width/4!=t.height/3&&u.P6.logWarn("Invalid cubemap image, the width should be 4/3rd of the height"),n=Math.min(1,u.we.maxCanvasWidth/(t.width/4)),i=t.width/4*n,o=[[0,1/3],[.5,1/3],[1/4,0],[1/4,2/3],[3/4,1/3],[1/4,1/3]],r=[],a=0;a<6;a++)(s=document.createElement("canvas")).width=i,s.height=i,l=s.getContext("2d"),this.config.blur&&(l.filter="blur(1px)"),l.drawImage(t,t.width*o[a][0],t.height*o[a][1],t.width/4,t.height/3,0,0,i,i),r[a]=u.P6.createTexture(s);return d.abrupt("return",r);case 10:case"end":return d.stop()}},_callee3,this)})),function(e){return i.apply(this,arguments)})},{key:"createMesh",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=2*u.tl.SPHERE_RADIUS*e,n=new c.DvJ(t,t,t).scale(1,1,-1),i=[],o=0;o<6;o++)i.push(u.F6.createOverlayMaterial({additionalUniforms:{rotation:{value:0}},overrideVertexShader:"\nuniform float rotation;\nvarying vec2 vUv;\nconst float mid = 0.5;\nvoid main() {\n  if (rotation == 0.0) {\n    vUv = uv;\n  } else {\n    vUv = vec2(\n      cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n      cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n    );\n  }\n  gl_Position = projectionMatrix *  modelViewMatrix * vec4( position, 1.0 );\n}"}));return new c.Kj0(n,i)}},{key:"setTexture",value:function(e,t){for(var n=t.texture,i="net"===t.panorama.type?!this.config.flipTopBottom:this.config.flipTopBottom,o=0;o<6;o++)i&&(2===o||3===o)&&this.__setUniform(e,o,"rotation",Math.PI),this.__setUniform(e,o,u.F6.OVERLAY_UNIFORMS.panorama,n[o]);this.setOverlay(e,null,0)}},{key:"setOverlay",value:function(e,t,n){for(var i=0;i<6;i++)this.__setUniform(e,i,u.F6.OVERLAY_UNIFORMS.overlayOpacity,n),t?this.__setUniform(e,i,u.F6.OVERLAY_UNIFORMS.overlay,t.texture[i]):this.__setUniform(e,i,u.F6.OVERLAY_UNIFORMS.overlay,new c.xEZ)}},{key:"setTextureOpacity",value:function(e,t){for(var n=0;n<6;n++)this.__setUniform(e,n,u.F6.OVERLAY_UNIFORMS.globalOpacity,t),e.material[n].transparent=t<1}},{key:"disposeTexture",value:function(e){var t;null===(t=e.texture)||void 0===t||t.forEach(function(e){return e.dispose()})}},{key:"__setUniform",value:function(e,t,n,i){e.material[t].uniforms[n].value instanceof c.xEZ&&e.material[t].uniforms[n].value.dispose(),e.material[t].uniforms[n].value=i}}]),CubemapAdapter}(u.F6);function cubemap_tiles_adapter_index_module_get(){return(cubemap_tiles_adapter_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=cubemap_tiles_adapter_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cubemap_tiles_adapter_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cubemap_tiles_adapter_index_module_getPrototypeOf(e)););return e}function cubemap_tiles_adapter_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cubemap_tiles_adapter_index_module_setPrototypeOf(e,t)}function cubemap_tiles_adapter_index_module_setPrototypeOf(e,t){return(cubemap_tiles_adapter_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cubemap_tiles_adapter_index_module_createSuper(e){var t=cubemap_tiles_adapter_index_module_isNativeReflectConstruct();return function(){var n,i=cubemap_tiles_adapter_index_module_getPrototypeOf(e);if(t){var o=cubemap_tiles_adapter_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return cubemap_tiles_adapter_index_module_possibleConstructorReturn(this,n)}}function cubemap_tiles_adapter_index_module_possibleConstructorReturn(e,t){if(t&&("object"===cubemap_tiles_adapter_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return cubemap_tiles_adapter_index_module_assertThisInitialized(e)}function cubemap_tiles_adapter_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cubemap_tiles_adapter_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function cubemap_tiles_adapter_index_module_getPrototypeOf(e){return(cubemap_tiles_adapter_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cubemap_tiles_adapter_index_module_typeof(e){return(cubemap_tiles_adapter_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cubemap_tiles_adapter_index_module_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cubemap_tiles_adapter_index_module_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cubemap_tiles_adapter_index_module_ownKeys(Object(n),!0).forEach(function(t){cubemap_tiles_adapter_index_module_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cubemap_tiles_adapter_index_module_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function cubemap_tiles_adapter_index_module_defineProperty(e,t,n){return(t=cubemap_tiles_adapter_index_module_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cubemap_tiles_adapter_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function cubemap_tiles_adapter_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,cubemap_tiles_adapter_index_module_toPropertyKey(i.key),i)}}function cubemap_tiles_adapter_index_module_createClass(e,t,n){return t&&cubemap_tiles_adapter_index_module_defineProperties(e.prototype,t),n&&cubemap_tiles_adapter_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cubemap_tiles_adapter_index_module_toPropertyKey(e){var t=cubemap_tiles_adapter_index_module_toPrimitive(e,"string");return"symbol"===cubemap_tiles_adapter_index_module_typeof(t)?t:String(t)}function cubemap_tiles_adapter_index_module_toPrimitive(e,t){if("object"!==cubemap_tiles_adapter_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==cubemap_tiles_adapter_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}tg.id="cubemap",tg.supportsDownload=!1,tg.supportsOverlay=!0;/*!
 * PhotoSphereViewer.CubemapTilesAdapter 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var tm=function(){function Task(e,t,n){cubemap_tiles_adapter_index_module_classCallCheck(this,Task),this.id=e,this.priority=t,this.fn=n,this.status=1}return cubemap_tiles_adapter_index_module_createClass(Task,[{key:"start",value:function(){var e=this;return this.status=2,this.fn(this).then(function(){e.status=4},function(){e.status=5})}},{key:"cancel",value:function(){this.status=3}},{key:"isCancelled",value:function(){return 3===this.status}}]),Task}(),ty=function(){function Queue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;cubemap_tiles_adapter_index_module_classCallCheck(this,Queue),this.concurency=e,this.runningTasks={},this.tasks={}}return cubemap_tiles_adapter_index_module_createClass(Queue,[{key:"enqueue",value:function(e){this.tasks[e.id]=e}},{key:"clear",value:function(){Object.values(this.tasks).forEach(function(e){return e.cancel()}),this.tasks={},this.runningTasks={}}},{key:"setPriority",value:function(e,t){var n=this.tasks[e];n&&(n.priority=t,0===n.status&&(n.status=1))}},{key:"disableAllTasks",value:function(){Object.values(this.tasks).forEach(function(e){e.status=0})}},{key:"start",value:function(){var e=this;if(!(Object.keys(this.runningTasks).length>=this.concurency)){var t=Object.values(this.tasks).filter(function(e){return 1===e.status}).sort(function(e,t){return t.priority-e.priority}).pop();t&&(this.runningTasks[t.id]=!0,t.start().then(function(){t.isCancelled()||(delete e.tasks[t.id],delete e.runningTasks[t.id],e.start())}),this.start())}}}]),Queue}();function checkTilesLevels(e){var t=0;e.forEach(function(n,i){if(!n.zoomRange||2!==n.zoomRange.length)throw new u.Il("Tiles level ".concat(i,' is missing "zoomRange" property'));if(n.zoomRange[0]>=n.zoomRange[1]||n.zoomRange[0]!==t||0===i&&0!==n.zoomRange[0]||i===e.length-1&&100!==n.zoomRange[1])throw new u.Il('Tiles levels\' "zoomRange" are not orderer or are not covering the whole 0-100 range');t=n.zoomRange[1]})}function getTileIndexByZoomLevel(e,t){return e.findIndex(function(e){return t>=e.zoomRange[0]&&t<=e.zoomRange[1]})}function buildErrorMaterial(){var e=document.createElement("canvas");e.width=512,e.height=512;var t=e.getContext("2d");t.fillStyle="#333",t.fillRect(0,0,e.width,e.height),t.font="".concat(e.width/5,"px serif"),t.fillStyle="#a22",t.textAlign="center",t.textBaseline="middle",t.fillText("⚠",e.width/2,e.height/2);var n=new c.ROQ(e);return new c.vBJ({map:n})}function createWireFrame(e){var t=new c.Uk6(e),n=new c.ejS(t);return n.material.depthTest=!1,n.material.opacity=.25,n.material.transparent=!0,n}var tb=["dodgerblue","limegreen","indianred"];function buildDebugTexture(e,t,n){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");o.fillStyle=tb[t%tb.length],o.fillRect(0,0,i.width,i.height),o.globalCompositeOperation="multiply",o.drawImage(e,0,0);var r=e.width/7;return o.globalCompositeOperation="source-over",o.fillStyle="white",o.font="".concat(r,"px monospace"),o.textAlign="center",n.split("\n").forEach(function(t,n){o.fillText(t,e.width/2,e.height/2+r*(.3+n))}),i}function isMultiTiles(e){return!!e.levels}function computeTileConfig(e,t,n){return cubemap_tiles_adapter_index_module_objectSpread(cubemap_tiles_adapter_index_module_objectSpread({},e),{},{level:t,tileSize:e.faceSize/e.nbTiles,facesByTile:n.CUBE_SEGMENTS/e.nbTiles})}function getTileConfig(e,t,n){var i,o;return isMultiTiles(e)?(o=getTileIndexByZoomLevel(e.levels,t),i=e.levels[o]):(o=0,i=cubemap_tiles_adapter_index_module_objectSpread(cubemap_tiles_adapter_index_module_objectSpread({},e),{},{zoomRange:[0,100]})),computeTileConfig(i,o,n)}function getTileConfigByIndex(e,t,n){return isMultiTiles(e)&&e.levels[t]?computeTileConfig(e.levels[t],t,n):null}function checkPanoramaConfig(e,t){if("object"!==cubemap_tiles_adapter_index_module_typeof(e)||!e.tileUrl)throw new u.Il("Invalid panorama configuration, are you using the right adapter?");isMultiTiles(e)?(e.levels.forEach(function(e){return checkTile(e,t)}),checkTilesLevels(e.levels)):checkTile(e,t)}function checkTile(e,t){if(!e.faceSize||!e.nbTiles)throw new u.Il("Invalid panorama configuration, are you using the right adapter?");if(e.nbTiles>t.CUBE_SEGMENTS)throw new u.Il("Panorama nbTiles must not be greater than ".concat(t.CUBE_SEGMENTS,"."));if(!c.M8C.isPowerOfTwo(e.nbTiles))throw new u.Il("Panorama nbTiles must be power of 2.")}function isTopOrBottom(e){return 2===e||3===e}var tx="originaluv",tw=["left","right","top","bottom","back","front"];function tileId(e){return"".concat(e.face,":").concat(e.col,"x").concat(e.row,"/").concat(e.config.level)}function prettyTileId(e){return"".concat(tileId(e),"\n").concat(tw[e.face])}var tP=u.P6.getConfigParser({flipTopBottom:!1,showErrorTile:!0,baseBlur:!0,blur:!1,debug:!1}),tk=new c.iWj,tE=new c.yGw,tO=new c.Pa4,tC=function(e){cubemap_tiles_adapter_index_module_inherits(CubemapTilesAdapter,e);var t=cubemap_tiles_adapter_index_module_createSuper(CubemapTilesAdapter);function CubemapTilesAdapter(e,n){var i;return cubemap_tiles_adapter_index_module_classCallCheck(this,CubemapTilesAdapter),(i=t.call(this,e)).state={tileConfig:null,tiles:{},faces:{},geom:null,materials:[],errorMaterial:null,inTransition:!1},i.queue=new ty,i.config=tP(n),i.viewer.config.requestHeaders?u.P6.logWarn('CubemapTilesAdapter fallbacks to file loader because "requestHeaders" where provided. Consider removing "requestHeaders" if you experience performances issues.'):(i.loader=new c.S3k,i.viewer.config.withCredentials&&i.loader.setWithCredentials(!0)),i.viewer.addEventListener(u.U3.PositionUpdatedEvent.type,cubemap_tiles_adapter_index_module_assertThisInitialized(i)),i.viewer.addEventListener(u.U3.ZoomUpdatedEvent.type,cubemap_tiles_adapter_index_module_assertThisInitialized(i)),i}return cubemap_tiles_adapter_index_module_createClass(CubemapTilesAdapter,[{key:"destroy",value:function(){var e,t,n;this.viewer.addEventListener(u.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(u.U3.ZoomUpdatedEvent.type,this),this.__cleanup(),null===(e=this.state.errorMaterial)||void 0===e||null===(t=e.map)||void 0===t||t.dispose(),null===(n=this.state.errorMaterial)||void 0===n||n.dispose(),delete this.state.geom,delete this.state.errorMaterial,cubemap_tiles_adapter_index_module_get(cubemap_tiles_adapter_index_module_getPrototypeOf(CubemapTilesAdapter.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){(e instanceof u.U3.PositionUpdatedEvent||e instanceof u.U3.ZoomUpdatedEvent)&&this.__refresh()}},{key:"supportsTransition",value:function(e){return!!e.baseUrl}},{key:"supportsPreload",value:function(e){return!!e.baseUrl}},{key:"loadTexture",value:function(e){try{checkPanoramaConfig(e,{CUBE_SEGMENTS:16})}catch(e){return Promise.reject(e)}if(!e.baseUrl)return Promise.resolve({panorama:e,texture:null});if(!this.adapter){if(!tg)throw new u.Il("CubemapTilesAdapter requires CubemapAdapter");this.adapter=new tg(this.viewer,{blur:this.config.baseBlur})}return this.adapter.loadTexture(e.baseUrl).then(function(t){return{panorama:e,texture:t.texture}})}},{key:"createMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=2*u.tl.SPHERE_RADIUS*e,n=new c.DvJ(t,t,t,16,16,16).scale(1,1,-1).toNonIndexed();n.clearGroups();for(var i=0,o=0;i<9216;i+=6)n.addGroup(i,6,o++);return n.setAttribute(tx,n.getAttribute("uv").clone()),new c.Kj0(n,[])}},{key:"setTexture",value:function(e,t,n){var i=this,o=t.texture;if(n){this.state.inTransition=!0,this.__setTexture(e,o);return}if(this.__cleanup(),this.__setTexture(e,o),this.state.materials=e.material,this.state.geom=e.geometry,this.state.geom.setAttribute("uv",this.state.geom.getAttribute(tx).clone()),this.config.debug){var r=createWireFrame(this.state.geom);this.viewer.renderer.addObject(r),this.viewer.renderer.setSphereCorrection(this.viewer.config.sphereCorrection,r)}setTimeout(function(){return i.__refresh()})}},{key:"__setTexture",value:function(e,t){for(var n=0;n<6;n++){var i=void 0;t?(this.config.flipTopBottom&&isTopOrBottom(n)&&(t[n].center=new c.FM8(.5,.5),t[n].rotation=Math.PI),i=new c.vBJ({map:t[n]})):i=new c.vBJ({opacity:0,transparent:!0});for(var o=0;o<256;o++)e.material.push(i)}}},{key:"setTextureOpacity",value:function(e,t){for(var n=0;n<6;n++)e.material[256*n].opacity=t,e.material[256*n].transparent=t<1}},{key:"setOverlay",value:function(){throw new u.Il("EquirectangularTilesAdapter does not support overlay")}},{key:"disposeTexture",value:function(e){var t;null===(t=e.texture)||void 0===t||t.forEach(function(e){return e.dispose()})}},{key:"__refresh",value:function(){if(this.state.geom&&!this.state.inTransition){var e=this.viewer.renderer.camera;e.updateMatrixWorld(),tE.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),tk.setFromProjectionMatrix(tE);for(var t=this.viewer.config.panorama,n=getTileConfig(t,this.viewer.getZoomLevel(),{CUBE_SEGMENTS:16}),i=this.state.geom.getAttribute("position"),o={},r=0;r<9216;r+=1)if(tO.fromBufferAttribute(i,r),tO.applyEuler(this.viewer.renderer.sphereCorrection),tk.containsPoint(tO))for(var a=Math.floor(r/1536),s=Math.floor((r-1536*a)/6),l=Math.floor(s/16),u=s-16*l,c=n;c;){var d=Math.floor(l/c.facesByTile),p=Math.floor(u/c.facesByTile),_=tO.angleTo(this.viewer.state.direction),h={face:a,row:d,col:p,angle:_,config:c,url:null};this.config.flipTopBottom&&isTopOrBottom(a)&&(p=c.nbTiles-p-1,d=c.nbTiles-d-1);var f=tileId(h);if(o[f]){o[f].angle=Math.min(o[f].angle,_);break}if(h.url=t.tileUrl(tw[a],p,d,c.level),h.url){o[f]=h;break}c=getTileConfigByIndex(t,c.level-1,{CUBE_SEGMENTS:16})}this.state.tileConfig=n,this.__loadTiles(Object.values(o))}}},{key:"__loadTiles",value:function(e){var t=this;this.queue.disableAllTasks(),e.forEach(function(e){var n=tileId(e);t.state.tiles[n]?t.queue.setPriority(n,e.angle):(t.state.tiles[n]=!0,t.queue.enqueue(new tm(n,e.angle,function(n){return t.__loadTile(e,n)})))}),this.queue.start()}},{key:"__loadTile",value:function(e,t){var n=this;return this.__loadImage(e.url).then(function(i){if(!t.isCancelled()){n.config.debug&&(i=buildDebugTexture(i,e.config.level,prettyTileId(e)));var o=new c.vBJ({map:u.P6.createTexture(i)});n.__swapMaterial(e,o,!1),n.viewer.needsUpdate()}}).catch(function(){!t.isCancelled()&&n.config.showErrorTile&&(n.state.errorMaterial||(n.state.errorMaterial=buildErrorMaterial()),n.__swapMaterial(e,n.state.errorMaterial,!0),n.viewer.needsUpdate())})}},{key:"__loadImage",value:function(e){var t=this;return this.loader?new Promise(function(n,i){t.loader.load(e,n,void 0,i)}):this.viewer.textureLoader.loadImage(e)}},{key:"__swapMaterial",value:function(e,t,n){for(var i=this,o=this.state.geom.getAttribute("uv"),r=0;r<e.config.facesByTile;r++)for(var a=0;a<e.config.facesByTile;a++)if("continue"===function(){var s=e.col*e.config.facesByTile+r,l=e.row*e.config.facesByTile+a,u=1536*e.face+6*(16*l+s);if(n&&i.state.faces[u]>-1||i.state.faces[u]>e.config.level)return"continue";i.state.faces[u]=n?-1:e.config.level;var c=i.state.geom.groups.find(function(e){return e.start===u}).materialIndex;i.state.materials[c]=t;var d=1-a/e.config.facesByTile,p=1-(a+1)/e.config.facesByTile,_=r/e.config.facesByTile,h=(r+1)/e.config.facesByTile;i.config.flipTopBottom&&isTopOrBottom(e.face)&&(d=1-d,p=1-p,_=1-_,h=1-h),o.setXY(u,_,d),o.setXY(u+1,_,p),o.setXY(u+2,h,d),o.setXY(u+3,_,p),o.setXY(u+4,h,p),o.setXY(u+5,h,d)}())continue;o.needsUpdate=!0}},{key:"__cleanup",value:function(){this.queue.clear(),this.state.tiles={},this.state.faces={},this.state.inTransition=!1,this.state.materials.forEach(function(e){var t;null==e||null===(t=e.map)||void 0===t||t.dispose(),null==e||e.dispose()}),this.state.materials.length=0}}]),CubemapTilesAdapter}(u.F6);function cubemap_video_adapter_index_module_typeof(e){return(cubemap_video_adapter_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cubemap_video_adapter_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function cubemap_video_adapter_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,cubemap_video_adapter_index_module_toPropertyKey(i.key),i)}}function cubemap_video_adapter_index_module_createClass(e,t,n){return t&&cubemap_video_adapter_index_module_defineProperties(e.prototype,t),n&&cubemap_video_adapter_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cubemap_video_adapter_index_module_toPropertyKey(e){var t=cubemap_video_adapter_index_module_toPrimitive(e,"string");return"symbol"===cubemap_video_adapter_index_module_typeof(t)?t:String(t)}function cubemap_video_adapter_index_module_toPrimitive(e,t){if("object"!==cubemap_video_adapter_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==cubemap_video_adapter_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function cubemap_video_adapter_index_module_get(){return(cubemap_video_adapter_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=cubemap_video_adapter_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function cubemap_video_adapter_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cubemap_video_adapter_index_module_getPrototypeOf(e)););return e}function cubemap_video_adapter_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cubemap_video_adapter_index_module_setPrototypeOf(e,t)}function cubemap_video_adapter_index_module_setPrototypeOf(e,t){return(cubemap_video_adapter_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cubemap_video_adapter_index_module_createSuper(e){var t=cubemap_video_adapter_index_module_isNativeReflectConstruct();return function(){var n,i=cubemap_video_adapter_index_module_getPrototypeOf(e);if(t){var o=cubemap_video_adapter_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return cubemap_video_adapter_index_module_possibleConstructorReturn(this,n)}}function cubemap_video_adapter_index_module_possibleConstructorReturn(e,t){if(t&&("object"===cubemap_video_adapter_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return cubemap_video_adapter_index_module_assertThisInitialized(e)}function cubemap_video_adapter_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cubemap_video_adapter_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function cubemap_video_adapter_index_module_getPrototypeOf(e){return(cubemap_video_adapter_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}tC.id="cubemap-tiles",tC.supportsDownload=!1,tC.supportsOverlay=!1;/*!
 * PhotoSphereViewer.CubemapVideoAdapter 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var tS=function(e){cubemap_video_adapter_index_module_inherits(AbstractVideoAdapter,e);var t=cubemap_video_adapter_index_module_createSuper(AbstractVideoAdapter);function AbstractVideoAdapter(e){var n;return cubemap_video_adapter_index_module_classCallCheck(this,AbstractVideoAdapter),(n=t.call(this,e)).viewer.addEventListener(u.U3.BeforeRenderEvent.type,cubemap_video_adapter_index_module_assertThisInitialized(n)),n}return cubemap_video_adapter_index_module_createClass(AbstractVideoAdapter,[{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.BeforeRenderEvent.type,this),this.__removeVideo(),cubemap_video_adapter_index_module_get(cubemap_video_adapter_index_module_getPrototypeOf(AbstractVideoAdapter.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof u.U3.BeforeRenderEvent&&this.viewer.needsUpdate()}},{key:"supportsPreload",value:function(){return!1}},{key:"supportsTransition",value:function(){return!1}},{key:"loadTexture",value:function(e){if("object"!==cubemap_video_adapter_index_module_typeof(e)||!e.source)return Promise.reject(new u.Il("Invalid panorama configuration, are you using the right adapter?"));if(!this.viewer.getPlugin("video"))return Promise.reject(new u.Il("Video adapters require VideoPlugin to be loaded too."));var t=this.__createVideo(e.source);return this.__videoLoadPromise(t).then(function(){return{panorama:e,texture:new c.fO1(t)}})}},{key:"switchVideo",value:function(e){var t,n,i=!this.config.autoplay,o=this.config.muted,r=1;if(this.video){var a=this.video;t=a.currentTime,n=a.duration,i=a.paused,o=a.muted,r=a.volume}this.__removeVideo(),this.video=e.image,this.video.duration===n&&(this.video.currentTime=t),this.video.muted=o,this.video.volume=r,i||this.video.play()}},{key:"setTextureOpacity",value:function(e,t){e.material.opacity=t,e.material.transparent=t<1}},{key:"setOverlay",value:function(){throw new u.Il("VideoAdapter does not support overlay")}},{key:"disposeTexture",value:function(e){var t;if(e.texture){var n=e.texture.image;n.pause(),this.viewer.container.removeChild(n)}null===(t=e.texture)||void 0===t||t.dispose()}},{key:"__removeVideo",value:function(){this.video&&(this.video.pause(),this.viewer.container.removeChild(this.video),delete this.video)}},{key:"__createVideo",value:function(e){var t=document.createElement("video");return t.crossOrigin=this.viewer.config.withCredentials?"use-credentials":"anonymous",t.loop=!0,t.playsInline=!0,t.style.display="none",t.muted=this.config.muted,t.src=e,t.preload="metadata",this.viewer.container.appendChild(t),t}},{key:"__videoLoadPromise",value:function(e){var t=this;return new Promise(function(n,i){e.addEventListener("loadedmetadata",function onLoaded(){t.video&&e.duration===t.video.duration?n(t.__videoBufferPromise(e,t.video.currentTime)):n(),e.removeEventListener("loadedmetadata",onLoaded)}),e.addEventListener("error",function onError(t){i(t),e.removeEventListener("error",onError)})})}},{key:"__videoBufferPromise",value:function(e,t){return new Promise(function(n){function onBuffer(){for(var t=e.buffered,i=0,o=t.length;i<o;i++)if(t.start(i)<=e.currentTime&&t.end(i)>=e.currentTime){e.pause(),e.removeEventListener("buffer",onBuffer),e.removeEventListener("progress",onBuffer),n();break}}e.currentTime=Math.min(t+2e3,e.duration),e.muted=!0,e.addEventListener("buffer",onBuffer),e.addEventListener("progress",onBuffer),e.play()})}}]),AbstractVideoAdapter}(u.F6);tS.supportsDownload=!1,tS.supportsOverlay=!1;var tT=u.P6.getConfigParser({equiangular:!0,autoplay:!1,muted:!1});function equirectangular_tiles_adapter_index_module_get(){return(equirectangular_tiles_adapter_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=equirectangular_tiles_adapter_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function equirectangular_tiles_adapter_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=equirectangular_tiles_adapter_index_module_getPrototypeOf(e)););return e}function equirectangular_tiles_adapter_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&equirectangular_tiles_adapter_index_module_setPrototypeOf(e,t)}function equirectangular_tiles_adapter_index_module_setPrototypeOf(e,t){return(equirectangular_tiles_adapter_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function equirectangular_tiles_adapter_index_module_createSuper(e){var t=equirectangular_tiles_adapter_index_module_isNativeReflectConstruct();return function(){var n,i=equirectangular_tiles_adapter_index_module_getPrototypeOf(e);if(t){var o=equirectangular_tiles_adapter_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return equirectangular_tiles_adapter_index_module_possibleConstructorReturn(this,n)}}function equirectangular_tiles_adapter_index_module_possibleConstructorReturn(e,t){if(t&&("object"===equirectangular_tiles_adapter_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return equirectangular_tiles_adapter_index_module_assertThisInitialized(e)}function equirectangular_tiles_adapter_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function equirectangular_tiles_adapter_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function equirectangular_tiles_adapter_index_module_getPrototypeOf(e){return(equirectangular_tiles_adapter_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function equirectangular_tiles_adapter_index_module_typeof(e){return(equirectangular_tiles_adapter_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function equirectangular_tiles_adapter_index_module_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function equirectangular_tiles_adapter_index_module_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?equirectangular_tiles_adapter_index_module_ownKeys(Object(n),!0).forEach(function(t){equirectangular_tiles_adapter_index_module_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):equirectangular_tiles_adapter_index_module_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function equirectangular_tiles_adapter_index_module_defineProperty(e,t,n){return(t=equirectangular_tiles_adapter_index_module_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function equirectangular_tiles_adapter_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function equirectangular_tiles_adapter_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,equirectangular_tiles_adapter_index_module_toPropertyKey(i.key),i)}}function equirectangular_tiles_adapter_index_module_createClass(e,t,n){return t&&equirectangular_tiles_adapter_index_module_defineProperties(e.prototype,t),n&&equirectangular_tiles_adapter_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function equirectangular_tiles_adapter_index_module_toPropertyKey(e){var t=equirectangular_tiles_adapter_index_module_toPrimitive(e,"string");return"symbol"===equirectangular_tiles_adapter_index_module_typeof(t)?t:String(t)}function equirectangular_tiles_adapter_index_module_toPrimitive(e,t){if("object"!==equirectangular_tiles_adapter_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==equirectangular_tiles_adapter_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(function(e){cubemap_video_adapter_index_module_inherits(CubemapVideoAdapter,e);var t=cubemap_video_adapter_index_module_createSuper(CubemapVideoAdapter);function CubemapVideoAdapter(e,n){var i;return cubemap_video_adapter_index_module_classCallCheck(this,CubemapVideoAdapter),(i=t.call(this,e)).config=tT(n),i}return cubemap_video_adapter_index_module_createClass(CubemapVideoAdapter,[{key:"createMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=2*u.tl.SPHERE_RADIUS*e,n=new c.DvJ(t,t,t).scale(1,1,-1).toNonIndexed();n.clearGroups();var i=n.getAttribute("uv"),o=1/3,r=2/3;i.setXY(0,0,1),i.setXY(1,0,.5),i.setXY(2,o,1),i.setXY(3,0,.5),i.setXY(4,o,.5),i.setXY(5,o,1),i.setXY(6,r,1),i.setXY(7,r,.5),i.setXY(8,1,1),i.setXY(9,r,.5),i.setXY(10,1,.5),i.setXY(11,1,1),i.setXY(12,1,.5),i.setXY(13,r,.5),i.setXY(14,1,0),i.setXY(15,r,.5),i.setXY(16,r,0),i.setXY(17,1,0),i.setXY(18,o,.5),i.setXY(19,0,.5),i.setXY(20,o,0),i.setXY(21,0,.5),i.setXY(22,0,0),i.setXY(23,o,0),i.setXY(24,r,.5),i.setXY(25,o,.5),i.setXY(26,r,0),i.setXY(27,o,.5),i.setXY(28,o,0),i.setXY(29,r,0),i.setXY(30,o,1),i.setXY(31,o,.5),i.setXY(32,r,1),i.setXY(33,o,.5),i.setXY(34,r,.5),i.setXY(35,r,1);var a=new c.jyz({uniforms:{mapped:{value:null},contCorrect:{value:1},faceWH:{value:new c.FM8(1/3,.5)},vidWH:{value:new c.FM8(1,1)}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n}",fragmentShader:"\nvarying vec2 vUv;\nuniform sampler2D mapped;\nuniform vec2 faceWH;\nuniform vec2 vidWH;\nuniform float contCorrect;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvoid main() {\n  vec2 corner = vUv - mod(vUv, faceWH) + vec2(0, contCorrect / vidWH.y);\n  vec2 faceWHadj = faceWH - vec2(0, contCorrect * 2. / vidWH.y);\n  vec2 p = (vUv - corner) / faceWHadj - .5;\n  vec2 q = ".concat(this.config.equiangular?"2. / PI * atan(2. * p) + .5":"p + .5",";\n  vec2 eUv = corner + q * faceWHadj;\n  gl_FragColor = texture2D(mapped, eUv);\n}")});return new c.Kj0(n,a)}},{key:"setTexture",value:function(e,t){var n,i=t.texture,o=i.image;null===(n=e.material.uniforms.mapped.value)||void 0===n||n.dispose(),e.material.uniforms.mapped.value=i,e.material.uniforms.vidWH.value.set(o.videoWidth,o.videoHeight),this.switchVideo(t.texture)}}]),CubemapVideoAdapter})(tS).id="cubemap-video";/*!
 * PhotoSphereViewer.EquirectangularTilesAdapter 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var tM=function(){function Task(e,t,n){equirectangular_tiles_adapter_index_module_classCallCheck(this,Task),this.id=e,this.priority=t,this.fn=n,this.status=1}return equirectangular_tiles_adapter_index_module_createClass(Task,[{key:"start",value:function(){var e=this;return this.status=2,this.fn(this).then(function(){e.status=4},function(){e.status=5})}},{key:"cancel",value:function(){this.status=3}},{key:"isCancelled",value:function(){return 3===this.status}}]),Task}(),tj=function(){function Queue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;equirectangular_tiles_adapter_index_module_classCallCheck(this,Queue),this.concurency=e,this.runningTasks={},this.tasks={}}return equirectangular_tiles_adapter_index_module_createClass(Queue,[{key:"enqueue",value:function(e){this.tasks[e.id]=e}},{key:"clear",value:function(){Object.values(this.tasks).forEach(function(e){return e.cancel()}),this.tasks={},this.runningTasks={}}},{key:"setPriority",value:function(e,t){var n=this.tasks[e];n&&(n.priority=t,0===n.status&&(n.status=1))}},{key:"disableAllTasks",value:function(){Object.values(this.tasks).forEach(function(e){e.status=0})}},{key:"start",value:function(){var e=this;if(!(Object.keys(this.runningTasks).length>=this.concurency)){var t=Object.values(this.tasks).filter(function(e){return 1===e.status}).sort(function(e,t){return t.priority-e.priority}).pop();t&&(this.runningTasks[t.id]=!0,t.start().then(function(){t.isCancelled()||(delete e.tasks[t.id],delete e.runningTasks[t.id],e.start())}),this.start())}}}]),Queue}();function index_module_checkTilesLevels(e){var t=0;e.forEach(function(n,i){if(!n.zoomRange||2!==n.zoomRange.length)throw new u.Il("Tiles level ".concat(i,' is missing "zoomRange" property'));if(n.zoomRange[0]>=n.zoomRange[1]||n.zoomRange[0]!==t||0===i&&0!==n.zoomRange[0]||i===e.length-1&&100!==n.zoomRange[1])throw new u.Il('Tiles levels\' "zoomRange" are not orderer or are not covering the whole 0-100 range');t=n.zoomRange[1]})}function index_module_getTileIndexByZoomLevel(e,t){return e.findIndex(function(e){return t>=e.zoomRange[0]&&t<=e.zoomRange[1]})}function index_module_buildErrorMaterial(){var e=document.createElement("canvas");e.width=512,e.height=512;var t=e.getContext("2d");t.fillStyle="#333",t.fillRect(0,0,e.width,e.height),t.font="".concat(e.width/5,"px serif"),t.fillStyle="#a22",t.textAlign="center",t.textBaseline="middle",t.fillText("⚠",e.width/2,e.height/2);var n=new c.ROQ(e);return new c.vBJ({map:n})}function index_module_createWireFrame(e){var t=new c.Uk6(e),n=new c.ejS(t);return n.material.depthTest=!1,n.material.opacity=.25,n.material.transparent=!0,n}var tR=["dodgerblue","limegreen","indianred"];function index_module_buildDebugTexture(e,t,n){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");o.fillStyle=tR[t%tR.length],o.fillRect(0,0,i.width,i.height),o.globalCompositeOperation="multiply",o.drawImage(e,0,0);var r=e.width/7;return o.globalCompositeOperation="source-over",o.fillStyle="white",o.font="".concat(r,"px monospace"),o.textAlign="center",n.split("\n").forEach(function(t,n){o.fillText(t,e.width/2,e.height/2+r*(.3+n))}),i}function index_module_isMultiTiles(e){return!!e.levels}function index_module_computeTileConfig(e,t,n){return equirectangular_tiles_adapter_index_module_objectSpread(equirectangular_tiles_adapter_index_module_objectSpread({},e),{},{level:t,colSize:e.width/e.cols,rowSize:e.width/2/e.rows,facesByCol:n.SPHERE_SEGMENTS/e.cols,facesByRow:n.SPHERE_HORIZONTAL_SEGMENTS/e.rows})}function index_module_getTileConfig(e,t,n){var i,o;return index_module_isMultiTiles(e)?(o=index_module_getTileIndexByZoomLevel(e.levels,t),i=e.levels[o]):(o=0,i=equirectangular_tiles_adapter_index_module_objectSpread(equirectangular_tiles_adapter_index_module_objectSpread({},e),{},{zoomRange:[0,100]})),index_module_computeTileConfig(i,o,n)}function index_module_getTileConfigByIndex(e,t,n){return index_module_isMultiTiles(e)&&e.levels[t]?index_module_computeTileConfig(e.levels[t],t,n):null}function index_module_checkPanoramaConfig(e,t){if("object"!==equirectangular_tiles_adapter_index_module_typeof(e)||!e.tileUrl)throw new u.Il("Invalid panorama configuration, are you using the right adapter?");index_module_isMultiTiles(e)?(e.levels.forEach(function(e){return index_module_checkTile(e,t)}),index_module_checkTilesLevels(e.levels)):index_module_checkTile(e,t)}function index_module_checkTile(e,t){if(!e.width||!e.cols||!e.rows)throw new u.Il("Invalid panorama configuration, are you using the right adapter?");if(e.cols>t.SPHERE_SEGMENTS)throw new u.Il("Panorama cols must not be greater than ".concat(t.SPHERE_SEGMENTS,"."));if(e.rows>t.SPHERE_HORIZONTAL_SEGMENTS)throw new u.Il("Panorama rows must not be greater than ".concat(t.SPHERE_HORIZONTAL_SEGMENTS,"."));if(!c.M8C.isPowerOfTwo(e.cols)||!c.M8C.isPowerOfTwo(e.rows))throw new u.Il("Panorama cols and rows must be powers of 2.")}var tI="originaluv";function index_module_tileId(e){return"".concat(e.col,"x").concat(e.row,"/").concat(e.config.level)}var tL=u.P6.getConfigParser({resolution:64,showErrorTile:!0,baseBlur:!0,blur:!1,debug:!1},{resolution:function(e){if(!e||!c.M8C.isPowerOfTwo(e))throw new u.Il("EquirectangularTilesAdapter resolution must be power of two");return e}}),tA=new c.iWj,tz=new c.yGw,tB=new c.Pa4,tN=function(e){equirectangular_tiles_adapter_index_module_inherits(EquirectangularTilesAdapter,e);var t=equirectangular_tiles_adapter_index_module_createSuper(EquirectangularTilesAdapter);function EquirectangularTilesAdapter(e,n){var i;return equirectangular_tiles_adapter_index_module_classCallCheck(this,EquirectangularTilesAdapter),(i=t.call(this,e)).state={tileConfig:null,tiles:{},faces:{},geom:null,materials:[],errorMaterial:null,inTransition:!1},i.queue=new tj,i.config=tL(n),i.viewer.config.useXmpData=!1,i.SPHERE_SEGMENTS=i.config.resolution,i.SPHERE_HORIZONTAL_SEGMENTS=i.SPHERE_SEGMENTS/2,i.NB_VERTICES=2*i.SPHERE_SEGMENTS*3+(i.SPHERE_HORIZONTAL_SEGMENTS-2)*i.SPHERE_SEGMENTS*6,i.NB_GROUPS=i.SPHERE_SEGMENTS*i.SPHERE_HORIZONTAL_SEGMENTS,i.viewer.config.requestHeaders?u.P6.logWarn('EquirectangularTilesAdapter fallbacks to file loader because "requestHeaders" where provided. Consider removing "requestHeaders" if you experience performances issues.'):(i.loader=new c.S3k,i.viewer.config.withCredentials&&i.loader.setWithCredentials(!0)),i.viewer.addEventListener(u.U3.PositionUpdatedEvent.type,equirectangular_tiles_adapter_index_module_assertThisInitialized(i)),i.viewer.addEventListener(u.U3.ZoomUpdatedEvent.type,equirectangular_tiles_adapter_index_module_assertThisInitialized(i)),i}return equirectangular_tiles_adapter_index_module_createClass(EquirectangularTilesAdapter,[{key:"destroy",value:function(){var e,t,n;this.viewer.addEventListener(u.U3.PositionUpdatedEvent.type,this),this.viewer.addEventListener(u.U3.ZoomUpdatedEvent.type,this),this.__cleanup(),null===(e=this.state.errorMaterial)||void 0===e||null===(t=e.map)||void 0===t||t.dispose(),null===(n=this.state.errorMaterial)||void 0===n||n.dispose(),delete this.state.geom,delete this.state.errorMaterial,equirectangular_tiles_adapter_index_module_get(equirectangular_tiles_adapter_index_module_getPrototypeOf(EquirectangularTilesAdapter.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){(e instanceof u.U3.PositionUpdatedEvent||e instanceof u.U3.ZoomUpdatedEvent)&&this.__refresh()}},{key:"supportsTransition",value:function(e){return!!e.baseUrl}},{key:"supportsPreload",value:function(e){return!!e.baseUrl}},{key:"loadTexture",value:function(e){try{index_module_checkPanoramaConfig(e,this)}catch(e){return Promise.reject(e)}var t=index_module_getTileConfig(e,0,this),n={fullWidth:t.width,fullHeight:t.width/2,croppedWidth:t.width,croppedHeight:t.width/2,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0};return e.baseUrl?(this.adapter||(this.adapter=new u.rq(this.viewer,{blur:this.config.baseBlur})),this.adapter.loadTexture(e.baseUrl,e.basePanoData).then(function(t){return{panorama:e,texture:t.texture,panoData:n}})):Promise.resolve({panorama:e,panoData:n,texture:null})}},{key:"createMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new c.xo$(u.tl.SPHERE_RADIUS*e,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1).toNonIndexed();t.clearGroups();for(var n=0,i=0;n<3*this.SPHERE_SEGMENTS;n+=3)t.addGroup(n,3,i++);for(;n<this.NB_VERTICES-3*this.SPHERE_SEGMENTS;n+=6)t.addGroup(n,6,i++);for(;n<this.NB_VERTICES;n+=3)t.addGroup(n,3,i++);return t.setAttribute(tI,t.getAttribute("uv").clone()),new c.Kj0(t,[])}},{key:"setTexture",value:function(e,t,n){var i=this,o=t.texture;if(n){this.state.inTransition=!0,this.__setTexture(e,o);return}if(this.__cleanup(),this.__setTexture(e,o),this.state.materials=e.material,this.state.geom=e.geometry,this.state.geom.setAttribute("uv",this.state.geom.getAttribute(tI).clone()),this.config.debug){var r=index_module_createWireFrame(this.state.geom);this.viewer.renderer.addObject(r),this.viewer.renderer.setSphereCorrection(this.viewer.config.sphereCorrection,r)}setTimeout(function(){return i.__refresh()})}},{key:"__setTexture",value:function(e,t){var n;n=new c.vBJ(t?{map:t}:{opacity:0,transparent:!0});for(var i=0;i<this.NB_GROUPS;i++)e.material.push(n)}},{key:"setTextureOpacity",value:function(e,t){e.material[0].opacity=t,e.material[0].transparent=t<1}},{key:"setOverlay",value:function(){throw new u.Il("EquirectangularTilesAdapter does not support overlay")}},{key:"disposeTexture",value:function(e){var t;null===(t=e.texture)||void 0===t||t.dispose()}},{key:"__refresh",value:function(){if(this.state.geom&&!this.state.inTransition){var e=this.viewer.renderer.camera;e.updateMatrixWorld(),tz.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),tA.setFromProjectionMatrix(tz);for(var t=this.viewer.config.panorama,n=index_module_getTileConfig(t,this.viewer.getZoomLevel(),this),i=this.state.geom.getAttribute("position"),o={},r=0;r<this.NB_VERTICES;r+=1)if(tB.fromBufferAttribute(i,r),tB.applyEuler(this.viewer.renderer.sphereCorrection),tA.containsPoint(tB))for(var a=void 0,s=Math.floor((a=r<3*this.SPHERE_SEGMENTS?Math.floor(r/3):r<this.NB_VERTICES-3*this.SPHERE_SEGMENTS?Math.floor((r/3-this.SPHERE_SEGMENTS)/2)+this.SPHERE_SEGMENTS:Math.floor((r-this.NB_VERTICES-3*this.SPHERE_SEGMENTS)/3)+this.SPHERE_HORIZONTAL_SEGMENTS*(this.SPHERE_SEGMENTS-1))/this.SPHERE_SEGMENTS),l=a-s*this.SPHERE_SEGMENTS,u=n;u;){var c=Math.floor(s/u.facesByRow),d=Math.floor(l/u.facesByCol),p=tB.angleTo(this.viewer.state.direction);(0===c||c===u.rows-1)&&(p*=2);var _={row:c,col:d,angle:p,config:u,url:null},h=index_module_tileId(_);if(o[h]){o[h].angle=Math.min(o[h].angle,p);break}if(_.url=t.tileUrl(d,c,u.level),_.url){o[h]=_;break}u=index_module_getTileConfigByIndex(t,u.level-1,this)}this.state.tileConfig=n,this.__loadTiles(Object.values(o))}}},{key:"__loadTiles",value:function(e){var t=this;this.queue.disableAllTasks(),e.forEach(function(e){var n=index_module_tileId(e);t.state.tiles[n]?t.queue.setPriority(n,e.angle):(t.state.tiles[n]=!0,t.queue.enqueue(new tM(n,e.angle,function(n){return t.__loadTile(e,n)})))}),this.queue.start()}},{key:"__loadTile",value:function(e,t){var n=this;return this.__loadImage(e.url).then(function(i){if(!t.isCancelled()){n.config.debug&&(i=index_module_buildDebugTexture(i,e.config.level,index_module_tileId(e)));var o=new c.vBJ({map:u.P6.createTexture(i)});n.__swapMaterial(e,o,!1),n.viewer.needsUpdate()}}).catch(function(){!t.isCancelled()&&n.config.showErrorTile&&(n.state.errorMaterial||(n.state.errorMaterial=index_module_buildErrorMaterial()),n.__swapMaterial(e,n.state.errorMaterial,!0),n.viewer.needsUpdate())})}},{key:"__loadImage",value:function(e){var t=this;return this.loader?new Promise(function(n,i){t.loader.load(e,n,void 0,i)}):this.viewer.textureLoader.loadImage(e)}},{key:"__swapMaterial",value:function(e,t,n){for(var i=this,o=this.state.geom.getAttribute("uv"),r=0;r<e.config.facesByCol;r++)for(var a=0;a<e.config.facesByRow;a++)if("continue"===function(){var s,l=e.col*e.config.facesByCol+r,u=e.row*e.config.facesByRow+a,c=0===u,d=u===i.SPHERE_HORIZONTAL_SEGMENTS-1;if(s=c?3*l:d?i.NB_VERTICES-3*i.SPHERE_SEGMENTS+3*l:3*i.SPHERE_SEGMENTS+(u-1)*i.SPHERE_SEGMENTS*6+6*l,n&&i.state.faces[s]>-1||i.state.faces[s]>e.config.level)return"continue";i.state.faces[s]=n?-1:e.config.level;var p=i.state.geom.groups.find(function(e){return e.start===s}).materialIndex;i.state.materials[p]=t;var _=1-a/e.config.facesByRow,h=1-(a+1)/e.config.facesByRow,f=r/e.config.facesByCol,g=(r+1)/e.config.facesByCol;c?(o.setXY(s,(f+g)/2,_),o.setXY(s+1,f,h),o.setXY(s+2,g,h)):d?(o.setXY(s,g,_),o.setXY(s+1,f,_),o.setXY(s+2,(f+g)/2,h)):(o.setXY(s,g,_),o.setXY(s+1,f,_),o.setXY(s+2,g,h),o.setXY(s+3,f,_),o.setXY(s+4,f,h),o.setXY(s+5,g,h))}())continue;o.needsUpdate=!0}},{key:"__cleanup",value:function(){this.queue.clear(),this.state.tiles={},this.state.faces={},this.state.inTransition=!1,this.state.materials.forEach(function(e){var t;null==e||null===(t=e.map)||void 0===t||t.dispose(),null==e||e.dispose()}),this.state.materials.length=0}}]),EquirectangularTilesAdapter}(u.F6);function equirectangular_video_adapter_index_module_typeof(e){return(equirectangular_video_adapter_index_module_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function equirectangular_video_adapter_index_module_classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function equirectangular_video_adapter_index_module_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,equirectangular_video_adapter_index_module_toPropertyKey(i.key),i)}}function equirectangular_video_adapter_index_module_createClass(e,t,n){return t&&equirectangular_video_adapter_index_module_defineProperties(e.prototype,t),n&&equirectangular_video_adapter_index_module_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function equirectangular_video_adapter_index_module_toPropertyKey(e){var t=equirectangular_video_adapter_index_module_toPrimitive(e,"string");return"symbol"===equirectangular_video_adapter_index_module_typeof(t)?t:String(t)}function equirectangular_video_adapter_index_module_toPrimitive(e,t){if("object"!==equirectangular_video_adapter_index_module_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==equirectangular_video_adapter_index_module_typeof(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function equirectangular_video_adapter_index_module_get(){return(equirectangular_video_adapter_index_module_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=equirectangular_video_adapter_index_module_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}function equirectangular_video_adapter_index_module_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=equirectangular_video_adapter_index_module_getPrototypeOf(e)););return e}function equirectangular_video_adapter_index_module_inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&equirectangular_video_adapter_index_module_setPrototypeOf(e,t)}function equirectangular_video_adapter_index_module_setPrototypeOf(e,t){return(equirectangular_video_adapter_index_module_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function equirectangular_video_adapter_index_module_createSuper(e){var t=equirectangular_video_adapter_index_module_isNativeReflectConstruct();return function(){var n,i=equirectangular_video_adapter_index_module_getPrototypeOf(e);if(t){var o=equirectangular_video_adapter_index_module_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return equirectangular_video_adapter_index_module_possibleConstructorReturn(this,n)}}function equirectangular_video_adapter_index_module_possibleConstructorReturn(e,t){if(t&&("object"===equirectangular_video_adapter_index_module_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return equirectangular_video_adapter_index_module_assertThisInitialized(e)}function equirectangular_video_adapter_index_module_assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function equirectangular_video_adapter_index_module_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function equirectangular_video_adapter_index_module_getPrototypeOf(e){return(equirectangular_video_adapter_index_module_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}tN.id="equirectangular-tiles",tN.supportsDownload=!1,tN.supportsOverlay=!1;/*!
 * PhotoSphereViewer.EquirectangularVideoAdapter 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */var tU=function(e){equirectangular_video_adapter_index_module_inherits(AbstractVideoAdapter,e);var t=equirectangular_video_adapter_index_module_createSuper(AbstractVideoAdapter);function AbstractVideoAdapter(e){var n;return equirectangular_video_adapter_index_module_classCallCheck(this,AbstractVideoAdapter),(n=t.call(this,e)).viewer.addEventListener(u.U3.BeforeRenderEvent.type,equirectangular_video_adapter_index_module_assertThisInitialized(n)),n}return equirectangular_video_adapter_index_module_createClass(AbstractVideoAdapter,[{key:"destroy",value:function(){this.viewer.removeEventListener(u.U3.BeforeRenderEvent.type,this),this.__removeVideo(),equirectangular_video_adapter_index_module_get(equirectangular_video_adapter_index_module_getPrototypeOf(AbstractVideoAdapter.prototype),"destroy",this).call(this)}},{key:"handleEvent",value:function(e){e instanceof u.U3.BeforeRenderEvent&&this.viewer.needsUpdate()}},{key:"supportsPreload",value:function(){return!1}},{key:"supportsTransition",value:function(){return!1}},{key:"loadTexture",value:function(e){if("object"!==equirectangular_video_adapter_index_module_typeof(e)||!e.source)return Promise.reject(new u.Il("Invalid panorama configuration, are you using the right adapter?"));if(!this.viewer.getPlugin("video"))return Promise.reject(new u.Il("Video adapters require VideoPlugin to be loaded too."));var t=this.__createVideo(e.source);return this.__videoLoadPromise(t).then(function(){return{panorama:e,texture:new c.fO1(t)}})}},{key:"switchVideo",value:function(e){var t,n,i=!this.config.autoplay,o=this.config.muted,r=1;if(this.video){var a=this.video;t=a.currentTime,n=a.duration,i=a.paused,o=a.muted,r=a.volume}this.__removeVideo(),this.video=e.image,this.video.duration===n&&(this.video.currentTime=t),this.video.muted=o,this.video.volume=r,i||this.video.play()}},{key:"setTextureOpacity",value:function(e,t){e.material.opacity=t,e.material.transparent=t<1}},{key:"setOverlay",value:function(){throw new u.Il("VideoAdapter does not support overlay")}},{key:"disposeTexture",value:function(e){var t;if(e.texture){var n=e.texture.image;n.pause(),this.viewer.container.removeChild(n)}null===(t=e.texture)||void 0===t||t.dispose()}},{key:"__removeVideo",value:function(){this.video&&(this.video.pause(),this.viewer.container.removeChild(this.video),delete this.video)}},{key:"__createVideo",value:function(e){var t=document.createElement("video");return t.crossOrigin=this.viewer.config.withCredentials?"use-credentials":"anonymous",t.loop=!0,t.playsInline=!0,t.style.display="none",t.muted=this.config.muted,t.src=e,t.preload="metadata",this.viewer.container.appendChild(t),t}},{key:"__videoLoadPromise",value:function(e){var t=this;return new Promise(function(n,i){e.addEventListener("loadedmetadata",function onLoaded(){t.video&&e.duration===t.video.duration?n(t.__videoBufferPromise(e,t.video.currentTime)):n(),e.removeEventListener("loadedmetadata",onLoaded)}),e.addEventListener("error",function onError(t){i(t),e.removeEventListener("error",onError)})})}},{key:"__videoBufferPromise",value:function(e,t){return new Promise(function(n){function onBuffer(){for(var t=e.buffered,i=0,o=t.length;i<o;i++)if(t.start(i)<=e.currentTime&&t.end(i)>=e.currentTime){e.pause(),e.removeEventListener("buffer",onBuffer),e.removeEventListener("progress",onBuffer),n();break}}e.currentTime=Math.min(t+2e3,e.duration),e.muted=!0,e.addEventListener("buffer",onBuffer),e.addEventListener("progress",onBuffer),e.play()})}}]),AbstractVideoAdapter}(u.F6);tU.supportsDownload=!1,tU.supportsOverlay=!1;var tH=u.P6.getConfigParser({resolution:64,autoplay:!1,muted:!1,blur:!1},{resolution:function(e){if(!e||!c.M8C.isPowerOfTwo(e))throw new u.Il("EquirectangularTilesAdapter resolution must be power of two");return e}});(function(e){equirectangular_video_adapter_index_module_inherits(EquirectangularVideoAdapter,e);var t=equirectangular_video_adapter_index_module_createSuper(EquirectangularVideoAdapter);function EquirectangularVideoAdapter(e,n){var i;return equirectangular_video_adapter_index_module_classCallCheck(this,EquirectangularVideoAdapter),(i=t.call(this,e)).config=tH(n),i.SPHERE_SEGMENTS=i.config.resolution,i.SPHERE_HORIZONTAL_SEGMENTS=i.SPHERE_SEGMENTS/2,i}return equirectangular_video_adapter_index_module_createClass(EquirectangularVideoAdapter,[{key:"loadTexture",value:function(e){return equirectangular_video_adapter_index_module_get(equirectangular_video_adapter_index_module_getPrototypeOf(EquirectangularVideoAdapter.prototype),"loadTexture",this).call(this,e).then(function(t){var n=t.texture,i=n.image;return{panorama:e,texture:n,panoData:{fullWidth:i.videoWidth,fullHeight:i.videoHeight,croppedWidth:i.videoWidth,croppedHeight:i.videoHeight,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0}}})}},{key:"createMesh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new c.xo$(u.tl.SPHERE_RADIUS*e,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1),n=new c.vBJ;return new c.Kj0(t,n)}},{key:"setTexture",value:function(e,t){var n;null===(n=e.material.map)||void 0===n||n.dispose(),e.material.map=t.texture,this.switchVideo(t.texture)}}]),EquirectangularVideoAdapter})(tU).id="equirectangular-video",n(6346),styleInject('/*!\n * PhotoSphereViewer.MarkersPlugin 5.1.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-markers {\n  user-select: none;\n  position: absolute;\n  z-index: 10;\n  width: 100%;\n  height: 100%;\n}\n.psv-markers-svg-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 20;\n}\n.psv-marker {\n  display: none;\n}\n.psv-marker--normal {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 30;\n  background-size: contain;\n  background-repeat: no-repeat;\n}\n.psv-marker--transparent {\n  display: block;\n  opacity: 0;\n}\n.psv-marker--visible {\n  display: block;\n}\n.psv-marker--has-tooltip,\n.psv-marker--has-content {\n  cursor: pointer;\n}'),styleInject('/*!\n * PhotoSphereViewer.CompassPlugin 5.1.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-compass {\n  position: absolute;\n  margin: 10px;\n  z-index: 40;\n}\n.psv--has-navbar .psv-compass {\n  margin-bottom: calc(40px + 10px);\n}\n.psv-compass canvas,\n.psv-compass svg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.psv-compass--top-left,\n.psv-compass--top-center,\n.psv-compass--top-right {\n  top: 0;\n}\n.psv-compass--center-left,\n.psv-compass--center-center,\n.psv-compass--center-right {\n  top: 50%;\n}\n.psv-compass--bottom-left,\n.psv-compass--bottom-center,\n.psv-compass--bottom-right {\n  bottom: 0;\n}\n.psv-compass--top-left,\n.psv-compass--center-left,\n.psv-compass--bottom-left {\n  left: 0;\n}\n.psv-compass--top-center,\n.psv-compass--center-center,\n.psv-compass--bottom-center {\n  left: 50%;\n}\n.psv-compass--top-right,\n.psv-compass--center-right,\n.psv-compass--bottom-right {\n  right: 0;\n}'),styleInject('/*!\n * PhotoSphereViewer.GalleryPlugin 5.1.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-gallery {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  background: rgba(61, 61, 61, 0.5);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.7);\n  overflow-x: auto;\n  overflow-y: hidden;\n  transition: transform ease-in-out 0.1s;\n  transform: translateY(100%);\n  z-index: 90;\n}\n.psv--has-navbar .psv-gallery {\n  bottom: 40px;\n  transform: translateY(calc(100% + 40px));\n}\n.psv-gallery--open {\n  transform: translateY(0) !important;\n}\n.psv-gallery-container {\n  display: flex;\n  padding: 15px;\n}\n.psv-gallery-item {\n  flex: none;\n  position: relative;\n  margin-right: 15px;\n  border-radius: 5px;\n  overflow: hidden;\n  cursor: pointer;\n}\n.psv-gallery-item-wrapper {\n  width: 100%;\n  height: 0;\n}\n.psv-gallery-item-title {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  box-sizing: border-box;\n  width: 100%;\n  height: 2.2em;\n  padding: 0.5em;\n  background: rgba(0, 0, 0, 0.6);\n  font: 16px sans-serif;\n  line-height: 1.2em;\n  color: rgba(255, 255, 255, 0.7);\n  z-index: 2;\n  transition: height ease-in-out 0.2s;\n}\n.psv-gallery-item-title span {\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  user-select: none;\n}\n.psv-gallery-item-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-position: center center;\n  background-size: cover;\n  transform: scale3d(1, 1, 1);\n  transition: transform ease-in-out 0.2s;\n  z-index: 1;\n}\n.psv-gallery-item:hover .psv-gallery-item-title {\n  height: 100%;\n}\n.psv-gallery-item:hover .psv-gallery-item-title span {\n  white-space: normal;\n}\n.psv-gallery-item:hover .psv-gallery-item-thumb {\n  transform: scale3d(1.2, 1.2, 1);\n}\n.psv-gallery-item--active::after {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  border: 3px solid white;\n  z-index: 3;\n}\n@media screen and (max-width: 500px) {\n  .psv-gallery {\n    top: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n  }\n  .psv-gallery-container {\n    flex-wrap: wrap;\n    margin-right: -15px;\n    margin-top: 32px;\n    padding-top: 0;\n  }\n  .psv-gallery-item {\n    width: calc(50% - 15px) !important;\n    margin-bottom: 15px;\n  }\n  .psv-gallery .psv-panel-close-button {\n    display: block;\n    z-index: 10;\n  }\n}'),styleInject('/*!\n * PhotoSphereViewer.SettingsPlugin 5.1.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-settings {\n  position: absolute;\n  bottom: 40px;\n  background: rgba(10, 10, 10, 0.7);\n  box-shadow: 0 0 5px rgba(10, 10, 10, 0.7);\n  color: rgb(220, 220, 220);\n  z-index: 90;\n  opacity: 0;\n  transition: opacity 0.1s linear;\n  margin: 10px;\n}\n.psv-settings--open {\n  opacity: 1;\n}\n.psv-settings-list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.psv-settings-item {\n  height: 1.5em;\n  padding: 0.5em 1em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  cursor: pointer;\n}\n.psv-settings-item:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-settings-item:focus-visible {\n  outline: 2px solid #007cff;\n  outline-offset: -2px;\n}\n.psv-settings-item *:not(:last-child) {\n  margin-right: 1em;\n}\n.psv-settings-item-label {\n  flex: 1;\n  font-weight: bold;\n}\n.psv-settings-item-value {\n  flex: none;\n}\n.psv-settings-item-icon {\n  flex: none;\n  height: 1em;\n  width: 1em;\n}\n.psv-settings-item-icon svg {\n  width: 1em;\n  height: 1em;\n}\n.psv-settings-item--header {\n  border-bottom: 1px solid currentcolor;\n}\n.psv-settings-item--header svg {\n  transform: scaleX(-1);\n}\n.psv-settings-badge {\n  position: absolute;\n  top: 10%;\n  right: 10%;\n  border-radius: 0.2em;\n  padding: 0.2em;\n  background: #111;\n  color: white;\n  font: 10px/0.9 monospace;\n}'),styleInject('/*!\n * PhotoSphereViewer.VideoPlugin 5.1.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-video-progressbar {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 20px;\n  cursor: pointer;\n  z-index: 89;\n}\n.psv--has-navbar .psv-video-progressbar {\n  bottom: 40px;\n}\n.psv-video-progressbar > * {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 3px;\n  transition: height 0.2s linear;\n}\n.psv-video-progressbar:hover > * {\n  height: 5px;\n}\n.psv-video-progressbar__progress {\n  background-color: rgba(255, 255, 255, 0.7);\n}\n.psv-video-progressbar__buffer {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n.psv-video-progressbar__handle {\n  display: none;\n  height: 9px !important;\n  width: 9px;\n  border-radius: 50%;\n  margin-bottom: -2px;\n  margin-left: -4.5px;\n  background: white;\n}\n.psv-video-time {\n  flex: 0 0 auto;\n}\n.psv-video-time .psv-caption-content {\n  min-width: 6em;\n  text-align: center;\n}\n.psv-video-volume__container {\n  position: absolute;\n  left: 0;\n  bottom: 40px;\n  padding: 20px 0;\n  width: 40px;\n  height: 0;\n  opacity: 0;\n  background: rgba(61, 61, 61, 0.5);\n  transition: opacity 0.2s linear, height 0.3s step-end;\n}\n.psv--is-touch .psv-video-volume__container {\n  display: none;\n}\n.psv-video-volume__range {\n  position: relative;\n  height: 80px;\n}\n.psv-video-volume__progress,\n.psv-video-volume__track {\n  position: absolute;\n  bottom: 0;\n  left: 17.5px;\n  width: 5px;\n  background: rgba(255, 255, 255, 0.7);\n}\n.psv-video-volume__track {\n  height: 100%;\n  background: rgba(255, 255, 255, 0.2);\n}\n.psv-video-volume__handle {\n  position: absolute;\n  left: 17.5px;\n  height: 9px;\n  width: 9px;\n  border-radius: 50%;\n  margin-left: -2px;\n  margin-bottom: -4.5px;\n  background: white;\n}\n.psv-video-volume-button {\n  position: relative;\n}\n.psv-video-volume-button:hover .psv-video-volume__container {\n  height: 80px;\n  opacity: 1;\n  transition-timing-function: linear, step-start;\n  transition-delay: 0.2s;\n}\n.psv-video-volume-button--0 .psv-button-svg #lvl1,\n.psv-video-volume-button--0 .psv-button-svg #lvl2,\n.psv-video-volume-button--0 .psv-button-svg #lvl3 {\n  fill: none;\n}\n.psv-video-volume-button--1 .psv-button-svg #lvl0,\n.psv-video-volume-button--1 .psv-button-svg #lvl2,\n.psv-video-volume-button--1 .psv-button-svg #lvl3 {\n  fill: none;\n}\n.psv-video-volume-button--2 .psv-button-svg #lvl0,\n.psv-video-volume-button--2 .psv-button-svg #lvl3 {\n  fill: none;\n}\n.psv-video-volume-button--3 .psv-button-svg #lvl0 {\n  fill: none;\n}\n.psv-video-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 110;\n  pointer-events: none;\n}\n.psv-video-bigbutton {\n  display: block;\n  border: none;\n  background: none;\n  padding: 0;\n  color: rgba(255, 255, 255, 0.7);\n  pointer-events: auto;\n  cursor: pointer;\n  opacity: 0;\n  width: 0;\n  transition: opacity 0.2s linear, width 0.3s step-end;\n}\n.psv-video-bigbutton--pause {\n  width: 20vw;\n  opacity: 1;\n  transition-timing-function: linear, step-start;\n}\n@media (orientation: landscape) {\n  .psv-video-bigbutton--pause {\n    width: 10vw;\n  }\n}\n.psv-video-bigbutton svg {\n  width: 100%;\n}'),styleInject('/*!\n * PhotoSphereViewer.VirtualTourPlugin 5.1.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-virtual-tour__marker svg {\n  filter: drop-shadow(0 10px 5px rgba(0, 0, 0, 0.8));\n  transform: perspective(100px) rotate3d(1, 0, 0, 0deg);\n  transform-origin: bottom center;\n  transition: 0.2s all ease-in-out;\n}\n.psv-virtual-tour__marker:hover svg {\n  filter: drop-shadow(0 5px 3px rgb(0, 0, 0));\n  transform: perspective(100px) rotate3d(1, 0, 0, 10deg);\n}\n.psv-virtual-tour__menu .psv-panel-menu-item-icon {\n  width: 60px;\n  height: 60px;\n}'),styleInject('/*!\n * PhotoSphereViewer.MapPlugin 5.1.4\n * @copyright 2023 Damien "Mistic" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\n/* src/style.scss */\n.psv-map {\n  position: absolute;\n  margin: 10px;\n  z-index: 40;\n  transition: all ease-in-out 0.3s;\n}\n.psv--has-navbar .psv-map {\n  margin-bottom: calc(40px + 10px);\n}\n.psv-map__container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n  background: rgba(61, 61, 61, 0.7);\n  overflow: hidden;\n  border-radius: 50%;\n  cursor: move;\n  transition: all ease-in-out 0.3s;\n}\n.psv-map__container svg,\n.psv-map__container img,\n.psv-map__container canvas {\n  width: 100%;\n  height: 100%;\n}\n.psv-map__overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.psv-map__toolbar {\n  position: absolute;\n  bottom: 1em;\n  left: calc(50% - 3.25em);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font: 12px sans-serif;\n  padding: 0.25em;\n  border-radius: 1.5em;\n  background: #222;\n  color: white;\n  user-select: none;\n  transition: opacity ease-in-out 0.3s;\n}\n.psv-map__toolbar svg {\n  height: 1em;\n  cursor: pointer;\n}\n.psv-map__toolbar-text {\n  width: 4em;\n  text-align: center;\n}\n.psv-map__button {\n  position: absolute;\n  width: 34px;\n  aspect-ratio: 1;\n  line-height: 0;\n  background: rgba(61, 61, 61, 0.7);\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transform-origin: center;\n  color: rgba(255, 255, 255, 0.7);\n  cursor: pointer;\n  transition: all ease-in-out 0.3s;\n}\n.psv-map__button svg {\n  width: 60%;\n}\n.psv-map__button--top-left {\n  left: 14.645%;\n  top: 14.645%;\n  transform: translate(-32.021px, -32.021px);\n}\n.psv-map__button--top-right {\n  right: 14.645%;\n  top: 14.645%;\n  transform: translate(32.021px, -32.021px);\n}\n.psv-map__button--bottom-left {\n  left: 14.645%;\n  bottom: 14.645%;\n  transform: translate(-32.021px, 32.021px);\n}\n.psv-map__button--bottom-right {\n  right: 14.645%;\n  bottom: 14.645%;\n  transform: translate(32.021px, 32.021px);\n}\n.psv-map--maximized {\n  margin: 0;\n  width: 100% !important;\n  height: 100% !important;\n}\n.psv--has-navbar .psv-map--maximized {\n  height: calc(100% - 40px) !important;\n  margin-bottom: 40px;\n}\n.psv-map--maximized .psv-map__container {\n  border-radius: 0;\n}\n.psv-map--maximized .psv-map__button {\n  border: 2px solid currentcolor;\n}\n.psv-map--maximized .psv-map__button--top-left {\n  left: 44px;\n  top: 44px;\n}\n.psv-map--maximized .psv-map__button--top-right {\n  right: 44px;\n  top: 44px;\n}\n.psv-map--maximized .psv-map__button--bottom-left {\n  left: 44px;\n  bottom: 44px;\n}\n.psv-map--maximized .psv-map__button--bottom-right {\n  right: 44px;\n  bottom: 44px;\n}\n.psv-map--collapsed {\n  width: 34px !important;\n  height: 34px !important;\n}\n.psv-map--collapsed > * {\n  opacity: 0;\n}\n.psv-map--collapsed .psv-map__button-close {\n  opacity: 1;\n  transform: translate(0, 0);\n  z-index: 1;\n}\n.psv-map--top-left {\n  top: 0;\n  left: 0;\n}\n.psv-map--top-right {\n  top: 0;\n  right: 0;\n}\n.psv-map--bottom-left {\n  bottom: 0;\n  left: 0;\n}\n.psv-map--bottom-right {\n  bottom: 0;\n  right: 0;\n}');var tD={};function dist_typeof(e){return(dist_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t=Object.prototype.hasOwnProperty,n="~";function Events(){}function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function addListener(e,t,i,o,r){if("function"!=typeof i)throw TypeError("The listener must be a function");var a=new EE(i,o||e,r),s=n?n+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function clearEvent(e,t){0==--e._eventsCount?e._events=new Events:delete e._events[t]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),new Events().__proto__||(n=!1)),EventEmitter.prototype.eventNames=function(){var e,i,o=[];if(0===this._eventsCount)return o;for(i in e=this._events)t.call(e,i)&&o.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},EventEmitter.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,a=Array(r);o<r;o++)a[o]=i[o].fn;return a},EventEmitter.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},EventEmitter.prototype.emit=function(e,t,i,o,r,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,o),!0;case 5:return c.fn.call(c.context,t,i,o,r),!0;case 6:return c.fn.call(c.context,t,i,o,r,a),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,_=c.length;for(u=0;u<_;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,i);break;case 4:c[u].fn.call(c[u].context,t,i,o);break;default:if(!l)for(p=1,l=Array(d-1);p<d;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},EventEmitter.prototype.on=function(e,t,n){return addListener(this,e,t,n,!1)},EventEmitter.prototype.once=function(e,t,n){return addListener(this,e,t,n,!0)},EventEmitter.prototype.removeListener=function(e,t,i,o){var r=n?n+e:e;if(!this._events[r])return this;if(!t)return clearEvent(this,r),this;var a=this._events[r];if(a.fn)a.fn!==t||o&&!a.once||i&&a.context!==i||clearEvent(this,r);else{for(var s=0,l=[],u=a.length;s<u;s++)(a[s].fn!==t||o&&!a[s].once||i&&a[s].context!==i)&&l.push(a[s]);l.length?this._events[r]=1===l.length?l[0]:l:clearEvent(this,r)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&clearEvent(this,t)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=n,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter}({get exports(){return tD},set exports(v){tD=v}});var tV=new tD,tq={on:function(e,t){return tV.on(e,t)},once:function(e,t){return tV.once(e,t)},off:function(e,t){return tV.off(e,t)},emit:function(e,t){return tV.emit(e,t)}};Object.freeze(tq);var tG=["src","height","width","containerClass","littlePlanet","onPositionChange","onZoomChange","onClick","onDblclick","onReady"],tW=["autorotate","zoom","fullscreen"];function adaptOptions(e){var t=_assign({},e);for(var n in t)tG.includes(n)&&delete t[n];return t}function map(e,t,n,i,o){return(e-t)*(o-i)/(n-t)+i}function filterNavbar(e){return null==e?tW:Array.isArray(e)?e:"string"==typeof e?""!==e&&[e]:!!e&&tW}var tY=(0,l.forwardRef)(function(e,t){var n=(0,l.createRef)(),i=(0,l.useRef)(null),o=130,r=(0,l.useState)(-90)[0],a=(0,l.useState)(2)[0],s=(0,l.useState)(0)[0],c=(0,l.useState)(tW),d=c[0],p=c[1];return(0,l.useEffect)(function(){function handleResize(){o=Math.floor(map(window.innerWidth/window.innerHeight,.5,1.8,140,115))}return window.addEventListener("resize",handleResize),handleResize(),function(){return window.removeEventListener("resize",handleResize)}},[]),(0,l.useEffect)(function(){var t,l,c,d,_=!0;if(n.current&&!i.current){var h=new u.AE(_assign(_assign({},adaptOptions(e)),{container:n.current,panorama:e.src,size:{height:e.height,width:e.width||"100px"},fisheye:e.littlePlanet?a:e.fisheye||!1,minFov:e.minFov||30,maxFov:e.littlePlanet?o:e.maxFov||90,defaultZoomLvl:e.littlePlanet?s:e.defaultZoomLvl||50,defaultYaw:e.defaultYaw||0,defaultPitch:e.littlePlanet?r:e.defaultPitch||0,sphereCorrection:e.sphereCorrection||{pan:0,tilt:0,roll:0},moveSpeed:e.moveSpeed||1,zoomSpeed:e.zoomSpeed||1,moveInertia:null===(t=e.moveInertia)||void 0===t||t,mousewheel:!e.littlePlanet&&(null===(l=e.mousewheel)||void 0===l||l),mousemove:null===(c=e.mousemove)||void 0===c||c,mousewheelCtrlKey:e.mousewheelCtrlKey||!1,touchmoveTwoFingers:e.touchmoveTwoFingers||!1,useXmpData:null===(d=e.useXmpData)||void 0===d||d,panoData:e.panoData||{},requestHeaders:e.requestHeaders||{},canvasBackground:e.canvasBackground||"#000",withCredentials:e.withCredentials||!1,navbar:filterNavbar(e.navbar),lang:e.lang||{},keyboard:e.keyboard||{},plugins:__spreadArray([[f,{autorotatePitch:"5deg",autostartDelay:void 0,autostartOnIdle:!1}]],e.plugins?e.plugins:[],!0)}));if(h.addEventListener("ready",function(){e.onReady&&e.onReady(h)},{once:!0}),h.addEventListener("click",function(t){e.onClick&&e.onClick(t,h),e.littlePlanet&&_&&(_=!1,h.animate({yaw:0,pitch:r,zoom:75,speed:"3rpm"}).then(function(){h.animate({yaw:0,pitch:0,zoom:90,speed:"10rpm"}).then(function(){var t,n=h.getPlugin("autorotate");n&&n.start(),h.setOption("maxFov",e.maxFov||70),h.setOption("mousewheel",null===(t=e.mousewheel)||void 0===t||t)})}))}),h.addEventListener("dblclick",function(t){e.onDblclick&&e.onDblclick(t,h)}),h.addEventListener("zoom-updated",function(t){e.onZoomChange&&e.onZoomChange(t,h)}),h.addEventListener("position-updated",function(t){e.onPositionChange&&e.onPositionChange(t.position.pitch,t.position.yaw,h)}),e.littlePlanet){var g=filterNavbar(e.navbar);!1===g||g.find(function(e){return"object"===dist_typeof(e)&&(null==e?void 0:e.id)==="resetLittlePlanetButton"})||(g.push({id:"resetLittlePlanetButton",content:"\uD83E\uDE90",title:"Reset Little Planet",className:"resetLittlePlanetButton",onClick:function(){_=!0;var e=h.getPlugin("autorotate");e&&e.stop(),h.setOption("maxFov",o),h.setOption("mousewheel",!1),h.animate({yaw:0,pitch:r,zoom:s,speed:"10rpm"})}}),h.setOption("navbar",g),p(g))}tq.on("animate",function(e){h.animate(e)}).on("stop-animation",function(){h.stopAnimation()}).on("destroy",function(){h.destroy()}).on("rotate",function(e){h.rotate(e)}).on("setOption",function(e){var t=e.option,n=e.value;h.setOption(t,n)}).on("zoom",function(e){h.zoom(e)}).on("zoomIn",function(){h.zoomIn()}).on("zoomOut",function(){h.zoomOut()}).on("startAutoRotate",function(){var e=h.getPlugin("autorotate");e&&e.start()}).on("stopAutoRotate",function(){var e=h.getPlugin("autorotate");e&&e.stop()}).on("toggleAutorotate",function(){var e=h.getPlugin("autorotate");e&&e.toggle()}),i.current=h}},[n,e]),(0,l.useImperativeHandle)(t,function(){return{animate:function(e){tq.emit("animate",e)},destroy:function(){tq.emit("destroy",{})},rotate:function(e){tq.emit("rotate",e)},setOption:function(e,t){tq.emit("setOption",{option:e,value:t})},setOptions:function(e){var t;return null===(t=i.current)||void 0===t?void 0:t.setOptions(e)},getCurrentNavbar:function(){return d},zoom:function(e){tq.emit("zoom",e)},zoomIn:function(){tq.emit("zoomIn",{})},zoomOut:function(){tq.emit("zoomOut",{})},resize:function(e){var t;return null===(t=i.current)||void 0===t?void 0:t.resize(e)},enterFullscreen:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.enterFullscreen()},exitFullscreen:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.exitFullscreen()},toggleFullscreen:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.toggleFullscreen()},isFullscreenEnabled:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.isFullscreenEnabled()},startAutoRotate:function(){tq.emit("startAutoRotate",{})},stopAutoRotate:function(){tq.emit("stopAutoRotate",{})},getPlugin:function(e){var t;return null===(t=i.current)||void 0===t?void 0:t.getPlugin(e)},getPosition:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.getPosition()},getZoomLevel:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.getZoomLevel()},getSize:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.getSize()},needsUpdate:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.needsUpdate()},autoSize:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.autoSize()},setPanorama:function(e,t){var n;return null===(n=i.current)||void 0===n?void 0:n.setPanorama(e,t)},setOverlay:function(e,t){var n;return null===(n=i.current)||void 0===n?void 0:n.setOverlay(e,t)},toggleAutorotate:function(){tq.emit("toggleAutorotate",{})},showError:function(e){var t;return null===(t=i.current)||void 0===t?void 0:t.showError(e)},hideError:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.hideError()},startKeyboardControl:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.startKeyboardControl()},stopKeyboardControl:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.stopKeyboardControl()}}},[i.current,n,e,t]),l.createElement("div",{className:e.containerClass||"view-container",ref:n})})}}]);